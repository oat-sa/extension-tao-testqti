define("taoQtiTest/controller/routes",[],function(){return{Creator:{css:"creator",actions:{index:"controller/creator/creator"}}}}),define("tpl!taoQtiTest/controller/creator/templates/testpart",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div id="',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="testpart clearfix">\n\n   <h1><span data-bind="identifier">',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</span>\n        <div class="actions"> \n            <div class="tlb">\n                <div class="tlb-top">\n                    <span class="tlb-box">\n                        <span class="tlb-bar">\n                            <span class="tlb-start"></span>\n                            <span class="tlb-group">\n                                <a href="#" class="tlb-button-off property-toggler" title="Test Part Properties"><span class="icon-settings"></span></a>\n                                <span class="tlb-separator"></span>\n                                <a href="#" class="tlb-button-off move-up" title="Move Up"><span class="icon-up"></span></a>\n                                <a href="#" class="tlb-button-off move-down" title="Move Down"><span class="icon-down"></span></a>\n                                <span class="tlb-separator"></span> \n                                <a href="#" class="tlb-button-off" title="Remove Test Part" data-delete="#',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'"><span class="icon-bin"></span></a>\n                            </span>\n                            <span class="tlb-end"></span>\n                        </span>  \n                        <!--<span class="tlb-bar">-->\n                            <!--<span class="tlb-start"></span>-->\n                            <!--<span class="tlb-text-button-box">-->\n                                <!--<a class="tlb-text-button-off section-adder">-->\n                                    <!--<span class="icon-add"></span>-->\n                                    <!--<span class="tlb-text">New Section</span>-->\n                                <!--</a>-->\n                            <!--</span>-->\n                            <!--<span class="tlb-end"></span>-->\n                        <!--</span>-->\n                    </span>   \n                </div>\n            </div>\n        </div>\n        <a href="#" class="toggler opened" data-toggle="#testpart-content-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'"></a>\n    </h1>\n    <div id="testpart-content-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="testpart-content">\n        \n       <!-- assessmentTest/testPart/assessmentSections -->\n       <div class="sections" data-bind-each="assessmentSections" data-bind-tmpl="section" data-bind-filter="isSection"></div>\n\n        <button class="btn-info small section-adder">\n            <span class="icon-add"></span>New section\n        </button>\n    </div>\n</div>\n'
})}),define("tpl!taoQtiTest/controller/creator/templates/section",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div id="',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="section">\n\n<!-- assessmentTest/testPart/assessmentSection/title -->\n    <h2><span data-bind="title">',(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</span>\n        <div class="actions">  \n            <div class="tlb">\n                <div class="tlb-top">\n                    <span class="tlb-box">\n                        <span class="tlb-bar">\n                            <span class="tlb-start"></span>\n                            <span class="tlb-group">\n                                <a href="#" class="tlb-button-off rub-toggler" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Manage Rubric Blocks",options):helperMissing.call(depth0,"__","Manage Rubric Blocks",options)))+'" data-toggle="#rublocks-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" ><span class="icon-rubric"></span></a>\n                                <span class="tlb-separator"></span>\n                                <a href="#" class="tlb-button-off property-toggler" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Section Properties",options):helperMissing.call(depth0,"__","Section Properties",options)))+'"><span class="icon-settings"></span></a>\n                                <span class="tlb-separator"></span>\n                                <a href="#" class="tlb-button-off move-up disabled" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Move Up",options):helperMissing.call(depth0,"__","Move Up",options)))+'"><span class="icon-up"></span></a>\n                                <a href="#" class="tlb-button-off move-down disabled" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Move Down",options):helperMissing.call(depth0,"__","Move Down",options)))+'"><span class="icon-down"></span></a>\n                                <span class="tlb-separator"></span> \n                                <a href="#" class="tlb-button-off disabled" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Remove Section",options):helperMissing.call(depth0,"__","Remove Section",options)))+'" data-delete=":parent .section"><span class="icon-bin"></span></a>\n                            </span>\n                            <span class="tlb-end"></span>\n                        </span>  \n                    </span>   \n                </div>\n            </div>\n        </div>\n    </h2>\n\n    <div id="rublocks-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="rublocks clearfix toggled">\n        <h3>\n            <span class="title">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Rubric Blocks",options):helperMissing.call(depth0,"__","Rubric Blocks",options)))+'</span>\n        </h3>\n        <ol class="rubricblocks decimal" data-bind-each="rubricBlocks" data-bind-tmpl="rubricblock"></ol>\n        <button class="btn-info small rublock-adder">\n            <span class="icon-add"></span>'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"New Rubric Block",options):helperMissing.call(depth0,"__","New Rubric Block",options)))+'\n        </button>\n    </div>\n    <div class="itemrefs-wrapper">\n        <ol class="itemrefs decimal clearfix" data-bind-each="sectionParts" data-bind-tmpl="itemref" data-bind-filter="isItemRef" data-msg="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Add selected item(s) here.",options):helperMissing.call(depth0,"__","Add selected item(s) here.",options)))+'"></ol>\n        <div class="itemref-placeholder">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Add selected item(s) here.",options):helperMissing.call(depth0,"__","Add selected item(s) here.",options)))+"\n        </div>\n    </div>\n</div>\n"
})}),define("tpl!taoQtiTest/controller/creator/templates/rubricblock",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+='<li class="rubricblock">\n    <div class="actions"> \n       <div class="tlb">\n            <div class="tlb-top">\n                <span class="tlb-box">\n                    <span class="tlb-bar">\n                        <span class="tlb-start"></span>\n                        <span class="tlb-group">\n                            <!--<a href="#" class="tlb-button-off property-toggler" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Rubric Block Properties",options):helperMissing.call(depth0,"__","Rubric Block Properties",options)))+'"><span class="icon-settings"></span></a>-->\n                            <!--<span class="tlb-separator"></span> -->\n                            <a href="#" class="tlb-button-off" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Remove Rubric Block",options):helperMissing.call(depth0,"__","Remove Rubric Block",options)))+'" data-delete=":parent .rubricblock"><span class="icon-bin"></span></a>\n                        </span>\n                        <span class="tlb-end"></span>\n                    </span>  \n                </span>   \n            </div>\n        </div>\n    </div>\n    <div class="rubricblock-content"></div>\n    <div class="rubricblock-binding" data-bind="content" data-bind-html="true" data-bind-encoder="dom2qti"></div>\n</li>\n'
})}),define("tpl!taoQtiTest/controller/creator/templates/itemref",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+="<li id='",(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"' data-uri='",(helper=helpers.href)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.href,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"' class='itemref'>\n    <span class='title truncate'>",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</span>\n    <div class="actions"> \n        <div class="tlb">\n            <div class="tlb-top">\n                <span class="tlb-box">\n                    <span class="tlb-bar">\n                        <span class="tlb-start"></span>\n                        <span class="tlb-group">\n                            <a href="#" class="tlb-button-off property-toggler" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Item Reference Properties",options):helperMissing.call(depth0,"__","Item Reference Properties",options)))+'"><span class="icon-settings"></span></a>\n                            <span class="tlb-separator"></span>\n                            <a href="#" class="tlb-button-off move-up" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Move Up",options):helperMissing.call(depth0,"__","Move Up",options)))+'"><span class="icon-up"></span></a>\n                            <a href="#" class="tlb-button-off move-down" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Move Down",options):helperMissing.call(depth0,"__","Move Down",options)))+'"><span class="icon-down"></span></a>\n                            <span class="tlb-separator"></span> \n                            <a href="#" class="tlb-button-off" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Remove Item Reference",options):helperMissing.call(depth0,"__","Remove Item Reference",options)))+'" data-delete=":parent .itemref"><span class="icon-bin"></span></a>\n                        </span>\n                        <span class="tlb-end"></span>\n                    </span>  \n                </span>   \n            </div>\n        </div>\n    </div>\n</li>\n'
})}),define("tpl!taoQtiTest/controller/creator/templates/item",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="\n     <li data-uri='",(helper=helpers.uri)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.uri,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"' class='truncate'>\n        ",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" \n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.parent,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n     </li>\n"
}function program2(depth0,data){var stack1,helper,buffer="";return buffer+="<span class='flag truncate' title=\"",(helper=helpers.parent)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.parent,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">',(helper=helpers.parent)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.parent,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;
return stack1=helpers.each.call(depth0,depth0,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n"})}),define("tpl!taoQtiTest/controller/creator/templates/test-props",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,functionType="function";return buffer+='<div class="test-props props clearfix">\n    \n    <!-- test properties --> \n    <h3 data-bind="title"></h3>\n\n<!-- assessmentTest/identifier -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="test-identifier">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Identifier",options):helperMissing.call(depth0,"__","Identifier",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="test-identifier" data-bind="identifier" data-validate="$notEmpty; $testIdFormat; $testIdAvailable(original=',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+');" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The principle identifier of the test.",options):helperMissing.call(depth0,"__","The principle identifier of the test.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/title -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="test-title">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Title",options):helperMissing.call(depth0,"__","Title",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="test-title" data-bind="title" data-validate="$notEmpty" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The test title.",options):helperMissing.call(depth0,"__","The test title.",options)))+'\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .test-time-limits">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Time Limits",options):helperMissing.call(depth0,"__","Time Limits",options)))+'</h4>\n\n<!-- assessmentTest/timeLimits -->\n    <div class="test-time-limits toggled">\n\n\n\n<!-- assessmentTest/timeLimits/maxTime -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="test-max-time">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Maximum Duration",options):helperMissing.call(depth0,"__","Maximum Duration",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Maximum duration for the all test.",options):helperMissing.call(depth0,"__","Maximum duration for the all test.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/timeLimits/allowLateSubmission -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Late submission allowed",options):helperMissing.call(depth0,"__","Late submission allowed",options)))+'\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="test-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Whether a candidate's response that is beyond the maximum duration should still be accepted.",options):helperMissing.call(depth0,"__","Whether a candidate's response that is beyond the maximum duration should still be accepted.",options)))+"\n                </div>\n            </div>\n        </div>\n    </div>\n\n</div>\n"
})}),define("tpl!taoQtiTest/controller/creator/templates/testpart-props",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div id="testpart-props-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="testpart-props props clearfix">\n    <h3>',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</h3>\n    \n    <form autocomplete="off">\n\n<!-- assessmentTest/testPart/identifier -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="testpart-identifier">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Identifier",options):helperMissing.call(depth0,"__","Identifier",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="testpart-identifier" data-bind="identifier" data-validate="$notEmpty; $testIdFormat; $testIdAvailable(original=',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+');" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The test part identifier.",options):helperMissing.call(depth0,"__","The test part identifier.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/navigationMode -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n               '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Navigation",options):helperMissing.call(depth0,"__","Navigation",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="radio" name="testpart-navigation-mode" value="0" checked="checked" data-bind="navigationMode" data-bind-encoder="number" />\n                    <span class="icon-radio"></span>\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Linear",options):helperMissing.call(depth0,"__","Linear",options)))+'\n                </label>\n                <label>\n                    <input type="radio" name="testpart-navigation-mode" value="1"  />\n                    <span class="icon-radio"></span>\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Non Linear",options):helperMissing.call(depth0,"__","Non Linear",options)))+'\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The navigation mode determines the general paths that the candidate may take. A linear mode restricts the candidate to attempt each item in turn. Non Linear removes this restriction.",options):helperMissing.call(depth0,"__","The navigation mode determines the general paths that the candidate may take. A linear mode restricts the candidate to attempt each item in turn. Non Linear removes this restriction.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/submissionMode -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Submission",options):helperMissing.call(depth0,"__","Submission",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="radio" name="testpart-submission-mode" value="0" checked="checked" data-bind="submissionMode" data-bind-encoder="number" />\n                    <span class="icon-radio"></span>\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Individual",options):helperMissing.call(depth0,"__","Individual",options)))+'\n                </label>\n                <label>\n                    <input type="radio" name="testpart-submission-mode" value="1"  />\n                    <span class="icon-radio"></span>\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Simultaneous",options):helperMissing.call(depth0,"__","Simultaneous",options)))+'\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The submission mode determines when the candidate's responses are submitted for response processing. A testPart in individual mode requires the candidate to submit their responses on an item-by-item basis. In simultaneous mode the candidate's responses are all submitted together at the end of the testPart.",options):helperMissing.call(depth0,"__","The submission mode determines when the candidate's responses are submitted for response processing. A testPart in individual mode requires the candidate to submit their responses on an item-by-item basis. In simultaneous mode the candidate's responses are all submitted together at the end of the testPart.",options)))+'\n                </div>\n            </div>\n        </div>\n\n        <h4 class="toggler closed" data-toggle="~ .testpart-item-session-control">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Item Session Control",options):helperMissing.call(depth0,"__","Item Session Control",options)))+'</h4>\n\n\n<!-- assessmentTest/testPart/itemSessionControl -->\n        <div class="testpart-item-session-control toggled">\n\n<!-- assessmentTest/testPart/itemSessionControl/maxAttempts -->\n            <div class="grid-row">\n                <div class="col-5">\n                    <label for="testpart-max-attempts">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Max Attempts",options):helperMissing.call(depth0,"__","Max Attempts",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <input name="testpart-max-attempts" type="text" data-increment="1" data-min="0" value="1" data-bind="itemSessionControl.maxAttempts" data-bind-encoder="number" />\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Controls the maximum number of attempts allowed. 0 means unlimited.",options):helperMissing.call(depth0,"__","Controls the maximum number of attempts allowed. 0 means unlimited.",options)))+'\n                    </div>\n                </div>\n            </div>\n\n<!-- assessmentTest/testPart/itemSessionControl/showFeedback -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-show-feedback">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Show Feedback",options):helperMissing.call(depth0,"__","Show Feedback",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="testpart-show-feedback" value="true" data-bind="itemSessionControl.showFeedback" data-bind-encoder="boolean" />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"This constraint affects the visibility of feedback after the end of the last attempt.",options):helperMissing.call(depth0,"__","This constraint affects the visibility of feedback after the end of the last attempt.",options)))+'\n                    </div>\n                </div>\n            </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/itemSessionControl/allowComment -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-allow-comment">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Allow Comment",options):helperMissing.call(depth0,"__","Allow Comment",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="testpart-allow-comment" value="true" data-bind="itemSessionControl.allowComment" data-bind-encoder="boolean" />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options):helperMissing.call(depth0,"__","This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options)))+'\n                    </div>\n                </div>\n            </div>\n\n<!-- assessmentTest/testPart/itemSessionControl/allowSkipping -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-allow-skipping">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Allow Skipping",options):helperMissing.call(depth0,"__","Allow Skipping",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="testpart-allow-skipping" value="true" checked="checked"  data-bind="itemSessionControl.allowSkipping" data-bind-encoder="boolean"   />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"If the candidate can skip the item, without submitting a response.",options):helperMissing.call(depth0,"__","If the candidate can skip the item, without submitting a response.",options)))+'\n                    </div>\n                </div>\n            </div>\n\n\n        </div>\n\n        <h4 class="toggler closed" data-toggle="~ .testpart-time-limits">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Time Limits",options):helperMissing.call(depth0,"__","Time Limits",options)))+'</h4>\n\n<!-- assessmentTest/testPart/timeLimits/minTime -->\n        <div class="testpart-time-limits toggled">\n\n\n\n<!-- assessmentTest/testPart/timeLimits/maxTime -->\n            <div class="grid-row">\n                <div class="col-5">\n                    <label for="testpart-max-time">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Maximum Duration",options):helperMissing.call(depth0,"__","Maximum Duration",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Maximum duration for this test part.",options):helperMissing.call(depth0,"__","Maximum duration for this test part.",options)))+'\n                    </div>\n                </div>\n            </div>\n\n<!-- assessmentTest/testPart/timeLimits/allowLateSubmission -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-allow-late-submission">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Late submission allowed",options):helperMissing.call(depth0,"__","Late submission allowed",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="section-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Whether a candidate's response that is beyond the maximum duration of the test part should still be accepted.",options):helperMissing.call(depth0,"__","Whether a candidate's response that is beyond the maximum duration of the test part should still be accepted.",options)))+"\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n"
})}),define("tpl!taoQtiTest/controller/creator/templates/section-props",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div id="section-props-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="section-props props clearfix">\n    <h3>',(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</h3>\n\n<!-- assessmentTest/testPart/assessmentSection/identifier -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="section-identifier">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Identifier",options):helperMissing.call(depth0,"__","Identifier",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="section-identifier" data-bind="identifier" data-validate="$notEmpty; $testIdFormat; $testIdAvailable(original=',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+');" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The identifier of the section.",options):helperMissing.call(depth0,"__","The identifier of the section.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/title -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="section-title">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Title",options):helperMissing.call(depth0,"__","Title",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="section-title" data-bind="title" data-validate="$notEmpty" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The section title.",options):helperMissing.call(depth0,"__","The section title.",options)))+'\n            </div>\n        </div>\n    </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/visible -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="section-visible">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Visible",options):helperMissing.call(depth0,"__","Visible",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="section-visible" value="true" checked="checked"  data-bind="visible" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"A visible section is one that is identifiable by the candidate.",options):helperMissing.call(depth0,"__","A visible section is one that is identifiable by the candidate.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/keepTogether -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="section-keep-together">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Keep Together",options):helperMissing.call(depth0,"__","Keep Together",options)))+'</label>\n        </div>\n\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="section-keep-together" value="true" checked="checked"  data-bind="keepTogether" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"An invisible section with a parent that is subject to shuffling can specify whether or not its children, which will appear to the candidate as if they were part of the parent, are shuffled as a block or mixed up with the other children of the parent section.",options):helperMissing.call(depth0,"__","An invisible section with a parent that is subject to shuffling can specify whether or not its children, which will appear to the candidate as if they were part of the parent, are shuffled as a block or mixed up with the other children of the parent section.",options)))+'\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-selection">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Selection",options):helperMissing.call(depth0,"__","Selection",options)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/selection -->\n    <div class="section-selection toggled">\n\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-enable-selection">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Enable selection",options):helperMissing.call(depth0,"__","Enable selection",options)))+'</label>\n            </div>\n\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-enable-selection"  />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/selection/select -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="section-select">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Select",options):helperMissing.call(depth0,"__","Select",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n            </div>\n            <div class="col-6">\n                <input name="section-select" type="text" data-increment="1" data-min="0" value="0" data-bind="selection.select"  data-bind-encoder="number" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The number of child elements to be selected.",options):helperMissing.call(depth0,"__","The number of child elements to be selected.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/selection/withReplacement -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-with-replacement">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"With Replacement",options):helperMissing.call(depth0,"__","With Replacement",options)))+'</label>\n            </div>\n\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-with-replacement" value="true" data-bind="selection.withReplacement"  data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"When selecting child elements each element is normally eligible for selection once only.",options):helperMissing.call(depth0,"__","When selecting child elements each element is normally eligible for selection once only.",options)))+'\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-ordering">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Ordering",options):helperMissing.call(depth0,"__","Ordering",options)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/ordering -->\n    <div class="section-ordering toggled">\n<!-- assessmentTest/testPart/assessmentSection/ordering/shuffle -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-shuffle">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Shuffle",options):helperMissing.call(depth0,"__","Shuffle",options)))+'</label>\n            </div>\n\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-shuffle" value="true" data-bind="ordering.shuffle"  data-bind-encoder="boolean"  />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"If set, it causes the order of the child elements to be randomized, otherwise it uses the order in which the child elements are defined.",options):helperMissing.call(depth0,"__","If set, it causes the order of the child elements to be randomized, otherwise it uses the order in which the child elements are defined.",options)))+'\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-item-session-control">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Item Session Control",options):helperMissing.call(depth0,"__","Item Session Control",options)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl -->\n    <div class="section-item-session-control toggled">\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/maxAttempts -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="section-max-attempts">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Max Attempts",options):helperMissing.call(depth0,"__","Max Attempts",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <input name="section-max-attempts" type="text" data-increment="1" data-min="0" value="1" data-bind="itemSessionControl.maxAttempts" data-bind-encoder="number" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Controls the maximum number of attempts allowed. 0 means unlimited.",options):helperMissing.call(depth0,"__","Controls the maximum number of attempts allowed. 0 means unlimited.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/showFeedback -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-show-feedback">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Show Feedback",options):helperMissing.call(depth0,"__","Show Feedback",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-show-feedback" value="true" data-bind="itemSessionControl.showFeedback" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"This constraint affects the visibility of feedback after the end of the last attempt.",options):helperMissing.call(depth0,"__","This constraint affects the visibility of feedback after the end of the last attempt.",options)))+'\n                </div>\n            </div>\n        </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/allowComment -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-allow-comment">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Allow Comment",options):helperMissing.call(depth0,"__","Allow Comment",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-allow-comment" value="true"  data-bind="itemSessionControl.allowComment" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options):helperMissing.call(depth0,"__","This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/allowSkipping -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-allow-skipping">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Allow Skipping",options):helperMissing.call(depth0,"__","Allow Skipping",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-allow-skipping" value="true" checked="checked" data-bind="itemSessionControl.allowSkipping" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"If the candidate can skip the item, without submitting a response.",options):helperMissing.call(depth0,"__","If the candidate can skip the item, without submitting a response.",options)))+'\n                </div>\n            </div>\n        </div>\n\n\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-time-limits">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Time Limits",options):helperMissing.call(depth0,"__","Time Limits",options)))+'</h4>\n\n<!-- assessmentTest/timeLimits -->\n    <div class="section-time-limits toggled">\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/timeLimits/maxTime -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="section-max-time">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Maximum Duration",options):helperMissing.call(depth0,"__","Maximum Duration",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Maximum duration for this section.",options):helperMissing.call(depth0,"__","Maximum duration for this section.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/timeLimits/allowLateSubmission -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-allow-late-submission">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Late submission allowed",options):helperMissing.call(depth0,"__","Late submission allowed",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Whether a candidate's response that is beyond the maximum duration of the section should still be accepted.",options):helperMissing.call(depth0,"__","Whether a candidate's response that is beyond the maximum duration of the section should still be accepted.",options)))+"\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"
})}),define("tpl!taoQtiTest/controller/creator/templates/itemref-props",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div id="itemref-props-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="itemref-props props clearfix">\n\n    <h3>',(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</h3>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/identifier -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-identifier">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Identifier",options):helperMissing.call(depth0,"__","Identifier",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="itemref-identifier" data-bind="identifier" data-validate="$notEmpty; $testIdFormat; $testIdAvailable(original=',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+');" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The identifier of the item reference.",options):helperMissing.call(depth0,"__","The identifier of the item reference.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/href -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-href">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Reference",options):helperMissing.call(depth0,"__","Reference",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="itemref-href" data-bind="href" readonly="readonly" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The reference.",options):helperMissing.call(depth0,"__","The reference.",options)))+'\n            </div>\n        </div>\n    </div>\n    \n<!-- assessmentTest/testPart/assessmentSection/sectionPart/category -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-category">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Categories",options):helperMissing.call(depth0,"__","Categories",options)))+'</label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="itemref-category" data-bind="categories" data-bind-encoder="str2array" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Items can optionally be assigned to one or more categories.",options):helperMissing.call(depth0,"__","Items can optionally be assigned to one or more categories.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/required -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="itemref-required">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required",options):helperMissing.call(depth0,"__","Required",options)))+'</label>\n        </div>\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="itemref-required" value="true" data-bind="required" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"If required it must appear (at least once) in the selection.",options):helperMissing.call(depth0,"__","If required it must appear (at least once) in the selection.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/fixed -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="itemref-fixed">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Fixed",options):helperMissing.call(depth0,"__","Fixed",options)))+'</label>\n        </div>\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="itemref-fixed" value="true" data-bind="fixed" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Not shuffled, the position remains fixed.",options):helperMissing.call(depth0,"__","Not shuffled, the position remains fixed.",options)))+'\n            </div>\n        </div>\n    </div>\n\n\n    <h4 class="toggler closed" data-toggle="~ .itemref-item-session-control">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Item Session Control",options):helperMissing.call(depth0,"__","Item Session Control",options)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl -->\n    <div class="itemref-item-session-control toggled">\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/maxAttempts -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="itemref-max-attempts">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Max Attempts",options):helperMissing.call(depth0,"__","Max Attempts",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <input name="itemref-max-attempts" type="text" data-increment="1" data-min="0" value="1" data-bind="itemSessionControl.maxAttempts" data-bind-encoder="number" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Controls the maximum number of attempts allowed. 0 means unlimited.",options):helperMissing.call(depth0,"__","Controls the maximum number of attempts allowed. 0 means unlimited.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/showFeedback -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-show-feedback">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Show Feedback",options):helperMissing.call(depth0,"__","Show Feedback",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-show-feedback" value="true" data-bind="itemSessionControl.showFeedback" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"This constraint affects the visibility of feedback after the end of the last attempt.",options):helperMissing.call(depth0,"__","This constraint affects the visibility of feedback after the end of the last attempt.",options)))+'\n                </div>\n            </div>\n        </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/allowComment -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-allow-comment">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Allow Comment",options):helperMissing.call(depth0,"__","Allow Comment",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-allow-comment" value="true"  data-bind="itemSessionControl.allowComment" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options):helperMissing.call(depth0,"__","This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/allowSkipping -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-allow-skipping">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Allow Skipping",options):helperMissing.call(depth0,"__","Allow Skipping",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-allow-skipping" value="true" checked="checked" data-bind="itemSessionControl.allowSkipping" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"If the candidate can skip the item, without submitting a response.",options):helperMissing.call(depth0,"__","If the candidate can skip the item, without submitting a response.",options)))+'\n                </div>\n            </div>\n        </div>\n\n\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .itemref-time-limits">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Time Limits",options):helperMissing.call(depth0,"__","Time Limits",options)))+'</h4>\n\n<!-- assessmentTest/timeLimits -->\n    <div class="itemref-time-limits toggled">\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/timeLimits/maxTime -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="itemref-max-time">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Maximum Duration",options):helperMissing.call(depth0,"__","Maximum Duration",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Maximum duration for this item.",options):helperMissing.call(depth0,"__","Maximum duration for this item.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/timeLimits/allowLateSubmission -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-allow-late-submission">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Late submission allowed",options):helperMissing.call(depth0,"__","Late submission allowed",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Whether a candidate's response that is beyond the maximum duration of the item should still be accepted.",options):helperMissing.call(depth0,"__","Whether a candidate's response that is beyond the maximum duration of the item should still be accepted.",options)))+"\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"
})}),define("tpl!taoQtiTest/controller/creator/templates/rubricblock-props",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,functionType="function";return buffer+='<div class="rubricblock-props props clearfix">\n\n    <h3>'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Rubric Block",options):helperMissing.call(depth0,"__","Rubric Block",options)))+": ",(helper=helpers.index)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.index,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</h3>\n\n <!--assessmentTest/testPart/assessmentSection/sectionPart/rubrickBlocK/views -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-identifier">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Views",options):helperMissing.call(depth0,"__","Views",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <select name="view" multiple="multiple" data-bind="views">\n                <option value="author">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Author",options):helperMissing.call(depth0,"__","Author",options)))+'</option>\n                <option value="candidate">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Candidate",options):helperMissing.call(depth0,"__","Candidate",options)))+'</option>\n                <option value="proctor">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Proctor",options):helperMissing.call(depth0,"__","Proctor",options)))+'</option>\n                <option value="scorer">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Scorer",options):helperMissing.call(depth0,"__","Scorer",options)))+'</option>\n                <option value="testConstructor">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Test constructor",options):helperMissing.call(depth0,"__","Test constructor",options)))+'</option>\n                <option value="tutor">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Tutor",options):helperMissing.call(depth0,"__","Tutor",options)))+'</option>\n            </select>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Who can view the rubric block during the delivery.",options):helperMissing.call(depth0,"__","Who can view the rubric block during the delivery.",options)))+"\n            </div>\n        </div>\n    </div>\n\n</div>\n"
})}),define("taoQtiTest/controller/creator/templates/index",["tpl!taoQtiTest/controller/creator/templates/testpart","tpl!taoQtiTest/controller/creator/templates/section","tpl!taoQtiTest/controller/creator/templates/rubricblock","tpl!taoQtiTest/controller/creator/templates/itemref","tpl!taoQtiTest/controller/creator/templates/item","tpl!taoQtiTest/controller/creator/templates/test-props","tpl!taoQtiTest/controller/creator/templates/testpart-props","tpl!taoQtiTest/controller/creator/templates/section-props","tpl!taoQtiTest/controller/creator/templates/itemref-props","tpl!taoQtiTest/controller/creator/templates/rubricblock-props"],function(testPart,section,rubricBlock,itemRef,item,testProps,testPartProps,sectionProps,itemRefProps,rubricBlockProps){return{testpart:testPart,section:section,itemref:itemRef,item:item,rubricblock:rubricBlock,properties:{test:testProps,testpart:testPartProps,section:sectionProps,itemref:itemRefProps,rubricblock:rubricBlockProps}}
}),define("taoQtiTest/controller/creator/views/item",["jquery","taoQtiTest/controller/creator/templates/index"],function($,templates){var itemTemplate=templates.item,itemView=function(loadItems){function setUpLiveSearch(){var timeout,liveSearch=function(){var pattern=$search.val();(pattern.length>1||0===pattern.length)&&(clearTimeout(timeout),timeout=setTimeout(function(){loadItems(pattern,function(items){update(items)})},300))};$search.keyup(liveSearch).siblings(".ctrl").click(liveSearch)}function update(items){disableSelection(),$itemBox.empty().append(itemTemplate(items)),enableSelection()}function disableSelection(){$panel.data("selectable")&&$panel.selectable("disable")
}function enableSelection(){$panel.selectable($panel.data("selectable")?"enable":{filter:"li",selected:function(event,ui){$(ui.selected).addClass("selected")},unselected:function(event,ui){$(ui.unselected).removeClass("selected")},stop:function(){$(this).trigger("itemselect.creator",$(".selected"))}})}var $panel=$(".test-creator-items .item-selection"),$search=$("#item-filter"),$itemBox=$(".item-box",$panel);"function"==typeof loadItems&&loadItems(void 0,function(items){update(items),setUpLiveSearch()})};return itemView}),define("taoQtiTest/controller/creator/views/property",["jquery","ui","core/databinder","taoQtiTest/controller/creator/templates/index"],function($,ui,DataBinder,templates){var propView=function(tmplName,model){function propValidation(){$view.on("validated.group",function(e,isValid){if("group"===e.namespace){var $togglers=$("#test-creator .property-toggler, #saver");
isValid===!0?$togglers.removeClass("disabled"):$togglers.addClass("disabled")}}),$view.groupValidator()}var $view,$container=$(".test-creator-props"),template=templates.properties[tmplName],open=function(){var databinder;$container.children(".props").hide().trigger("propclose.propview"),$view=$(template(model)).appendTo($container).filter(".props"),ui.startDomComponent($view),databinder=new DataBinder($view,model),databinder.bind(),propValidation(),$view.trigger("propopen.propview")},getView=function(){return $view},isOpen=function(){return"none"!==$view.css("display")},onOpen=function(cb){$view.on("propopen.propview",function(e){e.stopPropagation(),cb()})},onClose=function(cb){$view.on("propclose.propview",function(e){e.stopPropagation(),cb()
})},destroy=function(){$view.remove()},toggle=function(){$container.children(".props").not($view).hide().trigger("propclose.propview"),isOpen()?$view.hide().trigger("propclose.propview"):$view.show().trigger("propopen.propview")};return{open:open,getView:getView,isOpen:isOpen,onOpen:onOpen,onClose:onClose,destroy:destroy,toggle:toggle}};return propView}),define("taoQtiTest/controller/creator/views/actions",["jquery","taoQtiTest/controller/creator/views/property"],function($,propertyView){function properties($container,template,model,cb){var propView=null;$container.find(".property-toggler").on("click",function(e){e.preventDefault();var $elt=$(this);$(this).hasClass(disabledClass)||($elt.blur(),null===propView?($container.addClass(activeClass),$elt.addClass(btnOnClass),propView=propertyView(template,model),propView.open(),propView.onOpen(function(){$container.addClass(activeClass),$elt.addClass(btnOnClass)
}),propView.onClose(function(){$container.removeClass(activeClass),$elt.removeClass(btnOnClass)}),"function"==typeof cb&&cb(propView)):propView.toggle())})}function move($actionContainer,containerClass,elementClass){var $element=$actionContainer.parents("."+elementClass),$container=$element.parents("."+containerClass);$(".move-up",$actionContainer).click(function(e){var $elements,index;return e.preventDefault(),$element.is(":animated")?!1:($elements=$("."+elementClass,$container),console.log($elements.length),index=$elements.index($element),void(index>0&&$element.fadeOut(200,function(){console.log("."+elementClass+" :eq("+(index-1)+")"),$element.insertBefore($("."+elementClass+" :eq("+(index-1)+")",$container)).fadeIn(400,function(){$container.trigger("change")
})})))}),$(".move-down",$actionContainer).click(function(e){var $elements,index;return e.preventDefault(),$element.is(":animated")?!1:($elements=$("."+elementClass,$container),console.log($elements.length),index=$elements.index($element),void(index<$elements.length-1&&$elements.length>1&&(console.log("."+elementClass+" :eq("+(index+1)+")"),$element.fadeOut(200,function(){$element.insertAfter($("."+elementClass+" :eq("+(index+1)+")",$container)).fadeIn(400,function(){$container.trigger("change")})}))))})}function movable($container,elementClass,actionContainerElt){$container.each(function(){var $elt=$(this),$actionContainer=$(actionContainerElt,$elt),index=$container.index($elt),$moveUp=$(".move-up",$actionContainer),$moveDown=$(".move-down",$actionContainer);
1===$container.length?($moveUp.addClass(disabledClass),$moveDown.addClass(disabledClass)):0===index?($moveUp.addClass(disabledClass),$moveDown.removeClass(disabledClass)):index>=$container.length-1?($moveDown.addClass(disabledClass),$moveUp.removeClass(disabledClass)):($moveUp.removeClass(disabledClass),$moveDown.removeClass(disabledClass))})}function removable($container,actionContainerElt){$container.each(function(){var $elt=$(this),$actionContainer=$(actionContainerElt,$elt),$delete=$("[data-delete]",$actionContainer);$container.length<=1?$delete.addClass(disabledClass):$delete.removeClass(disabledClass)})}function disable($container,actionContainerElt){$container.find(actionContainerElt).find("[data-delete],.move-up,.move-down").addClass(disabledClass)
}function enable($container,actionContainerElt){$container.find(actionContainerElt).find("[data-delete],.move-up,.move-down").removeClass(disabledClass)}var disabledClass="disabled",activeClass="active",btnOnClass="tlb-button-on";return{properties:properties,move:move,removable:removable,movable:movable,disable:disable,enable:enable}}),define("taoQtiTest/controller/creator/views/itemref",["jquery","lodash","i18n","taoQtiTest/controller/creator/views/actions"],function($,_,__,actions){var setUp=function($itemRef,model){function propHandler(propView){function removePropHandler(){null!==propView&&propView.destroy()}categoriesProperty(propView.getView().find("[name=itemref-category]")),$itemRef.parents(".testpart").on("delete",removePropHandler),$itemRef.parents(".section").on("delete",removePropHandler),$itemRef.on("delete",removePropHandler)
}function categoriesProperty($select){$select.select2({width:"100%",tags:[],multiple:!0,tokenSeparators:[","," ",";"],formatNoMatches:function(){return __("Enter a category")},maximumInputLength:32})}var $actionContainer=$(".actions",$itemRef);actions.properties($actionContainer,"itemref",model,propHandler),actions.move($actionContainer,"itemrefs","itemref"),resize()},listenActionState=function(){$(".itemrefs").each(function(){actions.movable($(".itemref",$(this)),"itemref",".actions")}),$(document).on("delete",function(e){var $parent,$target=$(e.target);$target.hasClass("itemref")&&($parent=$target.parents(".itemrefs"),actions.disable($parent.find(".itemref"),".actions"))
}).on("add change undo.deleter deleted.deleter",".itemrefs",function(e){var $parent,$target=$(e.target);($target.hasClass("itemref")||$target.hasClass("itemrefs"))&&($parent=$(".itemref",$target.hasClass("itemrefs")?$target:$target.parents(".itemrefs")),actions.enable($parent,".actions"),actions.movable($parent,"itemref",".actions"))})},resize=_.throttle(function(){var $refs=$(".itemrefs").first(),$actions=$(".itemref .actions").first(),width=$refs.innerWidth()-$actions.outerWidth();$(".itemref > .title").width(width)},100);return{setUp:setUp,listenActionState:listenActionState,resize:resize}}),define("taoQtiItem/qtiItem/core/qtiClasses",[],function(){return{_container:"taoQtiItem/qtiItem/core/Container",assessmentItem:"taoQtiItem/qtiItem/core/Item",responseProcessing:"taoQtiItem/qtiItem/core/ResponseProcessing",_simpleFeedbackRule:"taoQtiItem/qtiItem/core/response/SimpleFeedbackRule",stylesheet:"taoQtiItem/qtiItem/core/Stylesheet",math:"taoQtiItem/qtiItem/core/Math",img:"taoQtiItem/qtiItem/core/Img",object:"taoQtiItem/qtiItem/core/Object",outcomeDeclaration:"taoQtiItem/qtiItem/core/variables/OutcomeDeclaration",responseDeclaration:"taoQtiItem/qtiItem/core/variables/ResponseDeclaration",rubricBlock:"taoQtiItem/qtiItem/core/RubricBlock",associableHotspot:"taoQtiItem/qtiItem/core/choices/AssociableHotspot",gap:"taoQtiItem/qtiItem/core/choices/Gap",gapImg:"taoQtiItem/qtiItem/core/choices/GapImg",gapText:"taoQtiItem/qtiItem/core/choices/GapText",hotspotChoice:"taoQtiItem/qtiItem/core/choices/HotspotChoice",hottext:"taoQtiItem/qtiItem/core/choices/Hottext",inlineChoice:"taoQtiItem/qtiItem/core/choices/InlineChoice",simpleAssociableChoice:"taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice",simpleChoice:"taoQtiItem/qtiItem/core/choices/SimpleChoice",associateInteraction:"taoQtiItem/qtiItem/core/interactions/AssociateInteraction",choiceInteraction:"taoQtiItem/qtiItem/core/interactions/ChoiceInteraction",endAttemptInteraction:"taoQtiItem/qtiItem/core/interactions/EndAttemptInteraction",extendedTextInteraction:"taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction",gapMatchInteraction:"taoQtiItem/qtiItem/core/interactions/GapMatchInteraction",graphicAssociateInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction",hotspotInteraction:"taoQtiItem/qtiItem/core/interactions/HotspotInteraction",hottextInteraction:"taoQtiItem/qtiItem/core/interactions/HottextInteraction",inlineChoiceInteraction:"taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction",matchInteraction:"taoQtiItem/qtiItem/core/interactions/MatchInteraction",mediaInteraction:"taoQtiItem/qtiItem/core/interactions/MediaInteraction",orderInteraction:"taoQtiItem/qtiItem/core/interactions/OrderInteraction",prompt:"taoQtiItem/qtiItem/core/interactions/Prompt",selectPointInteraction:"taoQtiItem/qtiItem/core/interactions/SelectPointInteraction",sliderInteraction:"taoQtiItem/qtiItem/core/interactions/SliderInteraction",textEntryInteraction:"taoQtiItem/qtiItem/core/interactions/TextEntryInteraction",uploadInteraction:"taoQtiItem/qtiItem/core/interactions/UploadInteraction",feedbackBlock:"taoQtiItem/qtiItem/core/feedbacks/FeedbackBlock",feedbackInline:"taoQtiItem/qtiItem/core/feedbacks/FeedbackInline",modalFeedback:"taoQtiItem/qtiItem/core/feedbacks/ModalFeedback",customInteraction:"taoQtiItem/qtiItem/core/interactions/CustomInteraction",infoControl:"taoQtiItem/qtiItem/core/PortableInfoControl"}
}),define("taoQtiItem/qtiCreator/model/qtiClasses",["lodash","taoQtiItem/qtiItem/core/qtiClasses"],function(_,qtiClasses){return _.defaults({assessmentItem:"taoQtiItem/qtiCreator/model/Item",_container:"taoQtiItem/qtiCreator/model/Container",img:"taoQtiItem/qtiCreator/model/Img",math:"taoQtiItem/qtiCreator/model/Math",object:"taoQtiItem/qtiCreator/model/Object",rubricBlock:"taoQtiItem/qtiCreator/model/RubricBlock",modalFeedback:"taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback",choiceInteraction:"taoQtiItem/qtiCreator/model/interactions/ChoiceInteraction",orderInteraction:"taoQtiItem/qtiCreator/model/interactions/OrderInteraction",associateInteraction:"taoQtiItem/qtiCreator/model/interactions/AssociateInteraction",matchInteraction:"taoQtiItem/qtiCreator/model/interactions/MatchInteraction",inlineChoiceInteraction:"taoQtiItem/qtiCreator/model/interactions/InlineChoiceInteraction",simpleChoice:"taoQtiItem/qtiCreator/model/choices/SimpleChoice",simpleAssociableChoice:"taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice",inlineChoice:"taoQtiItem/qtiCreator/model/choices/InlineChoice",mediaInteraction:"taoQtiItem/qtiCreator/model/interactions/MediaInteraction",uploadInteraction:"taoQtiItem/qtiCreator/model/interactions/UploadInteraction",textEntryInteraction:"taoQtiItem/qtiCreator/model/interactions/TextEntryInteraction",sliderInteraction:"taoQtiItem/qtiCreator/model/interactions/SliderInteraction",extendedTextInteraction:"taoQtiItem/qtiCreator/model/interactions/ExtendedTextInteraction",hotspotInteraction:"taoQtiItem/qtiCreator/model/interactions/HotspotInteraction",selectPointInteraction:"taoQtiItem/qtiCreator/model/interactions/SelectPointInteraction",graphicInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction",graphicAssociateInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction",hotspotChoice:"taoQtiItem/qtiCreator/model/choices/HotspotChoice",gapImg:"taoQtiItem/qtiCreator/model/choices/GapImg",associableHotspot:"taoQtiItem/qtiCreator/model/choices/AssociableHotspot",gapMatchInteraction:"taoQtiItem/qtiCreator/model/interactions/GapMatchInteraction",hottextInteraction:"taoQtiItem/qtiCreator/model/interactions/HottextInteraction",hottext:"taoQtiItem/qtiCreator/model/choices/Hottext",gapText:"taoQtiItem/qtiCreator/model/choices/GapText",gap:"taoQtiItem/qtiCreator/model/choices/Gap",responseDeclaration:"taoQtiItem/qtiCreator/model/variables/ResponseDeclaration",responseProcessing:"taoQtiItem/qtiCreator/model/ResponseProcessing",customInteraction:"taoQtiItem/qtiCreator/model/interactions/PortableCustomInteraction",endAttemptInteraction:"taoQtiItem/qtiCreator/model/interactions/EndAttemptInteraction",infoControl:"taoQtiItem/qtiCreator/model/PortableInfoControl"},qtiClasses)
}),define("taoQtiItem/qtiItem/helper/util",["lodash"],function(_){var util={buildSerial:function(prefix){for(var id=prefix||"",chars="abcdefghijklmnopqrstuvwxyz0123456789",i=0;22>i;i++)id+=chars.charAt(Math.floor(Math.random()*chars.length));return id},fullpath:function(src,baseUrl){return src=src||"",baseUrl=baseUrl||"",src&&(src=src.replace(/^\//,""),src.match(/^http/i)||(baseUrl&&!baseUrl.match(/\/$/)&&(baseUrl+="/"),src=baseUrl+src)),src},findInCollection:function(element,collectionNames,searchedSerial){var found=null;if(_.isString(collectionNames)&&(collectionNames=[collectionNames]),!_.isArray(collectionNames))throw new Error("invalid argument : collectionNames must be an array or a string");
return _.each(collectionNames,function(collectionName){var collection=element;_.each(collectionName.split("."),function(nameToken){collection=collection[nameToken]});var elt=collection[searchedSerial];return elt?(found={parent:element,element:elt},!1):(_.each(collection,function(elt){return _.isFunction(elt.find)&&(found=elt.find(searchedSerial))?!1:void 0}),found?!1:void 0)}),found},addMarkupNamespace:function(markup,ns){return ns?(markup=markup.replace(/<(\/)?([a-z]+)([^><:]*)>/g,"<$1"+ns+":$2$3>"),markup=markup.replace("<img ","<"+ns+"img ")):markup},removeMarkupNamespaces:function(markup){return markup.replace(/<(\/)?(\w*):([^>]*)>/g,"<$1$3>")},getMarkupUsedNamespaces:function(markup){var namespaces=[];
return markup.replace(/<(\/)?(\w*):([^>]*)>/g,function(original,slash,ns,node){return namespaces.push(ns),"<"+slash+node+">"}),_.uniq(namespaces)}};return util}),define("taoQtiItem/qtiItem/helper/rendererConfig",["lodash","jquery"],function(_,$){var rendererConfigHelper={};return rendererConfigHelper.getOptionsFromArguments=function(args){var options={data:{},placeholder:null,subclass:"",renderer:null};return _.each(args,function(arg){arg&&(arg.isRenderer?options.renderer=arg:arg instanceof $&&arg.length?options.placeholder=arg:_.isString(arg)?options.subclass=arg:_.isPlainObject(arg)?options.data=arg:console.log("invalid arg",arg,args))}),options},rendererConfigHelper
}),define("taoQtiItem/qtiItem/core/Element",["jquery","class","lodash","taoQtiItem/qtiItem/helper/util","taoQtiItem/qtiItem/helper/rendererConfig"],function($,Class,_,util,rendererConfig){var _instances={},Element=Class.extend({qtiClass:"",serial:"",relatedItem:null,init:function(serial,attributes){if(this.attributes={},this.metaData={},"object"==typeof serial&&(attributes=serial,serial=""),serial||(serial=util.buildSerial(this.qtiClass+"_")),serial&&("string"!=typeof serial||!serial.match(/^[a-z_0-9]*$/i)))throw"invalid QTI serial : ("+typeof serial+") "+serial;if(_instances[serial])throw"a QTI Element with the same serial already exists "+serial;_instances[serial]=this,this.serial=serial,this.setAttributes(attributes||{}),"function"==typeof this.initContainer&&this.initContainer(arguments[2]||""),"function"==typeof this.initObject&&this.initObject()
},is:function(qtiClass){return qtiClass===this.qtiClass},placeholder:function(){return"{{"+this.serial+"}}"},getSerial:function(){return this.serial},getUsedIdentifiers:function(){var usedIds={},elts=this.getComposingElements();for(var i in elts){var elt=elts[i],id=elt.attr("identifier");id&&(usedIds[id]=elt)}return usedIds},attr:function(name,value){if(name)if(void 0!==value)this.attributes[name]=value;else if("object"==typeof name)for(var prop in name)this.attr(prop,name[prop]);else if("string"==typeof name)return void 0===this.attributes[name]?void 0:this.attributes[name];return this},data:function(name,value){if(name)if(void 0!==value)this.metaData[name]=value,$(document).trigger("metaChange.qti-widget",{element:this,key:name,value:value});
else if("object"==typeof name)for(var prop in name)this.data(prop,name[prop]);else if("string"==typeof name)return void 0===this.metaData[name]?void 0:this.metaData[name];return this},removeData:function(name){return delete this.metaData[name],this},removeAttr:function(name){return this.removeAttributes(name)},setAttributes:function(attributes){return this.attributes=attributes,this},getAttributes:function(){return _.clone(this.attributes)},removeAttributes:function(attrNames){"string"==typeof attrNames&&(attrNames=[attrNames]);for(var i in attrNames)delete this.attributes[attrNames[i]];return this},getComposingElements:function(){function append(element){elts[element.getSerial()]=element,elts=_.extend(elts,element.getComposingElements())
}var elts={};return"function"==typeof this.initContainer&&append(this.getBody()),"function"==typeof this.initObject&&append(this.getObject()),_.each(this.metaData,function(v){Element.isA(v,"_container")?append(v):_.isArray(v)&&_.each(v,function(v){Element.isA(v,"_container")&&append(v)})}),elts},getUsedClasses:function(){var ret=[this.qtiClass],composingElts=this.getComposingElements();return _.each(composingElts,function(elt){ret.push(elt.qtiClass)}),_.uniq(ret)},find:function(serial){var found=null;if("function"==typeof this.initObject){var object=this.getObject();object.serial===serial&&(found={parent:this,element:object,location:"object"})}return found||"function"!=typeof this.initContainer||(found=this.getBody().find(serial,this)),found
},parent:function(){var item=this.getRelatedItem();if(item){var found=item.find(this.getSerial());if(found)return found.parent}return null},setRelatedItem:function(item,recursive){if(recursive="undefined"==typeof recursive?!0:recursive,Element.isA(item,"assessmentItem")){this.relatedItem=item;var composingElts=this.getComposingElements();for(var i in composingElts)composingElts[i].setRelatedItem(item,!1)}},getRelatedItem:function(){var ret=null;return Element.isA(this.relatedItem,"assessmentItem")&&(ret=this.relatedItem),ret},setRenderer:function(renderer){if(!renderer||!renderer.isRenderer)throw"invalid qti rendering engine";this.renderer=renderer;var elts=this.getComposingElements();
for(var serial in elts)elts[serial].setRenderer(renderer)},getRenderer:function(){return this.renderer},render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),tplData={},defaultData={tag:this.qtiClass,serial:this.serial,attributes:this.getAttributes()};if(!renderer)throw"render: no renderer found for the element "+this.qtiClass+":"+this.serial;"function"==typeof this.initContainer&&(defaultData.body=this.getBody().render(renderer)),"function"==typeof this.initObject&&(defaultData.object={attributes:this.object.getAttributes()},defaultData.object.attributes.data=renderer.getAbsoluteUrl(this.object.attr("data"))),tplData=_.merge(defaultData,args.data||{}),tplData=renderer.getData(this,tplData,args.subclass);
var rendering=renderer.renderTpl(this,tplData,args.subclass);return args.placeholder&&args.placeholder.replaceWith(rendering),rendering},postRender:function(data,altClassName,renderer){if(renderer=renderer||this.getRenderer(),"function"==typeof this.initContainer&&this.getBody().postRender({},"",renderer),renderer)return renderer.postRender(this,data,altClassName);throw"postRender: no renderer found for the element "+this.qtiClass+":"+this.serial},getContainer:function($scope,subclass){var renderer=this.getRenderer();if(renderer)return renderer.getContainer(this,$scope,subclass);throw"getContainer: no renderer found for the element "+this.qtiClass+":"+this.serial
},toArray:function(){var arr={serial:this.serial,type:this.qtiClass,attributes:this.getAttributes()};return"function"==typeof this.initContainer&&(arr.body=this.getBody().toArray()),"function"==typeof this.initObject&&(arr.object=this.object.toArray()),arr},isEmpty:function(){return!1},addClass:function(className){var clazz=this.attr("class")||"";_containClass(clazz,className)||this.attr("class",clazz+(clazz.length?" ":"")+className)},hasClass:function(className){return _containClass(this.attr("class"),className)},removeClass:function(className){var clazz=this.attr("class")||"";if(clazz){var regex=new RegExp("(?:^|\\s)"+className+"(?:\\s|$)","");clazz=clazz.replace(regex,"").replace(/^\s+/,""),clazz?this.attr("class",clazz):this.removeAttr("class")
}},isset:function(){return Element.issetElement(this.serial)},unset:function(){return Element.unsetElement(this.serial)}}),_containClass=function(allClassStr,className){var regex=new RegExp("(?:^|\\s)"+className+"(?:\\s|$)","");return allClassStr&&regex.test(allClassStr)};return Element.isA=function(qtiElement,qtiClass){return qtiElement instanceof Element&&qtiElement.is(qtiClass)},Element.getElementBySerial=function(serial){return _instances[serial]},Element.issetElement=function(serial){return!!_instances[serial]},Element.unsetElement=function(serial){var element=Element.getElementBySerial(serial);if(!element)throw"cannot unset an element that does not exist";
var composingElements=element.getComposingElements();return _.each(composingElements,function(elt){delete _instances[elt.serial]}),delete _instances[element.serial],!0},Element}),define("taoQtiItem/qtiItem/helper/interactionHelper",["lodash","taoQtiItem/qtiItem/core/Element"],function(_,Element){return{convertChoices:function(choices,outputType){var ret=[],_this=this;return _.each(choices,function(c){if(Element.isA(c,"choice"))switch(outputType){case"serial":ret.push(c.getSerial());break;case"identifier":ret.push(c.id());break;default:ret.push(c)}else _.isArray(c)&&ret.push(_this.convertChoices(c,outputType))}),ret},findChoices:function(interaction,choices,inputType){var ret=[],_this=this;
return _.each(choices,function(c){var choice;_.isString(c)?"serial"===inputType?(choice=interaction.getChoice(c),choice&&ret.push(choice)):"identifier"===inputType?(choice=interaction.getChoiceByIdentifier(c),choice&&ret.push(choice)):ret.push(c):ret.push(_.isArray(c)?_this.findChoices(interaction,c,inputType):c)}),ret},shuffleChoices:function(choices){var r=[],f={},j=0;for(var i in choices){if(!Element.isA(choices[i],"choice"))throw"invalid element in array: is not a qti choice";var choice=choices[i];choice.attr("fixed")&&(f[j]=choice),r.push(choice),j++}for(var n=0;n<r.length-1;n++)if(!f[n]){var k=-1;do k=n+Math.floor(Math.random()*(r.length-n));while(f[k]);
var tmp=r[k];r[k]=r[n],r[n]=tmp}return r},serialToIdentifier:function(interaction,choiceSerial){var choice=interaction.getChoice(choiceSerial);return choice?choice.id():""}}}),define("taoQtiItem/qtiRunner/core/Renderer",["lodash","jquery","handlebars","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/helper/interactionHelper"],function(_,$,Handlebars,Element,interactionHelper){function getDocumentBaseUrl(){return window.location.protocol+"//"+window.location.host+window.location.pathname.replace(/([^\/]*)$/,"")}var _isValidRenderer=function(renderer){var valid=!0;if("object"!=typeof renderer)return!1;var classCorrect=!1;if(renderer.qtiClass)if(_.indexOf(_renderableClasses,renderer.qtiClass)>=0)classCorrect=!0;
else{var pos=renderer.qtiClass.indexOf(".");if(pos>0){var qtiClass=renderer.qtiClass.slice(0,pos),subClass=renderer.qtiClass.slice(pos+1);_renderableSubclasses[qtiClass]&&_.indexOf(_renderableSubclasses[qtiClass],subClass)>=0&&(classCorrect=!0)}}if(!classCorrect)throw valid=!1,new Error("invalid qti class name in renderer declaration : "+renderer.qtiClass);if(!renderer.template)throw valid=!1,new Error("missing template in renderer declaration : "+renderer.qtiClass);return valid},_renderableClasses=["_container","assessmentItem","stylesheet","responseDeclaration","outcomeDeclaration","responseProcessing","_simpleFeedbackRule","img","math","object","modalFeedback","rubricBlock","associateInteraction","choiceInteraction","extendedTextInteraction","gapMatchInteraction","graphicAssociateInteraction","graphicGapMatchInteraction","graphicOrderInteraction","hotspotInteraction","hottextInteraction","inlineChoiceInteraction","matchInteraction","mediaInteraction","orderInteraction","selectPointInteraction","sliderInteraction","textEntryInteraction","uploadInteraction","endAttemptInteraction","customInteraction","prompt","associableHotspot","gap","gapImg","gapText","hotspotChoice","hottext","inlineChoice","simpleAssociableChoice","simpleChoice","infoControl"],_dependencies={assessmentItem:["stylesheet","_container","prompt","modalFeedback"],rubricBlock:["_container"],associateInteraction:["simpleAssociableChoice"],choiceInteraction:["simpleChoice"],gapMatchInteraction:["gap","gapText"],graphicAssociateInteraction:["associableHotspot"],graphicGapMatchInteraction:["associableHotspot","gapImg"],graphicOrderInteraction:["hotspotChoice"],hotspotInteraction:["hotspotChoice"],hottextInteraction:["hottext"],inlineChoiceInteraction:["inlineChoice"],matchInteraction:["simpleAssociableChoice"],orderInteraction:["simpleChoice"]},_renderableSubclasses={simpleAssociableChoice:["associateInteraction","matchInteraction"],simpleChoice:["choiceInteraction","orderInteraction"]},Renderer=function(options){options=options||{},this.isRenderer=!0,this.name="",this.shuffleChoices=void 0!==options.shuffleChoices?options.shuffleChoices:!0,this.shuffledChoices=[];
var _locations={},_renderers={},_getClassRenderer=function(qtiClass){var ret=null;if(_renderers[qtiClass])ret=_renderers[qtiClass];else{var pos=qtiClass.indexOf(".");pos>0&&(qtiClass=qtiClass.slice(0,pos),_renderers[qtiClass]&&(ret=_renderers[qtiClass]))}return ret};this.setOption=function(key,value){return"string"==typeof key&&(options[key]=value),this},this.setOptions=function(opts){return _.extend(options,opts),this},this.getOption=function(key){return"string"==typeof key&&options[key]?options[key]:null},this.renderTpl=function(element,data,qtiSubclass){var ret="",tplFound=!1,qtiClass=qtiSubclass||element.qtiClass,renderer=_getClassRenderer(qtiClass);if(renderer&&"function"==typeof renderer.template&&(ret=renderer.template(data),tplFound=!0),!tplFound)throw new Error("no renderer template loaded under the class name : "+qtiClass);
return ret},this.getData=function(element,data,qtiSubclass){var ret=data,qtiClass=qtiSubclass||element.qtiClass,renderer=_getClassRenderer(qtiClass);return renderer&&"function"==typeof renderer.getData&&(ret=renderer.getData.call(this,element,data)),ret},this.renderDirect=function(tpl,data){return Handlebars.compile(tpl)(data)},this.getContainer=function(qtiElement,$scope,qtiSubclass){var ret=null,qtiClass=qtiSubclass||qtiElement.qtiClass,renderer=_getClassRenderer(qtiClass);if(!renderer)throw"no renderer found for the class : "+qtiElement.qtiClass;return ret=renderer.getContainer(qtiElement,$scope)},this.postRender=function(qtiElement,data,qtiSubclass){var ret=!1,qtiClass=qtiSubclass||qtiElement.qtiClass,renderer=_getClassRenderer(qtiClass);
return renderer&&"function"==typeof renderer.render&&(ret=renderer.render.call(this,qtiElement,data)),ret},this.setResponse=function(qtiInteraction,response,qtiSubclass){var ret=!1,qtiClass=qtiSubclass||qtiInteraction.qtiClass,renderer=_getClassRenderer(qtiClass);if(!renderer)throw"no renderer registered under the name : "+qtiClass;if("function"==typeof renderer.setResponse){ret=renderer.setResponse.call(this,qtiInteraction,response);var $container=renderer.getContainer.call(this,qtiInteraction);$container instanceof $&&$container.length&&$container.trigger("responseSet",[qtiInteraction,response])}return ret},this.getResponse=function(qtiInteraction,qtiSubclass){var ret=!1,qtiClass=qtiSubclass||qtiInteraction.qtiClass,renderer=_getClassRenderer(qtiClass);
if(!renderer)throw"no renderer registered under the name : "+qtiClass;return"function"==typeof renderer.getResponse&&(ret=renderer.getResponse.call(this,qtiInteraction)),ret},this.resetResponse=function(qtiInteraction,qtiSubclass){var ret=!1,qtiClass=qtiSubclass||qtiInteraction.qtiClass,renderer=_getClassRenderer(qtiClass);if(!renderer)throw"no renderer registered under the name : "+qtiClass;return"function"==typeof renderer.resetResponse&&(ret=renderer.resetResponse.call(this,qtiInteraction)),ret},this.getLoadedRenderers=function(){return _renderers},this.register=function(renderersLocations){_.extend(_locations,renderersLocations)},this.load=function(callback,requiredClasses){var required=[];
if(requiredClasses){if(!_.isArray(requiredClasses))throw new Error('invalid argument type: expected array for arg "requireClasses"');requiredClasses=_.intersection(requiredClasses,_renderableClasses),_.each(requiredClasses,function(reqClass){var deps=_dependencies[reqClass];deps&&(requiredClasses=_.union(requiredClasses,deps))});for(var i in requiredClasses){var qtiClass=requiredClasses[i];if(_renderableSubclasses[qtiClass]){var requiredSubClasses=_.intersection(requiredClasses,_renderableSubclasses[qtiClass]);_.each(requiredSubClasses,function(subclass){if(_locations[qtiClass+"."+subclass])required.push(_locations[qtiClass+"."+subclass]);else{if(!_locations[qtiClass])throw new Error(this.name+" : missing qti class location declaration: "+qtiClass+", subclass: "+subclass);
required.push(_locations[qtiClass])}})}else if(_locations[qtiClass]===!1)_renderers[qtiClass]=!1;else{if(!_locations[qtiClass])throw new Error(this.name+" : missing qti class location declaration: "+qtiClass);required.push(_locations[qtiClass])}}}else required=_.values(_locations);var _this=this;return require(required,function(){_.each(arguments,function(clazz){_isValidRenderer(clazz)&&(_renderers[clazz.qtiClass]=clazz)}),"function"==typeof callback&&callback.call(_this,_renderers)}),this},this.setShuffledChoices=function(interaction,choices,identificationType){Element.isA(interaction,"interaction")&&(this.shuffledChoices[interaction.getSerial()]=interactionHelper.findChoices(interaction,choices,identificationType))
},this.getShuffledChoices=function(interaction,reshuffle,returnedType){var tmp,ret=[];if(Element.isA(interaction,"interaction")){var serial=interaction.getSerial();if(!this.shuffledChoices[serial]||reshuffle)if(Element.isA(interaction,"matchInteraction")){this.shuffledChoices[serial]=[];for(var i=0;2>i;i++)this.shuffledChoices[serial].push(interactionHelper.shuffleChoices(interaction.getChoices(i)))}else this.shuffledChoices[serial]=interactionHelper.shuffleChoices(interaction.getChoices());tmp=this.shuffledChoices[serial],ret="serial"===returnedType||"identifier"===returnedType?interactionHelper.convertChoices(tmp,returnedType):_.clone(tmp)}return ret},this.getRenderers=function(){return _renderers
},this.getLocations=function(){return _locations},this.getAbsoluteUrl=function(relUrl){if(this.getOption("userRelativeUrl"))return relUrl.replace(/^\.?\//,"");if(/^http(s)?:\/\//i.test(relUrl))return relUrl;var absUrl="",runtimeLocations=this.getOption("runtimeLocations");if(runtimeLocations&&_.size(runtimeLocations)&&_.forIn(runtimeLocations,function(runtimeLocation,typeIdentifier){return 0===relUrl.indexOf(typeIdentifier)?(absUrl=relUrl.replace(typeIdentifier,runtimeLocation),!1):void 0}),absUrl)return absUrl;var baseUrl=this.getOption("baseUrl")||getDocumentBaseUrl();return baseUrl+relUrl}};return{build:function(renderersLocations,name,defaultOptions){var NewRenderer=function(){Renderer.apply(this,arguments),this.register(renderersLocations),this.name=name||"",defaultOptions&&this.setOptions(defaultOptions)
};return NewRenderer.prototype=Renderer.prototype,NewRenderer}}}),define("taoQtiItem/qtiDefaultRenderer/renderers/config",[],function(){return{name:"defaultRenderer",locations:{_container:"taoQtiItem/qtiDefaultRenderer/renderers/Container",assessmentItem:"taoQtiItem/qtiDefaultRenderer/renderers/Item",stylesheet:"taoQtiItem/qtiDefaultRenderer/renderers/Stylesheet",outcomeDeclaration:"taoQtiItem/qtiDefaultRenderer/renderers/OutcomeDeclaration",responseDeclaration:"taoQtiItem/qtiDefaultRenderer/renderers/ResponseDeclaration",responseProcessing:"taoQtiItem/qtiDefaultRenderer/renderers/ResponseProcessing",math:"taoQtiItem/qtiDefaultRenderer/renderers/Math",object:"taoQtiItem/qtiDefaultRenderer/renderers/Object",modalFeedback:"taoQtiItem/qtiDefaultRenderer/renderers/ModalFeedback",rubricBlock:"taoQtiItem/qtiDefaultRenderer/renderers/RubricBlock",associateInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/AssociateInteraction",choiceInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/ChoiceInteraction",extendedTextInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/ExtendedTextInteraction",gapMatchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GapMatchInteraction",graphicAssociateInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicOrderInteraction",hotspotInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/HotspotInteraction",hottextInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/HottextInteraction",inlineChoiceInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/InlineChoiceInteraction",matchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/MatchInteraction",mediaInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/MediaInteraction",orderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/OrderInteraction",selectPointInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/SelectPointInteraction",sliderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/SliderInteraction",textEntryInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/TextEntryInteraction",prompt:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/Prompt",associableHotspot:"taoQtiItem/qtiDefaultRenderer/renderers/choices/AssociableHotspot",gap:"taoQtiItem/qtiDefaultRenderer/renderers/choices/Gap",gapImg:"taoQtiItem/qtiDefaultRenderer/renderers/choices/GapImg",gapText:"taoQtiItem/qtiDefaultRenderer/renderers/choices/GapText",hotspotChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/HotspotChoice",hottext:"taoQtiItem/qtiDefaultRenderer/renderers/choices/Hottext",inlineChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/InlineChoice",simpleAssociableChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleAssociableChoice",simpleChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleChoice"}}
}),define("taoQtiItem/qtiCommonRenderer/renderers/config",["lodash","taoQtiItem/qtiDefaultRenderer/renderers/config"],function(_,defaultRenderConfig){var locations=_.extend(_.clone(defaultRenderConfig.locations),{assessmentItem:"taoQtiItem/qtiCommonRenderer/renderers/Item",_container:"taoQtiItem/qtiCommonRenderer/renderers/Container",_simpleFeedbackRule:!1,stylesheet:"taoQtiItem/qtiCommonRenderer/renderers/Stylesheet",outcomeDeclaration:"taoQtiItem/qtiCommonRenderer/renderers/OutcomeDeclaration",responseDeclaration:"taoQtiItem/qtiCommonRenderer/renderers/ResponseDeclaration",responseProcessing:"taoQtiItem/qtiCommonRenderer/renderers/ResponseProcessing",img:"taoQtiItem/qtiCommonRenderer/renderers/Img",math:"taoQtiItem/qtiCommonRenderer/renderers/Math",object:"taoQtiItem/qtiCommonRenderer/renderers/Object",rubricBlock:"taoQtiItem/qtiCommonRenderer/renderers/RubricBlock",modalFeedback:"taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback",prompt:"taoQtiItem/qtiCommonRenderer/renderers/interactions/Prompt",choiceInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction",extendedTextInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction",orderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction",associateInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction",matchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction",textEntryInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction",sliderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction",inlineChoiceInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction","simpleChoice.choiceInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction","simpleChoice.orderInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction",hottext:"taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext",gap:"taoQtiItem/qtiCommonRenderer/renderers/choices/Gap",gapText:"taoQtiItem/qtiCommonRenderer/renderers/choices/GapText","simpleAssociableChoice.matchInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction","simpleAssociableChoice.associateInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction",inlineChoice:"taoQtiItem/qtiCommonRenderer/renderers/choices/InlineChoice",hottextInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction",hotspotInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction",gapMatchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction",selectPointInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction",graphicOrderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction",mediaInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction",uploadInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction",gapImg:"taoQtiItem/qtiCommonRenderer/renderers/choices/GapImg",graphicAssociateInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction",customInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/PortableCustomInteraction",infoControl:"taoQtiItem/qtiCommonRenderer/renderers/PortableInfoControl",endAttemptInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/EndAttemptInteraction"});
return{name:"commonRenderer",locations:locations}}),define("taoQtiItem/qtiCreator/renderers/config",["lodash","taoQtiItem/qtiCommonRenderer/renderers/config"],function(_,commonRenderConfig){var locations=_.defaults({_container:"taoQtiItem/qtiCreator/renderers/Container",assessmentItem:"taoQtiItem/qtiCreator/renderers/Item",rubricBlock:"taoQtiItem/qtiCreator/renderers/RubricBlock",img:"taoQtiItem/qtiCreator/renderers/Img",math:"taoQtiItem/qtiCreator/renderers/Math",object:"taoQtiItem/qtiCreator/renderers/Object",modalFeedback:"taoQtiItem/qtiCreator/renderers/ModalFeedback",choiceInteraction:"taoQtiItem/qtiCreator/renderers/interactions/ChoiceInteraction",orderInteraction:"taoQtiItem/qtiCreator/renderers/interactions/OrderInteraction",matchInteraction:"taoQtiItem/qtiCreator/renderers/interactions/MatchInteraction",associateInteraction:"taoQtiItem/qtiCreator/renderers/interactions/AssociateInteraction",inlineChoiceInteraction:"taoQtiItem/qtiCreator/renderers/interactions/InlineChoiceInteraction",textEntryInteraction:"taoQtiItem/qtiCreator/renderers/interactions/TextEntryInteraction",hotspotInteraction:"taoQtiItem/qtiCreator/renderers/interactions/HotspotInteraction",selectPointInteraction:"taoQtiItem/qtiCreator/renderers/interactions/SelectPointInteraction",graphicOrderInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GraphicOrderInteraction",graphicAssociateInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GraphicGapMatchInteraction",mediaInteraction:"taoQtiItem/qtiCreator/renderers/interactions/MediaInteraction",uploadInteraction:"taoQtiItem/qtiCreator/renderers/interactions/UploadInteraction",sliderInteraction:"taoQtiItem/qtiCreator/renderers/interactions/SliderInteraction",extendedTextInteraction:"taoQtiItem/qtiCreator/renderers/interactions/ExtendedTextInteraction","simpleChoice.choiceInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.ChoiceInteraction","simpleChoice.orderInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.OrderInteraction","simpleAssociableChoice.associateInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.AssociateInteraction","simpleAssociableChoice.matchInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.MatchInteraction",gapMatchInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GapMatchInteraction",hottextInteraction:"taoQtiItem/qtiCreator/renderers/interactions/HottextInteraction",customInteraction:"taoQtiItem/qtiCreator/renderers/interactions/PortableCustomInteraction",endAttemptInteraction:"taoQtiItem/qtiCreator/renderers/interactions/EndAttemptInteraction",infoControl:"taoQtiItem/qtiCreator/renderers/PortableInfoControl",gap:"taoQtiItem/qtiCreator/renderers/choices/Gap",gapText:"taoQtiItem/qtiCreator/renderers/choices/GapText",hottext:"taoQtiItem/qtiCreator/renderers/choices/Hottext"},commonRenderConfig.locations);
return{name:"creatorRenderer",locations:locations}}),define("taoQtiItem/qtiCreator/renderers/Renderer",["taoQtiItem/qtiRunner/core/Renderer","taoQtiItem/qtiCreator/renderers/config"],function(Renderer,config){return Renderer.build(config.locations,config.name)}),define("taoQtiItem/qtiCreator/helper/creatorRenderer",["taoQtiItem/qtiCreator/renderers/Renderer","helpers","jquery","lodash","util/dom"],function(Renderer,helpers,$,_,dom){function _extractInteractionsConfig(config){var ret={};return config&&config.properties&&_.each(_configurableInteractions,function(interactionName){config.properties[interactionName]&&(ret[interactionName]=config.properties[interactionName])
}),ret}var _creatorRenderer=null,_configurableInteractions=["endAttempt"],get=function(reset,config){if(!_creatorRenderer||reset){var $bodyEltForm=_creatorRenderer?_creatorRenderer.getOption("bodyElementOptionForm"):null,mediaSources=config.properties.mediaSources||[];!reset&&$bodyEltForm&&$bodyEltForm.length&&dom.contains($bodyEltForm)||(_creatorRenderer=new Renderer({baseUrl:"",lang:"",uri:"",shuffleChoices:!1,itemOptionForm:$("#item-editor-item-property-bar .panel"),interactionOptionForm:$("#item-editor-interaction-property-bar .panel"),choiceOptionForm:$("#item-editor-choice-property-bar .panel"),responseOptionForm:$("#item-editor-response-property-bar .panel"),bodyElementOptionForm:$("#item-editor-body-element-property-bar .panel"),textOptionForm:$("#item-editor-text-property-bar .panel"),modalFeedbackOptionForm:$("#item-editor-modal-feedback-property-bar .panel"),mediaManager:{appendContainer:"#mediaManager",browseUrl:helpers._url("files","ItemContent","taoItems"),uploadUrl:helpers._url("upload","ItemContent","taoItems"),deleteUrl:helpers._url("delete","ItemContent","taoItems"),downloadUrl:helpers._url("download","ItemContent","taoItems"),fileExistsUrl:helpers._url("fileExists","ItemContent","taoItems"),mediaSources:mediaSources},interactions:_extractInteractionsConfig(config)}))
}return _creatorRenderer};return{get:function(reset,config){return get(reset,config)},setOption:function(name,value){return get().setOption(name,value)},setOptions:function(options){return get().setOptions(options)},load:function(qtiClasses,done){return get().load(function(){_.isFunction(done)&&done.apply(this,arguments)},qtiClasses)}}}),define("taoQtiItem/qtiXmlRenderer/renderers/config",[],function(){return{name:"xmlRenderer",locations:{_container:"taoQtiItem/qtiXmlRenderer/renderers/Container",assessmentItem:"taoQtiItem/qtiXmlRenderer/renderers/Item",stylesheet:"taoQtiItem/qtiXmlRenderer/renderers/Stylesheet",responseDeclaration:"taoQtiItem/qtiXmlRenderer/renderers/ResponseDeclaration",outcomeDeclaration:"taoQtiItem/qtiXmlRenderer/renderers/OutcomeDeclaration",responseProcessing:"taoQtiItem/qtiXmlRenderer/renderers/ResponseProcessing",_simpleFeedbackRule:"taoQtiItem/qtiXmlRenderer/renderers/responses/SimpleFeedbackRule",math:"taoQtiItem/qtiXmlRenderer/renderers/Math",img:"taoQtiItem/qtiXmlRenderer/renderers/Img",object:"taoQtiItem/qtiXmlRenderer/renderers/Object",modalFeedback:"taoQtiItem/qtiXmlRenderer/renderers/feedbacks/ModalFeedback",rubricBlock:"taoQtiItem/qtiXmlRenderer/renderers/RubricBlock",associateInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/AssociateInteraction",choiceInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/ChoiceInteraction",extendedTextInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/ExtendedTextInteraction",gapMatchInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GapMatchInteraction",graphicAssociateInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicOrderInteraction",hotspotInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/HotspotInteraction",hottextInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/HottextInteraction",inlineChoiceInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/InlineChoiceInteraction",matchInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/MatchInteraction",mediaInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/MediaInteraction",orderInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/OrderInteraction",selectPointInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/SelectPointInteraction",sliderInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/SliderInteraction",textEntryInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/TextEntryInteraction",uploadInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/UploadInteraction",prompt:"taoQtiItem/qtiXmlRenderer/renderers/interactions/Prompt",associableHotspot:"taoQtiItem/qtiXmlRenderer/renderers/choices/AssociableHotspot",gap:"taoQtiItem/qtiXmlRenderer/renderers/choices/Gap",gapImg:"taoQtiItem/qtiXmlRenderer/renderers/choices/GapImg",gapText:"taoQtiItem/qtiXmlRenderer/renderers/choices/GapText",hotspotChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/HotspotChoice",hottext:"taoQtiItem/qtiXmlRenderer/renderers/choices/Hottext",inlineChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/InlineChoice",simpleAssociableChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleAssociableChoice",simpleChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleChoice",customInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/PortableCustomInteraction",endAttemptInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/EndAttemptInteraction",infoControl:"taoQtiItem/qtiXmlRenderer/renderers/PortableInfoControl"},options:{userRelativeUrl:!0}}
}),define("taoQtiItem/qtiXmlRenderer/renderers/Renderer",["taoQtiItem/qtiRunner/core/Renderer","taoQtiItem/qtiXmlRenderer/renderers/config"],function(Renderer,config){return Renderer.build(config.locations,config.name,config.options)}),define("taoQtiItem/qtiItem/core/Loader",["lodash","class","taoQtiItem/qtiItem/core/qtiClasses","taoQtiItem/qtiItem/core/Element"],function(_,Class,qtiClasses,Element){function loadPortableCustomElementData(portableElement,data){portableElement.typeIdentifier=data.typeIdentifier,portableElement.markup=data.markup,portableElement.entryPoint=data.entryPoint,portableElement.properties=data.properties,portableElement.libraries=data.libraries
}var Loader=Class.extend({init:function(item,classesLocation){this.qti={},this.classesLocation={},this.item=item||null,this.setClassesLocation(classesLocation||qtiClasses)},setClassesLocation:function(qtiClasses){return _.extend(this.classesLocation,qtiClasses),this},getRequiredClasses:function(data){var ret=[];for(var i in data)"qtiClass"===i&&"_container"!==data[i]&&"relatedItem"!==i?ret.push(data[i]):"object"==typeof data[i]&&"responseRules"!==i&&(ret=_.union(ret,this.getRequiredClasses(data[i])));return ret},loadRequiredClasses:function(data,callback,reload){var requiredClasses=this.getRequiredClasses(data,reload),required=[];for(var i in requiredClasses){var requiredClass=requiredClasses[i];
if(!this.classesLocation[requiredClass])throw new Error("missing qti class location declaration : "+requiredClass);required.push(this.classesLocation[requiredClass])}var _this=this;require(required,function(){_.each(arguments,function(QtiClass){_this.qti[QtiClass.prototype.qtiClass]=QtiClass}),callback.call(_this,_this.qti)})},getLoadedClasses:function(){return _.keys(this.qti)},loadItemData:function(data,callback){var _this=this;_this.loadRequiredClasses(data,function(Qti){if("object"==typeof data&&"assessmentItem"===data.qtiClass){_this.item=new Qti.assessmentItem(data.serial,data.attributes||{}),_this.loadContainer(_this.item.getBody(),data.body);for(var i in data.outcomes){var outcome=_this.buildOutcome(data.outcomes[i]);
outcome&&_this.item.addOutcomeDeclaration(outcome)}for(var i in data.feedbacks){var feedback=_this.buildElement(data.feedbacks[i]);feedback&&_this.item.addModalFeedback(feedback)}for(var i in data.stylesheets){var stylesheet=_this.buildElement(data.stylesheets[i]);stylesheet&&_this.item.addStylesheet(stylesheet)}for(var i in data.responses){var response=_this.buildResponse(data.responses[i]);if(response){_this.item.addResponseDeclaration(response);var feedbackRules=data.responses[i].feedbackRules;feedbackRules&&_.forIn(feedbackRules,function(fbData,serial){response.feedbackRules[serial]=_this.buildSimpleFeedbackRule(fbData)})}}data.responseProcessing&&_this.item.setResponseProcessing(_this.buildResponseProcessing(data.responseProcessing)),_this.item.setNamespaces(data.namespaces)
}"function"==typeof callback&&callback.call(_this,_this.item)})},loadElement:function(data,callback){var _this=this;_this.loadRequiredClasses(data,function(){var element=_this.buildElement(data);"function"==typeof callback&&callback.call(_this,element)})},loadElements:function(data,callback){var _this=this;if(!_this.item)throw"QtiLoader : cannot load elements in empty item";this.loadRequiredClasses(data,function(){var allElements=_this.item.getComposingElements();for(var i in data){var elementData=data[i];elementData&&elementData.qtiClass&&elementData.serial&&allElements[elementData.serial]&&_this.loadElementData(allElements[elementData.serial],elementData)}"function"==typeof callback&&callback.call(_this,_this.item)
})},buildResponse:function(data){var response=this.buildElement(data);return response.template=data.howMatch||null,response.defaultValue=data.defaultValue||null,response.correctResponse=data.correctResponses||null,response.mapEntries=_.size(data.mapping)?data.mapping:_.size(data.areaMapping)?data.areaMapping:{},response.mappingAttributes=data.mappingAttributes||{},response},buildSimpleFeedbackRule:function(data){var feedbackRule=this.buildElement(data);return data.condition&&(feedbackRule.condition=data.condition),data.comparedValue&&(feedbackRule.comparedValue=data.comparedValue),feedbackRule.comparedOutcome=this.item.responses[data.comparedOutcome]||null,feedbackRule.feedbackOutcome=this.item.outcomes[data.feedbackOutcome]||null,feedbackRule.feedbackThen=this.item.modalFeedbacks[data.feedbackThen]||null,feedbackRule.feedbackElse=this.item.modalFeedbacks[data.feedbackElse]||null,feedbackRule
},buildOutcome:function(data){var outcome=this.buildElement(data);return outcome.defaultValue=data.defaultValue||null,outcome},buildResponseProcessing:function(data){var rp=this.buildElement(data);return data&&data.processingType&&("custom"===data.processingType?(rp.xml=data.data,rp.processingType="custom"):rp.processingType="templateDriven"),rp},loadContainer:function(bodyObject,bodyData){if(!Element.isA(bodyObject,"_container"))throw"bodyObject must be a QTI Container";if(!bodyData||"string"!=typeof bodyData.body||"array"!=typeof bodyData.elements&&"object"!=typeof bodyData.elements)throw"wrong bodydata format";for(var serial in bodyData.elements){var eltData=bodyData.elements[serial],element=this.buildElement(eltData);
element&&bodyObject.setElement(element,bodyData.body)}bodyObject.body(bodyData.body)},buildElement:function(elementData){var elt=null;if(!(elementData&&elementData.qtiClass&&elementData.serial))throw"wrong elementData format";var className=elementData.qtiClass;if(!this.qti[className])throw"the qti element class does not exist: "+className;return elt=new this.qti[className](elementData.serial),this.loadElementData(elt,elementData),elt},loadElementData:function(element,data){return element.setAttributes(_.clone(data.attributes)||{}),element.body&&data.body&&element.bdy&&this.loadContainer(element.getBody(),data.body),element.object&&data.object&&element.object&&this.loadObjectData(element.object,data.object),Element.isA(element,"interaction")?this.loadInteractionData(element,data):Element.isA(element,"choice")?this.loadChoiceData(element,data):Element.isA(element,"math")?this.loadMathData(element,data):Element.isA(element,"infoControl")&&this.loadPicData(element,data),element
},loadInteractionData:function(interaction,data){Element.isA(interaction,"blockInteraction")&&data.prompt&&this.loadContainer(interaction.prompt.getBody(),data.prompt),this.buildInteractionChoices(interaction,data),Element.isA(interaction,"customInteraction")&&this.loadPciData(interaction,data)},buildInteractionChoices:function(interaction,data){if(data.choices){if(Element.isA(interaction,"matchInteraction"))for(var set=0;2>set;set++){if(!data.choices[set])throw"missing match set #"+set;var matchSet=data.choices[set];for(var serial in matchSet){var choice=this.buildElement(matchSet[serial]);choice&&interaction.addChoice(choice,set)}}else for(var serial in data.choices){var choice=this.buildElement(data.choices[serial]);
choice&&interaction.addChoice(choice)}if(Element.isA(interaction,"graphicGapMatchInteraction")&&data.gapImgs)for(var serial in data.gapImgs){var gapImg=this.buildElement(data.gapImgs[serial]);gapImg&&interaction.addGapImg(gapImg)}}},loadChoiceData:function(choice,data){Element.isA(choice,"textVariableChoice")?choice.val(data.text):Element.isA(choice,"gapImg")||Element.isA(choice,"containerChoice")},loadObjectData:function(object,data){object.setAttributes(data.attributes),data._alt&&(object._alt="object"===data._alt.qtiClass?Loader.buildElement(data._alt):data._alt)},loadMathData:function(math,data){math.ns=data.ns||{},math.setMathML(data.mathML||""),math.annotations=data.annotations||{}
},loadPciData:function(pci,data){loadPortableCustomElementData(pci,data)},loadPicData:function(pic,data){loadPortableCustomElementData(pic,data)}});return Loader}),define("taoQtiItem/qtiCreator/helper/simpleParser",["lodash","jquery","taoQtiItem/qtiItem/helper/util","taoQtiItem/qtiItem/core/Loader"],function(_,$,util,Loader){function _getElementSelector(qtiClass,ns){return ns?ns+"\\:"+qtiClass+","+qtiClass:qtiClass}function getQtiClassFromXmlDom($node){var qtiClass=$node.prop("tagName").toLowerCase();return qtiClass=qtiClass.replace(/.*:/,""),_qtiClassNames[qtiClass]?_qtiClassNames[qtiClass]:qtiClass}function buildElement($elt){var qtiClass=getQtiClassFromXmlDom($elt),elt={qtiClass:qtiClass,serial:util.buildSerial(qtiClass+"_"),attributes:{}};
return $.each($elt[0].attributes,function(){this.specified&&(elt.attributes[this.name]=this.value)}),elt}function buildMath($elt,options){var elt=buildElement($elt);return elt.annotations={},$elt.find(_getElementSelector("annotation",options.ns.math)).each(function(){var $annotation=$(this),encoding=$annotation.attr("encoding");encoding&&(elt.annotations[encoding]=$annotation.html()),$annotation.remove()}),elt.mathML=$elt.html(),elt.ns={name:"m",uri:"http://www.w3.org/1998/Math/MathML"},elt}function parseContainer($container,opts){var options=_.merge(_.clone(_defaultOptions),opts||{}),ret={serial:util.buildSerial("_container_"),body:"",elements:{}};return _.each(_parsableElements,function(qtiClass){$container.find(qtiClass).each(function(){var $qtiElement=$(this),element=buildElement($qtiElement,opts);
ret.elements[element.serial]=element,$qtiElement.replaceWith(_placeholder(element))})}),$container.find(_getElementSelector("math",options.ns.math)).each(function(){var $qtiElement=$(this),element=buildMath($qtiElement,opts);ret.elements[element.serial]=element,$qtiElement.replaceWith(_placeholder(element))}),ret.body=$container.html(),ret}function _placeholder(element){return"{{"+element.serial+"}}"}var _parsableElements=["img","object"],_qtiClassNames={rubricblock:"rubricBlock"},_defaultOptions={ns:{math:""},loaded:null,model:null},parser={parse:function(xmlStr,options){var $container=$(xmlStr),element=buildElement($container,options),data=parseContainer($container,options);
if(void 0!==data.body&&(element.body=data),_.isFunction(options.loaded)&&options.model){var loader=(new Loader).setClassesLocation(options.model);loader.loadElement(element,options.loaded)}return element}};return parser}),define("taoQtiTest/controller/creator/views/rubricblock",["jquery","lodash","taoQtiTest/controller/creator/views/actions","taoQtiItem/qtiCreator/model/qtiClasses","taoQtiItem/qtiCreator/helper/creatorRenderer","taoQtiItem/qtiXmlRenderer/renderers/Renderer","taoQtiItem/qtiCreator/helper/simpleParser","helpers"],function($,_,actions,qtiClasses,creatorRenderer,XmlRenderer,simpleParser,helpers){var setUp=function($rubricBlock,model,data){function propHandler(propView){function removePropHandler(){null!==propView&&propView.destroy()
}rbViews(propView.getView()),$rubricBlock.parents(".testpart").on("delete",removePropHandler),$rubricBlock.parents(".section").on("delete",removePropHandler),$rubricBlock.on("delete",removePropHandler)}function rbViews($propContainer){var $select=$("select",$propContainer);$select.select2({width:"100%"}).on("select2-removed",function(){0===$select.select2("val").length&&$select.select2("val",[1])}),0===$select.select2("val").length&&$select.select2("val",[1])}function setUpEditor(){var mathNs="m",$rubricBlockBinding=$(".rubricblock-binding",$rubricBlock),$rubricBlockContent=$(".rubricblock-content",$rubricBlock),$editorForm=$('<div class="rubricblock-formatting-props props clearfix">');
$editorForm.appendTo(".test-creator-props").hide();var fakeXml="<rubricBlock>"+$rubricBlockBinding.html()+"</rubrickBlock>",xmlRenderer=new XmlRenderer({shuffleChoices:!1}).load();simpleParser.parse(fakeXml,{ns:{math:mathNs},model:qtiClasses,loaded:function(rubricBlock){var uri=data.uri,lang="en-US";creatorRenderer.setOptions({uri:uri,lang:lang,baseUrl:helpers._url("download","TestContent","taoQtiTest",{uri:uri,lan:lang,path:""}),interactionOptionForm:$(),choiceOptionForm:$(),responseOptionForm:$(),bodyElementOptionForm:$editorForm,itemOptionForm:$(),textOptionForm:$(),mediaManager:{appendContainer:"#test-creator",browseUrl:helpers._url("files","TestContent","taoQtiTest"),uploadUrl:helpers._url("upload","TestContent","taoQtiTest"),deleteUrl:helpers._url("delete","TestContent","taoQtiTest"),downloadUrl:helpers._url("download","TestContent","taoQtiTest")}}),creatorRenderer.get().load(function(){var syncRubricBlockContent=_.throttle(function(){$rubricBlockBinding.html($(rubricBlock.render(xmlRenderer)).html()).trigger("change")
},500);rubricBlock.setRenderer(this),$rubricBlockContent.html(rubricBlock.render());var widget=rubricBlock.postRender({ready:function(){this.changeState("active")}});$('.mini-tlb [data-role="delete"]',$rubricBlockContent).remove(),$rubricBlockContent.on("editorready",function(){$(".cke_button__taoqtiimage").remove(),$(".cke_button__taoqtimaths").remove()}),widget.on("containerBodyChange",function(data){data.container.serial===rubricBlock.getBody().serial&&syncRubricBlockContent()},!0)},this.getLoadedClasses())}})}actions.properties($rubricBlock,"rubricblock",model,propHandler),setUpEditor(),$("formatting-toggler",$rubricBlock).click(function(){$rubricBlock.find(".cke_editable").focus().click()
})};return{setUp:setUp}}),define("taoQtiTest/controller/creator/helpers/qtiTest",["lodash","i18n"],function(_,__){var qtiTestHelper={extractIdentifiers:function(obj){var self=this,identifiers=[];return _.has(obj,"identifier")&&(identifiers=identifiers.concat(obj.identifier.toLowerCase())),_.flatten(_.forEach(obj,function(value){identifiers=identifiers.concat("object"==typeof value?self.extractIdentifiers(value):[])}),!0),identifiers},getIdentifier:function(qtiType,lockedIdentifiers){var suggestion,index=1,glue="-";do suggestion=qtiType+glue+index++;while(_.contains(lockedIdentifiers,suggestion.toLowerCase()));return lockedIdentifiers.push(suggestion.toLowerCase()),suggestion
},idFormatValidator:function(){var qtiIdPattern=/^[_a-zA-Z]{1}[a-zA-Z0-9\-._]{0,31}$/i;return{name:"testIdFormat",message:__("is not a valid identifier (alphanum, underscore, dash and dots.)"),validate:function(value,callback){"function"==typeof callback&&callback(qtiIdPattern.test(value))}}},idAvailableValidator:function(lockedIdentifiers){return{name:"testIdAvailable",message:__("is already used in the test."),validate:function(value,callback,options){"function"==typeof callback&&callback(!_.contains(_.values(lockedIdentifiers),value.toLowerCase())||options.original&&value===options.original)}}},filterQtiType:function(value,type){return value["qti-type"]&&value["qti-type"]===type
},addMissingQtiType:function(collection,parentType){var self=this;_.forEach(collection,function(value,key){!_.isObject(value)||_.isArray(value)||_.has(value,"qti-type")||(_.isNumber(key)?parentType&&(value["qti-type"]=parentType):value["qti-type"]=key),_.isArray(value)?self.addMissingQtiType(value,key.replace(/s$/,"")):_.isObject(value)&&self.addMissingQtiType(value)})},consolidateModel:function(model){if(model&&model.testParts&&_.isArray(model.testParts)&&model.testParts[0]){var testPart=model.testParts[0];testPart.assessmentSections&&_.isArray(testPart.assessmentSections)&&_.forEach(testPart.assessmentSections,function(assessmentSection){assessmentSection.ordering&&void 0!==assessmentSection.ordering.shuffle&&assessmentSection.ordering.shuffle===!1&&delete assessmentSection.ordering,assessmentSection.rubricBlocks&&_.isArray(assessmentSection.rubricBlocks)&&(0===assessmentSection.rubricBlocks.length||1===assessmentSection.rubricBlocks.length&&0===assessmentSection.rubricBlocks[0].content.length?delete assessmentSection.rubricBlocks:assessmentSection.rubricBlocks.length>0&&_.forEach(assessmentSection.rubricBlocks,function(rubricBlock){rubricBlock.views=["candidate"]
}))})}return model}};return qtiTestHelper}),define("taoQtiTest/controller/creator/views/section",["jquery","lodash","uri","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/itemref","taoQtiTest/controller/creator/views/rubricblock","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest"],function($,_,uri,actions,itemRefView,rubricBlockView,templates,qtiTestHelper){var setUp=function($section,model,data){function propHandler(propView){function removePropHandler(){null!==propView&&propView.destroy()}var $view=propView.getView(),$selectionSwitcher=$("[name=section-enable-selection]",$view),$selectionSelect=$("[name=section-select]",$view),$selectionWithRep=$("[name=section-with-replacement]",$view),switchSelection=function(){$selectionSwitcher.prop("checked")===!0?($selectionSelect.incrementer("enable"),$selectionWithRep.removeClass("disabled")):($selectionSelect.incrementer("disable"),$selectionWithRep.addClass("disabled"))
};$selectionSwitcher.on("change",switchSelection),$selectionSwitcher.on("change",function(){$selectionSwitcher.prop("checked")||($selectionSelect.val(0),$selectionWithRep.prop("checked",!1),delete model.selection)}),$selectionSwitcher.prop("checked",!!model.selection).trigger("change");var $title=$("[data-bind=title]",$section);$view.on("change.binder",function(e,model){"binder"===e.namespace&&"assessmentSection"===model["qti-type"]&&$title.text(model.title)}),$section.parents(".testpart").on("deleted.deleter",removePropHandler),$section.on("deleted.deleter",removePropHandler)}function itemRefs(){model.sectionParts||(model.sectionParts=[]),$(".itemref",$section).each(function(){var $itemRef=$(this),index=$itemRef.data("bind-index");
model.sectionParts[index]||(model.sectionParts[index]={}),itemRefView.setUp($itemRef,model.sectionParts[index]),$itemRef.find(".title").text(data.labels[uri.encode($itemRef.data("uri"))])})}function acceptItemRefs(){var $selected,$items=$(".test-creator-items");$items.on("itemselect.creator",function(){var selection=Array.prototype.slice.call(arguments,1),$placeholder=$(".itemref-placeholder",$section),$placeholders=$(".itemref-placeholder");selection.length>0?$placeholder.show().off("click").on("click",function(){_.forEach(selection,function(item){var $item=$(item);addItemRef($(".itemrefs",$section),void 0,{href:uri.decode($item.data("uri")),label:$.trim($item.clone().children().remove().end().text()),"qti-type":"assessmentItemRef"})
}),$(".ui-selected",$items).removeClass("ui-selected").removeClass("selected"),$placeholders.hide().off("click")}):$placeholders.hide().off("click")}),$(document).off("add.binder","#"+$section.attr("id")+" .itemrefs").on("add.binder","#"+$section.attr("id")+" .itemrefs",function(e,$itemRef){if("binder"===e.namespace&&$itemRef.hasClass("itemref")){var index=$itemRef.data("bind-index");itemRefView.setUp($itemRef,model.sectionParts[index])}}),$selected=$(".selected",$items),$selected.length>0&&$items.trigger("itemselect.creator",$selected)}function addItemRef($refList,index,itemData){var $itemRef,$items=$refList.children("li");index=index||$items.length,itemData.identifier=qtiTestHelper.getIdentifier("item",data.identifiers),itemData.index=index+1,$itemRef=$(templates.itemref(itemData)),index>0?$itemRef.insertAfter($items.eq(index-1)):$itemRef.appendTo($refList),$refList.trigger("add",[$itemRef,itemData])
}function rubricBlocks(){model.rubricBlocks||(model.rubricBlocks=[]),$(".rubricblock",$section).each(function(){var $rubricBlock=$(this),index=$rubricBlock.data("bind-index");model.rubricBlocks[index]||(model.rubricBlocks[index]={}),rubricBlockView.setUp($rubricBlock,model.rubricBlocks[index],data)})}function addRubricBlock(){$(".rublock-adder",$section).adder({target:$(".rubricblocks",$section),content:templates.rubricblock,templateData:function(cb){cb({"qti-type":"rubricBlock",index:$(".rubricblock",$section).length,content:[],views:[1]})}}),$(document).on("add.binder","#"+$section.attr("id")+" .rubricblocks",function(e,$rubricBlock){if("binder"===e.namespace&&$rubricBlock.hasClass("rubricblock")){var index=$rubricBlock.data("bind-index");
$(".rubricblock-binding",$rubricBlock).html("<p>&nbsp;</p>"),rubricBlockView.setUp($rubricBlock,model.rubricBlocks[index],data)}})}var $actionContainer=$("h2",$section);actions.properties($actionContainer,"section",model,propHandler),actions.move($actionContainer,"sections","section"),itemRefs(),acceptItemRefs(),rubricBlocks(),addRubricBlock()},listenActionState=function(){var $sections;$(".sections").each(function(){$sections=$(".section",$(this)),actions.removable($sections,"h2"),actions.movable($sections,"section","h2")}),$(document).on("delete",function(e){var $parent,$target=$(e.target);$target.hasClass("section")&&($parent=$target.parents(".sections"),actions.disable($parent.find(".section"),"h2"))
}).on("add change undo.deleter deleted.deleter",function(e){var $target=$(e.target);($target.hasClass("section")||$target.hasClass("sections"))&&($sections=$(".section",$target.hasClass("sections")?$target:$target.parents(".sections")),actions.removable($sections,"h2"),actions.movable($sections,"section","h2"))}).on("open.toggler",".rub-toggler",function(e){"toggler"===e.namespace&&$(this).parents("h2").addClass("active")}).on("close.toggler",".rub-toggler",function(e){"toggler"===e.namespace&&$(this).parents("h2").removeClass("active")})};return{setUp:setUp,listenActionState:listenActionState}}),define("taoQtiTest/controller/creator/views/testpart",["jquery","lodash","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/section","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest"],function($,_,actions,sectionView,templates,qtiTestHelper){var setUp=function($testPart,model,data){function propHandler(propView){var $view=propView.getView(),$identifier=$("[data-bind=identifier]",$testPart);
$view.on("change.binder",function(e,model){"binder"===e.namespace&&"testPart"===model["qti-type"]&&$identifier.text(model.identifier)}),$testPart.on("delete",function(){null!==propView&&propView.destroy()})}function sections(){model.assessmentSections||(model.assessmentSections=[]),$(".section",$testPart).each(function(){var $section=$(this),index=$section.data("bind-index");model.assessmentSections[index]||(model.assessmentSections[index]={}),sectionView.setUp($section,model.assessmentSections[index],data)})}function addSection(){$(".section-adder",$testPart).adder({target:$(".sections",$testPart),content:templates.section,templateData:function(cb){var sectionIndex=$(".section",$testPart).length;
cb({"qti-type":"assessmentSection",identifier:qtiTestHelper.getIdentifier("assessmentSection",data.identifiers),title:"Section "+(sectionIndex+1),index:0,sectionParts:[]})}}),$(document).off("add.binder","#"+$testPart.attr("id")+" .sections").on("add.binder","#"+$testPart.attr("id")+" .sections",function(e,$section){if("binder"===e.namespace&&$section.hasClass("section")){var index=$section.data("bind-index");sectionView.setUp($section,model.assessmentSections[index],data)}})}var $actionContainer=$("h1",$testPart);actions.properties($actionContainer,"testpart",model,propHandler),actions.move($actionContainer,"testparts","testpart"),sections(),addSection()},listenActionState=function(){var $testParts=$(".testpart");
actions.removable($testParts,"h1"),actions.movable($testParts,"testpart","h1"),$(".testparts").on("delete",function(e){var $target=$(e.target);$target.hasClass("testpart")&&actions.disable($(".testpart"),"h1")}).on("add change undo.deleter deleted.deleter",function(e){var $target=$(e.target);($target.hasClass("testpart")||$target.hasClass("testparts"))&&($testParts=$(".testpart"),actions.removable($testParts,"h1"),actions.movable($testParts,"testpart","h1"))})};return{setUp:setUp,listenActionState:listenActionState}}),define("taoQtiTest/controller/creator/views/test",["jquery","lodash","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/testpart","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest"],function($,_,actions,testPartView,templates,qtiTestHelper){var testView=function(model,data){function testParts(){model.testParts||(model.testParts=[]),$(".testpart").each(function(){var $testPart=$(this),index=$testPart.data("bind-index");
model.testParts[index]||(model.testParts[index]={}),testPartView.setUp($testPart,model.testParts[index],data)})}function propHandler(propView){var $view=propView.getView(),$title=$(".test-creator-test > h1 [data-bind=title]");$view.on("change.binder",function(e,model){"binder"===e.namespace&&"assessmentTest"===model["qti-type"]&&$title.text(model.title)})}function addTestPart(){$(".testpart-adder").adder({target:$(".testparts"),content:templates.testpart,templateData:function(cb){var testPartIndex=$(".testpart").length;cb({"qti-type":"testPart",identifier:qtiTestHelper.getIdentifier("testPart",data.identifiers),index:testPartIndex,navigationMode:0,submissionMode:0,assessmentSections:[{"qti-type":"assessmentSection",identifier:qtiTestHelper.getIdentifier("assessmentSection",data.identifiers),title:"Section 1",index:0,sectionParts:[]}]})
}}),$(document).off("add.binder",".testparts").on("add.binder",".testparts",function(e,$testPart,added){"binder"===e.namespace&&$testPart.hasClass("testpart")&&testPartView.setUp($testPart,model.testParts[added.index],data)})}actions.properties($(".test-creator-test > h1"),"test",model,propHandler),testParts(),addTestPart()};return testView}),define("taoQtiTest/controller/creator/encoders/dom2qti",["jquery","lodash"],function($,_){var getAttributes=function(object){return _.omit(object,["qti-type","content","xmlBase","lang","label"])},attrToStr=function(attributes){return _.reduce(attributes,function(acc,value,key){return _.isNumber(value)||_.isString(value)&&!_.isEmpty(value)?acc+" "+key+'="'+value+'" ':acc
},"")},Dom2QtiEncoder={encode:function(modelValue){var self=this;if(_.isArray(modelValue))return _.reduce(modelValue,function(result,value){return result+self.encode(value)},"");if(_.isObject(modelValue)&&modelValue["qti-type"]){if("textRun"===modelValue["qti-type"])return modelValue.content;var startTag="<"+modelValue["qti-type"]+attrToStr(getAttributes(modelValue));return modelValue.content?startTag+">"+self.encode(modelValue.content)+"</"+modelValue["qti-type"]+">":startTag+"/>"}return modelValue},decode:function(nodeValue){var self=this,$nodeValue=nodeValue instanceof $?nodeValue:$(nodeValue),result=[];return _.forEach($nodeValue,function(elt){var object;
3===elt.nodeType?_.isEmpty($.trim(elt.nodeValue))||result.push({"qti-type":"textRun",content:elt.nodeValue,xmlBase:""}):1===elt.nodeType&&(object=_.merge({"qti-type":elt.nodeName.toLowerCase(),id:"","class":"",xmlBase:"",lang:"",label:""},_.transform(elt.attributes,function(acc,value){acc[value.nodeName]=value.nodeValue})),elt.childNodes.length>0&&(object.content=self.decode(elt.childNodes)),result.push(object))}),result}};return Dom2QtiEncoder}),define("taoQtiTest/controller/creator/creator",["module","jquery","lodash","helpers","i18n","ui/feedback","core/databindcontroller","taoQtiTest/controller/creator/views/item","taoQtiTest/controller/creator/views/test","taoQtiTest/controller/creator/views/testpart","taoQtiTest/controller/creator/views/section","taoQtiTest/controller/creator/views/itemref","taoQtiTest/controller/creator/encoders/dom2qti","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest","core/validator/validators"],function(module,$,_,helpers,__,feedback,DataBindController,itemView,testView,testPartView,sectionView,itemrefView,Dom2QtiEncoder,templates,qtiTestHelper,validators){function loadItems(url,search,cb){$.getJSON(url,{pattern:search},function(data){data&&"function"==typeof cb&&cb(data)
})}var Controller={routes:{},identifiers:[],start:function(options){var self=this,$container=$("#test-creator"),$saver=$("#saver");options=_.merge(module.config(),options||{}),options.routes=options.routes||{},options.labels=options.labels||{},$("#authoringBack").on("click",function(e){e.preventDefault(),window.History&&window.History.back()}),itemView(_.partial(loadItems,options.routes.items));var binderOptions=_.merge(options.routes,{filters:{isItemRef:function(value){return qtiTestHelper.filterQtiType(value,"assessmentItemRef")},isSection:function(value){return qtiTestHelper.filterQtiType(value,"assessmentSection")}},encoders:{dom2qti:Dom2QtiEncoder},templates:templates,beforeSave:function(model){return qtiTestHelper.addMissingQtiType(model),qtiTestHelper.consolidateModel(model),!0
}}),binder=DataBindController.takeControl($container,binderOptions).get(function(model){self.identifiers=qtiTestHelper.extractIdentifiers(model),validators.register("testIdFormat",qtiTestHelper.idFormatValidator()),validators.register("testIdAvailable",qtiTestHelper.idAvailableValidator(self.identifiers)),testView(model,{uri:options.uri,identifiers:self.identifiers,labels:options.labels}),testPartView.listenActionState(),sectionView.listenActionState(),itemrefView.listenActionState(),itemrefView.resize(),$(window).off("resize.qti-test-creator").on("resize.qti-test-creator",function(){itemrefView.resize()})});$saver.on("click",function(event){event.preventDefault(),$saver.hasClass("disabled")||($saver.attr("disabled",!0).addClass("disabled"),binder.save(function(){$saver.attr("disabled",!1).removeClass("disabled"),feedback().success(__("Test Saved"))
},function(){$saver.attr("disabled",!1).removeClass("disabled")}))})}};return Controller}),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("spin",e):t.Spinner=e()}(this,function(){function o(t,e){var o,i=document.createElement(t||"div");for(o in e)i[o]=e[o];return i}function n(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function s(t,o,n,s){var a=["opacity",o,~~(100*t),n,s].join("-"),f=.01+n/s*100,l=Math.max(1-(1-t)/o*(100-f),t),u=i.substring(0,i.indexOf("Animation")).toLowerCase(),d=u&&"-"+u+"-"||"";return e[a]||(r.insertRule("@"+d+"keyframes "+a+"{0%{opacity:"+l+"}"+f+"%{opacity:"+t+"}"+(f+.01)+"%{opacity:1}"+(f+o)%100+"%{opacity:"+t+"}100%{opacity:"+l+"}}",r.cssRules.length),e[a]=1),a
}function a(e,i){var n,r,o=e.style;for(i=i.charAt(0).toUpperCase()+i.slice(1),r=0;r<t.length;r++)if(n=t[r]+i,void 0!==o[n])return n;return void 0!==o[i]?i:void 0}function f(t,e){for(var i in e)t.style[a(t,i)||i]=e[i];return t}function l(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)void 0===t[o]&&(t[o]=i[o])}return t}function u(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function d(t,e){return"string"==typeof t?t:t[e%t.length]}function c(t){return"undefined"==typeof this?new c(t):void(this.opts=l(t||{},c.defaults,p))}function h(){function t(t,e){return o("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)
}r.addRule(".spin-vml","behavior:url(#default#VML)"),c.prototype.lines=function(e,i){function s(){return f(t("group",{coordsize:r+" "+r,coordorigin:-o+" "+-o}),{width:r,height:r})}function p(e,r,a){n(l,n(f(s(),{rotation:360/i.lines*e+"deg",left:~~r}),n(f(t("roundrect",{arcsize:i.corners}),{width:o,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),t("fill",{color:d(i.color,e),opacity:i.opacity}),t("stroke",{opacity:0}))))}var u,o=i.length+i.width,r=2*o,a=2*-(i.width+i.length)+"px",l=f(s(),{position:"absolute",top:a,left:a});if(i.shadow)for(u=1;u<=i.lines;u++)p(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=i.lines;u++)p(u);
return n(e,l)},c.prototype.opacity=function(t,e,i,o){var n=t.firstChild;o=o.shadow&&o.lines||0,n&&e+o<n.childNodes.length&&(n=n.childNodes[e+o],n=n&&n.firstChild,n=n&&n.firstChild,n&&(n.opacity=i))}}var i,t=["webkit","Moz","ms","O"],e={},r=function(){var t=o("style",{type:"text/css"});return n(document.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};c.defaults={},l(c.prototype,{spin:function(t){this.stop();var a,l,e=this,n=e.opts,r=e.el=f(o(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex}),s=n.radius+n.length+n.width;
if(t&&(t.insertBefore(r,t.firstChild||null),l=u(t),a=u(r),f(r,{left:("auto"==n.left?l.x-a.x+(t.offsetWidth>>1):parseInt(n.left,10)+s)+"px",top:("auto"==n.top?l.y-a.y+(t.offsetHeight>>1):parseInt(n.top,10)+s)+"px"})),r.setAttribute("role","progressbar"),e.lines(r,e.opts),!i){var c,d=0,p=(n.lines-1)*(1-n.direction)/2,h=n.fps,m=h/n.speed,y=(1-n.opacity)/(m*n.trail/100),g=m/n.lines;!function v(){d++;for(var t=0;t<n.lines;t++)c=Math.max(1-(d+(n.lines-t)*g)%m*y,n.opacity),e.opacity(r,t*n.direction+p,c,n);e.timeout=e.el&&setTimeout(v,~~(1e3/h))}()}return e},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this
},lines:function(t,e){function u(t,i){return f(o(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*r+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var l,r=0,a=(e.lines-1)*(1-e.direction)/2;r<e.lines;r++)l=f(o(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:i&&s(e.opacity,e.trail,a+r*e.direction,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&n(l,f(u("#000","0 0 4px #000"),{top:"2px"})),n(t,n(l,u(d(e.color,r),"0 0 1px rgba(0,0,0,.1)")));
return t},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var m=f(o("group"),{behavior:"url(#default#VML)"});return!a(m,"transform")&&m.adj?h():i=a(m,"animation"),c}),define("serviceApi/ServiceApi",["jquery","urlParser","iframeResizer"],function($,UrlParser){function ServiceApi(baseUrl,parameters,serviceCallId,stateStorage,userService){this.baseUrl=baseUrl,this.parameters=parameters,this.connected=!1,this.serviceCallId=serviceCallId,this.state=stateStorage,this.userService=userService,this.onFinishCallback,this.onKillCallback,this.onDisplayChangeCallback}return ServiceApi.SIG_SUCCESS=0,ServiceApi.SIG_ERROR=1,ServiceApi.prototype.loadInto=function(frame,connected){var self=this,$frame=$(frame),callUrl=this.getCallUrl(),isCORSAllowed=new UrlParser(callUrl).checkCORS();
$frame.on("load",function(){$(document).on("serviceready",function(){self.connect(frame,function(){$(document).off("serviceready"),"function"==typeof connected&&connected()})}),isCORSAllowed===!0&&(frame.contentWindow.__knownParent__=!0)}),$frame.attr("src",callUrl)},ServiceApi.prototype.connect=function(frame,connected){this.connected===!1&&frame.contentWindow&&"function"==typeof frame.contentWindow.onServiceApiReady&&(frame.contentWindow.onServiceApiReady(this),this.connected=!0,"function"==typeof connected&&connected())},ServiceApi.prototype.getCallUrl=function(){var params=this.parameters||{};return params.serviceCallId=this.serviceCallId,this.baseUrl+"?"+$.param(params)
},ServiceApi.prototype.getUserPropertyValues=function(property,callback){this.userService.get(property,callback)},ServiceApi.prototype.getServiceCallId=function(){return this.serviceCallId},ServiceApi.prototype.getState=function(){return this.state.get()},ServiceApi.prototype.setState=function(state,callback){return this.state.set(state,callback)},ServiceApi.prototype.getParameter=function(identifier){return"undefined"!=typeof this.parameters[identifier]?this.parameters[identifier]:null},ServiceApi.prototype.onFinish=function(callback){this.onFinishCallback=callback},ServiceApi.prototype.onKill=function(callback){this.onKillCallback=callback},ServiceApi.prototype.kill=function(callback){"function"==typeof this.onKillCallback?this.onKillCallback(callback):callback(0)
},ServiceApi.prototype.finish=function(valueArray){"function"==typeof this.onFinishCallback&&this.onFinishCallback(valueArray)},ServiceApi}),define("serviceApi/UserInfoService",["jquery"],function($){function UserInfoService(requestUrl,data){this.data=data,this.requestUrl=requestUrl}return UserInfoService.prototype.get=function(property,callback){this.data.hasOwnProperty(property)?"function"==typeof callback&&callback(this.data[property]):$.ajax({url:this.requestUrl,data:{property:property},type:"post",dataType:"json",success:function(service,callback){return function(r){for(key in r.data)service.data[key]=r.data[key];"function"==typeof callback&&callback(service.data[property])
}}(this,callback)})},UserInfoService}),define("serviceApi/StateStorage",["jquery"],function($){function StateStorage(state,submitUrl){this.state=state,this.submitUrl=submitUrl}return StateStorage.prototype.get=function(callback){return"function"==typeof callback&&callback(this.state),this.state},StateStorage.prototype.set=function(state,callback){state===this.state?"function"==typeof callback&&callback():$.ajax({url:this.submitUrl,data:{state:state},type:"post",dataType:"json",success:"function"==typeof callback?callback:null})},StateStorage}),define("jquery.trunc",["jquery"],function($){var methods={init:function(options){var all=this,instanceOptions=$.extend(!0,{},$.fn.badonkatrunc.defaultOptions,options);
return"horizontal"!=instanceOptions.fitDirection&&"vertical"!=instanceOptions.fitDirection?($.error("'"+instanceOptions.fitDirection+"' is not a valid fit direction. Use 'horizontal' or 'vertical.'"),this):"start"!=instanceOptions.truncateLocation&&"middle"!=instanceOptions.truncateLocation&&"end"!=instanceOptions.truncateLocation?($.error("'"+instanceOptions.truncateLocation+"' is not a valid truncation location. Use 'start,' 'middle' or 'end.'"),this):instanceOptions.minimumFontSize>instanceOptions.maximumFontSize?($.error("Minimum font size can not exceed the maximum font size."),this):instanceOptions.minimumLetterSpacing>instanceOptions.maximumLetterSpacing?($.error("Minimum letter spacing can not exceed the maximum letter spacing."),this):this.each(function(){var $this=$(this),data=$(this).data("badonkatrunc");
data&&$this.badonkatrunc("destroy");var instance=pluginInstance($this,instanceOptions,all);$(this).data("badonkatrunc",instance),instance.init(),instance.options.automaticSizeTracking&&resizeMonitor.add(instance)})},destroy:function(){return this.each(function(){var $this=$(this),data=$this.data("badonkatrunc");data.destroy(),resizeMonitor.remove(data),dirtyMonitor.remove(data),$(window).unbind(".badonkatrunc"),$this.removeData("badonkatrunc")})},refresh:function(){return this.each(function(){var $this=$(this),data=$this.data("badonkatrunc");dirtyMonitor.remove(data),data.refresh()})},changeContents:function(newContents){return this.each(function(){var $this=$(this),data=$this.data("badonkatrunc");
data.contentHtml="string"==typeof newContents?$("<span></span>").text(newContents).html():$(newContents).html(),dirtyMonitor.add(data)})}};$.fn.badonkatrunc=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.badonkatrunc"):methods.init.apply(this,arguments)},$.fn.badonkatrunc.settings={sizeTrackingTimeout:1e3/60},$.fn.badonkatrunc.defaultOptions={automaticSizeTracking:!1,fitDirection:"horizontal",minimumFontSize:1,maximumFontSize:1,fontSizeSynced:!1,minimumLetterSpacing:0,maximumLetterSpacing:0,letterSpacingSynced:!1,truncate:!0,truncateString:"&hellip;",truncateLocation:"end",truncateOnlyWholeWords:!1,extraOptimizeLimit:8},$.fn.btrunc=$.fn.badonkatrunc;
var pluginInstance=function($target,options,$targetGroup){var createRenderState=function(content,fontSize,letterSpacing){return{content:content,fontSize:fontSize,letterSpacing:letterSpacing}},instance={target:$target,options:options,refresh:function(){var self=this,view=createHtmlTextView(this.contentHtml),text=this.contentHtml,fontSize=this.options.maximumFontSize,letterSpacing=this.options.maximumLetterSpacing,renderFunc=function(){var state=createRenderState(text,fontSize,letterSpacing);self.renderState(state)},overflowFunc=function(){return self.getCurrentOverflow()};if(this.options.maximumFontSize-this.options.minimumFontSize>0&&optimize(self.options.minimumFontSize,self.options.maximumFontSize,function(value){fontSize=value,renderFunc()
},overflowFunc),this.options.maximumLetterSpacing-this.options.minimumLetterSpacing>0){var truncationLevel=1;this.options.truncate&&optimize(0,1,function(value){truncationLevel=value,text=getTruncatedHtml(view,self.options.truncateString,self.options.truncateLocation,value,!0),optimize(self.options.minimumLetterSpacing,0,function(value){letterSpacing=value,renderFunc()},overflowFunc),renderFunc()},overflowFunc),1==truncationLevel&&optimize(self.options.minimumLetterSpacing,self.options.maximumLetterSpacing,function(value){letterSpacing=value,renderFunc()},overflowFunc)}this.options.truncate&&optimize(0,1,function(value){text=getTruncatedHtml(view,self.options.truncateString,self.options.truncateLocation,value,self.options.truncateOnlyWholeWords),renderFunc()
},overflowFunc,this.options.extraOptimizeLimit),this.renderState(createRenderState(text,fontSize,letterSpacing),!this.options.truncate),this.currentOptimalState=this.currentRenderedState,this.syncFonts()},syncFonts:function(){if($targetGroup.length>1&&(this.options.fontSizeSynced||this.options.letterSpacingSynced)){for(var lowestFontSize=this.currentOptimalState.fontSize,lowestLetterSpacing=this.currentOptimalState.letterSpacing,i=0;i<$targetGroup.length;i++){var groupInstance=$($targetGroup[i]).data("badonkatrunc");null!=groupInstance&&null!=groupInstance.currentOptimalState&&(groupInstance.currentOptimalState.fontSize<lowestFontSize&&(lowestFontSize=groupInstance.currentOptimalState.fontSize),groupInstance.currentOptimalState.letterSpacing<lowestLetterSpacing&&(lowestLetterSpacing=groupInstance.currentOptimalState.letterSpacing))
}for(var i=0;i<$targetGroup.length;i++){var groupInstance=$($targetGroup[i]).data("badonkatrunc");null!=groupInstance&&groupInstance.acceptFontSync(lowestFontSize,lowestLetterSpacing)}}},acceptFontSync:function(fontSize,letterSpacing){var self=this,view=createHtmlTextView(this.contentHtml),text=this.contentHtml;null!=this.currentOptimalState&&(this.options.fontSizeSynced||(fontSize=this.currentOptimalState.fontSize),this.options.letterSpacingSynced||(letterSpacing=this.currentOptimalState.letterSpacing));var renderFunc=function(){self.renderState(createRenderState(text,fontSize,letterSpacing))},overflowFunc=function(){return self.getCurrentOverflow()};this.options.truncate&&optimize(0,1,function(value){text=getTruncatedHtml(view,self.options.truncateString,self.options.truncateLocation,value,self.options.truncateOnlyWholeWords),renderFunc()
},overflowFunc),this.renderState(createRenderState(text,fontSize,letterSpacing),!this.options.truncate)},init:function(){this.contentHtml=this.target.html(),this.settingsWrapper=$('<span style="margin: 0px; padding: 0px; border: 0px;"></span>'),this.settingsWrapper.addClass("badonkatrunc-wrapper"),$.browser.mozilla||$.browser.opera||$.browser.msie&&"7.0"==$.browser.version||this.settingsWrapper.css("display","block"),this.target.empty(),this.target.append(this.settingsWrapper),this.refresh()},destroy:function(){this.target.empty(),this.target.append(this.contentHtml)},renderState:function(state,forceAllowWrap){this.settingsWrapper.css("font-size",state.fontSize+"em"),this.settingsWrapper.css("letter-spacing",state.letterSpacing+"em");
var whiteSpace=forceAllowWrap||"horizontal"!=this.options.fitDirection?"normal":"nowrap";this.settingsWrapper.css("white-space",whiteSpace),this.settingsWrapper.empty(),this.settingsWrapper.append(state.content),this.currentRenderedState=state},getCurrentOverflow:function(){var wrapper=this.settingsWrapper[0],overflow="horizontal"==this.options.fitDirection?wrapper.scrollWidth-$target.width():wrapper.offsetHeight-$target.height();return overflow}};return instance},createDispatcher=function(updateFunc,addFunc,removeFunc,updateTimeout){var dispatcherInstance={_instances:[],_updateLoop:function(){if($.isFunction(updateFunc))for(var i=0;i<dispatcherInstance._instances.length;i++)updateFunc(dispatcherInstance._instances[i]);
null!=updateTimeout?dispatcherInstance._instances.length>0&&setTimeout(dispatcherInstance._updateLoop,updateTimeout):dispatcherInstance._instances=[]},add:function(instance){-1==$.inArray(instance,this._instances)&&($.isFunction(addFunc)&&addFunc(instance),this._instances.push(instance),1==this._instances.length&&(null==updateTimeout?setTimeout(this._updateLoop):this._updateLoop()))},remove:function(instance){var index=$.inArray(instance,this._instances);-1!=index&&(this._instances.splice(index,1),$.isFunction(removeFunc)&&removeFunc(instance))}};return dispatcherInstance},resizeMonitor=createDispatcher(function(instance){instance.elementSizeCache.update()},function(instance){instance.elementSizeCache={width:null,height:null,update:function(){var newWidth=instance.target.width(),newHeight=instance.target.height(),hasChanged=null!=this.width&&newWidth!=this.width||null!=this.height&&newHeight!=this.height;
this.width=newWidth,this.height=newHeight,hasChanged&&this.changed()},changed:function(){dirtyMonitor.add(instance)}}},function(instance){instance.elementSizeCache=void 0},$.fn.badonkatrunc.settings.sizeTrackingTimeout),dirtyMonitor=createDispatcher(function(instance){instance.refresh.apply(instance)},null,null,null),getTruncatedHtml=function(htmlTextView,truncateString,truncateLocation,amount,wordRounded){var text=htmlTextView.text;if(amount>1&&(amount=1),0>amount&&(amount=0),1==amount)return htmlTextView.html;var getTruncatedRange=function(begin,length){var words=text.split(" "),totalEntities=wordRounded?words.length:text.length,entityBegin=totalEntities*begin,entityLength=totalEntities*length;
if(wordRounded){var getCharacterPosition=function(wordIndex){for(var characterCount=0,i=0;wordIndex>i;i++)characterCount+=words[i].length+1;return characterCount},endWord=entityBegin+entityLength;entityBegin=getCharacterPosition(entityBegin),entityLength=getCharacterPosition(endWord)-entityBegin}return htmlTextView.getHtmlSubstring(entityBegin,entityLength)};switch(truncateLocation){case"middle":var amountPerSide=amount/2,left=getTruncatedRange(0,amountPerSide),right=getTruncatedRange(1-amountPerSide,amountPerSide);return $.trim(left)+" "+truncateString+" "+$.trim(right);case"start":var truncated=getTruncatedRange(1-amount,amount);return truncateString+$.trim(truncated);
case"end":var truncated=getTruncatedRange(0,amount);return $.trim(truncated)+truncateString}},createHtmlTextView=function(contentHtml){var $content=$("<span></span>");$content.html(contentHtml);var view={html:contentHtml,text:$content.text(),getHtmlSubstring:function(index,length){var element=$content.clone()[0],totalProcessedLength=0,totalOutputLength=0,nodesWithinRange=[],withinRange=!1,stripOutOfRangeTextInElement=function(node){if(3==node.nodeType){for(var dataLength=node.data.length,newData="",wasWithinRange=!1,i=0;dataLength>i;i++)totalProcessedLength++,totalProcessedLength>=index&&length>totalOutputLength?(withinRange=!0,wasWithinRange=!0,newData+=node.data.substr(i,1),totalOutputLength++):1==withinRange&&(withinRange=!1);
node.data=newData,wasWithinRange&&nodesWithinRange.push(node)}else if(1==node.nodeType){withinRange&&nodesWithinRange.push(node);for(var childCount=node.childNodes.length,i=0;childCount>i;i++)stripOutOfRangeTextInElement(node.childNodes[i])}};stripOutOfRangeTextInElement(element);for(var parentNodesToKeep=[],markParentNodesToKeep=function(element){var keepNode=function(node){parentNodesToKeep.push(node),null!=node.parentNode&&keepNode(node.parentNode)};keepNode(element)},nodesWithinRangeCount=nodesWithinRange.length,t=0;nodesWithinRangeCount>t;t++)markParentNodesToKeep(nodesWithinRange[t]);var removeUnusedNodes=function(node){for(var nodesToRemove=[],childNodeCount=node.childNodes.length,i=0;childNodeCount>i;i++){var childNode=node.childNodes[i];
3!=childNode.nodeType&&(-1==$.inArray(childNode,parentNodesToKeep)?nodesToRemove.push(childNode):removeUnusedNodes(childNode))}for(var i=0;i<nodesToRemove.length;i++){var node=nodesToRemove[i];node.parentNode.removeChild(node)}};return removeUnusedNodes(element),$(element).html()}};return view},optimize=function(min,max,actionFunc,overflowFunc,extraOptimizeLimit){for(var currentMax=max,currentMin=min,currentValue=max,lastResult=null,mostOptimalResult=null,mostOptimalValue=null,sameResultCount=0;;){actionFunc(currentValue);var result=overflowFunc();if(0>=result){var moreOptimal=!0;null!=mostOptimalResult&&(mostOptimalResult>result?moreOptimal=!1:result==mostOptimalResult&&mostOptimalValue>=currentValue&&(moreOptimal=!1)),moreOptimal&&(mostOptimalResult=result,mostOptimalValue=currentValue)
}if(result==lastResult&&(sameResultCount++,void 0==extraOptimizeLimit||sameResultCount==extraOptimizeLimit))return void(null!=mostOptimalValue&&actionFunc(mostOptimalValue));if(result>0){currentMax=currentValue;var difference=currentValue-currentMin;currentValue-=difference/2}else 0>=result&&(currentMin=currentValue,currentValue=currentMax);lastResult=result}}}),define("taoQtiTest/controller/runtime/testRunner",["jquery","lodash","spin","serviceApi/ServiceApi","serviceApi/UserInfoService","serviceApi/StateStorage","iframeResizer","iframeNotifier","i18n","mathJax","jquery.trunc","ui/progressbar"],function($,_,Spinner,ServiceApi,UserInfoService,StateStorage,iframeResizer,iframeNotifier,__,MathJax){var timerIds=[],currentTimes=[],lastDates=[],timeDiffs=[],waitingTime=0,TestRunner={TEST_STATE_INITIAL:0,TEST_STATE_INTERACTING:1,TEST_STATE_MODAL_FEEDBACK:2,TEST_STATE_SUSPENDED:3,TEST_STATE_CLOSED:4,TEST_NAVIGATION_LINEAR:0,TEST_NAVIGATION_NONLINEAR:1,TEST_ITEM_STATE_INTERACTING:1,beforeTransition:function(callback){iframeNotifier.parent("loading"),this.disableGui(),$("#qti-item, #qti-info, #qti-rubrics, #qti-timers").css("display","none"),"function"==typeof callback&&setTimeout(callback,waitingTime)
},afterTransition:function(){this.enableGui(),iframeNotifier.parent("unloading")},moveForward:function(){this.disableGui();var that=this;this.itemServiceApi.kill(function(){that.actionCall("moveForward")})},moveBackward:function(){this.disableGui();var that=this;this.itemServiceApi.kill(function(){that.actionCall("moveBackward")})},skip:function(){this.disableGui(),this.actionCall("skip")},timeout:function(){this.disableGui(),this.assessmentTestContext.isTimeout=!0,this.updateTimer(),this.actionCall("timeout")},comment:function(){$("#qti-comment > textarea").val(__("Your comment...")),$("#qti-comment").css("display","block"),$("#qti-comment > button").css("display","inline")
},closeComment:function(){$("#qti-comment").css("display","none")},emptyComment:function(){$("#qti-comment > textarea").val("")},storeComment:function(){var self=this;$.ajax({url:self.assessmentTestContext.commentUrl,cache:!1,async:!0,type:"POST",data:{comment:$("#qti-comment > textarea").val()},success:function(){self.closeComment()}})},update:function(assessmentTestContext){var self=this;$("#qti-item").remove();var $runner=$("#runner");$runner.css("height","auto"),this.assessmentTestContext=assessmentTestContext,this.itemServiceApi=eval(assessmentTestContext.itemServiceApiCall),this.updateContext(),this.updateProgress(),this.updateNavigation(),this.updateInformation(),this.updateRubrics(),this.updateTools(),this.updateTimer(),$itemFrame=$('<iframe id="qti-item" frameborder="0"/>'),$itemFrame.appendTo("#qti-content"),iframeResizer.autoHeight($itemFrame,"body"),(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?0:1)||$("#qti-content").css("overflow-y","scroll"),this.assessmentTestContext.itemSessionState===this.TEST_ITEM_STATE_INTERACTING&&self.assessmentTestContext.isTimeout===!1?($(document).on("serviceloaded",function(){self.afterTransition(),self.adjustFrame(),$itemFrame.show()
}),this.itemServiceApi.loadInto($itemFrame[0],function(){})):self.afterTransition()},updateInformation:function(){$("#qti-info").remove(),this.assessmentTestContext.isTimeout===!0?($('<div id="qti-info" class="info"></div>').prependTo("#qti-content"),$("#qti-info").html(__('Maximum time limit reached for item "%s".').replace("%s",this.assessmentTestContext.itemIdentifier))):this.assessmentTestContext.itemSessionState!==this.TEST_ITEM_STATE_INTERACTING&&($('<div id="qti-info" class="info"></div>').prependTo("#qti-content"),$("#qti-info").html(__('No more attempts allowed for item "%s".').replace("%s",this.assessmentTestContext.itemIdentifier)))},updateTools:function(){this.assessmentTestContext.allowComment===!0?$("#comment").css("display","inline"):$("#comment").css("display","none"),this.assessmentTestContext.allowSkipping===!0?this.assessmentTestContext.isLast===!1?($("#skip").css("display","inline"),$("#skip-end").css("display","none")):($("#skip-end").css("display","inline"),$("#skip").css("display","none")):($("#skip").css("display","none"),$("#skip-end").css("display","none"))
},updateTimer:function(){var self=this;$("#qti-timers").remove();for(var i=0;i<timerIds.length;i++)clearTimeout(timerIds[i]);if(timerIds=[],currentTimes=[],lastDates=[],timeDiffs=[],0==self.assessmentTestContext.isTimeout&&self.assessmentTestContext.itemSessionState==self.TEST_ITEM_STATE_INTERACTING&&this.assessmentTestContext.timeConstraints.length>0){$('<div id="qti-timers"></div>').prependTo("#qti-content");for(var i=0;i<this.assessmentTestContext.timeConstraints.length;i++){var cst=this.assessmentTestContext.timeConstraints[i];if(0==cst.allowLateSubmission){$('<div class="qti-timer"><span class="icon-time"></span> '+cst.source+" - "+self.formatTime(cst.seconds)+"</div>").appendTo("#qti-timers"),currentTimes[i]=cst.seconds,lastDates[i]=new Date,timeDiffs[i]=0,timerIndex=i,source=cst.source;
var superClosure=function(timerIndex,source){timerIds[timerIndex]=setInterval(function(){if(timeDiffs[timerIndex]+=(new Date).getTime()-lastDates[timerIndex].getTime(),timeDiffs[timerIndex]>=1e3){var seconds=timeDiffs[timerIndex]/1e3;currentTimes[timerIndex]-=seconds,timeDiffs[timerIndex]=0}currentTimes[timerIndex]<=0?($("#qti-timers > .qti-timer").eq(timerIndex).html(self.formatTime(Math.round(currentTimes[timerIndex]))),currentTimes[timerIndex]=0,clearInterval(timerIds[timerIndex]),$("#qti-item").css("display","none"),self.timeout()):($("#qti-timers > .qti-timer").eq(timerIndex).html('<span class="icon-time"></span> '+source+" - "+self.formatTime(Math.round(currentTimes[timerIndex]))),lastDates[timerIndex]=new Date)
},1e3)};superClosure(timerIndex,source)}}$("#qti-timers").css("display","block")}},updateRubrics:function(){if($("#qti-rubrics").remove(),this.assessmentTestContext.rubrics.length>0){for(var $rubrics=$('<div id="qti-rubrics"></div>'),i=0;i<this.assessmentTestContext.rubrics.length;i++)$rubrics.append(this.assessmentTestContext.rubrics[i]);$rubrics.find("a").bind("click keypress",function(){return window.open(this.href),!1}),$rubrics.prependTo("#qti-content"),MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub],$("#qti-rubrics")[0])}},updateNavigation:function(){this.assessmentTestContext.navigationMode===this.TEST_NAVIGATION_LINEAR?($("#move-backward").css("display","none"),$("#move-forward").css("display",this.assessmentTestContext.isLast===!0?"none":"inline"),$("#move-end").css("display",this.assessmentTestContext.isLast===!0?"inline":"none")):($("#qti-actions").css("display","block"),$("#move-forward").css("display",this.assessmentTestContext.isLast===!0?"none":"inline"),$("#move-end").css("display",this.assessmentTestContext.isLast===!0?"inline":"none"),$("#move-backward").css("display",this.assessmentTestContext.canMoveBackward===!0?"inline":"none"))
},updateProgress:function(){var considerProgress=this.assessmentTestContext.considerProgress;if($("#qti-test-progress").css("visibility",considerProgress===!0?"visible":"hidden"),considerProgress===!0){var ratio=Math.floor(this.assessmentTestContext.numberCompleted/this.assessmentTestContext.numberItems*100),label=__("Test completed at %d%%").replace("%d",ratio).replace("%%","%");$("#qti-progress-label").text(label),$("#qti-progressbar").progressbar("value",ratio)}},updateContext:function(){var testTitle=this.assessmentTestContext.testTitle,sectionTitle=(this.assessmentTestContext.testPartId,this.assessmentTestContext.sectionTitle);$("#qti-test-title").text(testTitle);
try{$("#qti-test-title, #qti-test-position").badonkatrunc("destroy")}catch(e){}$("#qti-test-position").empty().append('<span id="qti-section-title">'+sectionTitle+"</span>"),$("#qti-test-title, #qti-test-position").badonkatrunc().css("visibility","visible")},adjustFrame:function(){var actionsHeight=$("#qti-actions").outerHeight(),windowHeight=window.innerHeight?window.innerHeight:$(window).height(),navigationHeight=$("#qti-navigation").outerHeight(),newContentHeight=windowHeight-actionsHeight-navigationHeight,$content=$("#qti-content");$content.height(newContentHeight-parseInt($content.css("paddingTop"))-parseInt($content.css("paddingBottom")))},disableGui:function(){$("#qti-navigation button").addClass("disabled")
},enableGui:function(){$("#qti-navigation button").removeClass("disabled")},formatTime:function(totalSeconds){var sec_num=totalSeconds,hours=Math.floor(sec_num/3600),minutes=Math.floor((sec_num-3600*hours)/60),seconds=sec_num-3600*hours-60*minutes;10>hours&&(hours="0"+hours),10>minutes&&(minutes="0"+minutes),10>seconds&&(seconds="0"+seconds);var time=hours+":"+minutes+":"+seconds;return"± "+time},actionCall:function(action){var self=this;this.beforeTransition(function(){$.ajax({url:self.assessmentTestContext[action+"Url"],cache:!1,async:!0,dataType:"json",success:function(assessmentTestContext){assessmentTestContext.state===self.TEST_STATE_CLOSED?self.serviceApi.finish():self.update(assessmentTestContext)
}})})}};return{start:function(assessmentTestContext){$(document).ajaxError(function(event,jqxhr){403==jqxhr.status&&iframeNotifier.parent("serviceforbidden")}),window.onServiceApiReady=function(serviceApi){TestRunner.serviceApi=serviceApi,assessmentTestContext.state===TestRunner.TEST_STATE_CLOSED?serviceApi.finish():TestRunner.update(assessmentTestContext)},TestRunner.beforeTransition(),TestRunner.assessmentTestContext=assessmentTestContext,$("#skip, #skip-end").click(function(){$(this).hasClass("disabled")||TestRunner.skip()}),$("#move-forward, #move-end").click(function(){$(this).hasClass("disabled")||TestRunner.moveForward()}),$("#move-backward").click(function(){$(this).hasClass("disabled")||TestRunner.moveBackward()
}),$("#comment").click(function(){$(this).hasClass("disabled")||TestRunner.comment()}),$("#qti-comment-cancel").click(function(){TestRunner.closeComment()}),$("#qti-comment-send").click(function(){TestRunner.storeComment()}),$("#qti-comment > textarea").click(function(){TestRunner.emptyComment()}),$(window).bind("resize",function(){TestRunner.adjustFrame(),$("#qti-test-title, #qti-test-position").badonkatrunc()}),$(document).bind("loading",function(){iframeNotifier.parent("loading")}),$(document).bind("unloading",function(){iframeNotifier.parent("unloading")}),$("#qti-progressbar").progressbar(),iframeNotifier.parent("serviceready")}}});
//# sourceMappingURL=routes.js.map