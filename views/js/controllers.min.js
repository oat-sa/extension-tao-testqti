define("taoQtiTest/controller/routes",[],function(){"use strict";return{Creator:{css:"creator",actions:{index:"controller/creator/creator"}}}}),define("tpl!taoQtiTest/controller/creator/templates/testpart",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div id="',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{
hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="testpart clearfix">\n\n   <h1><span data-bind="identifier">',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</span>\n        <div class="actions"> \n            <div class="tlb">\n                <div class="tlb-top">\n                    <span class="tlb-box">\n                        <span class="tlb-bar">\n                            <span class="tlb-start"></span>\n                            <span class="tlb-group">\n                                <a href="#" class="tlb-button-off property-toggler" title="Test Part Properties"><span class="icon-settings"></span></a>\n                                <span class="tlb-separator"></span>\n                                <a href="#" class="tlb-button-off move-up" title="Move Up"><span class="icon-up"></span></a>\n                                <a href="#" class="tlb-button-off move-down" title="Move Down"><span class="icon-down"></span></a>\n                                <span class="tlb-separator"></span> \n                                <a href="#" class="tlb-button-off" title="Remove Test Part" data-delete="#',
(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'"><span class="icon-bin"></span></a>\n                            </span>\n                            <span class="tlb-end"></span>\n                        </span>  \n                        <!--<span class="tlb-bar">-->\n                            <!--<span class="tlb-start"></span>-->\n                            <!--<span class="tlb-text-button-box">-->\n                                <!--<a class="tlb-text-button-off section-adder">-->\n                                    <!--<span class="icon-add"></span>-->\n                                    <!--<span class="tlb-text">New Section</span>-->\n                                <!--</a>-->\n                            <!--</span>-->\n                            <!--<span class="tlb-end"></span>-->\n                        <!--</span>-->\n                    </span>   \n                </div>\n            </div>\n        </div>\n        <a href="#" class="toggler opened" data-toggle="#testpart-content-',
(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'"></a>\n    </h1>\n    <div id="testpart-content-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="testpart-content">\n        \n       <!-- assessmentTest/testPart/assessmentSections -->\n       <div class="sections" data-bind-each="assessmentSections" data-bind-tmpl="section" data-bind-filter="isSection"></div>\n\n        <button class="btn-info small section-adder">\n            <span class="icon-add"></span>New section\n        </button>\n    </div>\n</div>\n';
})}),define("tpl!taoQtiTest/controller/creator/templates/section",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div id="',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="section">\n\n<!-- assessmentTest/testPart/assessmentSection/title -->\n    <h2><span data-bind="title">',
(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</span>\n        <div class="actions">\n            <div class="tlb">\n                <div class="tlb-top">\n                    <span class="tlb-box">\n                        <span class="tlb-bar">\n                            <span class="tlb-start"></span>\n                            <span class="tlb-group">\n                                <a href="#" class="tlb-button-off rub-toggler" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Manage Rubric Blocks",options):helperMissing.call(depth0,"__","Manage Rubric Blocks",options)))+'" data-toggle="#rublocks-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" ><span class="icon-rubric"></span></a>\n                                <span class="tlb-separator"></span>\n                                <a href="#" class="tlb-button-off property-toggler" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={
hash:{},data:data},helper?helper.call(depth0,"Section Properties",options):helperMissing.call(depth0,"__","Section Properties",options)))+'"><span class="icon-settings"></span></a>\n                                <span class="tlb-separator"></span>\n                                <a href="#" class="tlb-button-off move-up disabled" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Move Up",options):helperMissing.call(depth0,"__","Move Up",options)))+'"><span class="icon-up"></span></a>\n                                <a href="#" class="tlb-button-off move-down disabled" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Move Down",options):helperMissing.call(depth0,"__","Move Down",options)))+'"><span class="icon-down"></span></a>\n                                <span class="tlb-separator"></span>\n                                <a href="#" class="tlb-button-off disabled" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Remove Section",options):helperMissing.call(depth0,"__","Remove Section",options)))+'" data-delete=":parent .section"><span class="icon-bin"></span></a>\n                            </span>\n                            <span class="tlb-end"></span>\n                        </span>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </h2>\n\n    <div id="rublocks-',
(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="rublocks clearfix toggled">\n        <h3>\n            <span class="title">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Rubric Blocks",options):helperMissing.call(depth0,"__","Rubric Blocks",options)))+'</span>\n        </h3>\n        <ol class="rubricblocks decimal" data-bind-each="rubricBlocks" data-bind-tmpl="rubricblock"></ol>\n        <button class="btn-info small rublock-adder">\n            <span class="icon-add"></span>'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"New Rubric Block",options):helperMissing.call(depth0,"__","New Rubric Block",options)))+'\n        </button>\n    </div>\n    <div class="itemrefs-wrapper">\n        <h3>\n            <span class="title">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Items",options):helperMissing.call(depth0,"__","Items",options)))+'</span>\n        </h3>\n        <ol class="itemrefs decimal clearfix" data-bind-each="sectionParts" data-bind-tmpl="itemref" data-bind-filter="isItemRef" data-msg="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={
hash:{},data:data},helper?helper.call(depth0,"Add selected item(s) here.",options):helperMissing.call(depth0,"__","Add selected item(s) here.",options)))+'"></ol>\n        <div class="itemref-placeholder">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Add selected item(s) here.",options):helperMissing.call(depth0,"__","Add selected item(s) here.",options)))+"\n        </div>\n    </div>\n</div>\n"})}),define("tpl!taoQtiTest/controller/creator/templates/rubricblock",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],
helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+='<li class="rubricblock">\n    <div class="actions">\n       <div class="tlb">\n            <div class="tlb-top">\n                <span class="tlb-box">\n                    <span class="tlb-bar">\n                        <span class="tlb-start"></span>\n                        <span class="tlb-group">\n                            <!--<a href="#" class="tlb-button-off property-toggler" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Rubric Block Properties",options):helperMissing.call(depth0,"__","Rubric Block Properties",options)))+'"><span class="icon-settings"></span></a>-->\n                            <!--<span class="tlb-separator"></span> -->\n                            <a href="#" class="tlb-button-off" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Remove Rubric Block",options):helperMissing.call(depth0,"__","Remove Rubric Block",options)))+'" data-delete=":parent .rubricblock"><span class="icon-bin"></span></a>\n                        </span>\n                        <span class="tlb-end"></span>\n                    </span>\n                </span>\n            </div>\n        </div>\n    </div>\n    <div class="rubricblock-content" contenteditable></div>\n    <div class="rubricblock-binding" data-bind="content" data-bind-html="true" data-bind-encoder="dom2qti"></div>\n</li>\n'})}),define("tpl!taoQtiTest/controller/creator/templates/itemref",["handlebars"],function(hb){
return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+="<li id='",(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"' data-uri='",(helper=helpers.href)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.href,stack1=typeof helper===functionType?helper.call(depth0,{
hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"' class='itemref'>\n    <span class='title truncate'>",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</span>\n    <div class="actions"> \n        <div class="tlb">\n            <div class="tlb-top">\n                <span class="tlb-box">\n                    <span class="tlb-bar">\n                        <span class="tlb-start"></span>\n                        <span class="tlb-group">\n                            <a href="#" class="tlb-button-off property-toggler" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Item Reference Properties",options):helperMissing.call(depth0,"__","Item Reference Properties",options)))+'"><span class="icon-settings"></span></a>\n                            <span class="tlb-separator"></span>\n                            <a href="#" class="tlb-button-off move-up" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Move Up",options):helperMissing.call(depth0,"__","Move Up",options)))+'"><span class="icon-up"></span></a>\n                            <a href="#" class="tlb-button-off move-down" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Move Down",options):helperMissing.call(depth0,"__","Move Down",options)))+'"><span class="icon-down"></span></a>\n                            <span class="tlb-separator"></span> \n                            <a href="#" class="tlb-button-off" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Remove Item Reference",options):helperMissing.call(depth0,"__","Remove Item Reference",options)))+'" data-delete=":parent .itemref"><span class="icon-bin"></span></a>\n                        </span>\n                        <span class="tlb-end"></span>\n                    </span>  \n                </span>   \n            </div>\n        </div>\n    </div>\n</li>\n';
})}),define("tpl!taoQtiTest/controller/creator/templates/item",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="\n     <li data-uri='",(helper=helpers.uri)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.uri,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"' class='truncate'>\n        ",(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data
}):helper),buffer+=escapeExpression(stack1)+" \n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.parent,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n     </li>\n"}function program2(depth0,data){var stack1,helper,buffer="";return buffer+="<span class='flag truncate' title=\"",(helper=helpers.parent)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.parent,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">',(helper=helpers.parent)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.parent,
stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return stack1=helpers.each.call(depth0,depth0,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n"})}),define("tpl!taoQtiTest/controller/creator/templates/test-props",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],
helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,functionType="function";return buffer+='<div class="test-props props clearfix">\n\n    <!-- test properties -->\n    <h3 data-bind="title"></h3>\n\n<!-- assessmentTest/identifier -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="test-identifier">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Identifier",options):helperMissing.call(depth0,"__","Identifier",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="test-identifier" data-bind="identifier" data-validate="$notEmpty; $testIdFormat; $testIdAvailable(original=',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+');" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"The principle identifier of the test.",options):helperMissing.call(depth0,"__","The principle identifier of the test.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/title -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="test-title">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Title",options):helperMissing.call(depth0,"__","Title",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="test-title" data-bind="title" data-validate="$notEmpty" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"The test title.",options):helperMissing.call(depth0,"__","The test title.",options)))+'\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .test-time-limits">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Time Limits",options):helperMissing.call(depth0,"__","Time Limits",options)))+'</h4>\n\n<!-- assessmentTest/timeLimits -->\n    <div class="test-time-limits toggled">\n\n\n\n<!-- assessmentTest/timeLimits/maxTime -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="test-max-time">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Maximum Duration",options):helperMissing.call(depth0,"__","Maximum Duration",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data
},helper?helper.call(depth0,"Maximum duration for the all test.",options):helperMissing.call(depth0,"__","Maximum duration for the all test.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/timeLimits/allowLateSubmission -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Late submission allowed",options):helperMissing.call(depth0,"__","Late submission allowed",options)))+'\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="test-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Whether a candidate's response that is beyond the maximum duration should still be accepted.",options):helperMissing.call(depth0,"__","Whether a candidate's response that is beyond the maximum duration should still be accepted.",options)))+"\n                </div>\n            </div>\n        </div>\n    </div>\n\n</div>\n"})}),define("tpl!taoQtiTest/controller/creator/templates/testpart-props",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;
return buffer+='<div id="testpart-props-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="testpart-props props clearfix">\n    <h3>',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</h3>\n\n    <form autocomplete="off">\n\n<!-- assessmentTest/testPart/identifier -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="testpart-identifier">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Identifier",options):helperMissing.call(depth0,"__","Identifier",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="testpart-identifier" data-bind="identifier" data-validate="$notEmpty; $idFormat; $testIdAvailable(original=',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,
stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+');" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The test part identifier.",options):helperMissing.call(depth0,"__","The test part identifier.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/navigationMode -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n               '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Navigation",options):helperMissing.call(depth0,"__","Navigation",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="radio" name="testpart-navigation-mode" value="0" checked="checked" data-bind="navigationMode" data-bind-encoder="number" />\n                    <span class="icon-radio"></span>\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Linear",options):helperMissing.call(depth0,"__","Linear",options)))+'\n                </label>\n                <label>\n                    <input type="radio" name="testpart-navigation-mode" value="1"  />\n                    <span class="icon-radio"></span>\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Non Linear",options):helperMissing.call(depth0,"__","Non Linear",options)))+'\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"The navigation mode determines the general paths that the candidate may take. A linear mode restricts the candidate to attempt each item in turn. Non Linear removes this restriction.",options):helperMissing.call(depth0,"__","The navigation mode determines the general paths that the candidate may take. A linear mode restricts the candidate to attempt each item in turn. Non Linear removes this restriction.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/submissionMode -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Submission",options):helperMissing.call(depth0,"__","Submission",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="radio" name="testpart-submission-mode" value="0" checked="checked" data-bind="submissionMode" data-bind-encoder="number" />\n                    <span class="icon-radio"></span>\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Individual",options):helperMissing.call(depth0,"__","Individual",options)))+'\n                </label>\n                <label>\n                    <input type="radio" name="testpart-submission-mode" value="1"  />\n                    <span class="icon-radio"></span>\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Simultaneous",options):helperMissing.call(depth0,"__","Simultaneous",options)))+'\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"The submission mode determines when the candidate's responses are submitted for response processing. A testPart in individual mode requires the candidate to submit their responses on an item-by-item basis. In simultaneous mode the candidate's responses are all submitted together at the end of the testPart.",options):helperMissing.call(depth0,"__","The submission mode determines when the candidate's responses are submitted for response processing. A testPart in individual mode requires the candidate to submit their responses on an item-by-item basis. In simultaneous mode the candidate's responses are all submitted together at the end of the testPart.",options)))+'\n                </div>\n            </div>\n        </div>\n\n        <h4 class="toggler closed" data-toggle="~ .testpart-item-session-control">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Item Session Control",options):helperMissing.call(depth0,"__","Item Session Control",options)))+'</h4>\n\n\n<!-- assessmentTest/testPart/itemSessionControl -->\n        <div class="testpart-item-session-control toggled">\n\n<!-- assessmentTest/testPart/itemSessionControl/maxAttempts -->\n            <div class="grid-row">\n                <div class="col-5">\n                    <label for="testpart-max-attempts">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Max Attempts",options):helperMissing.call(depth0,"__","Max Attempts",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <input name="testpart-max-attempts" type="text" data-increment="1" data-min="0" value="1" data-bind="itemSessionControl.maxAttempts" data-bind-encoder="number" />\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Controls the maximum number of attempts allowed. 0 means unlimited.",options):helperMissing.call(depth0,"__","Controls the maximum number of attempts allowed. 0 means unlimited.",options)))+'\n                    </div>\n                </div>\n            </div>\n\n<!-- assessmentTest/testPart/itemSessionControl/showFeedback -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-show-feedback">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Show Feedback",options):helperMissing.call(depth0,"__","Show Feedback",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="testpart-show-feedback" value="true" data-bind="itemSessionControl.showFeedback" data-bind-encoder="boolean" />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"This constraint affects the visibility of feedback after the end of the last attempt.",options):helperMissing.call(depth0,"__","This constraint affects the visibility of feedback after the end of the last attempt.",options)))+'\n                    </div>\n                </div>\n            </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/itemSessionControl/allowComment -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-allow-comment">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Allow Comment",options):helperMissing.call(depth0,"__","Allow Comment",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="testpart-allow-comment" value="true" data-bind="itemSessionControl.allowComment" data-bind-encoder="boolean" />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options):helperMissing.call(depth0,"__","This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options)))+'\n                    </div>\n                </div>\n            </div>\n\n<!-- assessmentTest/testPart/itemSessionControl/allowSkipping -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-allow-skipping">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Allow Skipping",options):helperMissing.call(depth0,"__","Allow Skipping",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="testpart-allow-skipping" value="true" checked="checked"  data-bind="itemSessionControl.allowSkipping" data-bind-encoder="boolean"   />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"If the candidate can skip the item, without submitting a response.",options):helperMissing.call(depth0,"__","If the candidate can skip the item, without submitting a response.",options)))+'\n                    </div>\n                </div>\n            </div>\n\n\n        </div>\n\n        <h4 class="toggler closed" data-toggle="~ .testpart-time-limits">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Time Limits",options):helperMissing.call(depth0,"__","Time Limits",options)))+'</h4>\n\n<!-- assessmentTest/testPart/timeLimits/minTime -->\n        <div class="testpart-time-limits toggled">\n\n\n\n<!-- assessmentTest/testPart/timeLimits/maxTime -->\n            <div class="grid-row">\n                <div class="col-5">\n                    <label for="testpart-max-time">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Maximum Duration",options):helperMissing.call(depth0,"__","Maximum Duration",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Maximum duration for this test part.",options):helperMissing.call(depth0,"__","Maximum duration for this test part.",options)))+'\n                    </div>\n                </div>\n            </div>\n\n<!-- assessmentTest/testPart/timeLimits/allowLateSubmission -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-allow-late-submission">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Late submission allowed",options):helperMissing.call(depth0,"__","Late submission allowed",options)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="section-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                    <div class="tooltip-content">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Whether a candidate's response that is beyond the maximum duration of the test part should still be accepted.",options):helperMissing.call(depth0,"__","Whether a candidate's response that is beyond the maximum duration of the test part should still be accepted.",options)))+"\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n"})}),define("tpl!taoQtiTest/controller/creator/templates/section-props",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),
data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div id="section-props-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="section-props props clearfix">\n    <h3>',(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</h3>\n\n<!-- assessmentTest/testPart/assessmentSection/identifier -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="section-identifier">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Identifier",options):helperMissing.call(depth0,"__","Identifier",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="section-identifier" data-bind="identifier" data-validate="$notEmpty; $idFormat; $testIdAvailable(original=',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{
hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+');" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The identifier of the section.",options):helperMissing.call(depth0,"__","The identifier of the section.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/title -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="section-title">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Title",options):helperMissing.call(depth0,"__","Title",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="section-title" data-bind="title" data-validate="$notEmpty" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"The section title.",options):helperMissing.call(depth0,"__","The section title.",options)))+'\n            </div>\n        </div>\n    </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/visible -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="section-visible">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Visible",options):helperMissing.call(depth0,"__","Visible",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="section-visible" value="true" checked="checked"  data-bind="visible" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"A visible section is one that is identifiable by the candidate.",options):helperMissing.call(depth0,"__","A visible section is one that is identifiable by the candidate.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/keepTogether -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="section-keep-together">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Keep Together",options):helperMissing.call(depth0,"__","Keep Together",options)))+'</label>\n        </div>\n\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="section-keep-together" value="true" checked="checked"  data-bind="keepTogether" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"An invisible section with a parent that is subject to shuffling can specify whether or not its children, which will appear to the candidate as if they were part of the parent, are shuffled as a block or mixed up with the other children of the parent section.",options):helperMissing.call(depth0,"__","An invisible section with a parent that is subject to shuffling can specify whether or not its children, which will appear to the candidate as if they were part of the parent, are shuffled as a block or mixed up with the other children of the parent section.",options)))+'\n            </div>\n        </div>\n    </div>\n\n    <!-- assessmentTest/testPart/assessmentSection/sectionPart/category -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="section-category">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Categories",options):helperMissing.call(depth0,"__","Categories",options)))+'</label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="section-category" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Section level category enables configuring the categories of its composing items all at once. A category in gray means that all items have that category. A category in white means that only a few items have that category.",options):helperMissing.call(depth0,"__","Section level category enables configuring the categories of its composing items all at once. A category in gray means that all items have that category. A category in white means that only a few items have that category.",options)))+'\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-selection">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Selection",options):helperMissing.call(depth0,"__","Selection",options)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/selection -->\n    <div class="section-selection toggled">\n\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-enable-selection">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Enable selection",options):helperMissing.call(depth0,"__","Enable selection",options)))+'</label>\n            </div>\n\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-enable-selection"  />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/selection/select -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="section-select">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Select",options):helperMissing.call(depth0,"__","Select",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n            </div>\n            <div class="col-6">\n                <input name="section-select" type="text" data-increment="1" data-min="0" value="0" data-bind="selection.select"  data-bind-encoder="number" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"The number of child elements to be selected.",options):helperMissing.call(depth0,"__","The number of child elements to be selected.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/selection/withReplacement -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-with-replacement">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"With Replacement",options):helperMissing.call(depth0,"__","With Replacement",options)))+'</label>\n            </div>\n\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-with-replacement" value="true" data-bind="selection.withReplacement"  data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"When selecting child elements each element is normally eligible for selection once only.",options):helperMissing.call(depth0,"__","When selecting child elements each element is normally eligible for selection once only.",options)))+'\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-ordering">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Ordering",options):helperMissing.call(depth0,"__","Ordering",options)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/ordering -->\n    <div class="section-ordering toggled">\n<!-- assessmentTest/testPart/assessmentSection/ordering/shuffle -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-shuffle">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Shuffle",options):helperMissing.call(depth0,"__","Shuffle",options)))+'</label>\n            </div>\n\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-shuffle" value="true" data-bind="ordering.shuffle"  data-bind-encoder="boolean"  />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"If set, it causes the order of the child elements to be randomized, otherwise it uses the order in which the child elements are defined.",options):helperMissing.call(depth0,"__","If set, it causes the order of the child elements to be randomized, otherwise it uses the order in which the child elements are defined.",options)))+'\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-item-session-control">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Item Session Control",options):helperMissing.call(depth0,"__","Item Session Control",options)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl -->\n    <div class="section-item-session-control toggled">\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/maxAttempts -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="section-max-attempts">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Max Attempts",options):helperMissing.call(depth0,"__","Max Attempts",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <input name="section-max-attempts" type="text" data-increment="1" data-min="0" value="1" data-bind="itemSessionControl.maxAttempts" data-bind-encoder="number" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={
hash:{},data:data},helper?helper.call(depth0,"Controls the maximum number of attempts allowed. 0 means unlimited.",options):helperMissing.call(depth0,"__","Controls the maximum number of attempts allowed. 0 means unlimited.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/showFeedback -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-show-feedback">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Show Feedback",options):helperMissing.call(depth0,"__","Show Feedback",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-show-feedback" value="true" data-bind="itemSessionControl.showFeedback" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"This constraint affects the visibility of feedback after the end of the last attempt.",options):helperMissing.call(depth0,"__","This constraint affects the visibility of feedback after the end of the last attempt.",options)))+'\n                </div>\n            </div>\n        </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/allowComment -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-allow-comment">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Allow Comment",options):helperMissing.call(depth0,"__","Allow Comment",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-allow-comment" value="true"  data-bind="itemSessionControl.allowComment" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options):helperMissing.call(depth0,"__","This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/allowSkipping -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-allow-skipping">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Allow Skipping",options):helperMissing.call(depth0,"__","Allow Skipping",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-allow-skipping" value="true" checked="checked" data-bind="itemSessionControl.allowSkipping" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"If the candidate can skip the item, without submitting a response.",options):helperMissing.call(depth0,"__","If the candidate can skip the item, without submitting a response.",options)))+'\n                </div>\n            </div>\n        </div>\n\n\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-time-limits">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Time Limits",options):helperMissing.call(depth0,"__","Time Limits",options)))+'</h4>\n\n<!-- assessmentTest/timeLimits -->\n    <div class="section-time-limits toggled">\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/timeLimits/maxTime -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="section-max-time">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Maximum Duration",options):helperMissing.call(depth0,"__","Maximum Duration",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data
},helper?helper.call(depth0,"Maximum duration for this section.",options):helperMissing.call(depth0,"__","Maximum duration for this section.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/timeLimits/allowLateSubmission -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-allow-late-submission">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Late submission allowed",options):helperMissing.call(depth0,"__","Late submission allowed",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Whether a candidate's response that is beyond the maximum duration of the section should still be accepted.",options):helperMissing.call(depth0,"__","Whether a candidate's response that is beyond the maximum duration of the section should still be accepted.",options)))+"\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"})}),define("tpl!taoQtiTest/controller/creator/templates/itemref-props",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};
var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div id="itemref-props-',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="itemref-props props clearfix">\n\n    <h3>',(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</h3>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/identifier -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-identifier">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Identifier",options):helperMissing.call(depth0,"__","Identifier",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="itemref-identifier" data-bind="identifier" data-validate="$notEmpty; $testIdFormat; $testIdAvailable(original=',(helper=helpers.identifier)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.identifier,stack1=typeof helper===functionType?helper.call(depth0,{
hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+');" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"The identifier of the item reference.",options):helperMissing.call(depth0,"__","The identifier of the item reference.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/href -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-href">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Reference",options):helperMissing.call(depth0,"__","Reference",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="itemref-href" data-bind="href" readonly="readonly" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"The reference.",options):helperMissing.call(depth0,"__","The reference.",options)))+'\n            </div>\n        </div>\n    </div>\n    \n<!-- assessmentTest/testPart/assessmentSection/sectionPart/category -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-category">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Categories",options):helperMissing.call(depth0,"__","Categories",options)))+'</label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="itemref-category" data-bind="categories" data-bind-encoder="str2array" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Items can optionally be assigned to one or more categories.",options):helperMissing.call(depth0,"__","Items can optionally be assigned to one or more categories.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/required -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="itemref-required">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required",options):helperMissing.call(depth0,"__","Required",options)))+'</label>\n        </div>\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="itemref-required" value="true" data-bind="required" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"If required it must appear (at least once) in the selection.",options):helperMissing.call(depth0,"__","If required it must appear (at least once) in the selection.",options)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/fixed -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="itemref-fixed">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Fixed",options):helperMissing.call(depth0,"__","Fixed",options)))+'</label>\n        </div>\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="itemref-fixed" value="true" data-bind="fixed" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Not shuffled, the position remains fixed.",options):helperMissing.call(depth0,"__","Not shuffled, the position remains fixed.",options)))+'\n            </div>\n        </div>\n    </div>\n\n\n    <h4 class="toggler closed" data-toggle="~ .itemref-item-session-control">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Item Session Control",options):helperMissing.call(depth0,"__","Item Session Control",options)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl -->\n    <div class="itemref-item-session-control toggled">\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/maxAttempts -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="itemref-max-attempts">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Max Attempts",options):helperMissing.call(depth0,"__","Max Attempts",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <input name="itemref-max-attempts" type="text" data-increment="1" data-min="0" value="1" data-bind="itemSessionControl.maxAttempts" data-bind-encoder="number" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={
hash:{},data:data},helper?helper.call(depth0,"Controls the maximum number of attempts allowed. 0 means unlimited.",options):helperMissing.call(depth0,"__","Controls the maximum number of attempts allowed. 0 means unlimited.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/showFeedback -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-show-feedback">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Show Feedback",options):helperMissing.call(depth0,"__","Show Feedback",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-show-feedback" value="true" data-bind="itemSessionControl.showFeedback" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"This constraint affects the visibility of feedback after the end of the last attempt.",options):helperMissing.call(depth0,"__","This constraint affects the visibility of feedback after the end of the last attempt.",options)))+'\n                </div>\n            </div>\n        </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/allowComment -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-allow-comment">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},
helper?helper.call(depth0,"Allow Comment",options):helperMissing.call(depth0,"__","Allow Comment",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-allow-comment" value="true"  data-bind="itemSessionControl.allowComment" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options):helperMissing.call(depth0,"__","This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/allowSkipping -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-allow-skipping">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Allow Skipping",options):helperMissing.call(depth0,"__","Allow Skipping",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-allow-skipping" value="true" checked="checked" data-bind="itemSessionControl.allowSkipping" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"If the candidate can skip the item, without submitting a response.",options):helperMissing.call(depth0,"__","If the candidate can skip the item, without submitting a response.",options)))+'\n                </div>\n            </div>\n        </div>\n\n\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .itemref-time-limits">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Time Limits",options):helperMissing.call(depth0,"__","Time Limits",options)))+'</h4>\n\n<!-- assessmentTest/timeLimits -->\n    <div class="itemref-time-limits toggled">\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/timeLimits/maxTime -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="itemref-max-time">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Maximum Duration",options):helperMissing.call(depth0,"__","Maximum Duration",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data
},helper?helper.call(depth0,"Maximum duration for this item.",options):helperMissing.call(depth0,"__","Maximum duration for this item.",options)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/timeLimits/allowLateSubmission -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-allow-late-submission">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Late submission allowed",options):helperMissing.call(depth0,"__","Late submission allowed",options)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Whether a candidate's response that is beyond the maximum duration of the item should still be accepted.",options):helperMissing.call(depth0,"__","Whether a candidate's response that is beyond the maximum duration of the item should still be accepted.",options)))+"\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"})}),define("tpl!taoQtiTest/controller/creator/templates/rubricblock-props",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};
var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,functionType="function";return buffer+='<div class="rubricblock-props props clearfix">\n\n    <h3>'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Rubric Block",options):helperMissing.call(depth0,"__","Rubric Block",options)))+": ",(helper=helpers.index)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.index,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</h3>\n\n <!--assessmentTest/testPart/assessmentSection/sectionPart/rubrickBlocK/views -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-identifier">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Views",options):helperMissing.call(depth0,"__","Views",options)))+' <abbr title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Required field",options):helperMissing.call(depth0,"__","Required field",options)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <select name="view" multiple="multiple" data-bind="views">\n                <option value="author">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Author",options):helperMissing.call(depth0,"__","Author",options)))+'</option>\n                <option value="candidate">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Candidate",options):helperMissing.call(depth0,"__","Candidate",options)))+'</option>\n                <option value="proctor">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Proctor",options):helperMissing.call(depth0,"__","Proctor",options)))+'</option>\n                <option value="scorer">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Scorer",options):helperMissing.call(depth0,"__","Scorer",options)))+'</option>\n                <option value="testConstructor">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Test constructor",options):helperMissing.call(depth0,"__","Test constructor",options)))+'</option>\n                <option value="tutor">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Tutor",options):helperMissing.call(depth0,"__","Tutor",options)))+'</option>\n            </select>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Who can view the rubric block during the delivery.",options):helperMissing.call(depth0,"__","Who can view the rubric block during the delivery.",options)))+"\n            </div>\n        </div>\n    </div>\n\n</div>\n"})}),define("taoQtiTest/controller/creator/templates/index",["tpl!taoQtiTest/controller/creator/templates/testpart","tpl!taoQtiTest/controller/creator/templates/section","tpl!taoQtiTest/controller/creator/templates/rubricblock","tpl!taoQtiTest/controller/creator/templates/itemref","tpl!taoQtiTest/controller/creator/templates/item","tpl!taoQtiTest/controller/creator/templates/test-props","tpl!taoQtiTest/controller/creator/templates/testpart-props","tpl!taoQtiTest/controller/creator/templates/section-props","tpl!taoQtiTest/controller/creator/templates/itemref-props","tpl!taoQtiTest/controller/creator/templates/rubricblock-props"],function(testPart,section,rubricBlock,itemRef,item,testProps,testPartProps,sectionProps,itemRefProps,rubricBlockProps){
"use strict";return{testpart:testPart,section:section,itemref:itemRef,item:item,rubricblock:rubricBlock,properties:{test:testProps,testpart:testPartProps,section:sectionProps,itemref:itemRefProps,rubricblock:rubricBlockProps}}}),define("taoQtiTest/controller/creator/views/item",["jquery","taoQtiTest/controller/creator/templates/index"],function($,templates){"use strict";var itemTemplate=templates.item,itemView=function(loadItems){function setUpLiveSearch(){var timeout,liveSearch=function(){var pattern=$search.val();(pattern.length>1||0===pattern.length)&&(clearTimeout(timeout),timeout=setTimeout(function(){loadItems(pattern,function(items){update(items)})},300));
};$search.keyup(liveSearch).siblings(".ctrl").click(liveSearch)}function update(items){disableSelection(),$itemBox.empty().append(itemTemplate(items)),enableSelection()}function disableSelection(){$panel.data("selectable")&&$panel.selectable("disable")}function enableSelection(){$panel.data("selectable")?$panel.selectable("enable"):$panel.selectable({filter:"li",selected:function(event,ui){$(ui.selected).addClass("selected")},unselected:function(event,ui){$(ui.unselected).removeClass("selected")},stop:function(){$(this).trigger("itemselect.creator",$(".selected"))}})}var $panel=$(".test-creator-items .item-selection"),$search=$("#item-filter"),$itemBox=$(".item-box",$panel);
"function"==typeof loadItems&&loadItems(void 0,function(items){update(items),setUpLiveSearch()})};return itemView}),define("taoQtiTest/controller/creator/views/property",["jquery","ui","core/databinder","taoQtiTest/controller/creator/templates/index"],function($,ui,DataBinder,templates){"use strict";var propView=function(tmplName,model){function propValidation(){$view.on("validated.group",function(e,isValid){if("group"===e.namespace){var $togglers=$("#test-creator .property-toggler, #saver");isValid===!0?$togglers.removeClass("disabled"):$togglers.addClass("disabled")}}),$view.groupValidator()}var $view,$container=$(".test-creator-props"),template=templates.properties[tmplName],open=function(){
var databinder;$container.children(".props").hide().trigger("propclose.propview"),$view=$(template(model)).appendTo($container).filter(".props"),ui.startDomComponent($view),databinder=new DataBinder($view,model),databinder.bind(),propValidation(),$view.trigger("propopen.propview")},getView=function(){return $view},isOpen=function(){return"none"!==$view.css("display")},onOpen=function(cb){$view.on("propopen.propview",function(e){e.stopPropagation(),cb()})},onClose=function(cb){$view.on("propclose.propview",function(e){e.stopPropagation(),cb()})},destroy=function(){$view.remove()},toggle=function(){$container.children(".props").not($view).hide().trigger("propclose.propview"),
isOpen()?$view.hide().trigger("propclose.propview"):$view.show().trigger("propopen.propview")};return{open:open,getView:getView,isOpen:isOpen,onOpen:onOpen,onClose:onClose,destroy:destroy,toggle:toggle}};return propView}),define("taoQtiTest/controller/creator/views/actions",["jquery","taoQtiTest/controller/creator/views/property"],function($,propertyView){"use strict";function properties($container,template,model,cb){var propView=null;$container.find(".property-toggler").on("click",function(e){e.preventDefault();var $elt=$(this);$(this).hasClass(disabledClass)||($elt.blur(),null===propView?($container.addClass(activeClass),$elt.addClass(btnOnClass),propView=propertyView(template,model),
propView.open(),propView.onOpen(function(){$container.addClass(activeClass),$elt.addClass(btnOnClass)}),propView.onClose(function(){$container.removeClass(activeClass),$elt.removeClass(btnOnClass)}),"function"==typeof cb&&cb(propView)):propView.toggle())})}function move($actionContainer,containerClass,elementClass){var $element=$actionContainer.parents("."+elementClass),$container=$element.parents("."+containerClass);$(".move-up",$actionContainer).click(function(e){var $elements,index;return e.preventDefault(),$element.is(":animated")?!1:($elements=$("."+elementClass,$container),index=$elements.index($element),void(index>0&&$element.fadeOut(200,function(){$element.insertBefore($("."+elementClass+" :eq("+(index-1)+")",$container)).fadeIn(400,function(){
$container.trigger("change")})})))}),$(".move-down",$actionContainer).click(function(e){var $elements,index;return e.preventDefault(),$element.is(":animated")?!1:($elements=$("."+elementClass,$container),index=$elements.index($element),void(index<$elements.length-1&&$elements.length>1&&$element.fadeOut(200,function(){$element.insertAfter($("."+elementClass+" :eq("+(index+1)+")",$container)).fadeIn(400,function(){$container.trigger("change")})})))})}function movable($container,elementClass,actionContainerElt){$container.each(function(){var $elt=$(this),$actionContainer=$(actionContainerElt,$elt),index=$container.index($elt),$moveUp=$(".move-up",$actionContainer),$moveDown=$(".move-down",$actionContainer);
1===$container.length?($moveUp.addClass(disabledClass),$moveDown.addClass(disabledClass)):0===index?($moveUp.addClass(disabledClass),$moveDown.removeClass(disabledClass)):index>=$container.length-1?($moveDown.addClass(disabledClass),$moveUp.removeClass(disabledClass)):($moveUp.removeClass(disabledClass),$moveDown.removeClass(disabledClass))})}function removable($container,actionContainerElt){$container.each(function(){var $elt=$(this),$actionContainer=$(actionContainerElt,$elt),$delete=$("[data-delete]",$actionContainer);$container.length<=1?$delete.addClass(disabledClass):$delete.removeClass(disabledClass)})}function disable($container,actionContainerElt){$container.find(actionContainerElt).find("[data-delete],.move-up,.move-down").addClass(disabledClass);
}function enable($container,actionContainerElt){$container.find(actionContainerElt).find("[data-delete],.move-up,.move-down").removeClass(disabledClass)}var disabledClass="disabled",activeClass="active",btnOnClass="tlb-button-on";return{properties:properties,move:move,removable:removable,movable:movable,disable:disable,enable:enable}}),define("taoQtiTest/controller/creator/views/itemref",["jquery","lodash","i18n","taoQtiTest/controller/creator/views/actions"],function($,_,__,actions){"use strict";var setUp=function($itemRef,model){function propHandler(propView){function removePropHandler(e){null!==propView&&propView.destroy()}categoriesProperty(propView.getView()),
$itemRef.parents(".testpart").on("delete",removePropHandler),$itemRef.parents(".section").on("delete",removePropHandler),$itemRef.on("delete",removePropHandler)}function categoriesProperty($view){function initCategories(){$select.select2("val",model.categories)}var $select=$view.find("[name=itemref-category]");$select.select2({width:"100%",tags:[],multiple:!0,tokenSeparators:[","," ",";"],formatNoMatches:function(){return __("Enter a category")},maximumInputLength:32}),initCategories(),$view.on("propopen.propview",function(){initCategories()})}var $actionContainer=$(".actions",$itemRef);actions.properties($actionContainer,"itemref",model,propHandler),actions.move($actionContainer,"itemrefs","itemref"),
resize()},listenActionState=function(){$(".itemrefs").each(function(){actions.movable($(".itemref",$(this)),"itemref",".actions")}),$(document).on("delete",function(e){var $parent,$target=$(e.target);$target.hasClass("itemref")&&($parent=$target.parents(".itemrefs"),actions.disable($parent.find(".itemref"),".actions"))}).on("add change undo.deleter deleted.deleter",".itemrefs",function(e){var $parent,$target=$(e.target);($target.hasClass("itemref")||$target.hasClass("itemrefs"))&&($parent=$(".itemref",$target.hasClass("itemrefs")?$target:$target.parents(".itemrefs")),actions.enable($parent,".actions"),actions.movable($parent,"itemref",".actions"))})},resize=_.throttle(function(){
var $refs=$(".itemrefs").first(),$actions=$(".itemref .actions").first(),width=$refs.innerWidth()-$actions.outerWidth();$(".itemref > .title").width(width)},100);return{setUp:setUp,listenActionState:listenActionState,resize:resize}}),define("taoQtiTest/controller/creator/helpers/ckConfigurator",["ui/ckeditor/ckConfigurator","mathJax"],function(ckConfigurator,mathJax){"use strict";var getConfig=function(editor,toolbarType,options){return options=options||{},options.underline=!0,ckConfigurator.getConfig(editor,toolbarType,options)};return{getConfig:getConfig}}),define("taoQtiTest/controller/creator/views/rubricblock",["jquery","lodash","taoQtiTest/controller/creator/views/actions","helpers","ckeditor","taoQtiTest/controller/creator/helpers/ckConfigurator"],function($,_,actions,helpers,ckeditor,ckConfigurator){
"use strict";var ckConfig=ckConfigurator.getConfig(ckeditor,"qtiBlock"),filterPlugin=function(plugin){return _.contains(["taoqtiimage","taoqtimedia","taoqtimaths","taoqtiinclude"],plugin)};ckConfig.plugins=_.reject(ckConfig.plugins.split(","),filterPlugin).join(","),ckConfig.extraPlugins=_.reject(ckConfig.extraPlugins.split(","),filterPlugin).join(",");var setUp=function($rubricBlock,model,data){function propHandler(propView){function removePropHandler(e){null!==propView&&propView.destroy()}rbViews(propView.getView()),$rubricBlock.parents(".testpart").on("delete",removePropHandler),$rubricBlock.parents(".section").on("delete",removePropHandler),$rubricBlock.on("delete",removePropHandler);
}function rbViews($propContainer){var $select=$("select",$propContainer);$select.select2({width:"100%"}).on("select2-removed",function(e){0===$select.select2("val").length&&$select.select2("val",[1])}),0===$select.select2("val").length&&$select.select2("val",[1])}function setUpEditor(){var editor,$rubricBlockBinding=$(".rubricblock-binding",$rubricBlock),$rubricBlockContent=$(".rubricblock-content",$rubricBlock),syncRubricBlockContent=_.throttle(function(){$rubricBlockBinding.html($rubricBlockContent.html()).trigger("change")},100);$rubricBlockContent.empty().html($rubricBlockBinding.html()),editor=ckeditor.inline($rubricBlockContent[0],ckConfig),editor.on("change",function(e){
syncRubricBlockContent()})}actions.properties($rubricBlock,"rubricblock",model,propHandler),setUpEditor()};return{setUp:setUp}}),define("taoQtiTest/controller/creator/helpers/qtiTest",["lodash","i18n"],function(_,__){"use strict";var qtiTestHelper={extractIdentifiers:function(obj){var self=this,identifiers=[];return _.has(obj,"identifier")&&(identifiers=identifiers.concat(obj.identifier.toLowerCase())),_.flatten(_.forEach(obj,function(value){identifiers=identifiers.concat("object"==typeof value?self.extractIdentifiers(value):[])}),!0),identifiers},getIdentifier:function(qtiType,lockedIdentifiers){var suggestion,index=1,glue="-";do suggestion=qtiType+glue+index++;while(_.contains(lockedIdentifiers,suggestion.toLowerCase()));
return lockedIdentifiers.push(suggestion.toLowerCase()),suggestion},idFormatValidator:function(){var qtiIdPattern=/^[_a-zA-Z]{1}[a-zA-Z0-9\-._]{0,31}$/i;return{name:"idFormat",message:__("is not a valid identifier (alphanum, underscore, dash and dots)"),validate:function(value,callback){"function"==typeof callback&&callback(qtiIdPattern.test(value))}}},testidFormatValidator:function(){var qtiTestIdPattern=/^\S+$/;return{name:"testIdFormat",message:__("is not a valid identifier (everything except spaces)"),validate:function(value,callback){"function"==typeof callback&&callback(qtiTestIdPattern.test(value))}}},idAvailableValidator:function(lockedIdentifiers){return{
name:"testIdAvailable",message:__("is already used in the test."),validate:function(value,callback,options){"function"==typeof callback&&callback(!_.contains(_.values(lockedIdentifiers),value.toLowerCase())||options.original&&value===options.original)}}},filterQtiType:function(value,type){return value["qti-type"]&&value["qti-type"]===type},addMissingQtiType:function(collection,parentType){var self=this;_.forEach(collection,function(value,key){!_.isObject(value)||_.isArray(value)||_.has(value,"qti-type")||(_.isNumber(key)?parentType&&(value["qti-type"]=parentType):value["qti-type"]=key),_.isArray(value)?self.addMissingQtiType(value,key.replace(/s$/,"")):_.isObject(value)&&self.addMissingQtiType(value);
})},consolidateModel:function(model){if(model&&model.testParts&&_.isArray(model.testParts)&&model.testParts[0]){var testPart=model.testParts[0];testPart.assessmentSections&&_.isArray(testPart.assessmentSections)&&_.forEach(testPart.assessmentSections,function(assessmentSection,key){assessmentSection.ordering&&void 0!==assessmentSection.ordering.shuffle&&assessmentSection.ordering.shuffle===!1&&delete assessmentSection.ordering,assessmentSection.rubricBlocks&&_.isArray(assessmentSection.rubricBlocks)&&(0===assessmentSection.rubricBlocks.length||1===assessmentSection.rubricBlocks.length&&0===assessmentSection.rubricBlocks[0].content.length?delete assessmentSection.rubricBlocks:assessmentSection.rubricBlocks.length>0&&_.forEach(assessmentSection.rubricBlocks,function(rubricBlock){
rubricBlock.views=["candidate"]}))})}return model}};return qtiTestHelper}),define("taoQtiTest/controller/creator/helpers/sectionCategory",["lodash","core/errorHandler"],function(_,errorHandler){"use strict";function isValidSectionModel(model){return _.isObject(model)&&"assessmentSection"===model["qti-type"]&&_.isArray(model.sectionParts)}function setCategories(model,categories){var oldCategories=getCategories(model),removed=_.difference(oldCategories.all,categories),propagated=_.difference(categories,oldCategories.all);addCategories(model,propagated),removeCategories(model,removed)}function getCategories(model){if(isValidSectionModel(model)){var categories=_.map(model.sectionParts,function(itemRef){
return"assessmentItemRef"===itemRef["qti-type"]&&_.isArray(itemRef.categories)?_.compact(itemRef.categories):void 0}),arrays=_.values(categories),union=_.union.apply(null,arrays),propagated=_.intersection.apply(null,arrays),partial=_.difference(union,propagated);return{all:union.sort(),propagated:propagated.sort(),partial:partial.sort()}}errorHandler["throw"](_ns,"invalid tool config format")}function addCategories(model,categories){isValidSectionModel(model)?_.each(model.sectionParts,function(itemRef){"assessmentItemRef"===itemRef["qti-type"]&&(_.isArray(itemRef.categories)||(itemRef.categories=[]),itemRef.categories=_.union(itemRef.categories,categories))}):errorHandler["throw"](_ns,"invalid tool config format");
}function removeCategories(model,categories){isValidSectionModel(model)?_.each(model.sectionParts,function(itemRef){"assessmentItemRef"===itemRef["qti-type"]&&_.isArray(itemRef.categories)&&(itemRef.categories=_.difference(itemRef.categories,categories))}):errorHandler["throw"](_ns,"invalid tool config format")}var _ns=".sectionCategory";return{isValidSectionModel:isValidSectionModel,setCategories:setCategories,getCategories:getCategories,addCategories:addCategories,removeCategories:removeCategories}}),define("taoQtiTest/controller/creator/views/section",["jquery","lodash","uri","i18n","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/itemref","taoQtiTest/controller/creator/views/rubricblock","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest","taoQtiTest/controller/creator/helpers/sectionCategory"],function($,_,uri,__,actions,itemRefView,rubricBlockView,templates,qtiTestHelper,sectionCategory){
"use strict";var setUp=function($section,model,data){function propHandler(propView){function removePropHandler(){null!==propView&&propView.destroy()}var $view=propView.getView(),$selectionSwitcher=$("[name=section-enable-selection]",$view),$selectionSelect=$("[name=section-select]",$view),$selectionWithRep=$("[name=section-with-replacement]",$view),switchSelection=function(){$selectionSwitcher.prop("checked")===!0?($selectionSelect.incrementer("enable"),$selectionWithRep.removeClass("disabled")):($selectionSelect.incrementer("disable"),$selectionWithRep.addClass("disabled"))};$selectionSwitcher.on("change",switchSelection),$selectionSwitcher.on("change",function(){
$selectionSwitcher.prop("checked")||($selectionSelect.val(0),$selectionWithRep.prop("checked",!1),delete model.selection)}),$selectionSwitcher.prop("checked",!!model.selection).trigger("change");var $title=$("[data-bind=title]",$section);$view.on("change.binder",function(e,model){"binder"===e.namespace&&"assessmentSection"===model["qti-type"]&&$title.text(model.title)}),$section.parents(".testpart").on("deleted.deleter",removePropHandler),$section.on("deleted.deleter",removePropHandler),categoriesProperty($view)}function itemRefs(){model.sectionParts||(model.sectionParts=[]),$(".itemref",$section).each(function(){var $itemRef=$(this),index=$itemRef.data("bind-index");
model.sectionParts[index]||(model.sectionParts[index]={}),itemRefView.setUp($itemRef,model.sectionParts[index]),$itemRef.find(".title").text(data.labels[uri.encode($itemRef.data("uri"))])})}function acceptItemRefs(){var $selected,$items=$(".test-creator-items");$items.on("itemselect.creator",function(e){var selection=Array.prototype.slice.call(arguments,1),$placeholder=$(".itemref-placeholder",$section),$placeholders=$(".itemref-placeholder");selection.length>0?$placeholder.show().off("click").on("click",function(e){var categories,defaultItemData={};model.itemSessionControl&&!_.isUndefined(model.itemSessionControl.maxAttempts)&&(defaultItemData.itemSessionControl=_.clone(model.itemSessionControl)),
categories=sectionCategory.getCategories(model),defaultItemData.categories=categories.propagated,_.forEach(selection,function(item){var $item=$(item);addItemRef($(".itemrefs",$section),void 0,_.defaults({href:uri.decode($item.data("uri")),label:$.trim($item.clone().children().remove().end().text()),"qti-type":"assessmentItemRef"},defaultItemData))}),$(".ui-selected",$items).removeClass("ui-selected").removeClass("selected"),$placeholders.hide().off("click")}):$placeholders.hide().off("click")}),$(document).off("add.binder","#"+$section.attr("id")+" .itemrefs").on("add.binder","#"+$section.attr("id")+" .itemrefs",function(e,$itemRef){if("binder"===e.namespace&&$itemRef.hasClass("itemref")){
var index=$itemRef.data("bind-index");itemRefView.setUp($itemRef,model.sectionParts[index])}}),$selected=$(".selected",$items),$selected.length>0&&$items.trigger("itemselect.creator",$selected)}function addItemRef($refList,index,itemData){var $itemRef,$items=$refList.children("li");index=index||$items.length,itemData.identifier=qtiTestHelper.getIdentifier("item",data.identifiers),itemData.index=index+1,$itemRef=$(templates.itemref(itemData)),index>0?$itemRef.insertAfter($items.eq(index-1)):$itemRef.appendTo($refList),$refList.trigger("add",[$itemRef,itemData])}function rubricBlocks(){model.rubricBlocks||(model.rubricBlocks=[]),$(".rubricblock",$section).each(function(){
var $rubricBlock=$(this),index=$rubricBlock.data("bind-index");model.rubricBlocks[index]||(model.rubricBlocks[index]={}),rubricBlockView.setUp($rubricBlock,model.rubricBlocks[index],data)}),model.rubricBlocks.length>0&&$(".rub-toggler",$section).trigger("click")}function addRubricBlock(){$(".rublock-adder",$section).adder({target:$(".rubricblocks",$section),content:templates.rubricblock,templateData:function(cb){cb({"qti-type":"rubricBlock",index:$(".rubricblock",$section).length,content:[],views:[1]})}}),$(document).on("add.binder","#"+$section.attr("id")+" .rubricblocks",function(e,$rubricBlock){if("binder"===e.namespace&&$rubricBlock.hasClass("rubricblock")){
var index=$rubricBlock.data("bind-index");$(".rubricblock-binding",$rubricBlock).html("<p>&nbsp;</p>"),rubricBlockView.setUp($rubricBlock,model.rubricBlocks[index],data)}})}function categoriesProperty($view){function initCategories(){var categories=sectionCategory.getCategories(model);$select.select2("val",categories.all),$select.siblings(".select2-container").find(".select2-search-choice").each(function(){var $li=$(this),content=$li.find("div").text();_.indexOf(categories.partial,content)>=0&&$li.addClass("partial")})}function setCategories(categories){sectionCategory.setCategories(model,categories)}var $select=$("[name=section-category]",$view);$select.select2({
width:"100%",tags:[],multiple:!0,tokenSeparators:[","," ",";"],formatNoMatches:function(){return __("Enter a category")},maximumInputLength:32}).on("change",function(e){setCategories(e.val)}),initCategories(),$view.on("propopen.propview",function(){initCategories()})}var $actionContainer=$("h2",$section);actions.properties($actionContainer,"section",model,propHandler),actions.move($actionContainer,"sections","section"),itemRefs(),acceptItemRefs(),rubricBlocks(),addRubricBlock()},listenActionState=function(){var $sections;$(".sections").each(function(){$sections=$(".section",$(this)),actions.removable($sections,"h2"),actions.movable($sections,"section","h2")}),
$(document).on("delete",function(e){var $parent,$target=$(e.target);$target.hasClass("section")&&($parent=$target.parents(".sections"),actions.disable($parent.find(".section"),"h2"))}).on("add change undo.deleter deleted.deleter",function(e){var $target=$(e.target);($target.hasClass("section")||$target.hasClass("sections"))&&($sections=$(".section",$target.hasClass("sections")?$target:$target.parents(".sections")),actions.removable($sections,"h2"),actions.movable($sections,"section","h2"))}).on("open.toggler",".rub-toggler",function(e){"toggler"===e.namespace&&$(this).parents("h2").addClass("active")}).on("close.toggler",".rub-toggler",function(e){"toggler"===e.namespace&&$(this).parents("h2").removeClass("active");
})};return{setUp:setUp,listenActionState:listenActionState}}),define("taoQtiTest/controller/creator/views/testpart",["jquery","lodash","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/section","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest"],function($,_,actions,sectionView,templates,qtiTestHelper){"use strict";var setUp=function($testPart,model,data){function propHandler(propView){var $view=propView.getView(),$identifier=$("[data-bind=identifier]",$testPart);$view.on("change.binder",function(e,model){"binder"===e.namespace&&"testPart"===model["qti-type"]&&$identifier.text(model.identifier);
}),$testPart.on("delete",function(e){null!==propView&&propView.destroy()})}function sections(){model.assessmentSections||(model.assessmentSections=[]),$(".section",$testPart).each(function(){var $section=$(this),index=$section.data("bind-index");model.assessmentSections[index]||(model.assessmentSections[index]={}),sectionView.setUp($section,model.assessmentSections[index],data)})}function addSection(){$(".section-adder",$testPart).adder({target:$(".sections",$testPart),content:templates.section,templateData:function(cb){var sectionIndex=$(".section",$testPart).length;cb({"qti-type":"assessmentSection",identifier:qtiTestHelper.getIdentifier("assessmentSection",data.identifiers),
title:"Section "+(sectionIndex+1),index:0,sectionParts:[]})}}),$(document).off("add.binder","#"+$testPart.attr("id")+" .sections").on("add.binder","#"+$testPart.attr("id")+" .sections",function(e,$section){if("binder"===e.namespace&&$section.hasClass("section")){var index=$section.data("bind-index");sectionView.setUp($section,model.assessmentSections[index],data)}})}var $actionContainer=$("h1",$testPart);actions.properties($actionContainer,"testpart",model,propHandler),actions.move($actionContainer,"testparts","testpart"),sections(),addSection()},listenActionState=function(){var $testParts=$(".testpart");actions.removable($testParts,"h1"),actions.movable($testParts,"testpart","h1"),
$(".testparts").on("delete",function(e){var $target=$(e.target);$target.hasClass("testpart")&&actions.disable($(".testpart"),"h1")}).on("add change undo.deleter deleted.deleter",function(e){var $target=$(e.target);($target.hasClass("testpart")||$target.hasClass("testparts"))&&($testParts=$(".testpart"),actions.removable($testParts,"h1"),actions.movable($testParts,"testpart","h1"))})};return{setUp:setUp,listenActionState:listenActionState}}),define("taoQtiTest/controller/creator/views/test",["jquery","lodash","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/testpart","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest"],function($,_,actions,testPartView,templates,qtiTestHelper){
"use strict";var testView=function(model,data){function testParts(){model.testParts||(model.testParts=[]),$(".testpart").each(function(){var $testPart=$(this),index=$testPart.data("bind-index");model.testParts[index]||(model.testParts[index]={}),testPartView.setUp($testPart,model.testParts[index],data)})}function propHandler(propView){var $view=propView.getView(),$title=$(".test-creator-test > h1 [data-bind=title]");$view.on("change.binder",function(e,model){"binder"===e.namespace&&"assessmentTest"===model["qti-type"]&&$title.text(model.title)})}function addTestPart(){$(".testpart-adder").adder({target:$(".testparts"),content:templates.testpart,templateData:function(cb){
var testPartIndex=$(".testpart").length;cb({"qti-type":"testPart",identifier:qtiTestHelper.getIdentifier("testPart",data.identifiers),index:testPartIndex,navigationMode:0,submissionMode:0,assessmentSections:[{"qti-type":"assessmentSection",identifier:qtiTestHelper.getIdentifier("assessmentSection",data.identifiers),title:"Section 1",index:0,sectionParts:[]}]})}}),$(document).off("add.binder",".testparts").on("add.binder",".testparts",function(e,$testPart,added){"binder"===e.namespace&&$testPart.hasClass("testpart")&&testPartView.setUp($testPart,model.testParts[added.index],data)})}actions.properties($(".test-creator-test > h1"),"test",model,propHandler),testParts(),
addTestPart()};return testView}),define("taoQtiTest/controller/creator/encoders/dom2qti",["jquery","lodash"],function($,_){"use strict";var getAttributes=function(object){return _.omit(object,["qti-type","content","xmlBase","lang","label"])},attrToStr=function(attributes){return _.reduce(attributes,function(acc,value,key){return _.isNumber(value)||_.isString(value)&&!_.isEmpty(value)?acc+" "+key+'="'+value+'" ':acc},"")},Dom2QtiEncoder={encode:function(modelValue){var self=this;if(_.isArray(modelValue))return _.reduce(modelValue,function(result,value){return result+self.encode(value)},"");if(_.isObject(modelValue)&&modelValue["qti-type"]){if("textRun"===modelValue["qti-type"])return modelValue.content;
var startTag="<"+modelValue["qti-type"]+attrToStr(getAttributes(modelValue));return modelValue.content?startTag+">"+self.encode(modelValue.content)+"</"+modelValue["qti-type"]+">":startTag+"/>"}return modelValue},decode:function(nodeValue){var self=this,$nodeValue=nodeValue instanceof $?nodeValue:$(nodeValue),result=[];return _.forEach($nodeValue,function(elt){var object;3===elt.nodeType?_.isEmpty($.trim(elt.nodeValue))||result.push({"qti-type":"textRun",content:elt.nodeValue,xmlBase:""}):1===elt.nodeType&&(object=_.merge({"qti-type":elt.nodeName.toLowerCase(),id:"","class":"",xmlBase:"",lang:"",label:""},_.transform(elt.attributes,function(acc,value){value.nodeName&&(acc[value.nodeName]=value.nodeValue);
})),elt.childNodes.length>0&&(object.content=self.decode(elt.childNodes)),result.push(object))}),result}};return Dom2QtiEncoder}),define("taoQtiTest/controller/creator/creator",["module","jquery","lodash","helpers","i18n","history","ui/feedback","core/databindcontroller","taoQtiTest/controller/creator/views/item","taoQtiTest/controller/creator/views/test","taoQtiTest/controller/creator/views/testpart","taoQtiTest/controller/creator/views/section","taoQtiTest/controller/creator/views/itemref","taoQtiTest/controller/creator/encoders/dom2qti","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest","core/validator/validators"],function(module,$,_,helpers,__,history,feedback,DataBindController,itemView,testView,testPartView,sectionView,itemrefView,Dom2QtiEncoder,templates,qtiTestHelper,validators){
"use strict";function loadItems(url,search,cb){$.getJSON(url,{pattern:search,notempty:"true"},function(data){data&&"function"==typeof cb&&cb(data)})}var Controller={routes:{},identifiers:[],start:function(options){var self=this,$container=$("#test-creator"),$saver=$("#saver");self.identifiers=[],options=_.merge(module.config(),options||{}),options.routes=options.routes||{},options.labels=options.labels||{},$("#authoringBack").on("click",function(e){e.preventDefault(),history&&history.back()}),itemView(_.partial(loadItems,options.routes.items));var binderOptions=_.merge(options.routes,{filters:{isItemRef:function(value){return qtiTestHelper.filterQtiType(value,"assessmentItemRef");
},isSection:function(value){return qtiTestHelper.filterQtiType(value,"assessmentSection")}},encoders:{dom2qti:Dom2QtiEncoder},templates:templates,beforeSave:function(model){return qtiTestHelper.addMissingQtiType(model),qtiTestHelper.consolidateModel(model),!0}}),binder=DataBindController.takeControl($container,binderOptions).get(function(model){self.identifiers=qtiTestHelper.extractIdentifiers(model),validators.register("idFormat",qtiTestHelper.idFormatValidator()),validators.register("testIdFormat",qtiTestHelper.testidFormatValidator()),validators.register("testIdAvailable",qtiTestHelper.idAvailableValidator(self.identifiers),!0),testView(model,{uri:options.uri,
identifiers:self.identifiers,labels:options.labels}),testPartView.listenActionState(),sectionView.listenActionState(),itemrefView.listenActionState(),itemrefView.resize(),$(window).off("resize.qti-test-creator").on("resize.qti-test-creator",function(){itemrefView.resize()})});$saver.on("click",function(event){event.preventDefault(),$saver.hasClass("disabled")||($saver.attr("disabled",!0).addClass("disabled"),binder.save(function(){$saver.attr("disabled",!1).removeClass("disabled"),feedback().success(__("Test Saved"))},function(){$saver.attr("disabled",!1).removeClass("disabled")}))})}};return Controller}),define("taoQtiTest/testRunner/actionBarHook",["jquery","lodash","core/errorHandler","core/promise"],function($,_,errorHandler,Promise){
"use strict";function isValidConfig(toolconfig){return!(!_.isObject(toolconfig)||!toolconfig.hook)}function triggerItemLoaded(tool){tool&&tool.itemLoaded&&tool.itemLoaded()}function initQtiTool($toolsContainer,id,toolconfig,testContext,testRunner){return itemIsLoaded=!1,tools[id]=null,_.isString(toolconfig)&&(toolconfig={hook:toolconfig}),new Promise(function(resolve){isValidConfig(toolconfig)?require([toolconfig.hook],function(hook){var $button,$existingBtn;isValidHook(hook)?(hook.init(id,toolconfig,testContext,testRunner),$existingBtn=$toolsContainer.children('[data-control="'+id+'"]'),$existingBtn.length&&(hook.clear($existingBtn),$existingBtn.remove()),hook.isVisible()&&(tools[id]=hook,
$button=hook.render(),_appendInOrder($toolsContainer,$button),$button.trigger("ready"+_ns,[hook]),itemIsLoaded&&triggerItemLoaded(hook)),resolve(hook)):(errorHandler["throw"](_ns,"invalid hook format"),resolve(null))},function(e){errorHandler["throw"](_ns,"the hook amd module cannot be found"),resolve(null)}):(errorHandler["throw"](_ns,"invalid tool config format"),resolve(null))})}function _appendInOrder($container,$button){var $after,$before,order=$button.data("order");"last"===order?$container.append($button):"first"===order?$container.prepend($button):(order=_.parseInt(order),_.isNaN(order)?$container.append($button):($container.children(".action").each(function(){
var $btn=$(this),_order=$btn.data("order");if("last"===_order)$before=$btn,$after=null;else if("first"===_order)$before=null,$after=$btn;else{if(_order=_.parseInt(_order),_.isNaN(_order)||_order>order)return $before=$btn,$after=null,!1;_order===order?$after=$btn:order>_order&&($after=$btn,$before=null)}}),$after?$after.after($button):$before?$before.before($button):$container.append($button)))}function isValidHook(hook){return _.isObject(hook)&&_(["init","render","clear","isVisible"]).reduce(function(result,method){return result&&_.isFunction(hook[method])},!0)}var _ns=".actionBarHook",$doc=$(document),tools={},itemIsLoaded=!1;return $doc.off(_ns).on("serviceloaded"+_ns,function(){
itemIsLoaded=!0,_.forEach(tools,function(tool){triggerItemLoaded(tool)})}),{isValid:isValidConfig,initQtiTool:initQtiTool}}),define("taoQtiTest/testRunner/actionBarTools",["jquery","lodash","core/eventifier","core/promise","taoQtiTest/testRunner/actionBarHook"],function($,_,eventifier,Promise,actionBarHook){"use strict";var registeredQtiTools,qtiTools,actionBarTools={register:function(tools){var registerTools=tools||{};this.trigger("beforeregister",registerTools,this),registeredQtiTools=registerTools,this.trigger("afterregister",registerTools,this)},getRegisteredTools:function(){return registeredQtiTools||{}},getRegistered:function(id){return registeredQtiTools&&registeredQtiTools[id];
},isRegistered:function(id){return!(!registeredQtiTools||!registeredQtiTools[id])},get:function(id){return qtiTools&&qtiTools[id]},list:function(){return _.values(qtiTools||{})},render:function(container,testContext,testRunner,callback){var self=this,$container=$(container),promises=[];this.trigger("beforerender",$container,testContext,testRunner,this),_.forIn(this.getRegisteredTools(),function(toolconfig,id){promises.push(actionBarHook.initQtiTool($container,id,toolconfig,testContext,testRunner))}),Promise.all(promises).then(function(values){var tools=[];qtiTools={},_.forEach(values,function(tool){tool&&(tools.push(tool),qtiTools[tool.getId()]=tool)}),_.isFunction(callback)&&callback.call(self,tools,$container,testContext,testRunner,self),
self.trigger("afterrender",tools,$container,testContext,testRunner,self)})}};return eventifier(actionBarTools)}),define("tpl!taoQtiTest/testRunner/tpl/navigator",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){return" hidden"}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;return buffer+='        <aside class="test-sidebar test-sidebar-',(helper=helpers.region)?stack1=helper.call(depth0,{hash:{},
data:data}):(helper=depth0&&depth0.region,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" flex-container-navi qti-navigator",stack1=helpers["if"].call(depth0,depth0&&depth0.hidden,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='">\n            <div class="qti-navigator-collapsible">\n                <span class="qti-navigator-collapse icon icon-left" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Collapse the review panel",options):helperMissing.call(depth0,"__","Collapse the review panel",options)))+'"></span>\n                <span class="qti-navigator-expand icon icon-right" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Expand the review panel",options):helperMissing.call(depth0,"__","Expand the review panel",options)))+'"></span>\n            </div>\n\n            <div class="qti-navigator-info collapsible">\n                <span class="qti-navigator-label">\n                    <span class="qti-navigator-text">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Test status",options):helperMissing.call(depth0,"__","Test status",options)))+'</span>\n                    <span class="icon-up"></span>\n                    <span class="icon-down"></span>\n                </span>\n                <ul class="collapsible-panel plain">\n                    <li class="qti-navigator-viewed" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Viewed items",options):helperMissing.call(depth0,"__","Viewed items",options)))+'">\n                        <span class="qti-navigator-label">\n                            <span class="qti-navigator-icon icon-viewed"></span>\n                            <span class="qti-navigator-text">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Viewed",options):helperMissing.call(depth0,"__","Viewed",options)))+'</span>\n                            <span class="qti-navigator-counter">-/-</span>\n                        </span>\n                    </li>\n                    <li class="qti-navigator-answered" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Completed items",options):helperMissing.call(depth0,"__","Completed items",options)))+'">\n                        <span class="qti-navigator-label">\n                            <span class="qti-navigator-icon icon-answered"></span>\n                            <span class="qti-navigator-text">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Answered",options):helperMissing.call(depth0,"__","Answered",options)))+'</span>\n                            <span class="qti-navigator-counter">-/-</span>\n                        </span>\n                    </li>\n                    <li class="qti-navigator-unanswered" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Unanswered items",options):helperMissing.call(depth0,"__","Unanswered items",options)))+'">\n                        <span class="qti-navigator-label">\n                            <span class="qti-navigator-icon icon-unanswered"></span>\n                            <span class="qti-navigator-text">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Unanswered",options):helperMissing.call(depth0,"__","Unanswered",options)))+'</span>\n                            <span class="qti-navigator-counter">-/-</span>\n                        </span>\n                    </li>\n                    <li class="qti-navigator-flagged" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Items marked for later review",options):helperMissing.call(depth0,"__","Items marked for later review",options)))+'">\n                        <span class="qti-navigator-label">\n                            <span class="qti-navigator-icon icon-flagged"></span>\n                            <span class="qti-navigator-text">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Flagged",options):helperMissing.call(depth0,"__","Flagged",options)))+'</span>\n                            <span class="qti-navigator-counter">-/-</span>\n                        </span>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="qti-navigator-filters">\n                <ul class="plain clearfix">\n                    <li class="qti-navigator-filter active" data-mode="all">\n                        <span title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Reset filters",options):helperMissing.call(depth0,"__","Reset filters",options)))+'">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"All",options):helperMissing.call(depth0,"__","All",options)))+'</span>\n                    </li>\n                    <li class="qti-navigator-filter" data-mode="unanswered">\n                        <span class="icon-unanswered" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Only display the unanswered items",options):helperMissing.call(depth0,"__","Only display the unanswered items",options)))+'"></span>\n                    </li>\n                    <li class="qti-navigator-filter" data-mode="flagged">\n                        <span class="icon-flagged" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Only display the items marked for review",options):helperMissing.call(depth0,"__","Only display the items marked for review",options)))+'"></span>\n                    </li>\n                </ul>\n            </div>\n\n            <nav class="qti-navigator-tree">\n            </nav>\n\n            <div id="qti-navigator-linear" class="qti-navigator-linear">\n                <span class="icon icon-info" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"In this part of the test navigation is not allowed.",options):helperMissing.call(depth0,"__","In this part of the test navigation is not allowed.",options)))+'"></span>\n                <p class="qti-navigator-message">\n                    '+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"In this part of the test navigation is not allowed.",options):helperMissing.call(depth0,"__","In this part of the test navigation is not allowed.",options)))+"\n                </p>\n            </div>\n        </aside>\n"})}),define("tpl!taoQtiTest/testRunner/tpl/navigatorTree",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+='\n                    <li class="qti-navigator-part collapsible ',stack1=helpers["if"].call(depth0,depth0&&depth0.active,{hash:{},inverse:self.program(4,program4,data),
fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='" data-id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n                        <span class="qti-navigator-label" title="',(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n                            <span class="qti-navigator-text">',
(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</span>\n                            <span class="icon-up"></span>\n                            <span class="icon-down"></span>\n                        </span>\n                        ',stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.sections,null==stack1||stack1===!1?stack1:stack1.length),{hash:{},inverse:self.program(29,program29,data),fn:self.program(6,program6,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                    </li>\n                    ";
}function program2(depth0,data){return"active"}function program4(depth0,data){return"collapsed"}function program6(depth0,data){var stack1,buffer="";return buffer+='\n                        <ul class="qti-navigator-sections collapsible-panel plain">\n                            ',stack1=helpers.each.call(depth0,depth0&&depth0.sections,{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                        </ul>\n                        "}function program7(depth0,data){var stack1,helper,buffer="";return buffer+='\n                            <li class="qti-navigator-section collapsible ',
stack1=helpers["if"].call(depth0,depth0&&depth0.active,{hash:{},inverse:self.program(4,program4,data),fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='" data-id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n                                <span class="qti-navigator-label" title="',(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data
}):helper),buffer+=escapeExpression(stack1)+'">\n                                    <span class="qti-navigator-text">',(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</span>\n                                    <span class="qti-navigator-counter">',(helper=helpers.answered)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.answered,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"/"+escapeExpression((stack1=depth0&&depth0.items,
stack1=null==stack1||stack1===!1?stack1:stack1.length,typeof stack1===functionType?stack1.apply(depth0):stack1))+'</span>\n                                </span>\n                                <ul class="qti-navigator-items collapsible-panel plain">\n                                    ',stack1=helpers.each.call(depth0,depth0&&depth0.items,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                                </ul>\n                            </li>\n                            "}function program8(depth0,data){var stack1,helper,buffer="";return buffer+='\n                                    <li class="qti-navigator-item',
stack1=helpers["if"].call(depth0,depth0&&depth0.active,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.flagged,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.answered,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.viewed,{hash:{},inverse:self.program(17,program17,data),fn:self.program(15,program15,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),
buffer+='" data-id="',(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-position="',(helper=helpers.position)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.position,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n                                        <span class="qti-navigator-label truncate" title="',(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,
stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n                                            <span class="qti-navigator-icon icon-',stack1=helpers["if"].call(depth0,depth0&&depth0.flagged,{hash:{},inverse:self.program(21,program21,data),fn:self.program(19,program19,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='"></span>\n                                            <span class="qti-navigator-number">'+escapeExpression((stack1=null==data||data===!1?data:data.index,typeof stack1===functionType?stack1.apply(depth0):stack1))+"</span>\n                                            ",
(helper=helpers.label)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.label,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\n                                        </span>\n                                    </li>\n                                    "}function program9(depth0,data){return" active"}function program11(depth0,data){return" flagged"}function program13(depth0,data){return" answered"}function program15(depth0,data){return" viewed"}function program17(depth0,data){return" unseen"}function program19(depth0,data){return"flagged"}function program21(depth0,data){
var stack1;return stack1=helpers["if"].call(depth0,depth0&&depth0.answered,{hash:{},inverse:self.program(24,program24,data),fn:self.program(22,program22,data),data:data}),stack1||0===stack1?stack1:""}function program22(depth0,data){return"answered"}function program24(depth0,data){var stack1;return stack1=helpers["if"].call(depth0,depth0&&depth0.viewed,{hash:{},inverse:self.program(27,program27,data),fn:self.program(25,program25,data),data:data}),stack1||0===stack1?stack1:""}function program25(depth0,data){return"viewed"}function program27(depth0,data){return"unseen"}function program29(depth0,data){var stack1,helper,options,buffer="";return buffer+='\n                        <div class="qti-navigator-linear-part collapsible-panel">\n                            <span class="icon icon-info" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"In this part of the test navigation is not allowed.",options):helperMissing.call(depth0,"__","In this part of the test navigation is not allowed.",options)))+'"></span>\n                            <p class="qti-navigator-message">\n                                '+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"In this part of the test navigation is not allowed.",options):helperMissing.call(depth0,"__","In this part of the test navigation is not allowed.",options)))+'\n                            </p>\n                            <p class="qti-navigator-actions">\n                                <button class="btn-info small" data-id="',
(helper=helpers.itemId)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.itemId,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-position="',(helper=helpers.position)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.position,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Start Test-part",options):helperMissing.call(depth0,"__","Start Test-part",options)))+'">\n                                    <span class="qti-navigator-text">'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Start Test-part",options):helperMissing.call(depth0,"__","Start Test-part",options)))+'</span>\n                                    <span class="icon-play r"></span>\n                                </button>\n                            </p>\n                        </div>\n                        '}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",self=this,functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='                <ul class="qti-navigator-parts plain">\n                    ',
stack1=helpers.each.call(depth0,depth0&&depth0.parts,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n                </ul>\n"})}),define("taoQtiTest/testRunner/testReview",["jquery","lodash","i18n","tpl!taoQtiTest/testRunner/tpl/navigator","tpl!taoQtiTest/testRunner/tpl/navigatorTree","util/capitalize"],function($,_,__,navigatorTpl,navigatorTreeTpl,capitalize){"use strict";var _cssCls={active:"active",collapsed:"collapsed",collapsible:"collapsible",hidden:"hidden",disabled:"disabled",flagged:"flagged",answered:"answered",viewed:"viewed",unseen:"unseen",icon:"qti-navigator-icon",scope:{test:"scope-test",
testPart:"scope-test-part",testSection:"scope-test-section"}},_selectors={component:".qti-navigator",filterBar:".qti-navigator-filters",tree:".qti-navigator-tree",collapseHandle:".qti-navigator-collapsible",linearState:".qti-navigator-linear",infoAnswered:".qti-navigator-answered .qti-navigator-counter",infoViewed:".qti-navigator-viewed .qti-navigator-counter",infoUnanswered:".qti-navigator-unanswered .qti-navigator-counter",infoFlagged:".qti-navigator-flagged .qti-navigator-counter",infoPanel:".qti-navigator-info",infoPanelLabels:".qti-navigator-info > .qti-navigator-label",parts:".qti-navigator-part",partLabels:".qti-navigator-part > .qti-navigator-label",sections:".qti-navigator-section",
sectionLabels:".qti-navigator-section > .qti-navigator-label",items:".qti-navigator-item",itemLabels:".qti-navigator-item > .qti-navigator-label",itemIcons:".qti-navigator-item > .qti-navigator-icon",icons:".qti-navigator-icon",linearStart:".qti-navigator-linear-part button",counters:".qti-navigator-counter",actives:".active",collapsible:".collapsible",collapsiblePanels:".collapsible-panel",unseen:".unseen",answered:".answered",flagged:".flagged",notFlagged:":not(.flagged)",notAnswered:":not(.answered)",hidden:".hidden"},_filterMap={all:"",unanswered:_selectors.answered,flagged:_selectors.notFlagged,answered:_selectors.notAnswered,filtered:_selectors.hidden},_optionsMap={
reviewScope:"reviewScope",reviewPreventsUnseen:"preventsUnseen",canCollapse:"canCollapse"},_reviewScopes={test:"test",testPart:"testPart",testSection:"testSection"},testReview={init:function(element,options){var initOptions=_.isObject(options)&&options||{},putOnRight="right"===initOptions.region,insertMethod=putOnRight?"append":"prepend";if(this.options=initOptions,this.disabled=!1,this.hidden=!!initOptions.hidden,this.currentFilter="all",this.$component&&this.$component.remove(),this.$container=$(element),insertMethod=this.$container[insertMethod],!insertMethod)throw new Error("Unable to inject the component structure into the DOM");return insertMethod.call(this.$container,navigatorTpl({
region:putOnRight?"right":"left",hidden:this.hidden})),this._loadDOM(),this._initEvents(),this._updateDisplayOptions(),this},_loadDOM:function(){this.$component=this.$container.find(_selectors.component),this.$infoAnswered=this.$component.find(_selectors.infoAnswered),this.$infoViewed=this.$component.find(_selectors.infoViewed),this.$infoUnanswered=this.$component.find(_selectors.infoUnanswered),this.$infoFlagged=this.$component.find(_selectors.infoFlagged),this.$filterBar=this.$component.find(_selectors.filterBar),this.$filters=this.$filterBar.find("li"),this.$tree=this.$component.find(_selectors.tree),this.$linearState=this.$component.find(_selectors.linearState);
},_initEvents:function(){var self=this;this.$component.on("click"+_selectors.component,_selectors.collapseHandle,function(){self.disabled||(self.$component.toggleClass(_cssCls.collapsed),self.$component.hasClass(_cssCls.collapsed)&&self._openSelected())}),this.$component.on("click"+_selectors.component,_selectors.infoPanelLabels,function(){if(!self.disabled){var $panel=$(this).closest(_selectors.infoPanel);self._togglePanel($panel,_selectors.infoPanel)}}),this.$tree.on("click"+_selectors.component,_selectors.partLabels,function(){if(!self.disabled){var $panel=$(this).closest(_selectors.parts),open=self._togglePanel($panel,_selectors.parts);open&&($panel.hasClass(_cssCls.active)?self._openSelected():self._openOnly($panel.find(_selectors.sections).first(),$panel));
}}),this.$tree.on("click"+_selectors.component,_selectors.sectionLabels,function(){if(!self.disabled){var $panel=$(this).closest(_selectors.sections);self._togglePanel($panel,_selectors.sections)}}),this.$tree.on("click"+_selectors.component,_selectors.itemLabels,function(event){if(!self.disabled){var $target,$item=$(this).closest(_selectors.items);$item.hasClass(_cssCls.disabled)||($target=$(event.target),$target.is(_selectors.icons)&&!self.$component.hasClass(_cssCls.collapsed)?$item.hasClass(_cssCls.unseen)||self._mark($item):(self._select($item),self._jump($item)))}}),this.$tree.on("click"+_selectors.component,_selectors.linearStart,function(){if(!self.disabled){
var $btn=$(this);$btn.hasClass(_cssCls.disabled)||($btn.addClass(_cssCls.disabled),self._jump($btn))}}),this.$filterBar.on("click"+_selectors.component,"li",function(){if(!self.disabled){var $btn=$(this),mode=$btn.data("mode");self.$filters.removeClass(_cssCls.active),self.$component.removeClass(_cssCls.collapsed),$btn.addClass(_cssCls.active),self._filter(mode)}})},_filter:function(criteria){var $items=this.$tree.find(_selectors.items).removeClass(_cssCls.hidden),filter=_filterMap[criteria];filter&&$items.filter(filter).addClass(_cssCls.hidden),this._updateSectionCounters(!!filter),this.currentFilter=criteria},_select:function(position,open){var selected=position&&position.jquery?position:this.$tree.find("[data-position="+position+"]"),hierarchy=selected.parentsUntil(this.$tree);
return open&&this._openOnly(hierarchy),this.$tree.find(_selectors.actives).removeClass(_cssCls.active),hierarchy.add(selected).addClass(_cssCls.active),selected},_openSelected:function(){var selected=this.$tree.find(_selectors.items+_selectors.actives),hierarchy=selected.parentsUntil(this.$tree);return this._openOnly(hierarchy),selected},_openOnly:function(opened,root){(root||this.$tree).find(_selectors.collapsible).addClass(_cssCls.collapsed),opened.removeClass(_cssCls.collapsed)},_togglePanel:function(panel,collapseSelector){var collapsed=panel.hasClass(_cssCls.collapsed);return collapseSelector&&this.$tree.find(collapseSelector).addClass(_cssCls.collapsed),
collapsed?panel.removeClass(_cssCls.collapsed):panel.addClass(_cssCls.collapsed),collapsed},_setItemIcon:function($item,icon){$item.find(_selectors.icons).attr("class",_cssCls.icon+" icon-"+icon)},_adjustItemIcon:function($item){var icon=null,defaultIcon=_cssCls.unseen,iconCls=[_cssCls.flagged,_cssCls.answered,_cssCls.viewed];_.forEach(iconCls,function(cls){return $item.hasClass(cls)?(icon=cls,!1):void 0}),this._setItemIcon($item,icon||defaultIcon)},_toggleFlag:function($item,flag){$item.toggleClass(_cssCls.flagged,flag),this._adjustItemIcon($item)},_mark:function($item){var itemId=$item.data("id"),itemPosition=$item.data("position"),flag=!$item.hasClass(_cssCls.flagged);
this._toggleFlag($item),this.trigger("mark",[flag,itemPosition,itemId])},_jump:function($item){var itemId=$item.data("id"),itemPosition=$item.data("position");this.trigger("jump",[itemPosition,itemId])},_updateSectionCounters:function(filtered){var self=this,filter=_filterMap[filtered?"filtered":"answered"];this.$tree.find(_selectors.sections).each(function(){var $section=$(this),$items=$section.find(_selectors.items),$filtered=$items.filter(filter),total=$items.length,nb=total-$filtered.length;self._writeCount($section.find(_selectors.counters),nb,total)})},_updateDisplayOptions:function(){var reviewScope=_reviewScopes[this.options.reviewScope]||"test",scopeClass=_cssCls.scope[reviewScope],$root=this.$component;
_.forEach(_cssCls.scope,function(cls){$root.removeClass(cls)}),scopeClass&&$root.addClass(scopeClass),$root.toggleClass(_cssCls.collapsible,this.options.canCollapse)},_updateOptions:function(testContext){var options=this.options;_.forEach(_optionsMap,function(optionKey,contextKey){void 0!==testContext[contextKey]&&(options[optionKey]=testContext[contextKey])})},_updateInfos:function(){var progression=this.progression,unanswered=Number(progression.total)-Number(progression.answered);this._writeCount(this.$infoAnswered,progression.answered,progression.total),this._writeCount(this.$infoUnanswered,unanswered,progression.total),this._writeCount(this.$infoViewed,progression.viewed,progression.total),
this._writeCount(this.$infoFlagged,progression.flagged,progression.total)},_writeCount:function($place,count,total){$place.text(count+"/"+total)},_getProgressionOfTest:function(testContext){return{total:testContext.numberItems||0,answered:testContext.numberCompleted||0,viewed:testContext.numberPresented||0,flagged:testContext.numberFlagged||0}},_getProgressionOfTestPart:function(testContext){return{total:testContext.numberItemsPart||0,answered:testContext.numberCompletedPart||0,viewed:testContext.numberPresentedPart||0,flagged:testContext.numberFlaggedPart||0}},_getProgressionOfTestSection:function(testContext){return{total:testContext.numberItemsSection||0,answered:testContext.numberCompletedSection||0,
viewed:testContext.numberPresentedSection||0,flagged:testContext.numberFlaggedSection||0}},_updateTree:function(testContext){var navigatorMap=testContext.navigatorMap,reviewScope=this.options.reviewScope,reviewScopePart="testPart"===reviewScope,reviewScopeSection="testSection"===reviewScope,_partsFilter=function(part){return reviewScopeSection&&part.sections&&(part.sections=_.filter(part.sections,_partsFilter)),part.active};navigatorMap?((reviewScopePart||reviewScopeSection)&&(navigatorMap=_.filter(navigatorMap,_partsFilter)),this.$filterBar.show(),this.$linearState.hide(),this.$tree.html(navigatorTreeTpl({parts:navigatorMap})),this.options.preventsUnseen&&this.$tree.find(_selectors.unseen).addClass(_cssCls.disabled)):(this.$filterBar.hide(),
this.$linearState.show(),this.$tree.empty()),this._filter(this.$filters.filter(_selectors.actives).data("mode"))},setItemFlag:function(position,flag){var $item=position&&position.jquery?position:this.$tree.find("[data-position="+position+"]"),progression=this.progression;this._toggleFlag($item,flag),progression.flagged=this.$tree.find(_selectors.flagged).length,this._writeCount(this.$infoFlagged,progression.flagged,progression.total),this._filter(this.currentFilter)},updateNumberFlagged:function(testContext,position,flag){var fields=["numberFlagged"],currentPosition=testContext.itemPosition,currentFound=!1,currentSection=null,currentPart=null,itemFound=!1,itemSection=null,itemPart=null;
testContext.navigatorMap?(_.forEach(testContext.navigatorMap,function(part){return _.forEach(part&&part.sections,function(section){return _.forEach(section&&section.items,function(item){return item&&(item.position===position&&(itemPart=part,itemSection=section,itemFound=!0),item.position===currentPosition&&(currentPart=part,currentSection=section,currentFound=!0),itemFound&&currentFound)?!1:void 0}),itemFound&&currentFound?!1:void 0}),itemFound&&currentFound?!1:void 0}),itemFound&&currentPart===itemPart&&fields.push("numberFlaggedPart"),itemFound&&currentSection===itemSection&&fields.push("numberFlaggedSection")):(fields.push("numberFlaggedPart"),fields.push("numberFlaggedSection")),
_.forEach(fields,function(field){field in testContext&&(testContext[field]+=flag?1:-1)})},getProgression:function getProgression(testContext){var reviewScope=_reviewScopes[this.options.reviewScope]||"test",progressInfoMethod="_getProgressionOf"+capitalize(reviewScope),getProgression=this[progressInfoMethod]||this._getProgressionOfTest,progression=getProgression&&getProgression(testContext)||{};return progression},update:function(testContext){return this.progression=this.getProgression(testContext),this._updateOptions(testContext),this._updateInfos(testContext),this._updateTree(testContext),this._updateDisplayOptions(testContext),this},disable:function(){return this.disabled=!0,
this.$component.addClass(_cssCls.disabled),this},enable:function(){return this.disabled=!1,this.$component.removeClass(_cssCls.disabled),this},hide:function(){return this.disabled=!0,this.hidden=!0,this.$component.addClass(_cssCls.hidden),this},show:function(){return this.disabled=!1,this.hidden=!1,this.$component.removeClass(_cssCls.hidden),this},toggle:function(show){return void 0===show&&(show=this.hidden),show?this.show():this.hide(),this},on:function(eventName){var dom=this.$component;return dom&&dom.on.apply(dom,arguments),this},off:function(eventName){var dom=this.$component;return dom&&dom.off.apply(dom,arguments),this},trigger:function(eventName,extraParameters){
var dom=this.$component;return void 0===extraParameters&&(extraParameters=[]),_.isArray(extraParameters)||(extraParameters=[extraParameters]),extraParameters.push(this),dom&&dom.trigger(eventName,extraParameters),this}},testReviewFactory=function(element,options){var component=_.clone(testReview,!0);return component.init(element,options)};return testReviewFactory}),define("taoQtiTest/testRunner/progressUpdater",["jquery","lodash","i18n","ui/progressbar"],function($,_,__){"use strict";var progressUpdaters={init:function(progressBar,progressLabel){return this.progressBar=$(progressBar).progressbar(),this.progressLabel=$(progressLabel),this},write:function(label,ratio){
return this.progressLabel.text(label),this.progressBar.progressbar("value",ratio),this},update:function(testContext){var progressIndicator=testContext.progressIndicator||"percentage",progressIndicatorMethod=progressIndicator+"Progression",getProgression=this[progressIndicatorMethod]||this.percentageProgression,progression=getProgression&&getProgression(testContext)||{};return this.write(progression.label,progression.ratio),progression},percentageProgression:function(testContext){var total=Math.max(1,testContext.numberItems),ratio=Math.floor(testContext.numberCompleted/total*100);return{ratio:ratio,label:ratio+"%"}},positionProgression:function(testContext){var progressScope=testContext.progressIndicatorScope,progressScopeCounter={
test:{total:"numberItems",position:"itemPosition"},testPart:{total:"numberItemsPart",position:"itemPositionPart"},testSection:{total:"numberItemsSection",position:"itemPositionSection"}},counter=progressScopeCounter[progressScope]||progressScopeCounter.test,total=Math.max(1,testContext[counter.total]),position=testContext[counter.position]+1;return{ratio:Math.floor(position/total*100),label:__("Item %d of %d",position,total)}}},progressUpdaterFactory=function(progressBar,progressLabel){var updater=_.clone(progressUpdaters,!0);return updater.init(progressBar,progressLabel)};return progressUpdaterFactory}),define("taoQtiTest/testRunner/testMetaData",["lodash"],function(_){
"use strict";var testMetaDataFactory=function(options){function init(){_testServiceCallId=options.testServiceCallId,testMetaData.setData(getLocalStorageData())}function setLocalStorageData(val){var currentKey=testMetaData.getLocalStorageKey();try{window.localStorage.setItem(currentKey,val)}catch(domException){if("QuotaExceededError"!==domException.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==domException.name)throw domException;for(var key,removed=0,i=window.localStorage.length;i--;)key=localStorage.key(i),/^testMetaData_.*/.test(key)&&key!==currentKey&&(window.localStorage.removeItem(key),removed++);if(!removed)throw domException;setLocalStorageData(val)}}function getLocalStorageData(){
var data=window.localStorage.getItem(testMetaData.getLocalStorageKey()),result=JSON.parse(data)||{};return result}var _testServiceCallId,_storageKeyPrefix="testMetaData_",_data={};if(!options||void 0===options.testServiceCallId)throw new TypeError("testServiceCallId option is required");var testMetaData={SECTION_EXIT_CODE:{COMPLETED_NORMALLY:700,QUIT:701,COMPLETE_TIMEOUT:703,TIMEOUT:704,FORCE_QUIT:705,IN_PROGRESS:706,ERROR:300},TEST_EXIT_CODE:{COMPLETE:"C",TERMINATED:"T",INCOMPLETE:"IC",INCOMPLETE_QUIT:"IQ",INACTIVE:"IA",CANDIDATE_DISAGREED_WITH_NDA:"DA"},getTestServiceCallId:function(){return _testServiceCallId},setTestServiceCallId:function(value){_testServiceCallId=value;
},setData:function(data){_data=data,setLocalStorageData(JSON.stringify(_data))},addData:function(data,overwrite){data=_.clone(data),void 0===overwrite&&(overwrite=!1),overwrite?_.merge(_data,data):_data=_.merge(data,_data),setLocalStorageData(JSON.stringify(_data))},getData:function(){return _.clone(_data)},clearData:function(){_data={},window.localStorage.removeItem(testMetaData.getLocalStorageKey())},getLocalStorageKey:function(){return _storageKeyPrefix+_testServiceCallId}};return init(),testMetaData};return testMetaDataFactory}),define("serviceApi/ServiceApi",["jquery","urlParser"],function($,UrlParser){"use strict";function ServiceApi(baseUrl,parameters,serviceCallId,stateStorage,userService,paused){
this.baseUrl=baseUrl,this.parameters=parameters,this.connected=!1,this.serviceCallId=serviceCallId,this.state=stateStorage,this.userService=userService,this.hasBeenPaused=paused}return ServiceApi.SIG_SUCCESS=0,ServiceApi.SIG_ERROR=1,ServiceApi.prototype.loadInto=function(frame,connected){var self=this,$frame=$(frame),callUrl=this.getCallUrl(),isCORSAllowed=new UrlParser(callUrl).checkCORS();$frame.on("load",function(e){$(document).on("serviceready",function(){self.connect(frame,function(){$(document).off("serviceready"),"function"==typeof connected&&connected()})}),isCORSAllowed===!0&&(frame.contentWindow.__knownParent__=!0)}),$frame.attr("src",callUrl)},ServiceApi.prototype.connect=function(frame,connected){
this.connected===!1&&frame.contentWindow&&"function"==typeof frame.contentWindow.onServiceApiReady&&(frame.contentWindow.onServiceApiReady(this),this.connected=!0,"function"==typeof connected&&connected())},ServiceApi.prototype.getCallUrl=function(){var params=this.parameters||{};return params.serviceCallId=this.serviceCallId,this.baseUrl+"?"+$.param(params)},ServiceApi.prototype.getUserPropertyValues=function(property,callback){this.userService.get(property,callback)},ServiceApi.prototype.getServiceCallId=function(){return this.serviceCallId},ServiceApi.prototype.getState=function(){return this.state.get()},ServiceApi.prototype.setState=function(state,callback){
return this.state.set(state,callback)},ServiceApi.prototype.getHasBeenPaused=function(){return this.hasBeenPaused},ServiceApi.prototype.setHasBeenPaused=function(paused){this.hasBeenPaused=paused},ServiceApi.prototype.getParameter=function(identifier){return"undefined"!=typeof this.parameters[identifier]?this.parameters[identifier]:null},ServiceApi.prototype.onFinish=function(callback){return this.onFinishCallback=callback,this},ServiceApi.prototype.onKill=function(callback){return this.onKillCallback=callback,this},ServiceApi.prototype.onExit=function(callback){return this.onExitCallback=callback,this},ServiceApi.prototype.kill=function(callback){"function"==typeof this.onKillCallback?this.onKillCallback(callback):callback(0);
},ServiceApi.prototype.exit=function(callback){"function"==typeof this.onExitCallback?this.onExitCallback(callback):callback(0)},ServiceApi.prototype.finish=function(valueArray){"function"==typeof this.onFinishCallback&&this.onFinishCallback(valueArray)},ServiceApi}),define("serviceApi/UserInfoService",["jquery"],function($){function UserInfoService(requestUrl,data){this.data=data,this.requestUrl=requestUrl}return UserInfoService.prototype.get=function(property,callback){this.data.hasOwnProperty(property)?"function"==typeof callback&&callback(this.data[property]):$.ajax({url:this.requestUrl,data:{property:property},type:"post",dataType:"json",success:function(service,callback){
return function(r){for(key in r.data)service.data[key]=r.data[key];"function"==typeof callback&&callback(service.data[property])}}(this,callback)})},UserInfoService}),define("serviceApi/StateStorage",["jquery"],function($){"use strict";function StateStorage(state,submitUrl){this.state=state,this.submitUrl=submitUrl}return StateStorage.prototype.get=function(callback){return"function"==typeof callback&&callback(this.state),this.state},StateStorage.prototype.set=function(state,callback){state===this.state?"function"==typeof callback&&callback():(this.state=state,$.ajax({url:this.submitUrl,data:{state:state},type:"post",dataType:"json",success:"function"==typeof callback?callback:null
}))},StateStorage}),define("taoQtiTest/controller/runtime/testRunner",["jquery","lodash","i18n","module","taoQtiTest/testRunner/actionBarTools","taoQtiTest/testRunner/testReview","taoQtiTest/testRunner/progressUpdater","taoQtiTest/testRunner/testMetaData","serviceApi/ServiceApi","serviceApi/UserInfoService","serviceApi/StateStorage","iframeNotifier","mathJax","ui/feedback","ui/deleter","moment","ui/modal","ui/progressbar"],function($,_,__,module,actionBarTools,testReview,progressUpdater,testMetaDataFactory,ServiceApi,UserInfoService,StateStorage,iframeNotifier,MathJax,feedback,deleter,moment,modal){"use strict";var timerIds=[],currentTimes=[],lastDates=[],timeDiffs=[],waitingTime=0,$timers,$controls,timerIndex,testMetaData,sessionStateService,$doc=$(document),optionNextSection="x-tao-option-nextSection",optionNextSectionWarning="x-tao-option-nextSectionWarning",optionReviewScreen="x-tao-option-reviewScreen",TestRunner={
TEST_STATE_INITIAL:0,TEST_STATE_INTERACTING:1,TEST_STATE_MODAL_FEEDBACK:2,TEST_STATE_SUSPENDED:3,TEST_STATE_CLOSED:4,TEST_NAVIGATION_LINEAR:0,TEST_NAVIGATION_NONLINEAR:1,TEST_ITEM_STATE_INTERACTING:1,beforeTransition:function(callback){iframeNotifier.parent("loading"),this.disableGui(),$controls.$itemFrame.hide(),$controls.$rubricBlocks.hide(),$controls.$timerWrapper.hide(),"function"==typeof callback&&setTimeout(callback,waitingTime)},afterTransition:function(){this.enableGui(),iframeNotifier.parent("unloading"),testMetaData.addData({ITEM:{ITEM_START_TIME_CLIENT:Date.now()/1e3}})},jump:function(position){var self=this,action="jump",params={position:position};
this.disableGui(),this.isJumpOutOfSection(position)&&this.isCurrentItemActive()&&this.isTimedSection()?this.exitTimedSection(action,params):this.killItemSession(function(){self.actionCall(action,params)})},keepItemTimed:function(duration){if(duration){var self=this,action="keepItemTimed",params={duration:duration};self.actionCall(action,params)}},markForReview:function(flag,position){var self=this;iframeNotifier.parent("loading"),this.disableGui(),$.ajax({url:self.testContext.markForReviewUrl,cache:!1,async:!0,type:"POST",dataType:"json",data:{flag:flag,position:position},success:function(data){self.testReview&&(self.testReview.setItemFlag(position,flag),self.testReview.updateNumberFlagged(self.testContext,position,flag),
self.testContext.itemPosition===position&&(self.testContext.itemFlagged=flag),self.updateTools(self.testContext)),self.enableGui(),iframeNotifier.parent("unloading")}})},moveForward:function(){var self=this,action="moveForward";this.disableGui(),this.testContext.numberItemsSection-this.testContext.itemPositionSection-1==0&&this.isCurrentItemActive()?this.isTimedSection()&&!this.testContext.isTimeout?this.exitTimedSection(action):this.exitSection(action):this.killItemSession(function(){self.actionCall(action)})},moveBackward:function(){var self=this,action="moveBackward";this.disableGui(),0==this.testContext.itemPositionSection&&this.isCurrentItemActive()&&this.isTimedSection()?this.exitTimedSection(action):this.killItemSession(function(){
self.actionCall(action)})},isJumpOutOfSection:function(jumpPosition){var items=this.getCurrentSectionItems(),isJumpToOtherSection=!0,isValidPosition=jumpPosition>=0&&jumpPosition<this.testContext.numberItems;if(isValidPosition){for(var i in items)if(items.hasOwnProperty(i)&&items[i].position==jumpPosition){isJumpToOtherSection=!1;break}}else isJumpToOtherSection=!1;return isJumpToOtherSection},exitSection:function(action,params,exitCode){var self=this;testMetaData.addData({SECTION:{SECTION_EXIT_CODE:exitCode||testMetaData.SECTION_EXIT_CODE.COMPLETED_NORMALLY}}),self.killItemSession(function(){self.actionCall(action,params)})},exitTimedSection:function(action,params){
var self=this,qtiRunner=this.getQtiRunner();qtiRunner&&qtiRunner.updateItemApi(),this.displayExitMessage(__("After you complete the section it would be impossible to return to this section to make changes. Are you sure you want to end the section?"),function(){self.exitSection(action,params)},"testSection"),this.enableGui()},nextSection:function(){var self=this,qtiRunner=this.getQtiRunner(),doNextSection=function(){self.exitSection("nextSection",null,testMetaData.SECTION_EXIT_CODE.QUIT)};qtiRunner&&qtiRunner.updateItemApi(),this.hasOption(optionNextSectionWarning)?this.displayExitMessage(__("After you complete the section it would be impossible to return to this section to make changes. Are you sure you want to end the section?"),doNextSection,"testSection"):doNextSection(),
this.enableGui()},getProgression:function(scope){var scopeSuffixMap={test:"",testPart:"Part",testSection:"Section"},scopeSuffix=scope&&scopeSuffixMap[scope]||"";return{total:this.testContext["numberItems"+scopeSuffix]||0,answered:this.testContext["numberCompleted"+scopeSuffix]||0,viewed:this.testContext["numberPresented"+scopeSuffix]||0,flagged:this.testContext["numberFlagged"+scopeSuffix]||0}},displayExitMessage:function(message,action,scope){var self=this,$confirmBox=$(".exit-modal-feedback"),progression=this.getProgression(scope),unansweredCount=progression.total-progression.answered,flaggedCount=progression.flagged;return unansweredCount&&this.isCurrentItemAnswered()&&unansweredCount--,
flaggedCount&&unansweredCount?message=__("You have %s unanswered question(s) and have %s item(s) marked for review.",unansweredCount.toString(),flaggedCount.toString())+" "+message:(flaggedCount&&(message=__("You have %s item(s) marked for review.",flaggedCount.toString())+" "+message),unansweredCount&&(message=__("You have %s unanswered question(s).",unansweredCount.toString())+" "+message)),$confirmBox.find(".message").html(message),$confirmBox.modal({width:500}),$confirmBox.find(".js-exit-cancel, .modal-close").off("click").on("click",function(){$confirmBox.modal("close")}),$confirmBox.find(".js-exit-confirm").off("click").on("click",function(){$confirmBox.modal("close"),
_.isFunction(action)&&action.call(self)}),$confirmBox},killItemSession:function(callback){testMetaData.addData({ITEM:{ITEM_END_TIME_CLIENT:Date.now()/1e3,ITEM_TIMEZONE:moment().utcOffset(moment().utcOffset()).format("Z")}}),"function"!=typeof callback&&(callback=_.noop),this.itemServiceApi.kill(callback)},isCurrentItemActive:function(){return 4!=this.testContext.itemSessionState},isCurrentItemAnswered:function(){var answered=!1;return _.each(this.getCurrentItemState(),function(state){return state&&_.isObject(state.response)&&null!==state.response.base?(answered=!0,!1):void 0}),answered},hasOption:function(option){return _.indexOf(this.testContext.categories,option)>=0;
},getQtiRunner:function(){var itemFrame=document.getElementById("qti-item"),itemWindow=itemFrame&&itemFrame.contentWindow,itemContainerFrame=itemWindow&&itemWindow.document.getElementById("item-container"),itemContainerWindow=itemContainerFrame&&itemContainerFrame.contentWindow;return itemContainerWindow&&itemContainerWindow.qtiRunner},isTimedSection:function(){var timeConstraints=this.testContext.timeConstraints,isTimedSection=!1;for(var index in timeConstraints)timeConstraints.hasOwnProperty(index)&&"assessmentSection"===timeConstraints[index].qtiClassName&&(isTimedSection=!0);return isTimedSection},getCurrentSectionItems:function(){var sectionItems,partId=this.testContext.testPartId,navMap=this.testContext.navigatorMap;
for(var partIndex in navMap)if(navMap.hasOwnProperty(partIndex)&&navMap[partIndex].id===partId)for(var sectionIndex in navMap[partIndex].sections)if(navMap[partIndex].sections.hasOwnProperty(sectionIndex)&&navMap[partIndex].sections[sectionIndex].active===!0){sectionItems=navMap[partIndex].sections[sectionIndex].items;break}return sectionItems},skip:function(){this.disableGui(),this.actionCall("skip")},timeout:function(){var self=this;this.disableGui(),this.testContext.isTimeout=!0,this.updateTimer(),this.killItemSession(function(){var confirmBox=$(".timeout-modal-feedback"),testContext=self.testContext,confirmBtn=confirmBox.find(".js-timeout-confirm, .modal-close");
testContext.numberCompletedSection===testContext.numberItemsSection?testMetaData.addData({SECTION:{SECTION_EXIT_CODE:testMetaData.SECTION_EXIT_CODE.COMPLETE_TIMEOUT}}):testMetaData.addData({SECTION:{SECTION_EXIT_CODE:testMetaData.SECTION_EXIT_CODE.TIMEOUT}}),self.enableGui(),confirmBox.modal({width:500}),confirmBtn.off("click").on("click",function(){confirmBox.modal("close"),self.actionCall("timeout")})})},setTestContext:function(testContext){this.testContext=testContext,this.itemServiceApi=eval(testContext.itemServiceApiCall),this.itemServiceApi.setHasBeenPaused(testContext.hasBeenPaused)},initMetadata:function(){testMetaData=testMetaDataFactory({testServiceCallId:this.itemServiceApi.serviceCallId
})},getSessionStateService:function(){return sessionStateService||(sessionStateService=this.testContext.sessionStateService({accuracy:1e3})),sessionStateService},update:function(testContext){var self=this;$controls.$itemFrame.remove();var $runner=$("#runner");$runner.css("height","auto"),this.getSessionStateService().restart(),this.setTestContext(testContext),this.updateContext(),this.updateProgress(),this.updateNavigation(),this.updateTestReview(),this.updateInformation(),this.updateRubrics(),this.updateTools(testContext),this.updateTimer(),this.updateExitButton(),this.resetCurrentItemState(),this.initMetadata(),$controls.$itemFrame=$('<iframe id="qti-item" frameborder="0" scrollbars="no"/>'),
$controls.$itemFrame.appendTo($controls.$contentBox),this.testContext.itemSessionState===this.TEST_ITEM_STATE_INTERACTING&&self.testContext.isTimeout===!1?($doc.off(".testRunner").on("serviceloaded.testRunner",function(){self.afterTransition(),self.adjustFrame(),$controls.$itemFrame.css({visibility:"visible"})}),this.itemServiceApi.loadInto($controls.$itemFrame[0],function(){})):self.afterTransition()},updateInformation:function(){this.testContext.isTimeout===!0?feedback().error(__('Time limit reached for item "%s".',this.testContext.itemIdentifier)):this.testContext.itemSessionState!==this.TEST_ITEM_STATE_INTERACTING&&feedback().error(__('No more attempts allowed for item "%s".',this.testContext.itemIdentifier));
},updateTools:function(testContext){var showSkip=!1,showSkipEnd=!1,showNextSection=!!testContext.nextSection&&(this.hasOption(optionNextSection)||this.hasOption(optionNextSectionWarning));this.testContext.allowSkipping===!0&&(this.testContext.isLast===!1?showSkip=!0:showSkipEnd=!0),$controls.$skip.toggle(showSkip),$controls.$skipEnd.toggle(showSkipEnd),$controls.$nextSection.toggle(showNextSection),actionBarTools.render(".tools-box-list",testContext,TestRunner)},createTimer:function(cst){var $timer=$("<div>",{"class":"qti-timer qti-timer__type-"+cst.qtiClassName}),$label=$("<div>",{"class":"qti-timer_label truncate",text:cst.label}),$time=$("<div>",{"class":"qti-timer_time",
text:this.formatTime(cst.seconds)});return $timer.append($label),$timer.append($time),$timer},updateTimer:function(){var hasTimers,self=this;$controls.$timerWrapper.empty();for(var i=0;i<timerIds.length;i++)clearTimeout(timerIds[i]);if(timerIds=[],currentTimes=[],lastDates=[],timeDiffs=[],self.testContext.isTimeout===!1&&self.testContext.itemSessionState===self.TEST_ITEM_STATE_INTERACTING&&(hasTimers=!!this.testContext.timeConstraints.length,$controls.$topActionBar.toggleClass("has-timers",hasTimers),hasTimers)){for(i=0;i<this.testContext.timeConstraints.length;i++){var cst=this.testContext.timeConstraints[i];if(cst.allowLateSubmission===!1){if($controls.$timerWrapper.append(self.createTimer(cst)),
currentTimes[i]=cst.seconds,lastDates[i]=new Date,timeDiffs[i]=0,timerIndex=i,self.testContext.timerWarning&&self.testContext.timerWarning[cst.qtiClassName]){cst.warnings={},_(self.testContext.timerWarning[cst.qtiClassName]).forEach(function(value,key){_.contains(["info","warning","danger"],value)&&(cst.warnings[key]={type:value,showed:cst.seconds<=key,point:parseInt(key,10)})});var closestPreviousWarning=_.find(cst.warnings,{showed:!0});!_.isEmpty(closestPreviousWarning)&&closestPreviousWarning.point&&(cst.warnings[closestPreviousWarning.point].showed=!1)}!function(timerIndex,cst){timerIds[timerIndex]=setInterval(function(){if(timeDiffs[timerIndex]+=(new Date).getTime()-lastDates[timerIndex].getTime(),
timeDiffs[timerIndex]>=1e3){var seconds=timeDiffs[timerIndex]/1e3;currentTimes[timerIndex]-=seconds,timeDiffs[timerIndex]=0}$timers.eq(timerIndex).html(self.formatTime(Math.round(currentTimes[timerIndex]))),currentTimes[timerIndex]<=0?(currentTimes[timerIndex]=0,clearInterval(timerIds[timerIndex]),$controls.$itemFrame.hide(),self.timeout()):lastDates[timerIndex]=new Date;var warning=_.findLast(cst.warnings,{showed:!1});!_.isEmpty(warning)&&_.isFinite(warning.point)&&currentTimes[timerIndex]<=warning.point&&self.timeWarning(cst,warning)},1e3)}(timerIndex,cst)}}$timers=$controls.$timerWrapper.find(".qti-timer .qti-timer_time"),$controls.$timerWrapper.show()}},timeWarning:function(cst,warning){
var remaining,message="",$timer=$controls.$timerWrapper.find(".qti-timer__type-"+cst.qtiClassName),$time=$timer.find(".qti-timer_time");switch($time.removeClass("txt-info txt-warning txt-danger").addClass("txt-"+warning.type),remaining=moment.duration(warning.point,"seconds").humanize(),cst.qtiClassName){case"assessmentItemRef":message=__("Warning – You have %s remaining to complete this item.",remaining);break;case"assessmentSection":message=__("Warning – You have %s remaining to complete this section.",remaining);break;case"testPart":message=__("Warning – You have %s remaining to complete this test part.",remaining);break;case"assessmentTest":message=__("Warning – You have %s remaining to complete the test.",remaining);
}feedback()[warning.type](message),cst.warnings[warning.point].showed=!0},updateRubrics:function(){if($controls.$rubricBlocks.remove(),this.testContext.rubrics.length>0){$controls.$rubricBlocks=$('<div id="qti-rubrics"/>');for(var i=0;i<this.testContext.rubrics.length;i++)$controls.$rubricBlocks.append(this.testContext.rubrics[i]);$controls.$rubricBlocks.find("a").bind("click keypress",function(){return window.open(this.href),!1}),$controls.$rubricBlocks.prependTo($controls.$contentBox),MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub],$controls.$rubricBlocks[0])}},updateNavigation:function(){$controls.$exit.show(),this.testContext.isLast===!0?($controls.$moveForward.hide(),
$controls.$moveEnd.show()):($controls.$moveForward.show(),$controls.$moveEnd.hide()),this.testContext.navigationMode===this.TEST_NAVIGATION_LINEAR?$controls.$moveBackward.hide():($controls.$controls.show(),this.testContext.canMoveBackward===!0?$controls.$moveBackward.show():$controls.$moveBackward.hide())},updateTestReview:function(){var considerProgress=this.testContext.considerProgress===!0;this.testReview&&(this.testReview.toggle(considerProgress&&this.hasOption(optionReviewScreen)),this.testReview.update(this.testContext))},updateProgress:function(){var considerProgress=this.testContext.considerProgress===!0;$controls.$progressBox.css("visibility",considerProgress?"visible":"hidden"),
considerProgress&&this.progressUpdater.update(this.testContext)},updateContext:function(){$controls.$title.text(this.testContext.testTitle);var sectionText=this.testContext.isDeepestSectionVisible===!0?" - "+this.testContext.sectionTitle:"";$controls.$position.text(sectionText),$controls.$titleGroup.show()},updateExitButton:function(){$controls.$logout.toggleClass("hidden",!this.testContext.logoutButton),$controls.$exit.toggleClass("hidden",!this.testContext.exitButton)},adjustFrame:function(){var frameContentHeight,rubricHeight=$controls.$rubricBlocks.outerHeight(!0)||0,finalHeight=$(window).innerHeight()-$controls.$topActionBar.outerHeight()-$controls.$bottomActionBar.outerHeight(),itemFrame=$controls.$itemFrame.get(0);
$controls.$contentBox.height(finalHeight),$controls.$sideBars.length&&$controls.$sideBars.each(function(){var $sideBar=$(this);$sideBar.height(finalHeight-$sideBar.outerHeight()+$sideBar.height())}),itemFrame&&itemFrame.contentWindow&&(frameContentHeight=$controls.$itemFrame.contents().outerHeight(!0),finalHeight>frameContentHeight&&(frameContentHeight=rubricHeight?Math.max(frameContentHeight,finalHeight-rubricHeight):finalHeight),itemFrame.contentWindow.$&&itemFrame.contentWindow.$("body").trigger("setheight",[frameContentHeight]),$controls.$itemFrame.height(frameContentHeight))},disableGui:function(){$controls.$naviButtons.addClass("disabled"),this.testReview&&this.testReview.disable();
},enableGui:function(){$controls.$naviButtons.removeClass("disabled"),this.testReview&&this.testReview.enable()},hideGui:function(){$controls.$naviButtons.addClass("hidden"),this.testReview&&this.testReview.hide()},showGui:function(){$controls.$naviButtons.removeClass("hidden"),this.testReview&&this.testReview.show()},formatTime:function(totalSeconds){var sec_num=totalSeconds,hours=Math.floor(sec_num/3600),minutes=Math.floor((sec_num-3600*hours)/60),seconds=sec_num-3600*hours-60*minutes;10>hours&&(hours="0"+hours),10>minutes&&(minutes="0"+minutes),10>seconds&&(seconds="0"+seconds);var time=hours+":"+minutes+":"+seconds;return time},processError:function(error){
var self=this;this.hideGui(),this.beforeTransition(),iframeNotifier.parent("messagealert",{message:error.message,action:function(){testMetaData&&testMetaData.clearData(),error.state===self.TEST_STATE_CLOSED?self.serviceApi.finish():self.serviceApi.exit()}})},actionCall:function(action,extraParams){var self=this,params={metaData:testMetaData?testMetaData.getData():{}};extraParams&&(params=_.assign(params,extraParams)),this.beforeTransition(function(){$.ajax({url:self.testContext[action+"Url"],cache:!1,data:params,async:!0,dataType:"json",success:function(testContext){testMetaData.clearData(),testContext.success?testContext.state===self.TEST_STATE_CLOSED?self.serviceApi.finish():self.update(testContext):self.processError(testContext);
}})})},exit:function(){var self=this;testMetaData.addData({TEST:{TEST_EXIT_CODE:testMetaData.TEST_EXIT_CODE.INCOMPLETE},SECTION:{SECTION_EXIT_CODE:testMetaData.SECTION_EXIT_CODE.QUIT}}),this.displayExitMessage(__("Are you sure you want to end the test?"),function(){self.killItemSession(function(){self.actionCall("endTestSession"),testMetaData.clearData()})},this.testReview?this.testContext.reviewScope:null)},setCurrentItemState:function(id,state){id&&(this.currentItemState[id]=state)},resetCurrentItemState:function(){this.currentItemState={}},getCurrentItemState:function(){return this.currentItemState}},config=module.config();return config&&actionBarTools.register(config.qtiTools),
{start:function(testContext){$controls={$moveForward:$('[data-control="move-forward"]'),$moveEnd:$('[data-control="move-end"]'),$moveBackward:$('[data-control="move-backward"]'),$nextSection:$('[data-control="next-section"]'),$skip:$('[data-control="skip"]'),$skipEnd:$('[data-control="skip-end"]'),$exit:$(window.parent.document).find('[data-control="exit"]'),$logout:$(window.parent.document).find('[data-control="logout"]'),$naviButtons:$(".bottom-action-bar .action"),$skipButtons:$(".navi-box .skip"),$forwardButtons:$(".navi-box .forward"),$progressBar:$('[data-control="progress-bar"]'),$progressLabel:$('[data-control="progress-label"]'),$progressBox:$(".progress-box"),
$title:$('[data-control="qti-test-title"]'),$position:$('[data-control="qti-test-position"]'),$timerWrapper:$('[data-control="qti-timers"]'),$contentPanel:$(".content-panel"),$controls:$(".qti-controls"),$itemFrame:$("#qti-item"),$rubricBlocks:$("#qti-rubrics"),$contentBox:$("#qti-content"),$sideBars:$(".test-sidebar"),$topActionBar:$(".horizontal-action-bar.top-action-bar"),$bottomActionBar:$(".horizontal-action-bar.bottom-action-bar")},$controls.$titleGroup=$controls.$title.add($controls.$position),$doc.ajaxError(function(event,jqxhr){403===jqxhr.status&&iframeNotifier.parent("serviceforbidden")}),window.onServiceApiReady=function(serviceApi){TestRunner.serviceApi=serviceApi,
testContext.success?testContext.state===TestRunner.TEST_STATE_CLOSED?(serviceApi.finish(),testMetaData.clearData()):TestRunner.getSessionStateService().getDuration()?(TestRunner.setTestContext(testContext),TestRunner.initMetadata(),TestRunner.keepItemTimed(TestRunner.getSessionStateService().getDuration()),TestRunner.getSessionStateService().restart()):TestRunner.update(testContext):TestRunner.processError(testContext)},TestRunner.beforeTransition(),TestRunner.testContext=testContext,$controls.$skipButtons.click(function(){$(this).hasClass("disabled")||TestRunner.skip()}),$controls.$forwardButtons.click(function(){$(this).hasClass("disabled")||TestRunner.moveForward();
}),$controls.$moveBackward.click(function(){$(this).hasClass("disabled")||TestRunner.moveBackward()}),$controls.$nextSection.click(function(){$(this).hasClass("disabled")||TestRunner.nextSection()}),$controls.$exit.click(function(e){e.preventDefault(),TestRunner.exit()}),$(window).on("resize",_.throttle(function(){TestRunner.adjustFrame(),$controls.$titleGroup.show()},250)),$doc.on("loading",function(){iframeNotifier.parent("loading")}),$doc.on("unloading",function(){iframeNotifier.parent("unloading")}),TestRunner.progressUpdater=progressUpdater($controls.$progressBar,$controls.$progressLabel),testContext.reviewScreen&&(TestRunner.testReview=testReview($controls.$contentPanel,{
region:testContext.reviewRegion||"left",hidden:!TestRunner.hasOption(optionReviewScreen),reviewScope:testContext.reviewScope,preventsUnseen:!!testContext.reviewPreventsUnseen,canCollapse:!!testContext.reviewCanCollapse}).on("jump",function(event,position){TestRunner.jump(position)}).on("mark",function(event,flag,position){TestRunner.markForReview(flag,position)}),$controls.$sideBars=$(".test-sidebar")),TestRunner.updateProgress(),TestRunner.updateTestReview(),iframeNotifier.parent("serviceready"),TestRunner.adjustFrame(),$controls.$topActionBar.add($controls.$bottomActionBar).animate({opacity:1},600),deleter($("#feedback-box")),modal($("body")),$(document).on("responsechange",function(e,responseId,response){
responseId&&response&&TestRunner.setCurrentItemState(responseId,{response:response})}).on("stateready",function(e,id,state){id&&state&&TestRunner.setCurrentItemState(id,state)}).on("heightchange",function(e,height){$controls.$itemFrame.height(height)})}}});
//# sourceMappingURL=controllers.min.js.map