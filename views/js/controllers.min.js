define("taoQtiTest/controller/routes",[],function(){return{Creator:{css:"creator",actions:{index:"controller/creator/creator"}}}}),define("core/encoder/boolean",[],function(){return{encode:function(t){return t===!0?"true":"false"},decode:function(t){return"true"===t}}}),define("core/encoder/number",[],function(){return{encode:function(t){return t+""},decode:function(t){return parseInt(t,10)}}}),define("core/encoder/time",["moment"],function(t){var e="HH:mm:ss";return{encode:function(e){var n=parseInt(e,10);isNaN(n)&&(n=0);var i=t.duration(n,"seconds"),a=i.get("hours")>=10?i.get("hours"):"0"+i.get("hours"),o=i.get("minutes")>=10?i.get("minutes"):"0"+i.get("minutes"),s=i.get("seconds")>=10?i.get("seconds"):"0"+i.get("seconds");return a+":"+o+":"+s},decode:function(n){var i=t(n,e);return i.seconds()+60*i.minutes()+3600*i.hours()}}}),define("core/encoder/array2str",["lodash"],function(t){return{encode:function(t,e){return e=e||",",t.split(e)},decode:function(e,n){return n=n||",",t.isArray(e)?e.join(n):e}}}),define("core/encoder/str2array",["lodash"],function(t){return{encode:function(e,n){return n=n||",",t.isArray(e)?e.join(n):e},decode:function(t,e){return e=e||",",t.split(e)}}}),define("core/encoder/encoders",["lodash","core/encoder/boolean","core/encoder/number","core/encoder/time","core/encoder/array2str","core/encoder/str2array"],function(t,e,n,i,a,o){var s=function(t){var e=[],n=[];return t.indexOf("(")>-1&&(n=/\((.+?)\)/.exec(t),n&&n.length>=1&&(e=n[1].split(","))),e},r=function(t){return t.indexOf("(")>-1?t.substr(0,t.indexOf("(")):t},c={number:n,time:i,"boolean":e,array2str:a,str2array:o,register:function(e,n,i){if(!t.isString(e))throw new Error("An encoder must have a valid name");if(!t.isFunction(n))throw new Error("Encode must be a function");if(!t.isFunction(i))throw new Error("Decode must be a function");this[e]={encode:n,decode:i}},encode:function(t,e){if(t=r(t),this[t]){var n=this[t],i=[e];return n.encode.apply(n,i.concat(s(t)))}return e},decode:function(t,e){if(t=r(t),this[t]){var n=this[t],i=[e];return n.decode.apply(n,i.concat(s(t)))}return e}};return c}),define("core/filter/filters",["lodash"],function(t){var e={register:function(e,n){if(!t.isString(e))throw new Error("An filter must have a valid name");if(!t.isFunction(n))throw new Error("Filter must be a function");this[e]=n},filter:function(e,n){return this[e]&&t.isArray(n)?t.filter(n,this[e]):n}};return e}),define("core/databinder",["jquery","lodash","handlebars","core/encoder/encoders","core/filter/filters"],function(t,e,n,i,a){var o=function(t,e){var n,i=e.split("."),a=i.length,o=1;if(a>=1&&(n=t[i[0]],void 0!==n))for(o=1;a>o&&(n=n[i[o]],void 0!==n);o++);return n},s=function(t,e,n){for(var i=e.split("."),a=i.length,o=0;a>o;o++){if(o===a-1)return void(t[i[o]]=n);t[i[o]]||(t[i[o]]=a>o+1&&/^\d$/.test(i[o+1])?[]:{}),t=t[i[o]]}},r=function(t,n){for(var i=n.split("."),a=i.length,o=0;a>o;o++){if(o===a-1)return void(e.isArray(t)?t.splice(parseInt(i[o],10),1):delete t[i[o]]);t=t[i[o]]}},c=function(n,i,a){var s=o(n,i),r=!1;e.isArray(s)&&(a.children("[data-bind-index]").each(function(e){var n=t(this),i=parseInt(n.data("bind-index"),10);s[i].index=e,r=r||e!==i}),r===!0&&s.sort(function(t,e){return t.index-e.index}))},l=function(t,n,i){var a=o(t,n);e.isArray(a)&&e.forEach(a,function(t,e){a[e].index=e,i&&i.children("[data-bind-index]").eq(e).attr("data-bind-index",e+"").data("bind-index",e+"")})},d=function(e){if(e[0].type&&e[0].name){if("radio"===e[0].type)return t("[name='"+e[0].name+"']");if("checkbox"===e[0].type)return t("[name='"+e[0].name+"']")}return e},m=function(n,i,a){var o;n.length>0&&(o=t._data(n[0],"events"),(!o||e(o[i]).where({namespace:"internalbinder"}).size()<1)&&d(n).on(i+".internalbinder",function(e){t(this).is(e.target)&&a.apply(null,Array.prototype.splice.call(arguments,1))}))},h=function(t,n,o){var s=this;this.$container=t,this.model=n||{},this.encoders=e.clone(i),this.filters=e.clone(a),o&&(e.isPlainObject(o.encoders)&&e.forEach(o.encoders,function(t,e){s.encoders.register(e,t.encode,t.decode)}),e.isPlainObject(o.filters)&&e.forEach(o.filters,function(t,e){s.filters.register(e,t)}),this.templates=o.templates||{})};return h.prototype._bindNode=function(t,e,n,i){t.data("bound")||(i===!0&&s(n,e,this._getNodeValue(t)),this._setNodeValue(t,o(n,e)),this._listenUpdates(t,e,n),this._listenRemoves(t,e,n),t.data("bound",e))},h.prototype._bindArrayNode=function(i,a,r,c){var l=this;if(!i.data("bound")){var d,m=o(r,a);i.data("bind-tmpl")?(d=l.templates[i.data("bind-tmpl")],"function"!=typeof d&&t(i.data("bind-tmpl")).length>0&&(d=n.compile(t(i.data("bind-tmpl")).html()))):d=n.compile(i.html()),m&&e.isArray(m)?i.data("bind-filter")&&(m=this.filters.filter(i.data("bind-filter"),m)):s(r,a,[]),i.empty(),e.forEach(m,function(e,n){var o;e.index=n,o=t(d(e)),o.appendTo(i).filter(":first").attr("data-bind-index",n),l.bind(o,l.model,a+"."+n+".",c),l._listenRemoves(o,a+"."+n,l.model)}),l._listenUpdates(i,a,r),l._listenAdds(i,a,r),i.data("bound",a)}},h.prototype._bindRmNode=function(t,e,n,i){t.data("bound")||(this._listenUpdates(t,e,n),i===!0&&t.trigger("change"),t.data("bound",e))},h.prototype._listenUpdates=function(t,e,n){var i=this;m(t,"change",function(){if(t.is("[data-bind-each]"))c(n,e,t),l(n,e,t),t.data("bind-each",e),i._rebind(t),i.$container.trigger("order.binder",[i.model]);else if(t.is("[data-bind-rm]")){var a=i._getNodeValue(t);a===!0&&r(n,e),i.$container.trigger("delete.binder",[i.model])}else s(n,e,i._getNodeValue(t)),i._resyncIndexOnceRm(t,e),i.$container.trigger("update.binder",[i.model]);i.$container.trigger("change.binder",[i.model])})},h.prototype._listenRemoves=function(t,e,n){var i=this;m(t,"delete",function(a){function o(){r(n,e),i._resyncIndexOnceRm(t,e),i.$container.trigger("delete.binder",[i.model]).trigger("change.binder",[i.model])}a===!0?t.parent().on("deleted",function(){o()}):o()})},h.prototype._listenAdds=function(e,n){var i=this;m(e,"add",function(a,o){var r=e.children("[data-bind-index]").length;e.children().not("[data-bind-index]").each(function(){var e=t(this),a=n+"."+r;e.attr("data-bind-index",r),o&&s(i.model,a,o),i.bind(e,i.model,a+".",!0),i._listenRemoves(e,a,i.model)}),i.$container.trigger("add.binder",[i.model]).trigger("change.binder",[i.model]),e.trigger("add.binder",[a,o])})},h.prototype._resyncIndexOnceRm=function(e,n){var i=this;if(e.is("[data-bind-index]")){var a=parseInt(e.data("bind-index"),10),o=e.parent("[data-bind-each]"),s=n.replace(/\.[0-9]+$/,"");l(i.model,s),o.children("[data-bind-index]").filter(":gt("+a+")").each(function(){var e=t(this),n=parseInt(e.data("bind-index"),10)-1;e.attr("data-bind-index",n).data("bind-index",n+"")}),i._rebind(o,s.replace(o.data("bind-each"),""))}},h.prototype._setNodeValue=function(n,i){void 0!==i&&(n.data("bind-encoder")&&(i=this.encoders.encode(n.data("bind-encoder"),i)),e.contains(["INPUT","SELECT","TEXTAREA"],n[0].nodeName)?n.is(":text, input[type='hidden'], textarea, select")?n.val(i).trigger("change"):n.is(":radio, :checkbox")&&d(n).each(function(){var e=t(this);e.prop("checked",e.val()===i)}):n.hasClass("button-group")?n.find("[data-bind-value]").each(function(){var e=t(this);e.data("bind-value")+""===i?e.addClass("active"):e.removeClass("active")}):n.data("bind-html")===!0?n.html(i):n.text(i))},h.prototype._getNodeValue=function(n){var i;return e.contains(["INPUT","SELECT","TEXTAREA"],n[0].nodeName)?n.is(":text, input[type='hidden'], textarea, select")?i=n.val():n.is(":radio, :checkbox")?i=d(n).filter(":checked").val():n.hasClass("button-group")&&n.find("[data-bind-value]").each(function(){var e=t(this);e.hasClass("active")&&(i=e.data("bind-value")+"")}):i=n.data("bind-html")===!0?n.html():n.text(),n.data("bind-encoder")&&(i=this.encoders.decode(n.data("bind-encoder"),i)),i},h.prototype.bind=function(e,n,i,a){var o=this;e=e||this.$container,n=n||this.model,i=i||"",a=a||!1;var s=function(e,s,r){var c="[data-"+s+"]";e.find(c).andSelf().filter(c).each(function(){var e=t(this),c=i+e.data(s);o[r](e,c,n,a)})};s(e,"bind-each","_bindArrayNode"),s(e,"bind-rm","_bindRmNode"),s(e,"bind","_bindNode")},h.prototype._rebind=function(n,i){var a=this;if(i=i||"",n.is("[data-bind-each]")){var s=i+n.data("bind-each"),r=o(a.model,s);e.forEach(r,function(t,e){var i=n.children('[data-bind-index="'+e+'"]');a._rebind(i,s+"."+e+"."),a._listenRemoves(i,s+"."+e,a.model)}),a._listenUpdates(n,s,a.model),a._listenAdds(n,s,a.model)}else n.find("[data-bind]").each(function(){var e=t(this),n=i+e.data("bind");a._listenUpdates(e,n,a.model),a._listenRemoves(e,n,a.model)}),n.find("[data-bind-each]").each(function(){a._rebind(t(this),i)})},h}),define("core/databindcontroller",["jquery","lodash","core/databinder"],function(t,e,n){return{takeControl:function(i,a){var o={},s={},r=e.pick(a,function(t,e){return"encoders"===e||"filters"===e||"templates"===e});return a.get&&(o.get=function(e){return t.getJSON(a.get).done(function(t){t&&(s=t,new n(i,s,r).bind(),"function"==typeof e&&e(s))}),this}),a.save&&(o.save=function(e,n){var i=!0;return"function"==typeof a.beforeSave&&(i=!!a.beforeSave(s)),i===!0&&t.post(a.save,{model:JSON.stringify(s)},function(t){t&&"function"==typeof e&&e(t)},"json").fail(function(){"function"==typeof n&&n()}),this}),o}}}),define("tpl!taoQtiTest/controller/creator/templates/testpart",["handlebars"],function(t){return t.template(function(t,e,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),a=a||{};var o,s,r="",c="function",l=this.escapeExpression;return r+='<div id="',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===c?s.call(e,{hash:{},data:a}):s),r+=l(o)+'" class="testpart clearfix">\n\n   <h1><span data-bind="identifier">',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===c?s.call(e,{hash:{},data:a}):s),r+=l(o)+'</span>\n        <div class="actions"> \n            <div class="tlb">\n                <div class="tlb-top">\n                    <span class="tlb-box">\n                        <span class="tlb-bar">\n                            <span class="tlb-start"></span>\n                            <span class="tlb-group">\n                                <a href="#" class="tlb-button-off property-toggler" title="Test Part Properties"><span class="icon-settings"></span></a>\n                                <span class="tlb-separator"></span>\n                                <a href="#" class="tlb-button-off move-up" title="Move Up"><span class="icon-up"></span></a>\n                                <a href="#" class="tlb-button-off move-down" title="Move Down"><span class="icon-down"></span></a>\n                                <span class="tlb-separator"></span> \n                                <a href="#" class="tlb-button-off" title="Remove Test Part" data-delete="#',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===c?s.call(e,{hash:{},data:a}):s),r+=l(o)+'"><span class="icon-bin"></span></a>\n                            </span>\n                            <span class="tlb-end"></span>\n                        </span>  \n                        <!--<span class="tlb-bar">-->\n                            <!--<span class="tlb-start"></span>-->\n                            <!--<span class="tlb-text-button-box">-->\n                                <!--<a class="tlb-text-button-off section-adder">-->\n                                    <!--<span class="icon-add"></span>-->\n                                    <!--<span class="tlb-text">New Section</span>-->\n                                <!--</a>-->\n                            <!--</span>-->\n                            <!--<span class="tlb-end"></span>-->\n                        <!--</span>-->\n                    </span>   \n                </div>\n            </div>\n        </div>\n        <a href="#" class="toggler opened" data-toggle="#testpart-content-',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===c?s.call(e,{hash:{},data:a}):s),r+=l(o)+'"></a>\n    </h1>\n    <div id="testpart-content-',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===c?s.call(e,{hash:{},data:a}):s),r+=l(o)+'" class="testpart-content">\n        \n       <!-- assessmentTest/testPart/assessmentSections -->\n       <div class="sections" data-bind-each="assessmentSections" data-bind-tmpl="section" data-bind-filter="isSection"></div>\n\n        <button class="btn-info small section-adder">\n            <span class="icon-add"></span>New section\n        </button>\n    </div>\n</div>\n'})}),define("tpl!taoQtiTest/controller/creator/templates/section",["handlebars"],function(t){return t.template(function(t,e,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),a=a||{};var o,s,r,c="",l="function",d=this.escapeExpression,m=n.helperMissing;return c+='<div id="',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+'" class="section">\n\n<!-- assessmentTest/testPart/assessmentSection/title -->\n    <h2><span data-bind="title">',(s=n.title)?o=s.call(e,{hash:{},data:a}):(s=e&&e.title,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+'</span>\n        <div class="actions">  \n            <div class="tlb">\n                <div class="tlb-top">\n                    <span class="tlb-box">\n                        <span class="tlb-bar">\n                            <span class="tlb-start"></span>\n                            <span class="tlb-group">\n                                <a href="#" class="tlb-button-off rub-toggler" title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Manage Rubric Blocks",r):m.call(e,"__","Manage Rubric Blocks",r)))+'" data-toggle="#rublocks-',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+'" ><span class="icon-rubric"></span></a>\n                                <span class="tlb-separator"></span>\n                                <a href="#" class="tlb-button-off property-toggler" title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Section Properties",r):m.call(e,"__","Section Properties",r)))+'"><span class="icon-settings"></span></a>\n                                <span class="tlb-separator"></span>\n                                <a href="#" class="tlb-button-off move-up disabled" title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Move Up",r):m.call(e,"__","Move Up",r)))+'"><span class="icon-up"></span></a>\n                                <a href="#" class="tlb-button-off move-down disabled" title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Move Down",r):m.call(e,"__","Move Down",r)))+'"><span class="icon-down"></span></a>\n                                <span class="tlb-separator"></span> \n                                <a href="#" class="tlb-button-off disabled" title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Remove Section",r):m.call(e,"__","Remove Section",r)))+'" data-delete=":parent .section"><span class="icon-bin"></span></a>\n                            </span>\n                            <span class="tlb-end"></span>\n                        </span>  \n                    </span>   \n                </div>\n            </div>\n        </div>\n    </h2>\n\n    <div id="rublocks-',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+'" class="rublocks clearfix toggled">\n        <h3>\n            <span class="title">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Rubric Blocks",r):m.call(e,"__","Rubric Blocks",r)))+'</span>\n        </h3>\n        <ol class="rubricblocks decimal" data-bind-each="rubricBlocks" data-bind-tmpl="rubricblock"></ol>\n        <button class="btn-info small rublock-adder">\n            <span class="icon-add"></span>'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"New Rubric Block",r):m.call(e,"__","New Rubric Block",r)))+'\n        </button>\n    </div>\n    <div class="itemrefs-wrapper">\n        <ol class="itemrefs decimal clearfix" data-bind-each="sectionParts" data-bind-tmpl="itemref" data-bind-filter="isItemRef" data-msg="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Add selected item(s) here.",r):m.call(e,"__","Add selected item(s) here.",r)))+'"></ol>\n        <div class="itemref-placeholder">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Add selected item(s) here.",r):m.call(e,"__","Add selected item(s) here.",r)))+"\n        </div>\n    </div>\n</div>\n"})}),define("tpl!taoQtiTest/controller/creator/templates/rubricblock",["handlebars"],function(t){return t.template(function(t,e,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),a=a||{};var o,s,r="",c=n.helperMissing,l=this.escapeExpression;return r+='<li class="rubricblock">\n    <div class="actions"> \n       <div class="tlb">\n            <div class="tlb-top">\n                <span class="tlb-box">\n                    <span class="tlb-bar">\n                        <span class="tlb-start"></span>\n                        <span class="tlb-group">\n                            <!--<a href="#" class="tlb-button-off property-toggler" title="'+l((o=n.__||e&&e.__,s={hash:{},data:a},o?o.call(e,"Rubric Block Properties",s):c.call(e,"__","Rubric Block Properties",s)))+'"><span class="icon-settings"></span></a>-->\n                            <!--<span class="tlb-separator"></span> -->\n                            <a href="#" class="tlb-button-off" title="'+l((o=n.__||e&&e.__,s={hash:{},data:a},o?o.call(e,"Remove Rubric Block",s):c.call(e,"__","Remove Rubric Block",s)))+'" data-delete=":parent .rubricblock"><span class="icon-bin"></span></a>\n                        </span>\n                        <span class="tlb-end"></span>\n                    </span>  \n                </span>   \n            </div>\n        </div>\n    </div>\n    <div class="rubricblock-content"></div>\n    <div class="rubricblock-binding" data-bind="content" data-bind-html="true" data-bind-encoder="dom2qti"></div>\n</li>\n'})}),define("tpl!taoQtiTest/controller/creator/templates/itemref",["handlebars"],function(t){return t.template(function(t,e,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),a=a||{};var o,s,r,c="",l="function",d=this.escapeExpression,m=n.helperMissing;return c+="<li id='",(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+"' data-uri='",(s=n.href)?o=s.call(e,{hash:{},data:a}):(s=e&&e.href,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+"' class='itemref'>\n    <span class='title truncate'>",(s=n.label)?o=s.call(e,{hash:{},data:a}):(s=e&&e.label,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+'</span>\n    <div class="actions"> \n        <div class="tlb">\n            <div class="tlb-top">\n                <span class="tlb-box">\n                    <span class="tlb-bar">\n                        <span class="tlb-start"></span>\n                        <span class="tlb-group">\n                            <a href="#" class="tlb-button-off property-toggler" title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Item Reference Properties",r):m.call(e,"__","Item Reference Properties",r)))+'"><span class="icon-settings"></span></a>\n                            <span class="tlb-separator"></span>\n                            <a href="#" class="tlb-button-off move-up" title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Move Up",r):m.call(e,"__","Move Up",r)))+'"><span class="icon-up"></span></a>\n                            <a href="#" class="tlb-button-off move-down" title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Move Down",r):m.call(e,"__","Move Down",r)))+'"><span class="icon-down"></span></a>\n                            <span class="tlb-separator"></span> \n                            <a href="#" class="tlb-button-off" title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Remove Item Reference",r):m.call(e,"__","Remove Item Reference",r)))+'" data-delete=":parent .itemref"><span class="icon-bin"></span></a>\n                        </span>\n                        <span class="tlb-end"></span>\n                    </span>  \n                </span>   \n            </div>\n        </div>\n    </div>\n</li>\n'})}),define("tpl!taoQtiTest/controller/creator/templates/item",["handlebars"],function(t){return t.template(function(t,e,n,i,a){function o(t,e){var i,a,o="";return o+="\n     <li data-uri='",(a=n.uri)?i=a.call(t,{hash:{},data:e}):(a=t&&t.uri,i=typeof a===l?a.call(t,{hash:{},data:e}):a),o+=d(i)+"'>\n        ",(a=n.label)?i=a.call(t,{hash:{},data:e}):(a=t&&t.label,i=typeof a===l?a.call(t,{hash:{},data:e}):a),o+=d(i)+" \n        ",i=n["if"].call(t,t&&t.parent,{hash:{},inverse:m.noop,fn:m.program(2,s,e),data:e}),(i||0===i)&&(o+=i),o+="\n     </li>\n"}function s(t,e){var i,a,o="";return o+="<span class='flag truncate' title=\"",(a=n.parent)?i=a.call(t,{hash:{},data:e}):(a=t&&t.parent,i=typeof a===l?a.call(t,{hash:{},data:e}):a),o+=d(i)+'">',(a=n.parent)?i=a.call(t,{hash:{},data:e}):(a=t&&t.parent,i=typeof a===l?a.call(t,{hash:{},data:e}):a),o+=d(i)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),a=a||{};var r,c="",l="function",d=this.escapeExpression,m=this;return r=n.each.call(e,e,{hash:{},inverse:m.noop,fn:m.program(1,o,a),data:a}),(r||0===r)&&(c+=r),c+="\n"})}),define("tpl!taoQtiTest/controller/creator/templates/test-props",["handlebars"],function(t){return t.template(function(t,e,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),a=a||{};var o,s,r,c="",l=n.helperMissing,d=this.escapeExpression,m="function";return c+='<div class="test-props props clearfix">\n    \n    <!-- test properties --> \n    <h3 data-bind="title"></h3>\n\n<!-- assessmentTest/identifier -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="test-identifier">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Identifier",r):l.call(e,"__","Identifier",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):l.call(e,"__","Required field",r)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="test-identifier" data-bind="identifier" data-validate="$notEmpty; $testIdFormat; $testIdAvailable(original=',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===m?s.call(e,{hash:{},data:a}):s),c+=d(o)+');" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"The principle identifier of the test.",r):l.call(e,"__","The principle identifier of the test.",r)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/title -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="test-title">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Title",r):l.call(e,"__","Title",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):l.call(e,"__","Required field",r)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="test-title" data-bind="title" data-validate="$notEmpty" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"The test title.",r):l.call(e,"__","The test title.",r)))+'\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .test-time-limits">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Time Limits",r):l.call(e,"__","Time Limits",r)))+'</h4>\n\n<!-- assessmentTest/timeLimits -->\n    <div class="test-time-limits toggled">\n\n\n\n<!-- assessmentTest/timeLimits/maxTime -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="test-max-time">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Maximum Duration",r):l.call(e,"__","Maximum Duration",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Maximum duration for the all test.",r):l.call(e,"__","Maximum duration for the all test.",r)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/timeLimits/allowLateSubmission -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Late submission allowed",r):l.call(e,"__","Late submission allowed",r)))+'\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="test-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Whether a candidate's response that is beyond the maximum duration should still be accepted.",r):l.call(e,"__","Whether a candidate's response that is beyond the maximum duration should still be accepted.",r)))+"\n                </div>\n            </div>\n        </div>\n    </div>\n\n</div>\n"})}),define("tpl!taoQtiTest/controller/creator/templates/testpart-props",["handlebars"],function(t){return t.template(function(t,e,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),a=a||{};var o,s,r,c="",l="function",d=this.escapeExpression,m=n.helperMissing;return c+='<div id="testpart-props-',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+'" class="testpart-props props clearfix">\n    <h3>',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+'</h3>\n    \n    <form autocomplete="off">\n\n<!-- assessmentTest/testPart/identifier -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="testpart-identifier">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Identifier",r):m.call(e,"__","Identifier",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):m.call(e,"__","Required field",r)))+'">*</abbr></label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="testpart-identifier" data-bind="identifier" data-validate="$notEmpty; $testIdFormat; $testIdAvailable(original=',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+');" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"The test part identifier.",r):m.call(e,"__","The test part identifier.",r)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/navigationMode -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n               '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Navigation",r):m.call(e,"__","Navigation",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):m.call(e,"__","Required field",r)))+'">*</abbr>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="radio" name="testpart-navigation-mode" value="0" checked="checked" data-bind="navigationMode" data-bind-encoder="number" />\n                    <span class="icon-radio"></span>\n                    '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Linear",r):m.call(e,"__","Linear",r)))+'\n                </label>\n                <label>\n                    <input type="radio" name="testpart-navigation-mode" value="1"  />\n                    <span class="icon-radio"></span>\n                    '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Non Linear",r):m.call(e,"__","Non Linear",r)))+'\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"The navigation mode determines the general paths that the candidate may take. A linear mode restricts the candidate to attempt each item in turn. Non Linear removes this restriction.",r):m.call(e,"__","The navigation mode determines the general paths that the candidate may take. A linear mode restricts the candidate to attempt each item in turn. Non Linear removes this restriction.",r)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/submissionMode -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Submission",r):m.call(e,"__","Submission",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):m.call(e,"__","Required field",r)))+'">*</abbr>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="radio" name="testpart-submission-mode" value="0" checked="checked" data-bind="submissionMode" data-bind-encoder="number" />\n                    <span class="icon-radio"></span>\n                    '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Individual",r):m.call(e,"__","Individual",r)))+'\n                </label>\n                <label>\n                    <input type="radio" name="testpart-submission-mode" value="1"  />\n                    <span class="icon-radio"></span>\n                    '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Simultaneous",r):m.call(e,"__","Simultaneous",r)))+'\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"The submission mode determines when the candidate's responses are submitted for response processing. A testPart in individual mode requires the candidate to submit their responses on an item-by-item basis. In simultaneous mode the candidate's responses are all submitted together at the end of the testPart.",r):m.call(e,"__","The submission mode determines when the candidate's responses are submitted for response processing. A testPart in individual mode requires the candidate to submit their responses on an item-by-item basis. In simultaneous mode the candidate's responses are all submitted together at the end of the testPart.",r)))+'\n                </div>\n            </div>\n        </div>\n\n        <h4 class="toggler closed" data-toggle="~ .testpart-item-session-control">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Item Session Control",r):m.call(e,"__","Item Session Control",r)))+'</h4>\n\n\n<!-- assessmentTest/testPart/itemSessionControl -->\n        <div class="testpart-item-session-control toggled">\n\n<!-- assessmentTest/testPart/itemSessionControl/maxAttempts -->\n            <div class="grid-row">\n                <div class="col-5">\n                    <label for="testpart-max-attempts">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Max Attempts",r):m.call(e,"__","Max Attempts",r)))+'</label>\n                </div>\n                <div class="col-6">\n                    <input name="testpart-max-attempts" type="text" data-increment="1" data-min="0" value="1" data-bind="itemSessionControl.maxAttempts" data-bind-encoder="number" />\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Controls the maximum number of attempts allowed. 0 means unlimited.",r):m.call(e,"__","Controls the maximum number of attempts allowed. 0 means unlimited.",r)))+'\n                    </div>\n                </div>\n            </div>\n\n<!-- assessmentTest/testPart/itemSessionControl/showFeedback -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-show-feedback">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Show Feedback",r):m.call(e,"__","Show Feedback",r)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="testpart-show-feedback" value="true" data-bind="itemSessionControl.showFeedback" data-bind-encoder="boolean" />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"This constraint affects the visibility of feedback after the end of the last attempt.",r):m.call(e,"__","This constraint affects the visibility of feedback after the end of the last attempt.",r)))+'\n                    </div>\n                </div>\n            </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/itemSessionControl/allowComment -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-allow-comment">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Allow Comment",r):m.call(e,"__","Allow Comment",r)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="testpart-allow-comment" value="true" data-bind="itemSessionControl.allowComment" data-bind-encoder="boolean" />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",r):m.call(e,"__","This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",r)))+'\n                    </div>\n                </div>\n            </div>\n\n<!-- assessmentTest/testPart/itemSessionControl/allowSkipping -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-allow-skipping">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Allow Skipping",r):m.call(e,"__","Allow Skipping",r)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="testpart-allow-skipping" value="true" checked="checked"  data-bind="itemSessionControl.allowSkipping" data-bind-encoder="boolean"   />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"If the candidate can skip the item, without submitting a response.",r):m.call(e,"__","If the candidate can skip the item, without submitting a response.",r)))+'\n                    </div>\n                </div>\n            </div>\n\n\n        </div>\n\n        <h4 class="toggler closed" data-toggle="~ .testpart-time-limits">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Time Limits",r):m.call(e,"__","Time Limits",r)))+'</h4>\n\n<!-- assessmentTest/testPart/timeLimits/minTime -->\n        <div class="testpart-time-limits toggled">\n\n\n\n<!-- assessmentTest/testPart/timeLimits/maxTime -->\n            <div class="grid-row">\n                <div class="col-5">\n                    <label for="testpart-max-time">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Maximum Duration",r):m.call(e,"__","Maximum Duration",r)))+'</label>\n                </div>\n                <div class="col-6">\n                    <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Maximum duration for this test part.",r):m.call(e,"__","Maximum duration for this test part.",r)))+'\n                    </div>\n                </div>\n            </div>\n\n<!-- assessmentTest/testPart/timeLimits/allowLateSubmission -->\n            <div class="grid-row pseudo-label-box">\n                <div class="col-5">\n                    <label for="testpart-allow-late-submission">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Late submission allowed",r):m.call(e,"__","Late submission allowed",r)))+'</label>\n                </div>\n                <div class="col-6">\n                    <label>\n                        <input type="checkbox" name="section-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                        <span class="icon-checkbox" />\n                    </label>\n                </div>\n                <div class="col-1 help">\n                    <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                    <div class="tooltip-content">\n                    '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Whether a candidate's response that is beyond the maximum duration of the test part should still be accepted.",r):m.call(e,"__","Whether a candidate's response that is beyond the maximum duration of the test part should still be accepted.",r)))+"\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n"
})}),define("tpl!taoQtiTest/controller/creator/templates/section-props",["handlebars"],function(t){return t.template(function(t,e,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),a=a||{};var o,s,r,c="",l="function",d=this.escapeExpression,m=n.helperMissing;return c+='<div id="section-props-',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+'" class="section-props props clearfix">\n    <h3>',(s=n.title)?o=s.call(e,{hash:{},data:a}):(s=e&&e.title,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+'</h3>\n\n<!-- assessmentTest/testPart/assessmentSection/identifier -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="section-identifier">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Identifier",r):m.call(e,"__","Identifier",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):m.call(e,"__","Required field",r)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="section-identifier" data-bind="identifier" data-validate="$notEmpty; $testIdFormat; $testIdAvailable(original=',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+');" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"The identifier of the section.",r):m.call(e,"__","The identifier of the section.",r)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/title -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="section-title">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Title",r):m.call(e,"__","Title",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):m.call(e,"__","Required field",r)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="section-title" data-bind="title" data-validate="$notEmpty" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"The section title.",r):m.call(e,"__","The section title.",r)))+'\n            </div>\n        </div>\n    </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/visible -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="section-visible">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Visible",r):m.call(e,"__","Visible",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):m.call(e,"__","Required field",r)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="section-visible" value="true" checked="checked"  data-bind="visible" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"A visible section is one that is identifiable by the candidate.",r):m.call(e,"__","A visible section is one that is identifiable by the candidate.",r)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/keepTogether -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="section-keep-together">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Keep Together",r):m.call(e,"__","Keep Together",r)))+'</label>\n        </div>\n\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="section-keep-together" value="true" checked="checked"  data-bind="keepTogether" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"An invisible section with a parent that is subject to shuffling can specify whether or not its children, which will appear to the candidate as if they were part of the parent, are shuffled as a block or mixed up with the other children of the parent section.",r):m.call(e,"__","An invisible section with a parent that is subject to shuffling can specify whether or not its children, which will appear to the candidate as if they were part of the parent, are shuffled as a block or mixed up with the other children of the parent section.",r)))+'\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-selection">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Selection",r):m.call(e,"__","Selection",r)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/selection -->\n    <div class="section-selection toggled">\n\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-enable-selection">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Enable selection",r):m.call(e,"__","Enable selection",r)))+'</label>\n            </div>\n\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-enable-selection"  />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/selection/select -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="section-select">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Select",r):m.call(e,"__","Select",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):m.call(e,"__","Required field",r)))+'">*</abbr></label>\n            </div>\n            <div class="col-6">\n                <input name="section-select" type="text" data-increment="1" data-min="0" value="0" data-bind="selection.select"  data-bind-encoder="number" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"The number of child elements to be selected.",r):m.call(e,"__","The number of child elements to be selected.",r)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/selection/withReplacement -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-with-replacement">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"With Replacement",r):m.call(e,"__","With Replacement",r)))+'</label>\n            </div>\n\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-with-replacement" value="true" data-bind="selection.withReplacement"  data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"When selecting child elements each element is normally eligible for selection once only.",r):m.call(e,"__","When selecting child elements each element is normally eligible for selection once only.",r)))+'\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-ordering">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Ordering",r):m.call(e,"__","Ordering",r)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/ordering -->\n    <div class="section-ordering toggled">\n<!-- assessmentTest/testPart/assessmentSection/ordering/shuffle -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-shuffle">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Shuffle",r):m.call(e,"__","Shuffle",r)))+'</label>\n            </div>\n\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-shuffle" value="true" data-bind="ordering.shuffle"  data-bind-encoder="boolean"  />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"If set, it causes the order of the child elements to be randomized, otherwise it uses the order in which the child elements are defined.",r):m.call(e,"__","If set, it causes the order of the child elements to be randomized, otherwise it uses the order in which the child elements are defined.",r)))+'\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-item-session-control">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Item Session Control",r):m.call(e,"__","Item Session Control",r)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl -->\n    <div class="section-item-session-control toggled">\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/maxAttempts -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="section-max-attempts">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Max Attempts",r):m.call(e,"__","Max Attempts",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <input name="section-max-attempts" type="text" data-increment="1" data-min="0" value="1" data-bind="itemSessionControl.maxAttempts" data-bind-encoder="number" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Controls the maximum number of attempts allowed. 0 means unlimited.",r):m.call(e,"__","Controls the maximum number of attempts allowed. 0 means unlimited.",r)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/showFeedback -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-show-feedback">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Show Feedback",r):m.call(e,"__","Show Feedback",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-show-feedback" value="true" data-bind="itemSessionControl.showFeedback" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"This constraint affects the visibility of feedback after the end of the last attempt.",r):m.call(e,"__","This constraint affects the visibility of feedback after the end of the last attempt.",r)))+'\n                </div>\n            </div>\n        </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/allowComment -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-allow-comment">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Allow Comment",r):m.call(e,"__","Allow Comment",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-allow-comment" value="true"  data-bind="itemSessionControl.allowComment" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",r):m.call(e,"__","This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",r)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/allowSkipping -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-allow-skipping">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Allow Skipping",r):m.call(e,"__","Allow Skipping",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-allow-skipping" value="true" checked="checked" data-bind="itemSessionControl.allowSkipping" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"If the candidate can skip the item, without submitting a response.",r):m.call(e,"__","If the candidate can skip the item, without submitting a response.",r)))+'\n                </div>\n            </div>\n        </div>\n\n\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .section-time-limits">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Time Limits",r):m.call(e,"__","Time Limits",r)))+'</h4>\n\n<!-- assessmentTest/timeLimits -->\n    <div class="section-time-limits toggled">\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/timeLimits/maxTime -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="section-max-time">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Maximum Duration",r):m.call(e,"__","Maximum Duration",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Maximum duration for this section.",r):m.call(e,"__","Maximum duration for this section.",r)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/timeLimits/allowLateSubmission -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="section-allow-late-submission">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Late submission allowed",r):m.call(e,"__","Late submission allowed",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="section-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Whether a candidate's response that is beyond the maximum duration of the section should still be accepted.",r):m.call(e,"__","Whether a candidate's response that is beyond the maximum duration of the section should still be accepted.",r)))+"\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"})}),define("tpl!taoQtiTest/controller/creator/templates/itemref-props",["handlebars"],function(t){return t.template(function(t,e,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),a=a||{};var o,s,r,c="",l="function",d=this.escapeExpression,m=n.helperMissing;return c+='<div id="itemref-props-',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+'" class="itemref-props props clearfix">\n\n    <h3>',(s=n.label)?o=s.call(e,{hash:{},data:a}):(s=e&&e.label,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+'</h3>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/identifier -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-identifier">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Identifier",r):m.call(e,"__","Identifier",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):m.call(e,"__","Required field",r)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="itemref-identifier" data-bind="identifier" data-validate="$notEmpty; $testIdFormat; $testIdAvailable(original=',(s=n.identifier)?o=s.call(e,{hash:{},data:a}):(s=e&&e.identifier,o=typeof s===l?s.call(e,{hash:{},data:a}):s),c+=d(o)+');" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"The identifier of the item reference.",r):m.call(e,"__","The identifier of the item reference.",r)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/href -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-href">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Reference",r):m.call(e,"__","Reference",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):m.call(e,"__","Required field",r)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="itemref-href" data-bind="href" readonly="readonly" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"The reference.",r):m.call(e,"__","The reference.",r)))+'\n            </div>\n        </div>\n    </div>\n    \n<!-- assessmentTest/testPart/assessmentSection/sectionPart/category -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-category">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Categories",r):m.call(e,"__","Categories",r)))+'</label>\n        </div>\n        <div class="col-6">\n            <input type="text" name="itemref-category" data-bind="categories" data-bind-encoder="str2array" />\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Items can optionally be assigned to one or more categories.",r):m.call(e,"__","Items can optionally be assigned to one or more categories.",r)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/required -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="itemref-required">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required",r):m.call(e,"__","Required",r)))+'</label>\n        </div>\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="itemref-required" value="true" data-bind="required" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"If required it must appear (at least once) in the selection.",r):m.call(e,"__","If required it must appear (at least once) in the selection.",r)))+'\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/fixed -->\n    <div class="grid-row pseudo-label-box">\n        <div class="col-5">\n            <label for="itemref-fixed">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Fixed",r):m.call(e,"__","Fixed",r)))+'</label>\n        </div>\n        <div class="col-6">\n            <label>\n                <input type="checkbox" name="itemref-fixed" value="true" data-bind="fixed" data-bind-encoder="boolean" />\n                <span class="icon-checkbox"></span>\n            </label>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Not shuffled, the position remains fixed.",r):m.call(e,"__","Not shuffled, the position remains fixed.",r)))+'\n            </div>\n        </div>\n    </div>\n\n\n    <h4 class="toggler closed" data-toggle="~ .itemref-item-session-control">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Item Session Control",r):m.call(e,"__","Item Session Control",r)))+'</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl -->\n    <div class="itemref-item-session-control toggled">\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/maxAttempts -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="itemref-max-attempts">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Max Attempts",r):m.call(e,"__","Max Attempts",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <input name="itemref-max-attempts" type="text" data-increment="1" data-min="0" value="1" data-bind="itemSessionControl.maxAttempts" data-bind-encoder="number" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Controls the maximum number of attempts allowed. 0 means unlimited.",r):m.call(e,"__","Controls the maximum number of attempts allowed. 0 means unlimited.",r)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/showFeedback -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-show-feedback">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Show Feedback",r):m.call(e,"__","Show Feedback",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-show-feedback" value="true" data-bind="itemSessionControl.showFeedback" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"This constraint affects the visibility of feedback after the end of the last attempt.",r):m.call(e,"__","This constraint affects the visibility of feedback after the end of the last attempt.",r)))+'\n                </div>\n            </div>\n        </div>\n\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/allowComment -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-allow-comment">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Allow Comment",r):m.call(e,"__","Allow Comment",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-allow-comment" value="true"  data-bind="itemSessionControl.allowComment" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",r):m.call(e,"__","This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",r)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/allowSkipping -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-allow-skipping">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Allow Skipping",r):m.call(e,"__","Allow Skipping",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-allow-skipping" value="true" checked="checked" data-bind="itemSessionControl.allowSkipping" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"If the candidate can skip the item, without submitting a response.",r):m.call(e,"__","If the candidate can skip the item, without submitting a response.",r)))+'\n                </div>\n            </div>\n        </div>\n\n\n    </div>\n\n    <h4 class="toggler closed" data-toggle="~ .itemref-time-limits">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Time Limits",r):m.call(e,"__","Time Limits",r)))+'</h4>\n\n<!-- assessmentTest/timeLimits -->\n    <div class="itemref-time-limits toggled">\n\n\n\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/timeLimits/maxTime -->\n        <div class="grid-row">\n            <div class="col-5">\n                <label for="itemref-max-time">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Maximum Duration",r):m.call(e,"__","Maximum Duration",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <input type="text" name="max-time" value="00:00:00" data-duration="HH:mm:ss" data-bind="timeLimits.maxTime" data-bind-encoder="time" />\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Maximum duration for this item.",r):m.call(e,"__","Maximum duration for this item.",r)))+'\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/timeLimits/allowLateSubmission -->\n        <div class="grid-row pseudo-label-box">\n            <div class="col-5">\n                <label for="itemref-allow-late-submission">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Late submission allowed",r):m.call(e,"__","Late submission allowed",r)))+'</label>\n            </div>\n            <div class="col-6">\n                <label>\n                    <input type="checkbox" name="itemref-allow-late-submission" value="true" data-bind="timeLimits.allowLateSubmission" data-bind-encoder="boolean" />\n                    <span class="icon-checkbox"></span>\n                </label>\n            </div>\n            <div class="col-1 help">\n                <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n                <div class="tooltip-content">\n                '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Whether a candidate's response that is beyond the maximum duration of the item should still be accepted.",r):m.call(e,"__","Whether a candidate's response that is beyond the maximum duration of the item should still be accepted.",r)))+"\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"})}),define("tpl!taoQtiTest/controller/creator/templates/rubricblock-props",["handlebars"],function(t){return t.template(function(t,e,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),a=a||{};var o,s,r,c="",l=n.helperMissing,d=this.escapeExpression,m="function";return c+='<div class="rubricblock-props props clearfix">\n\n    <h3>'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Rubric Block",r):l.call(e,"__","Rubric Block",r)))+": ",(s=n.index)?o=s.call(e,{hash:{},data:a}):(s=e&&e.index,o=typeof s===m?s.call(e,{hash:{},data:a}):s),c+=d(o)+'</h3>\n\n <!--assessmentTest/testPart/assessmentSection/sectionPart/rubrickBlocK/views -->\n    <div class="grid-row">\n        <div class="col-5">\n            <label for="itemref-identifier">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Views",r):l.call(e,"__","Views",r)))+' <abbr title="'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Required field",r):l.call(e,"__","Required field",r)))+'">*</abbr></label>\n        </div>\n        <div class="col-6">\n            <select name="view" multiple="multiple" data-bind="views">\n                <option value="author">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Author",r):l.call(e,"__","Author",r)))+'</option>\n                <option value="candidate">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Candidate",r):l.call(e,"__","Candidate",r)))+'</option>\n                <option value="proctor">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Proctor",r):l.call(e,"__","Proctor",r)))+'</option>\n                <option value="scorer">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Scorer",r):l.call(e,"__","Scorer",r)))+'</option>\n                <option value="testConstructor">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Test constructor",r):l.call(e,"__","Test constructor",r)))+'</option>\n                <option value="tutor">'+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Tutor",r):l.call(e,"__","Tutor",r)))+'</option>\n            </select>\n        </div>\n        <div class="col-1 help">\n            <span class="icon-help" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span> \n            <div class="tooltip-content">\n            '+d((s=n.__||e&&e.__,r={hash:{},data:a},s?s.call(e,"Who can view the rubric block during the delivery.",r):l.call(e,"__","Who can view the rubric block during the delivery.",r)))+"\n            </div>\n        </div>\n    </div>\n\n</div>\n"
})}),define("taoQtiTest/controller/creator/templates/index",["tpl!taoQtiTest/controller/creator/templates/testpart","tpl!taoQtiTest/controller/creator/templates/section","tpl!taoQtiTest/controller/creator/templates/rubricblock","tpl!taoQtiTest/controller/creator/templates/itemref","tpl!taoQtiTest/controller/creator/templates/item","tpl!taoQtiTest/controller/creator/templates/test-props","tpl!taoQtiTest/controller/creator/templates/testpart-props","tpl!taoQtiTest/controller/creator/templates/section-props","tpl!taoQtiTest/controller/creator/templates/itemref-props","tpl!taoQtiTest/controller/creator/templates/rubricblock-props"],function(t,e,n,i,a,o,s,r,c,l){return{testpart:t,section:e,itemref:i,item:a,rubricblock:n,properties:{test:o,testpart:s,section:r,itemref:c,rubricblock:l}}}),define("taoQtiTest/controller/creator/views/item",["jquery","taoQtiTest/controller/creator/templates/index"],function(t,e){var n=e.item,i=function(e){function i(){var t,n=function(){var n=c.val();(n.length>1||0===n.length)&&(clearTimeout(t),t=setTimeout(function(){e(n,function(t){a(t)})},300))};c.keyup(n).siblings(".ctrl").click(n)}function a(t){o(),l.empty().append(n(t)),s()}function o(){r.data("selectable")&&r.selectable("disable")}function s(){r.selectable(r.data("selectable")?"enable":{filter:"li",selected:function(e,n){t(n.selected).addClass("selected")},unselected:function(e,n){t(n.unselected).removeClass("selected")},stop:function(){t(this).trigger("itemselect.creator",t(".selected"))}})}var r=t(".test-creator-items"),c=t("#item-filter"),l=t(".item-box",r);"function"==typeof e&&e(void 0,function(t){a(t),i()})};return i}),define("taoQtiTest/controller/creator/views/property",["jquery","ui","core/databinder","taoQtiTest/controller/creator/templates/index"],function(t,e,n,i){var a=function(a,o){function s(){r.on("validated.group",function(e,n){if("group"===e.namespace){var i=t("#test-creator .property-toggler, #saver");n===!0?i.removeClass("disabled"):i.addClass("disabled")}}),r.groupValidator()}var r,c=t(".test-creator-props"),l=i.properties[a],d=function(){var i;c.children(".props").hide().trigger("propclose.propview"),r=t(l(o)).appendTo(c).filter(".props"),e.startDomComponent(r),i=new n(r,o),i.bind(),s(),r.trigger("propopen.propview")},m=function(){return r},h=function(){return"none"!==r.css("display")},p=function(t){r.on("propopen.propview",function(e){e.stopPropagation(),t()})},u=function(t){r.on("propclose.propview",function(e){e.stopPropagation(),t()})},f=function(){r.remove()},b=function(){c.children(".props").not(r).hide().trigger("propclose.propview"),h()?r.hide().trigger("propclose.propview"):r.show().trigger("propopen.propview")};return{open:d,getView:m,isOpen:h,onOpen:p,onClose:u,destroy:f,toggle:b}};return a}),define("taoQtiTest/controller/creator/views/actions",["jquery","taoQtiTest/controller/creator/views/property"],function(t,e){function n(n,i,a,o){var l=null;n.find(".property-toggler").on("click",function(d){d.preventDefault();var m=t(this);t(this).hasClass(s)||(m.blur(),null===l?(n.addClass(r),m.addClass(c),l=e(i,a),l.open(),l.onOpen(function(){n.addClass(r),m.addClass(c)}),l.onClose(function(){n.removeClass(r),m.removeClass(c)}),"function"==typeof o&&o(l)):l.toggle())})}function i(e,n,i){var a=e.parents("."+i),o=a.parents("."+n);t(".move-up",e).click(function(e){var n,s;return e.preventDefault(),a.is(":animated")?!1:(n=t("."+i,o),s=n.index(a),void(s>0&&a.fadeOut(200,function(){a.insertBefore(t("."+i+" :eq("+(s-1)+")",o)).fadeIn(400),o.trigger("change"),a.trigger("move")})))}),t(".move-down",e).click(function(e){var n,s;return e.preventDefault(),a.is(":animated")?!1:(n=t("."+i,o),s=n.index(a),void(s<n.length-1&&n.length>1&&a.fadeOut(200,function(){a.insertAfter(t("."+i+" :eq("+(s+1)+")",o)).fadeIn(400),o.trigger("change"),a.trigger("move")})))})}function a(e,n,i){e.each(function(){var n=t(this),a=t(i,n),o=e.index(n),r=t(".move-up",a),c=t(".move-down",a);1===e.length?(r.addClass(s),c.addClass(s)):0===o?(r.addClass(s),c.removeClass(s)):o>=e.length-1?(c.addClass(s),r.removeClass(s)):(r.removeClass(s),c.removeClass(s))})}function o(e,n){e.each(function(){var i=t(this),a=t(n,i),o=t("[data-delete]",a);e.length<=1?o.addClass(s):o.removeClass(s)})}var s="disabled",r="active",c="tlb-button-on";return{properties:n,move:i,removable:o,movable:a}}),define("taoQtiTest/controller/creator/views/itemref",["jquery","i18n","taoQtiTest/controller/creator/views/actions"],function(t,e,n){var i=function(i,a){function o(t){function e(){null!==t&&t.destroy()}s(t.getView().find("[name=itemref-category]")),i.parents(".testpart").on("delete",e),i.parents(".section").on("delete",e),i.on("delete",e)}function s(t){t.select2({width:"100%",tags:[],multiple:!0,tokenSeparators:[","," ",";"],formatNoMatches:function(){return e("Enter a category")},maximumInputLength:32})}var r=t(".actions",i);n.properties(r,"itemref",a,o),n.move(r,"itemrefs","itemref")},a=function(){t(".itemrefs").each(function(){n.movable(t(".itemref",t(this)),"itemref",".actions")}),t(document).on("add change deleted",".itemrefs",function(e){var i=t(e.target);(i.hasClass("itemref")||i.hasClass("itemrefs"))&&n.movable(t(".itemref",i.hasClass("itemrefs")?i:i.parents(".itemrefs")),"itemref",".actions")})};return{setUp:i,listenActionState:a}}),define("taoQtiItem/qtiItem/core/qtiClasses",[],function(){return{_container:"taoQtiItem/qtiItem/core/Container",assessmentItem:"taoQtiItem/qtiItem/core/Item",responseProcessing:"taoQtiItem/qtiItem/core/ResponseProcessing",_simpleFeedbackRule:"taoQtiItem/qtiItem/core/response/SimpleFeedbackRule",stylesheet:"taoQtiItem/qtiItem/core/Stylesheet",math:"taoQtiItem/qtiItem/core/Math",img:"taoQtiItem/qtiItem/core/Img",object:"taoQtiItem/qtiItem/core/Object",outcomeDeclaration:"taoQtiItem/qtiItem/core/variables/OutcomeDeclaration",responseDeclaration:"taoQtiItem/qtiItem/core/variables/ResponseDeclaration",rubricBlock:"taoQtiItem/qtiItem/core/RubricBlock",associableHotspot:"taoQtiItem/qtiItem/core/choices/AssociableHotspot",gap:"taoQtiItem/qtiItem/core/choices/Gap",gapImg:"taoQtiItem/qtiItem/core/choices/GapImg",gapText:"taoQtiItem/qtiItem/core/choices/GapText",hotspotChoice:"taoQtiItem/qtiItem/core/choices/HotspotChoice",hottext:"taoQtiItem/qtiItem/core/choices/Hottext",inlineChoice:"taoQtiItem/qtiItem/core/choices/InlineChoice",simpleAssociableChoice:"taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice",simpleChoice:"taoQtiItem/qtiItem/core/choices/SimpleChoice",associateInteraction:"taoQtiItem/qtiItem/core/interactions/AssociateInteraction",choiceInteraction:"taoQtiItem/qtiItem/core/interactions/ChoiceInteraction",endAttemptInteraction:"taoQtiItem/qtiItem/core/interactions/EndAttemptInteraction",extendedTextInteraction:"taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction",gapMatchInteraction:"taoQtiItem/qtiItem/core/interactions/GapMatchInteraction",graphicAssociateInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction",hotspotInteraction:"taoQtiItem/qtiItem/core/interactions/HotspotInteraction",hottextInteraction:"taoQtiItem/qtiItem/core/interactions/HottextInteraction",inlineChoiceInteraction:"taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction",matchInteraction:"taoQtiItem/qtiItem/core/interactions/MatchInteraction",mediaInteraction:"taoQtiItem/qtiItem/core/interactions/MediaInteraction",orderInteraction:"taoQtiItem/qtiItem/core/interactions/OrderInteraction",prompt:"taoQtiItem/qtiItem/core/interactions/Prompt",selectPointInteraction:"taoQtiItem/qtiItem/core/interactions/SelectPointInteraction",sliderInteraction:"taoQtiItem/qtiItem/core/interactions/SliderInteraction",textEntryInteraction:"taoQtiItem/qtiItem/core/interactions/TextEntryInteraction",uploadInteraction:"taoQtiItem/qtiItem/core/interactions/UploadInteraction",feedbackBlock:"taoQtiItem/qtiItem/core/feedbacks/FeedbackBlock",feedbackInline:"taoQtiItem/qtiItem/core/feedbacks/FeedbackInline",modalFeedback:"taoQtiItem/qtiItem/core/feedbacks/ModalFeedback"}}),define("taoQtiItem/qtiCreator/model/qtiClasses",["lodash","taoQtiItem/qtiItem/core/qtiClasses"],function(t,e){return t.defaults({assessmentItem:"taoQtiItem/qtiCreator/model/Item",_container:"taoQtiItem/qtiCreator/model/Container",img:"taoQtiItem/qtiCreator/model/Img",math:"taoQtiItem/qtiCreator/model/Math",object:"taoQtiItem/qtiCreator/model/Object",rubricBlock:"taoQtiItem/qtiCreator/model/RubricBlock",modalFeedback:"taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback",choiceInteraction:"taoQtiItem/qtiCreator/model/interactions/ChoiceInteraction",orderInteraction:"taoQtiItem/qtiCreator/model/interactions/OrderInteraction",associateInteraction:"taoQtiItem/qtiCreator/model/interactions/AssociateInteraction",matchInteraction:"taoQtiItem/qtiCreator/model/interactions/MatchInteraction",inlineChoiceInteraction:"taoQtiItem/qtiCreator/model/interactions/InlineChoiceInteraction",simpleChoice:"taoQtiItem/qtiCreator/model/choices/SimpleChoice",simpleAssociableChoice:"taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice",inlineChoice:"taoQtiItem/qtiCreator/model/choices/InlineChoice",mediaInteraction:"taoQtiItem/qtiCreator/model/interactions/MediaInteraction",uploadInteraction:"taoQtiItem/qtiCreator/model/interactions/UploadInteraction",textEntryInteraction:"taoQtiItem/qtiCreator/model/interactions/TextEntryInteraction",sliderInteraction:"taoQtiItem/qtiCreator/model/interactions/SliderInteraction",extendedTextInteraction:"taoQtiItem/qtiCreator/model/interactions/ExtendedTextInteraction",hotspotInteraction:"taoQtiItem/qtiCreator/model/interactions/HotspotInteraction",selectPointInteraction:"taoQtiItem/qtiCreator/model/interactions/SelectPointInteraction",graphicInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction",graphicAssociateInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction",hotspotChoice:"taoQtiItem/qtiCreator/model/choices/HotspotChoice",gapImg:"taoQtiItem/qtiCreator/model/choices/GapImg",associableHotspot:"taoQtiItem/qtiCreator/model/choices/AssociableHotspot",gapMatchInteraction:"taoQtiItem/qtiCreator/model/interactions/GapMatchInteraction",hottextInteraction:"taoQtiItem/qtiCreator/model/interactions/HottextInteraction",hottext:"taoQtiItem/qtiCreator/model/choices/Hottext",gapText:"taoQtiItem/qtiCreator/model/choices/GapText",gap:"taoQtiItem/qtiCreator/model/choices/Gap",responseDeclaration:"taoQtiItem/qtiCreator/model/variables/ResponseDeclaration",responseProcessing:"taoQtiItem/qtiCreator/model/ResponseProcessing"},e)}),define("taoQtiItem/qtiItem/helper/util",["lodash"],function(t){var e={buildSerial:function(t){for(var e=t||"",n="abcdefghijklmnopqrstuvwxyz0123456789",i=0;22>i;i++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},fullpath:function(t,e){return t=t||"",e=e||"",t&&(t=t.replace(/^\//,""),t.match(/^http/i)||(e&&!e.match(/\/$/)&&(e+="/"),t=e+t)),t},findInCollection:function(e,n,i){var a=null;if(t.isString(n)&&(n=[n]),!t.isArray(n))throw new Error("invalid argument : colllectionNames must be an array or a string");return t.each(n,function(n){var o=e;t.each(n.split("."),function(t){o=o[t]});var s=o[i];return s?(a={parent:e,element:s},!1):(t.each(o,function(e){return t.isFunction(e.find)&&(a=e.find(i))?!1:void 0}),a?!1:void 0)}),a}};return e}),define("taoQtiItem/qtiItem/helper/rendererConfig",["lodash","jquery"],function(t,e){var n={};return n.getOptionsFromArguments=function(n){var i={data:{},placeholder:null,subclass:"",renderer:null};return t.each(n,function(a){a&&(a.isRenderer?i.renderer=a:a instanceof e&&a.length?i.placeholder=a:t.isString(a)?i.subclass=a:t.isPlainObject(a)?i.data=a:console.log("invalid arg",a,n))}),i},n}),define("taoQtiItem/qtiItem/core/Element",["class","lodash","taoQtiItem/qtiItem/helper/util","taoQtiItem/qtiItem/helper/rendererConfig"],function(t,e,n,i){var a={},o=t.extend({qtiClass:"",serial:"",relatedItem:null,init:function(t,e){if(this.attributes={},this.metaData={},"object"==typeof t&&(e=t,t=""),t||(t=n.buildSerial(this.qtiClass+"_")),t&&("string"!=typeof t||!t.match(/^[a-z_0-9]*$/i)))throw"invalid QTI serial : ("+typeof t+") "+t;if(a[t])throw"a QTI Element with the same serial already exists "+t;a[t]=this,this.serial=t,this.setAttributes(e||{}),"function"==typeof this.initContainer&&this.initContainer(arguments[2]||""),"function"==typeof this.initObject&&this.initObject()},is:function(t){return t===this.qtiClass},placeholder:function(){return"{{"+this.serial+"}}"},getSerial:function(){return this.serial},getUsedIdentifiers:function(){var t={},e=this.getComposingElements();for(var n in e){var i=e[n],a=i.attr("identifier");a&&(t[a]=i)}return t},attr:function(t,e){if(t)if(void 0!==e)this.attributes[t]=e;else if("object"==typeof t)for(var n in t)this.attr(n,t[n]);else if("string"==typeof t)return void 0===this.attributes[t]?void 0:this.attributes[t];return this},data:function(t,e){if(t)if(void 0!==e)this.metaData[t]=e,$(document).trigger("metaChange.qti-widget",{element:this,key:t,value:e});else if("object"==typeof t)for(var n in t)this.data(n,t[n]);else if("string"==typeof t)return void 0===this.metaData[t]?void 0:this.metaData[t];return this},removeData:function(t){return delete this.metaData[t],this},removeAttr:function(t){return this.removeAttributes(t)},setAttributes:function(t){return this.attributes=t,this},getAttributes:function(){return e.clone(this.attributes)},removeAttributes:function(t){"string"==typeof t&&(t=[t]);for(var e in t)delete this.attributes[t[e]];return this},getComposingElements:function(){var t={};if("function"==typeof this.initContainer){var n=this.getBody();t[n.getSerial()]=n,t=e.extend(t,n.getComposingElements())}if("function"==typeof this.initObject){var i=this.getObject();t[i.getSerial()]=i,t=e.extend(t,i.getComposingElements())}return t},getUsedClasses:function(){var t=[this.qtiClass],n=this.getComposingElements();return e.each(n,function(e){t.push(e.qtiClass)}),e.uniq(t)},find:function(t){var e=null;if("function"==typeof this.initObject){var n=this.getObject();n.serial===t&&(e={parent:this,element:n,location:"object"})}return e||"function"!=typeof this.initContainer||(e=this.getBody().find(t,this)),e},parent:function(){var t=this.getRelatedItem();if(t){var e=t.find(this.getSerial());if(e)return e.parent}return null},setRelatedItem:function(t,e){if(e="undefined"==typeof e?!0:e,o.isA(t,"assessmentItem")){this.relatedItem=t;var n=this.getComposingElements();for(var i in n)n[i].setRelatedItem(t,!1)}},getRelatedItem:function(){var t=null;return o.isA(this.relatedItem,"assessmentItem")&&(t=this.relatedItem),t},setRenderer:function(t){if(!t||!t.isRenderer)throw"invalid qti rendering engine";this.renderer=t;var e=this.getComposingElements();for(var n in e)e[n].setRenderer(t)},getRenderer:function(){return this.renderer},render:function(){var t=i.getOptionsFromArguments(arguments),n=t.renderer||this.getRenderer(),a={},o={tag:this.qtiClass,serial:this.serial,attributes:this.getAttributes()};if(!n)throw"render: no renderer found for the element "+this.qtiClass+":"+this.serial;if("function"==typeof this.initContainer&&(o.body=this.getBody().render(n)),"function"==typeof this.initObject){o.object={attributes:this.object.getAttributes()};var s=o.object.attributes.data,r=n.getOption("baseUrl");r&&(/^http(s)?:\/\//.test(s)||(o.object.attributes.data=r+s))}a=e.merge(o,t.data||{}),a=n.getData(this,a,t.subclass);var c=n.renderTpl(this,a,t.subclass);return t.placeholder&&t.placeholder.replaceWith(c),c},postRender:function(t,e,n){if(n=n||this.getRenderer(),"function"==typeof this.initContainer&&this.getBody().postRender({},"",n),n)return n.postRender(this,t,e);throw"postRender: no renderer found for the element "+this.qtiClass+":"+this.serial},getContainer:function(t,e){var n=this.getRenderer();if(n)return n.getContainer(this,t,e);throw"getContainer: no renderer found for the element "+this.qtiClass+":"+this.serial},toArray:function(){var t={serial:this.serial,type:this.qtiClass,attributes:this.getAttributes()};return"function"==typeof this.initContainer&&(t.body=this.getBody().toArray()),"function"==typeof this.initObject&&(t.object=this.object.toArray()),t},remove:function(t,e){if(console.log("element.remove() : deprecated method"),this[t]){var n="";"string"==typeof e?n=e:e instanceof o&&(n=e.getSerial()),n&&delete this[t][n]}return this},isEmpty:function(){return!1},addClass:function(t){var e=this.attr("class")||"";s(e,t)||this.attr("class",e+(e.length?" ":"")+t)},hasClass:function(t){return s(this.attr("class"),t)},removeClass:function(t){var e=this.attr("class")||"";if(e){var n=new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","");e=e.replace(n,"").replace(/^\s+/,""),e?this.attr("class",e):this.removeAttr("class")}}}),s=function(t,e){var n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","");return t&&n.test(t)};return o.isA=function(t,e){return t instanceof o&&t.is(e)},o.getElementBySerial=function(t){return a[t]},o.unsetElement=function(t){delete a[t]},o}),define("taoQtiItem/qtiItem/helper/interactionHelper",["lodash","taoQtiItem/qtiItem/core/Element"],function(t,e){return{convertChoices:function(n,i){var a=[],o=this;return t.each(n,function(n){if(e.isA(n,"choice"))switch(i){case"serial":a.push(n.getSerial());break;case"identifier":a.push(n.id());break;default:a.push(n)}else t.isArray(n)&&a.push(o.convertChoices(n,i))}),a},findChoices:function(e,n,i){var a=[],o=this;return t.each(n,function(n){var s;t.isString(n)?"serial"===i?(s=e.getChoice(n),s&&a.push(s)):"identifier"===i?(s=e.getChoiceByIdentifier(n),s&&a.push(s)):a.push(n):a.push(t.isArray(n)?o.findChoices(e,n,i):n)}),a},shuffleChoices:function(t){var n=[],i={},a=0;for(var o in t){if(!e.isA(t[o],"choice"))throw"invalid element in array: is not a qti choice";var s=t[o];s.attr("fixed")&&(i[a]=s),n.push(s),a++}for(var r=0;r<n.length-1;r++)if(!i[r]){var c=-1;do c=r+Math.floor(Math.random()*(n.length-r));while(i[c]);var l=n[c];n[c]=n[r],n[r]=l}return n},serialToIdentifier:function(t,e){var n=t.getChoice(e);return n?n.id():""}}}),define("taoQtiItem/qtiRunner/core/Renderer",["lodash","jquery","handlebars","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/helper/interactionHelper"],function(t,e,n,i,a){var o=function(e){var n=!0;if("object"!=typeof e)return!1;var i=!1;if(e.qtiClass)if(t.indexOf(s,e.qtiClass)>=0)i=!0;else{var a=e.qtiClass.indexOf(".");if(a>0){var o=e.qtiClass.slice(0,a),r=e.qtiClass.slice(a+1);c[o]&&t.indexOf(c[o],r)>=0&&(i=!0)}}if(!i)throw n=!1,new Error("invalid qti class name in renderer declaration : "+e.qtiClass);if(!e.template)throw n=!1,new Error("missing template in renderer declaration : "+e.qtiClass);return n},s=["_container","assessmentItem","stylesheet","responseDeclaration","outcomeDeclaration","responseProcessing","_simpleFeedbackRule","img","math","object","modalFeedback","rubricBlock","associateInteraction","choiceInteraction","extendedTextInteraction","gapMatchInteraction","graphicAssociateInteraction","graphicGapMatchInteraction","graphicOrderInteraction","hotspotInteraction","hottextInteraction","inlineChoiceInteraction","matchInteraction","mediaInteraction","orderInteraction","selectPointInteraction","sliderInteraction","textEntryInteraction","uploadInteraction","endAttemptInteraction","prompt","associableHotspot","gap","gapImg","gapText","hotspotChoice","hottext","inlineChoice","simpleAssociableChoice","simpleChoice"],r={associateInteraction:["simpleAssociableChoice"],choiceInteraction:["simpleChoice"],gapMatchInteraction:["gap","gapText"],graphicAssociateInteraction:["associableHotspot"],graphicGapMatchInteraction:["associableHotspot","gapImg"],graphicOrderInteraction:["hotspotChoice"],hotspotInteraction:["hotspotChoice"],hottextInteraction:["hottext"],inlineChoiceInteraction:["inlineChoice"],matchInteraction:["simpleAssociableChoice"],orderInteraction:["simpleChoice"]},c={simpleAssociableChoice:["associateInteraction","matchInteraction"],simpleChoice:["choiceInteraction","orderInteraction"]},l=["_container","prompt","modalFeedback"],d=function(d){d=d||{},this.isRenderer=!0,this.name="",this.shuffleChoices=void 0!==d.shuffleChoices?d.shuffleChoices:!0,this.shuffledChoices=[];var m={},h={},p=function(t){var e=null;if(h[t])e=h[t];else{var n=t.indexOf(".");n>0&&(t=t.slice(0,n),h[t]&&(e=h[t]))}return e};this.setOption=function(t,e){return"string"==typeof t&&(d[t]=e),this},this.setOptions=function(e){return t.extend(d,e),this},this.getOption=function(t){return"string"==typeof t&&d[t]?d[t]:null},this.renderTpl=function(t,e,n){var i="",a=!1,o=n||t.qtiClass,s=p(o);if(s&&"function"==typeof s.template&&(i=s.template(e),a=!0),!a)throw new Error("no renderer template loaded under the class name : "+o);return i},this.getData=function(t,e,n){var i=e,a=n||t.qtiClass,o=p(a);return o&&"function"==typeof o.getData&&(i=o.getData.call(this,t,e)),i},this.renderDirect=function(t,e){return n.compile(t)(e)},this.getContainer=function(t,e,n){var i=null,a=n||t.qtiClass,o=p(a);if(!o)throw"no renderer found for the class : "+t.qtiClass;return i=o.getContainer(t,e)},this.postRender=function(t,e,n){var i=!1,a=n||t.qtiClass,o=p(a);return o&&"function"==typeof o.render&&(i=o.render.call(this,t,e)),i},this.setResponse=function(t,n,i){var a=!1,o=i||t.qtiClass,s=p(o);if(!s)throw"no renderer registered under the name : "+o;if("function"==typeof s.setResponse){a=s.setResponse.call(this,t,n);var r=s.getContainer.call(this,t);r instanceof e&&r.length&&r.trigger("responseSet",[t,n])}return a},this.getResponse=function(t,e){var n=!1,i=e||t.qtiClass,a=p(i);if(!a)throw"no renderer registered under the name : "+i;return"function"==typeof a.getResponse&&(n=a.getResponse.call(this,t)),n},this.resetResponse=function(t,e){var n=!1,i=e||t.qtiClass,a=p(i);if(!a)throw"no renderer registered under the name : "+i;return"function"==typeof a.resetResponse&&(n=a.resetResponse.call(this,t)),n},this.getLoadedRenderers=function(){return h},this.register=function(e){t.extend(m,e)},this.load=function(e,n){var i=[];if(n){if(!t.isArray(n))throw new Error('invalid argument type: expected array for arg "requireClasses"');n=t.intersection(n,s),n=t.union(n,l),t.each(n,function(e){var i=r[e];i&&(n=t.union(n,i))});for(var a in n){var d=n[a];if(c[d]){var p=t.intersection(n,c[d]);t.each(p,function(t){if(m[d+"."+t])i.push(m[d+"."+t]);else{if(!m[d])throw new Error(this.name+" : missing qti class location declaration: "+d+", subclass: "+t);i.push(m[d])}})}else if(m[d]===!1)h[d]=!1;else{if(!m[d])throw new Error(this.name+" : missing qti class location declaration: "+d);i.push(m[d])}}}else i=t.values(m);var u=this;return require(i,function(){t.each(arguments,function(t){o(t)&&(h[t.qtiClass]=t)}),"function"==typeof e&&e.call(u,h)}),this},this.setShuffledChoices=function(t,e,n){i.isA(t,"interaction")&&(this.shuffledChoices[t.getSerial()]=a.findChoices(t,e,n))},this.getShuffledChoices=function(e,n,o){var s,r=[];if(i.isA(e,"interaction")){var c=e.getSerial();if(!this.shuffledChoices[c]||n)if(i.isA(e,"matchInteraction")){this.shuffledChoices[c]=[];for(var l=0;2>l;l++)this.shuffledChoices[c].push(a.shuffleChoices(e.getChoices(l)))}else this.shuffledChoices[c]=a.shuffleChoices(e.getChoices());s=this.shuffledChoices[c],r="serial"===o||"identifier"===o?a.convertChoices(s,o):t.clone(s)}return r},this.getRenderers=function(){return h},this.getLocations=function(){return m}};return{build:function(t,e){var n=function(){d.apply(this,arguments),this.register(t),this.name=e||""};return n.prototype=d.prototype,n},getElementRenderer:function(t,e){if(e.qtiClass===t.qtiClass){e.getRenderer()}}}}),define("taoQtiItem/qtiDefaultRenderer/renderers/config",[],function(){return{name:"defaultRenderer",locations:{_container:"taoQtiItem/qtiDefaultRenderer/renderers/Container",assessmentItem:"taoQtiItem/qtiDefaultRenderer/renderers/Item",stylesheet:"taoQtiItem/qtiDefaultRenderer/renderers/Stylesheet",outcomeDeclaration:"taoQtiItem/qtiDefaultRenderer/renderers/OutcomeDeclaration",responseDeclaration:"taoQtiItem/qtiDefaultRenderer/renderers/ResponseDeclaration",responseProcessing:"taoQtiItem/qtiDefaultRenderer/renderers/ResponseProcessing",math:"taoQtiItem/qtiDefaultRenderer/renderers/Math",object:"taoQtiItem/qtiDefaultRenderer/renderers/Object",modalFeedback:"taoQtiItem/qtiDefaultRenderer/renderers/ModalFeedback",rubricBlock:"taoQtiItem/qtiDefaultRenderer/renderers/RubricBlock",associateInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/AssociateInteraction",choiceInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/ChoiceInteraction",extendedTextInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/ExtendedTextInteraction",gapMatchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GapMatchInteraction",graphicAssociateInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicOrderInteraction",hotspotInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/HotspotInteraction",hottextInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/HottextInteraction",inlineChoiceInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/InlineChoiceInteraction",matchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/MatchInteraction",mediaInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/MediaInteraction",orderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/OrderInteraction",selectPointInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/SelectPointInteraction",sliderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/SliderInteraction",textEntryInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/TextEntryInteraction",prompt:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/Prompt",associableHotspot:"taoQtiItem/qtiDefaultRenderer/renderers/choices/AssociableHotspot",gap:"taoQtiItem/qtiDefaultRenderer/renderers/choices/Gap",gapImg:"taoQtiItem/qtiDefaultRenderer/renderers/choices/GapImg",gapText:"taoQtiItem/qtiDefaultRenderer/renderers/choices/GapText",hotspotChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/HotspotChoice",hottext:"taoQtiItem/qtiDefaultRenderer/renderers/choices/Hottext",inlineChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/InlineChoice",simpleAssociableChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleAssociableChoice",simpleChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleChoice"}}}),define("taoQtiItem/qtiCommonRenderer/renderers/config",["lodash","taoQtiItem/qtiDefaultRenderer/renderers/config"],function(t,e){var n=t.extend(t.clone(e.locations),{assessmentItem:"taoQtiItem/qtiCommonRenderer/renderers/Item",_container:"taoQtiItem/qtiCommonRenderer/renderers/Container",_simpleFeedbackRule:!1,stylesheet:"taoQtiItem/qtiCommonRenderer/renderers/Stylesheet",img:"taoQtiItem/qtiCommonRenderer/renderers/Img",math:"taoQtiItem/qtiCommonRenderer/renderers/Math",object:"taoQtiItem/qtiCommonRenderer/renderers/Object",rubricBlock:"taoQtiItem/qtiCommonRenderer/renderers/RubricBlock",modalFeedback:"taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback",prompt:"taoQtiItem/qtiCommonRenderer/renderers/interactions/Prompt",choiceInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction",extendedTextInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction",orderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction",associateInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction",matchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction",textEntryInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction",sliderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction",inlineChoiceInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction","simpleChoice.choiceInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction","simpleChoice.orderInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction",hottext:"taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext",gap:"taoQtiItem/qtiCommonRenderer/renderers/choices/Gap",gapText:"taoQtiItem/qtiCommonRenderer/renderers/choices/GapText","simpleAssociableChoice.matchInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction","simpleAssociableChoice.associateInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction",inlineChoice:"taoQtiItem/qtiCommonRenderer/renderers/choices/InlineChoice",hottextInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction",hotspotInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction",gapMatchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction",selectPointInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction",graphicOrderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction",mediaInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction",uploadInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction",gapImg:"taoQtiItem/qtiCommonRenderer/renderers/choices/GapImg",graphicAssociateInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction"});return{name:"commonRenderer",locations:n}}),define("taoQtiItem/qtiCreator/renderers/config",["lodash","taoQtiItem/qtiCommonRenderer/renderers/config"],function(t,e){var n=t.defaults({_container:"taoQtiItem/qtiCreator/renderers/Container",assessmentItem:"taoQtiItem/qtiCreator/renderers/Item",rubricBlock:"taoQtiItem/qtiCreator/renderers/RubricBlock",img:"taoQtiItem/qtiCreator/renderers/Img",math:"taoQtiItem/qtiCreator/renderers/Math",object:"taoQtiItem/qtiCreator/renderers/Object",modalFeedback:"taoQtiItem/qtiCreator/renderers/ModalFeedback",choiceInteraction:"taoQtiItem/qtiCreator/renderers/interactions/ChoiceInteraction",orderInteraction:"taoQtiItem/qtiCreator/renderers/interactions/OrderInteraction",matchInteraction:"taoQtiItem/qtiCreator/renderers/interactions/MatchInteraction",associateInteraction:"taoQtiItem/qtiCreator/renderers/interactions/AssociateInteraction",inlineChoiceInteraction:"taoQtiItem/qtiCreator/renderers/interactions/InlineChoiceInteraction",textEntryInteraction:"taoQtiItem/qtiCreator/renderers/interactions/TextEntryInteraction",hotspotInteraction:"taoQtiItem/qtiCreator/renderers/interactions/HotspotInteraction",selectPointInteraction:"taoQtiItem/qtiCreator/renderers/interactions/SelectPointInteraction",graphicOrderInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GraphicOrderInteraction",graphicAssociateInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GraphicGapMatchInteraction",mediaInteraction:"taoQtiItem/qtiCreator/renderers/interactions/MediaInteraction",uploadInteraction:"taoQtiItem/qtiCreator/renderers/interactions/UploadInteraction",sliderInteraction:"taoQtiItem/qtiCreator/renderers/interactions/SliderInteraction",extendedTextInteraction:"taoQtiItem/qtiCreator/renderers/interactions/ExtendedTextInteraction","simpleChoice.choiceInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.ChoiceInteraction","simpleChoice.orderInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.OrderInteraction","simpleAssociableChoice.associateInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.AssociateInteraction","simpleAssociableChoice.matchInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.MatchInteraction",gapMatchInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GapMatchInteraction",hottextInteraction:"taoQtiItem/qtiCreator/renderers/interactions/HottextInteraction",gap:"taoQtiItem/qtiCreator/renderers/choices/Gap",gapText:"taoQtiItem/qtiCreator/renderers/choices/GapText",hottext:"taoQtiItem/qtiCreator/renderers/choices/Hottext"},e.locations);
return{name:"creatorRenderer",locations:n}}),define("taoQtiItem/qtiCreator/renderers/Renderer",["taoQtiItem/qtiRunner/core/Renderer","taoQtiItem/qtiCreator/renderers/config"],function(t,e){return t.build(e.locations,e.name)}),define("taoQtiItem/qtiXmlRenderer/renderers/config",[],function(){return{name:"xmlRenderer",locations:{_container:"taoQtiItem/qtiXmlRenderer/renderers/Container",assessmentItem:"taoQtiItem/qtiXmlRenderer/renderers/Item",stylesheet:"taoQtiItem/qtiXmlRenderer/renderers/Stylesheet",responseDeclaration:"taoQtiItem/qtiXmlRenderer/renderers/ResponseDeclaration",outcomeDeclaration:"taoQtiItem/qtiXmlRenderer/renderers/OutcomeDeclaration",responseProcessing:"taoQtiItem/qtiXmlRenderer/renderers/ResponseProcessing",_simpleFeedbackRule:"taoQtiItem/qtiXmlRenderer/renderers/responses/SimpleFeedbackRule",math:"taoQtiItem/qtiXmlRenderer/renderers/Math",img:"taoQtiItem/qtiXmlRenderer/renderers/Img",object:"taoQtiItem/qtiXmlRenderer/renderers/Object",modalFeedback:"taoQtiItem/qtiXmlRenderer/renderers/feedbacks/ModalFeedback",rubricBlock:"taoQtiItem/qtiXmlRenderer/renderers/RubricBlock",associateInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/AssociateInteraction",choiceInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/ChoiceInteraction",extendedTextInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/ExtendedTextInteraction",gapMatchInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GapMatchInteraction",graphicAssociateInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicOrderInteraction",hotspotInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/HotspotInteraction",hottextInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/HottextInteraction",inlineChoiceInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/InlineChoiceInteraction",matchInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/MatchInteraction",mediaInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/MediaInteraction",orderInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/OrderInteraction",selectPointInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/SelectPointInteraction",sliderInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/SliderInteraction",textEntryInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/TextEntryInteraction",uploadInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/UploadInteraction",prompt:"taoQtiItem/qtiXmlRenderer/renderers/interactions/Prompt",associableHotspot:"taoQtiItem/qtiXmlRenderer/renderers/choices/AssociableHotspot",gap:"taoQtiItem/qtiXmlRenderer/renderers/choices/Gap",gapImg:"taoQtiItem/qtiXmlRenderer/renderers/choices/GapImg",gapText:"taoQtiItem/qtiXmlRenderer/renderers/choices/GapText",hotspotChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/HotspotChoice",hottext:"taoQtiItem/qtiXmlRenderer/renderers/choices/Hottext",inlineChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/InlineChoice",simpleAssociableChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleAssociableChoice",simpleChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleChoice"}}}),define("taoQtiItem/qtiXmlRenderer/renderers/Renderer",["taoQtiItem/qtiRunner/core/Renderer","taoQtiItem/qtiXmlRenderer/renderers/config"],function(t,e){return t.build(e.locations,e.name)}),define("taoQtiItem/qtiItem/core/Loader",["lodash","class","taoQtiItem/qtiItem/core/qtiClasses","taoQtiItem/qtiItem/core/Element"],function(t,e,n,i){var a=e.extend({init:function(t,e){this.qti={},this.classesLocation={},this.item=t||null,this.setClassesLocation(e||n)},setClassesLocation:function(e){return t.extend(this.classesLocation,e),this},getRequiredClasses:function(e){var n=[];for(var i in e)"qtiClass"===i&&"_container"!==e[i]&&"relatedItem"!==i?n.push(e[i]):"object"==typeof e[i]&&(n=t.union(n,this.getRequiredClasses(e[i])));return n},loadRequiredClasses:function(e,n,i){var a=this.getRequiredClasses(e,i),o=[];for(var s in a){var r=a[s];if(!this.classesLocation[r])throw new Error("missing qti class location declaration : "+r);o.push(this.classesLocation[r])}var c=this;require(o,function(){t.each(arguments,function(t){c.qti[t.prototype.qtiClass]=t}),n.call(c,c.qti)})},getLoadedClasses:function(){return t.keys(this.qti)},loadItemData:function(e,n){var i=this;i.loadRequiredClasses(e,function(a){if("object"==typeof e&&"assessmentItem"===e.qtiClass){i.item=new a.assessmentItem(e.serial,e.attributes||{}),i.loadContainer(i.item.getBody(),e.body);for(var o in e.outcomes){var s=i.buildOutcome(e.outcomes[o]);s&&i.item.addOutcomeDeclaration(s)}for(var o in e.feedbacks){var r=i.buildElement(e.feedbacks[o]);r&&i.item.addModalFeedback(r)}for(var o in e.stylesheets){var c=i.buildElement(e.stylesheets[o]);c&&i.item.addStylesheet(c)}for(var o in e.responses){var l=i.buildResponse(e.responses[o]);if(l){i.item.addResponseDeclaration(l);var d=e.responses[o].feedbackRules;d&&t.forIn(d,function(t,e){l.feedbackRules[e]=i.buildSimpleFeedbackRule(t)})}}e.responseProcessing&&i.item.setResponseProcessing(i.buildResponseProcessing(e.responseProcessing)),i.item.setNamespaces(e.namespaces)}"function"==typeof n&&n.call(i,i.item)})},loadElement:function(t,e){var n=this;n.loadRequiredClasses(t,function(){var i=n.buildElement(t);"function"==typeof e&&e.call(n,i)})},loadElements:function(t,e){var n=this;if(!n.item)throw"QtiLoader : cannot load elements in empty item";this.loadRequiredClasses(t,function(){var i=n.item.getComposingElements();for(var a in t){var o=t[a];o&&o.qtiClass&&o.serial&&i[o.serial]&&n.loadElementData(i[o.serial],o)}"function"==typeof e&&e.call(n,n.item)})},buildResponse:function(e){var n=this.buildElement(e);return n.template=e.howMatch||null,n.defaultValue=e.defaultValue||null,n.correctResponse=e.correctResponses||null,n.mapEntries=t.size(e.mapping)?e.mapping:t.size(e.areaMapping)?e.areaMapping:{},n.mappingAttributes=e.mappingAttributes||{},n},buildSimpleFeedbackRule:function(t){var e=this.buildElement(t);return t.condition&&(e.condition=t.condition),t.comparedValue&&(e.comparedValue=t.comparedValue),e.comparedOutcome=this.item.responses[t.comparedOutcome]||null,e.feedbackOutcome=this.item.outcomes[t.feedbackOutcome]||null,e.feedbackThen=this.item.modalFeedbacks[t.feedbackThen]||null,e.feedbackElse=this.item.modalFeedbacks[t.feedbackElse]||null,e},buildOutcome:function(t){var e=this.buildElement(t);return e.defaultValue=t.defaultValue||null,e},buildResponseProcessing:function(t){var e=this.buildElement(t);return t&&t.processingType&&("custom"===t.processingType?(e.xml=t.data,e.processingType="custom"):e.processingType="templateDriven"),e},loadContainer:function(t,e){if(!i.isA(t,"_container"))throw"bodyObject must be a QTI Container";if(!e||"string"!=typeof e.body||"array"!=typeof e.elements&&"object"!=typeof e.elements)throw"wrong bodydata format";for(var n in e.elements){var a=e.elements[n],o=this.buildElement(a);o&&t.setElement(o,e.body)}t.body(e.body)},buildElement:function(t){var e=null;if(!(t&&t.qtiClass&&t.serial))throw"wrong elementData format";var n=t.qtiClass;if(!this.qti[n])throw"the qti element class does not exist: "+n;return e=new this.qti[n](t.serial),this.loadElementData(e,t),e},loadElementData:function(e,n){return e.setAttributes(t.clone(n.attributes)||{}),e.body&&n.body&&e.bdy&&this.loadContainer(e.getBody(),n.body),e.object&&n.object&&e.object&&this.loadObjectData(e.object,n.object),i.isA(e,"interaction")?this.loadInteractionData(e,n):i.isA(e,"choice")?this.loadChoiceData(e,n):i.isA(e,"math")&&this.loadMathData(e,n),e},loadInteractionData:function(t,e){i.isA(t,"blockInteraction")&&e.prompt&&this.loadContainer(t.prompt.getBody(),e.prompt),this.buildInteractionChoices(t,e)},buildInteractionChoices:function(t,e){if(e.choices){if(i.isA(t,"matchInteraction"))for(var n=0;2>n;n++){if(!e.choices[n])throw"missing match set #"+n;var a=e.choices[n];for(var o in a){var s=this.buildElement(a[o]);s&&t.addChoice(s,n)}}else for(var o in e.choices){var s=this.buildElement(e.choices[o]);s&&t.addChoice(s)}if(i.isA(t,"graphicGapMatchInteraction")&&e.gapImgs)for(var o in e.gapImgs){var r=this.buildElement(e.gapImgs[o]);r&&t.addGapImg(r)}}},loadChoiceData:function(t,e){i.isA(t,"textVariableChoice")?t.val(e.text):i.isA(t,"gapImg")||i.isA(t,"containerChoice")},loadObjectData:function(t,e){t.setAttributes(e.attributes),e._alt&&(t._alt="object"===e._alt.qtiClass?a.buildElement(e._alt):e._alt)},loadMathData:function(t,e){t.ns=e.ns||{},t.setMathML(e.mathML||""),t.annotations=e.annotations||{}}});return a}),define("taoQtiItem/qtiCreator/helper/simpleParser",["lodash","jquery","taoQtiItem/qtiItem/helper/util","taoQtiItem/qtiItem/core/Loader"],function(t,e,n,i){function a(t,e){return e?e+"\\:"+t:t}function o(t){var e=t.prop("tagName").toLowerCase();return e=e.replace(/.*:/,""),m[e]?m[e]:e}function s(t){var i=o(t),a={qtiClass:i,serial:n.buildSerial(i+"_"),attributes:{}};return e.each(t[0].attributes,function(){this.specified&&(a.attributes[this.name]=this.value)}),a}function r(t,n){var i=s(t);return i.mathML=t.html(),i.annotations={},t.find(a("annotation",n.ns.math)).each(function(){var t=e(this),n=t.attr("encoding");n&&(i.annotations[n]=t.html())}),i.ns={name:"m",uri:"http://www.w3.org/1998/Math/MathML"},i}function c(i,o){var c=t.merge(t.clone(h),o||{}),m={serial:n.buildSerial("_container_"),body:"",elements:{}};return t.each(d,function(t){i.find(t).each(function(){var t=e(this),n=s(t,o);m.elements[n.serial]=n,t.replaceWith(l(n))})}),i.find(a("math",c.ns.math)).each(function(){var t=e(this),n=r(t,o);m.elements[n.serial]=n,t.replaceWith(l(n))}),m.body=i.html(),m}function l(t){return"{{"+t.serial+"}}"}var d=["img","object"],m={rubricblock:"rubricBlock"},h={ns:{math:""},loaded:null,model:null},p={parse:function(n,a){var o=e(n),r=s(o,a),l=c(o,a);if(l.body&&(r.body=l),t.isFunction(a.loaded)&&a.model){var d=(new i).setClassesLocation(a.model);d.loadElement(r,a.loaded)}return r}};return p}),define("taoQtiTest/controller/creator/views/rubricblock",["jquery","lodash","taoQtiTest/controller/creator/views/actions","taoQtiItem/qtiCreator/model/qtiClasses","taoQtiItem/qtiCreator/renderers/Renderer","taoQtiItem/qtiXmlRenderer/renderers/Renderer","taoQtiItem/qtiCreator/helper/simpleParser"],function(t,e,n,i,a,o,s){var r=function(r,c){function l(t){function e(){null!==t&&t.destroy()}d(t.getView()),r.parents(".testpart").on("delete",e),r.parents(".section").on("delete",e),r.on("delete",e)}function d(e){var n=t("select",e);n.select2({width:"100%"}).on("select2-removed",function(){0===n.select2("val").length&&n.select2("val",[1])}),0===n.select2("val").length&&n.select2("val",[1])}function m(){{var n="m",c=t(".rubricblock-binding",r),l=t(".rubricblock-content",r),d=t('<div class="rubricblock-formatting-props props clearfix">').appendTo(".test-creator-props"),m="<rubricBlock>"+c.html()+"</rubrickBlock>",h=new o({shuffleChoices:!1}).load();s.parse(m,{ns:{math:n},model:i,loaded:function(n){var i=new a({shuffleChoices:!1,baseUrl:"/taoQtiItem/test/samples/test_base_www/",bodyElementOptionForm:d});i.load(function(){var i=e.throttle(function(){c.html(t(n.render(h)).html()).trigger("change")},500);n.setRenderer(this),l.html(n.render());var a=n.postRender({});t('.mini-tlb [data-role="delete"]',l).remove(),l.on("editorready",function(){t(".cke_button__taoqtiimage").remove()}),a.on("containerBodyChange",function(t){t.container.serial===n.getBody().serial&&i()},!0)},this.getLoadedClasses())}})}}n.properties(r,"rubricblock",c,l),m(),t("formatting-toggler",r).click(function(){r.find(".cke_editable").focus().click()})};return{setUp:r}}),define("taoQtiTest/controller/creator/helpers/qtiTest",["lodash","i18n"],function(t,e){var n={extractIdentifiers:function(e){var n=this,i=[];return t.has(e,"identifier")&&(i=i.concat(e.identifier.toLowerCase())),t.flatten(t.forEach(e,function(t){i=i.concat("object"==typeof t?n.extractIdentifiers(t):[])}),!0),i},getIdentifier:function(e,n){var i,a=1,o="-";do i=e+o+a++;while(t.contains(n,i.toLowerCase()));return n.push(i.toLowerCase()),i},idFormatValidator:function(){var t=/^[_a-zA-Z]{1}[a-zA-Z0-9\-._]{0,31}$/i;return{name:"testIdFormat",message:e("is not a valid identifier (alphanum, underscore, dash and dots.)"),validate:function(e,n){"function"==typeof n&&n(t.test(e))}}},idAvailableValidator:function(n){return{name:"testIdAvailable",message:e("is already used in the test."),validate:function(e,i,a){"function"==typeof i&&i(!t.contains(t.values(n),e.toLowerCase())||a.original&&e===a.original)}}},filterQtiType:function(t,e){return t["qti-type"]&&t["qti-type"]===e},addMissingQtiType:function(e,n){var i=this;t.forEach(e,function(e,a){!t.isObject(e)||t.isArray(e)||t.has(e,"qti-type")||(t.isNumber(a)?n&&(e["qti-type"]=n):e["qti-type"]=a),t.isArray(e)?i.addMissingQtiType(e,a.replace(/s$/,"")):t.isObject(e)&&i.addMissingQtiType(e)})},consolidateModel:function(e){if(e&&e.testParts&&t.isArray(e.testParts)&&e.testParts[0]){var n=e.testParts[0];n.assessmentSections&&t.isArray(n.assessmentSections)&&t.forEach(n.assessmentSections,function(e){e.ordering&&void 0!==e.ordering.shuffle&&e.ordering.shuffle===!1&&delete e.ordering,e.rubricBlocks&&t.isArray(e.rubricBlocks)&&(0===e.rubricBlocks.length||1===e.rubricBlocks.length&&0===e.rubricBlocks[0].content.length?delete e.rubricBlocks:e.rubricBlocks.length>0&&t.forEach(e.rubricBlocks,function(t){t.views=["candidate"]}))})}return e}};return n}),define("taoQtiTest/controller/creator/views/section",["jquery","lodash","uri","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/itemref","taoQtiTest/controller/creator/views/rubricblock","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest"],function(t,e,n,i,a,o,s,r){var c=function(c,l,d){function m(e){function n(){null!==e&&e.destroy()}var i=e.getView(),a=t("[name=section-enable-selection]",i),o=t("[name=section-select]",i),s=t("[name=section-with-replacement]",i),r=function(){a.prop("checked")===!0?(o.incrementer("enable"),s.removeClass("disabled")):(o.incrementer("disable"),s.addClass("disabled"))};a.on("change",r),a.on("change",function(){a.prop("checked")||(o.val(0),s.prop("checked",!1),delete l.selection)}),a.prop("checked",!!l.selection).trigger("change");var d=t("[data-bind=title]",c);i.on("change.binder",function(t,e){"binder"===t.namespace&&"assessmentSection"===e["qti-type"]&&d.text(e.title)}),c.parents(".testpart").on("delete",n),c.on("delete",n)}function h(){l.sectionParts||(l.sectionParts=[]),t(".itemref",c).each(function(){var e=t(this),i=e.data("bind-index");l.sectionParts[i]||(l.sectionParts[i]={}),a.setUp(e,l.sectionParts[i]),e.find(".title").text(d.labels[n.encode(e.data("uri"))])})}function p(){var i,o=t(".test-creator-items");o.on("itemselect.creator",function(){var i=Array.prototype.slice.call(arguments,1),a=t(".itemref-placeholder",c),s=t(".itemref-placeholder");i.length>0?a.show().off("click").on("click",function(){e.forEach(i,function(e){var i=t(e);u(t(".itemrefs",c),void 0,{href:n.decode(i.data("uri")),label:t.trim(i.clone().children().remove().end().text()),"qti-type":"assessmentItemRef"})}),t(".ui-selected",o).removeClass("ui-selected").removeClass("selected"),s.hide().off("click")}):s.hide().off("click")}),t(document).off("add.binder","#"+c.attr("id")+" .itemrefs").on("add.binder","#"+c.attr("id")+" .itemrefs",function(t,e){if("binder"===t.namespace&&e.hasClass("itemref")){var n=e.data("bind-index");a.setUp(e,l.sectionParts[n])}}),i=t(".selected",o),i.length>0&&o.trigger("itemselect.creator",i)}function u(e,n,i){var a,o=e.children("li");n=n||o.length,i.identifier=r.getIdentifier("item",d.identifiers),i.index=n+1,a=t(s.itemref(i)),n>0?a.insertAfter(o.eq(n-1)):a.appendTo(e),e.trigger("add",[a,i])}function f(){l.rubricBlocks||(l.rubricBlocks=[]),t(".rubricblock",c).each(function(){var e=t(this),n=e.data("bind-index");l.rubricBlocks[n]||(l.rubricBlocks[n]={}),o.setUp(e,l.rubricBlocks[n],d)})}function b(){t(".rublock-adder",c).adder({target:t(".rubricblocks",c),content:s.rubricblock,templateData:function(e){e({"qti-type":"rubricBlock",index:t(".rubricblock",c).length,content:[],views:[1]})}}),t(document).on("add.binder","#"+c.attr("id")+" .rubricblocks",function(e,n,i){if("binder"===e.namespace&&n.hasClass("rubricblock")){var a=n.data("bind-index");t(".rubricblock-binding",n).html("<div>&nbsp;</div>"),o.setUp(n,l.rubricBlocks[a],i)}})}var v=t("h2",c);i.properties(v,"section",l,m),i.move(v,"sections","section"),h(),p(),f(),b()},l=function(){var e;t(".sections").each(function(){e=t(".section",t(this)),i.removable(e,"h2"),i.movable(e,"section","h2")}),t(document).on("add change deleted",".sections",function(n){var a=t(n.target);(a.hasClass("section")||a.hasClass("sections"))&&(e=t(".section",a.hasClass("sections")?a:a.parents(".sections")),i.removable(e,"h2"),i.movable(e,"section","h2"))}).on("open.toggler",".rub-toggler",function(e){"toggler"===e.namespace&&t(this).parents("h2").addClass("active")}).on("close.toggler",".rub-toggler",function(e){"toggler"===e.namespace&&t(this).parents("h2").removeClass("active")})};return{setUp:c,listenActionState:l}}),define("taoQtiTest/controller/creator/views/testpart",["jquery","lodash","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/section","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest"],function(t,e,n,i,a,o){var s=function(e,s,r){function c(n){var i=n.getView(),a=t("[data-bind=identifier]",e);i.on("change.binder",function(t,e){"binder"===t.namespace&&"testPart"===e["qti-type"]&&a.text(e.identifier)}),e.on("delete",function(){null!==n&&n.destroy()})}function l(){s.assessmentSections||(s.assessmentSections=[]),t(".section",e).each(function(){var e=t(this),n=e.data("bind-index");s.assessmentSections[n]||(s.assessmentSections[n]={}),i.setUp(e,s.assessmentSections[n],r)})}function d(){t(".section-adder",e).adder({target:t(".sections",e),content:a.section,templateData:function(n){var i=t(".section",e).length;n({"qti-type":"assessmentSection",identifier:o.getIdentifier("assessmentSection",r.identifiers),title:"Section "+(i+1),index:0,sectionParts:[]})}}),t(document).off("add.binder","#"+e.attr("id")+" .sections").on("add.binder","#"+e.attr("id")+" .sections",function(t,e){if("binder"===t.namespace&&e.hasClass("section")){var n=e.data("bind-index");i.setUp(e,s.assessmentSections[n],r)}})}var m=t("h1",e);n.properties(m,"testpart",s,c),n.move(m,"testparts","testpart"),l(),d()},r=function(){var e=t(".testpart");n.removable(e,"h1"),n.movable(e,"testpart","h1"),t(".testparts").on("add change deleted",function(i){var a=t(i.target);(a.hasClass("testpart")||a.hasClass("testparts"))&&(e=t(".testpart"),n.removable(e,"h1"),n.movable(e,"testpart","h1"))})};return{setUp:s,listenActionState:r}}),define("taoQtiTest/controller/creator/views/test",["jquery","lodash","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/testpart","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest"],function(t,e,n,i,a,o){var s=function(e,s){function r(){e.testParts||(e.testParts=[]),t(".testpart").each(function(){var n=t(this),a=n.data("bind-index");e.testParts[a]||(e.testParts[a]={}),i.setUp(n,e.testParts[a],s)})}function c(e){var n=e.getView(),i=t(".test-creator-test > h1 [data-bind=title]");n.on("change.binder",function(t,e){"binder"===t.namespace&&"assessmentTest"===e["qti-type"]&&i.text(e.title)})}function l(){t(".testpart-adder").adder({target:t(".testparts"),content:a.testpart,templateData:function(e){var n=t(".testpart").length;e({"qti-type":"testPart",identifier:o.getIdentifier("testPart",s.identifiers),index:n,navigationMode:0,submissionMode:0,assessmentSections:[{"qti-type":"assessmentSection",identifier:o.getIdentifier("assessmentSection",s.identifiers),title:"Section 1",index:0,sectionParts:[]}]})}}),t(document).off("add.binder",".testparts").on("add.binder",".testparts",function(t,n,a){"binder"===t.namespace&&n.hasClass("testpart")&&i.setUp(n,e.testParts[a.index],s)})}n.properties(t(".test-creator-test > h1"),"test",e,c),r(),l()};return s}),define("taoQtiTest/controller/creator/encoders/dom2qti",["jquery","lodash"],function(t,e){var n=function(t){return e.omit(t,["qti-type","content","xmlBase","lang","label"])},i=function(t){return e.reduce(t,function(t,n,i){return e.isNumber(n)||e.isString(n)&&!e.isEmpty(n)?t+" "+i+'="'+n+'" ':t},"")},a={encode:function(t){var a=this;if(e.isArray(t))return e.reduce(t,function(t,e){return t+a.encode(e)},"");if(e.isObject(t)&&t["qti-type"]){if("textRun"===t["qti-type"])return t.content;var o="<"+t["qti-type"]+i(n(t));return t.content?o+">"+a.encode(t.content)+"</"+t["qti-type"]+">":o+"/>"}return t},decode:function(n){var i=this,a=n instanceof t?n:t(n),o=[];return e.forEach(a,function(n){var a;3===n.nodeType?e.isEmpty(t.trim(n.nodeValue))||o.push({"qti-type":"textRun",content:n.nodeValue,xmlBase:""}):1===n.nodeType&&(a=e.merge({"qti-type":n.nodeName.toLowerCase(),id:"","class":"",xmlBase:"",lang:"",label:""},e.transform(n.attributes,function(t,e){t[e.nodeName]=e.nodeValue})),n.childNodes.length>0&&(a.content=i.decode(n.childNodes)),o.push(a))}),o}};return a}),define("taoQtiTest/controller/creator/creator",["module","jquery","lodash","helpers","i18n","core/databindcontroller","taoQtiTest/controller/creator/views/item","taoQtiTest/controller/creator/views/test","taoQtiTest/controller/creator/views/testpart","taoQtiTest/controller/creator/views/section","taoQtiTest/controller/creator/views/itemref","taoQtiTest/controller/creator/encoders/dom2qti","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest","core/validator/validators"],function(t,e,n,i,a,o,s,r,c,l,d,m,h,p,u){function f(t,n,i){e.getJSON(t,{pattern:n},function(t){t&&"function"==typeof i&&i(t)})}var b={routes:{},identifiers:[],start:function(b){var v=this,_=e("#test-creator"),g=e("#saver");b=n.merge(t.config(),b||{}),b.routes=b.routes||{},b.labels=b.labels||{},s(n.partial(f,b.routes.items));var I=n.merge(b.routes,{filters:{isItemRef:function(t){return p.filterQtiType(t,"assessmentItemRef")},isSection:function(t){return p.filterQtiType(t,"assessmentSection")}},encoders:{dom2qti:m},templates:h,beforeSave:function(t){return p.addMissingQtiType(t),p.consolidateModel(t),!0}}),C=o.takeControl(_,I).get(function(t){v.identifiers=p.extractIdentifiers(t),u.register("testIdFormat",p.idFormatValidator()),u.register("testIdAvailable",p.idAvailableValidator(v.identifiers)),r(t,{uri:b.uri,identifiers:v.identifiers,labels:b.labels}),c.listenActionState(),l.listenActionState(),d.listenActionState()});g.on("click",function(t){t.preventDefault(),g.hasClass("disabled")||(g.attr("disabled",!0).addClass("disabled"),C.save(function(){g.attr("disabled",!1).removeClass("disabled"),i.createInfoMessage(a("Test Saved"))},function(){g.attr("disabled",!1).removeClass("disabled")}))})}};return b}),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("spin",e):t.Spinner=e()}(this,function(){function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var a=["opacity",e,~~(100*t),n,i].join("-"),o=.01+n/i*100,s=Math.max(1-(1-t)/e*(100-o),t),r=d.substring(0,d.indexOf("Animation")).toLowerCase(),c=r&&"-"+r+"-"||"";return h[a]||(p.insertRule("@"+c+"keyframes "+a+"{0%{opacity:"+s+"}"+o+"%{opacity:"+t+"}"+(o+.01)+"%{opacity:1}"+(o+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",p.cssRules.length),h[a]=1),a}function i(t,e){var n,i,a=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<m.length;i++)if(n=m[i]+e,void 0!==a[n])return n;return void 0!==a[e]?e:void 0}function a(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function s(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function r(t,e){return"string"==typeof t?t:t[e%t.length]}function c(t){return"undefined"==typeof this?new c(t):void(this.opts=o(t||{},c.defaults,u))}function l(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),c.prototype.lines=function(t,i){function o(){return a(n("group",{coordsize:d+" "+d,coordorigin:-l+" "+-l}),{width:d,height:d})}function s(t,s,c){e(h,e(a(o(),{rotation:360/i.lines*t+"deg",left:~~s}),e(a(n("roundrect",{arcsize:i.corners}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:c}),n("fill",{color:r(i.color,t),opacity:i.opacity}),n("stroke",{opacity:0}))))}var c,l=i.length+i.width,d=2*l,m=2*-(i.width+i.length)+"px",h=a(o(),{position:"absolute",top:m,left:m});if(i.shadow)for(c=1;c<=i.lines;c++)s(c,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(c=1;c<=i.lines;c++)s(c);return e(t,h)},c.prototype.opacity=function(t,e,n,i){var a=t.firstChild;i=i.shadow&&i.lines||0,a&&e+i<a.childNodes.length&&(a=a.childNodes[e+i],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=n))}}var d,m=["webkit","Moz","ms","O"],h={},p=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),u={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};c.defaults={},o(c.prototype,{spin:function(e){this.stop();var n,i,o=this,r=o.opts,c=o.el=a(t(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex}),l=r.radius+r.length+r.width;if(e&&(e.insertBefore(c,e.firstChild||null),i=s(e),n=s(c),a(c,{left:("auto"==r.left?i.x-n.x+(e.offsetWidth>>1):parseInt(r.left,10)+l)+"px",top:("auto"==r.top?i.y-n.y+(e.offsetHeight>>1):parseInt(r.top,10)+l)+"px"})),c.setAttribute("role","progressbar"),o.lines(c,o.opts),!d){var m,h=0,p=(r.lines-1)*(1-r.direction)/2,u=r.fps,f=u/r.speed,b=(1-r.opacity)/(f*r.trail/100),v=f/r.lines;!function _(){h++;for(var t=0;t<r.lines;t++)m=Math.max(1-(h+(r.lines-t)*v)%f*b,r.opacity),o.opacity(c,t*r.direction+p,m,r);o.timeout=o.el&&setTimeout(_,~~(1e3/u))}()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,o){function s(e,n){return a(t(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*l+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var c,l=0,m=(o.lines-1)*(1-o.direction)/2;l<o.lines;l++)c=a(t(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:d&&n(o.opacity,o.trail,m+l*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&e(c,a(s("#000","0 0 4px #000"),{top:"2px"})),e(i,e(c,s(r(o.color,l),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var f=a(t("group"),{behavior:"url(#default#VML)"});return!i(f,"transform")&&f.adj?l():d=i(f,"animation"),c}),define("serviceApi/ServiceApi",["jquery","urlParser","iframeResizer"],function(t,e){function n(t,e,n,i,a){this.baseUrl=t,this.parameters=e,this.connected=!1,this.serviceCallId=n,this.state=i,this.userService=a,this.onFinishCallback,this.onKillCallback,this.onDisplayChangeCallback}return n.SIG_SUCCESS=0,n.SIG_ERROR=1,n.prototype.loadInto=function(n,i){var a=this,o=this.getCallUrl(),s=new e(o).checkCORS();t(n).one("load",function(){t(document).on("serviceready",function(){a.connect(n,i)})}).on("load.cors",function(){s===!0&&(n.contentWindow.__knownParent__=!0)}),t(n).attr("src",o)},n.prototype.connect=function(t,e){this.connected===!1&&t.contentWindow&&"function"==typeof t.contentWindow.onServiceApiReady&&(t.contentWindow.onServiceApiReady(this),this.connected=!0,"function"==typeof e&&e())},n.prototype.getCallUrl=function(){var e=this.parameters||{};return e.serviceCallId=this.serviceCallId,this.baseUrl+"?"+t.param(e)},n.prototype.getUserPropertyValues=function(t,e){this.userService.get(t,e)},n.prototype.getServiceCallId=function(){return this.serviceCallId},n.prototype.getState=function(){return this.state.get()},n.prototype.setState=function(t,e){return this.state.set(t,e)},n.prototype.getParameter=function(t){return"undefined"!=typeof this.parameters[t]?this.parameters[t]:null},n.prototype.onFinish=function(t){this.onFinishCallback=t},n.prototype.onKill=function(t){this.onKillCallback=t},n.prototype.kill=function(t){"function"==typeof this.onKillCallback?this.onKillCallback(t):t(0)},n.prototype.finish=function(t){"function"==typeof this.onFinishCallback&&this.onFinishCallback(t)},n}),define("serviceApi/UserInfoService",["jquery"],function(t){function e(t,e){this.data=e,this.requestUrl=t}return e.prototype.get=function(e,n){this.data.hasOwnProperty(e)?"function"==typeof n&&n(this.data[e]):t.ajax({url:this.requestUrl,data:{property:e},type:"post",dataType:"json",success:function(t,n){return function(i){for(key in i.data)t.data[key]=i.data[key];"function"==typeof n&&n(t.data[e])}}(this,n)})},e}),define("serviceApi/StateStorage",["jquery"],function(t){function e(t,e){this.state=t,this.submitUrl=e}return e.prototype.get=function(t){return"function"==typeof t&&t(this.state),this.state},e.prototype.set=function(e,n){e===this.state?"function"==typeof n&&n():t.ajax({url:this.submitUrl,data:{state:e},type:"post",dataType:"json",success:"function"==typeof n?n:null})},e}),function(t){var e={init:function(e){var i=this,o=t.extend(!0,{},t.fn.badonkatrunc.defaultOptions,e);return"horizontal"!=o.fitDirection&&"vertical"!=o.fitDirection?(t.error("'"+o.fitDirection+"' is not a valid fit direction. Use 'horizontal' or 'vertical.'"),this):"start"!=o.truncateLocation&&"middle"!=o.truncateLocation&&"end"!=o.truncateLocation?(t.error("'"+o.truncateLocation+"' is not a valid truncation location. Use 'start,' 'middle' or 'end.'"),this):o.minimumFontSize>o.maximumFontSize?(t.error("Minimum font size can not exceed the maximum font size."),this):o.minimumLetterSpacing>o.maximumLetterSpacing?(t.error("Minimum letter spacing can not exceed the maximum letter spacing."),this):this.each(function(){var e=t(this),s=t(this).data("badonkatrunc");s&&e.badonkatrunc("destroy");var r=n(e,o,i);t(this).data("badonkatrunc",r),r.init(),r.options.automaticSizeTracking&&a.add(r)})},destroy:function(){return this.each(function(){var e=t(this),n=e.data("badonkatrunc");n.destroy(),a.remove(n),o.remove(n),t(window).unbind(".badonkatrunc"),e.removeData("badonkatrunc")})},refresh:function(){return this.each(function(){var e=t(this),n=e.data("badonkatrunc");o.remove(n),n.refresh()})},changeContents:function(e){return this.each(function(){var n=t(this),i=n.data("badonkatrunc");i.contentHtml="string"==typeof e?t("<span></span>").text(e).html():t(e).html(),o.add(i)})}};t.fn.badonkatrunc=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.badonkatrunc"):e.init.apply(this,arguments)},t.fn.badonkatrunc.settings={sizeTrackingTimeout:1e3/60},t.fn.badonkatrunc.defaultOptions={automaticSizeTracking:!1,fitDirection:"horizontal",minimumFontSize:1,maximumFontSize:1,fontSizeSynced:!1,minimumLetterSpacing:0,maximumLetterSpacing:0,letterSpacingSynced:!1,truncate:!0,truncateString:"&hellip;",truncateLocation:"end",truncateOnlyWholeWords:!1,extraOptimizeLimit:8},t.fn.btrunc=t.fn.badonkatrunc;var n=function(e,n,i){var a=function(t,e,n){return{content:t,fontSize:e,letterSpacing:n}
},o={target:e,options:n,refresh:function(){var t=this,e=r(this.contentHtml),n=this.contentHtml,i=this.options.maximumFontSize,o=this.options.maximumLetterSpacing,l=function(){var e=a(n,i,o);t.renderState(e)},d=function(){return t.getCurrentOverflow()};if(this.options.maximumFontSize-this.options.minimumFontSize>0&&c(t.options.minimumFontSize,t.options.maximumFontSize,function(t){i=t,l()},d),this.options.maximumLetterSpacing-this.options.minimumLetterSpacing>0){var m=1;this.options.truncate&&c(0,1,function(i){m=i,n=s(e,t.options.truncateString,t.options.truncateLocation,i,!0),c(t.options.minimumLetterSpacing,0,function(t){o=t,l()},d),l()},d),1==m&&c(t.options.minimumLetterSpacing,t.options.maximumLetterSpacing,function(t){o=t,l()},d)}this.options.truncate&&c(0,1,function(i){n=s(e,t.options.truncateString,t.options.truncateLocation,i,t.options.truncateOnlyWholeWords),l()},d,this.options.extraOptimizeLimit),this.renderState(a(n,i,o),!this.options.truncate),this.currentOptimalState=this.currentRenderedState,this.syncFonts()},syncFonts:function(){if(i.length>1&&(this.options.fontSizeSynced||this.options.letterSpacingSynced)){for(var e=this.currentOptimalState.fontSize,n=this.currentOptimalState.letterSpacing,a=0;a<i.length;a++){var o=t(i[a]).data("badonkatrunc");null!=o&&null!=o.currentOptimalState&&(o.currentOptimalState.fontSize<e&&(e=o.currentOptimalState.fontSize),o.currentOptimalState.letterSpacing<n&&(n=o.currentOptimalState.letterSpacing))}for(var a=0;a<i.length;a++){var o=t(i[a]).data("badonkatrunc");null!=o&&o.acceptFontSync(e,n)}}},acceptFontSync:function(t,e){var n=this,i=r(this.contentHtml),o=this.contentHtml;null!=this.currentOptimalState&&(this.options.fontSizeSynced||(t=this.currentOptimalState.fontSize),this.options.letterSpacingSynced||(e=this.currentOptimalState.letterSpacing));var l=function(){n.renderState(a(o,t,e))},d=function(){return n.getCurrentOverflow()};this.options.truncate&&c(0,1,function(t){o=s(i,n.options.truncateString,n.options.truncateLocation,t,n.options.truncateOnlyWholeWords),l()},d),this.renderState(a(o,t,e),!this.options.truncate)},init:function(){this.contentHtml=this.target.html(),this.settingsWrapper=t('<span style="margin: 0px; padding: 0px; border: 0px;"></span>'),this.settingsWrapper.addClass("badonkatrunc-wrapper"),t.browser.mozilla||t.browser.opera||t.browser.msie&&"7.0"==t.browser.version||this.settingsWrapper.css("display","block"),this.target.empty(),this.target.append(this.settingsWrapper),this.refresh()},destroy:function(){this.target.empty(),this.target.append(this.contentHtml)},renderState:function(t,e){this.settingsWrapper.css("font-size",t.fontSize+"em"),this.settingsWrapper.css("letter-spacing",t.letterSpacing+"em");var n=e||"horizontal"!=this.options.fitDirection?"normal":"nowrap";this.settingsWrapper.css("white-space",n),this.settingsWrapper.empty(),this.settingsWrapper.append(t.content),this.currentRenderedState=t},getCurrentOverflow:function(){var t=this.settingsWrapper[0],n="horizontal"==this.options.fitDirection?t.scrollWidth-e.width():t.offsetHeight-e.height();return n}};return o},i=function(e,n,i,a){var o={_instances:[],_updateLoop:function(){if(t.isFunction(e))for(var n=0;n<o._instances.length;n++)e(o._instances[n]);null!=a?o._instances.length>0&&setTimeout(o._updateLoop,a):o._instances=[]},add:function(e){-1==t.inArray(e,this._instances)&&(t.isFunction(n)&&n(e),this._instances.push(e),1==this._instances.length&&(null==a?setTimeout(this._updateLoop):this._updateLoop()))},remove:function(e){var n=t.inArray(e,this._instances);-1!=n&&(this._instances.splice(n,1),t.isFunction(i)&&i(e))}};return o},a=i(function(t){t.elementSizeCache.update()},function(t){t.elementSizeCache={width:null,height:null,update:function(){var e=t.target.width(),n=t.target.height(),i=null!=this.width&&e!=this.width||null!=this.height&&n!=this.height;this.width=e,this.height=n,i&&this.changed()},changed:function(){o.add(t)}}},function(t){t.elementSizeCache=void 0},t.fn.badonkatrunc.settings.sizeTrackingTimeout),o=i(function(t){t.refresh.apply(t)},null,null,null),s=function(e,n,i,a,o){var s=e.text;if(a>1&&(a=1),0>a&&(a=0),1==a)return e.html;var r=function(t,n){var i=s.split(" "),a=o?i.length:s.length,r=a*t,c=a*n;if(o){var l=function(t){for(var e=0,n=0;t>n;n++)e+=i[n].length+1;return e},d=r+c;r=l(r),c=l(d)-r}return e.getHtmlSubstring(r,c)};switch(i){case"middle":var c=a/2,l=r(0,c),d=r(1-c,c);return t.trim(l)+" "+n+" "+t.trim(d);case"start":var m=r(1-a,a);return n+t.trim(m);case"end":var m=r(0,a);return t.trim(m)+n}},r=function(e){var n=t("<span></span>");n.html(e);var i={html:e,text:n.text(),getHtmlSubstring:function(e,i){var a=n.clone()[0],o=0,s=0,r=[],c=!1,l=function(t){if(3==t.nodeType){for(var n=t.data.length,a="",d=!1,m=0;n>m;m++)o++,o>=e&&i>s?(c=!0,d=!0,a+=t.data.substr(m,1),s++):1==c&&(c=!1);t.data=a,d&&r.push(t)}else if(1==t.nodeType){c&&r.push(t);for(var h=t.childNodes.length,m=0;h>m;m++)l(t.childNodes[m])}};l(a);for(var d=[],m=function(t){var e=function(t){d.push(t),null!=t.parentNode&&e(t.parentNode)};e(t)},h=r.length,p=0;h>p;p++)m(r[p]);var u=function(e){for(var n=[],i=e.childNodes.length,a=0;i>a;a++){var o=e.childNodes[a];3!=o.nodeType&&(-1==t.inArray(o,d)?n.push(o):u(o))}for(var a=0;a<n.length;a++){var e=n[a];e.parentNode.removeChild(e)}};return u(a),t(a).html()}};return i},c=function(t,e,n,i,a){for(var o=e,s=t,r=e,c=null,l=null,d=null,m=0;;){n(r);var h=i();if(0>=h){var p=!0;null!=l&&(l>h?p=!1:h==l&&d>=r&&(p=!1)),p&&(l=h,d=r)}if(h==c&&(m++,void 0==a||m==a))return void(null!=d&&n(d));if(h>0){o=r;var u=r-s;r-=u/2}else 0>=h&&(s=r,r=o);c=h}}}(jQuery),define("jquery.trunc",function(){}),define("taoQtiTest/controller/runtime/testRunner",["jquery","jqueryui","lodash","spin","serviceApi/ServiceApi","serviceApi/UserInfoService","serviceApi/StateStorage","iframeResizer","iframeNotifier","i18n","jquery.trunc"],function($,$ui,_,Spinner,ServiceApi,UserInfoService,StateStorage,iframeResizer,iframeNotifier,__){var timerIds=[],currentTimes=[],lastDates=[],timeDiffs=[],waitingTime=0,TestRunner={TEST_STATE_INITIAL:0,TEST_STATE_INTERACTING:1,TEST_STATE_MODAL_FEEDBACK:2,TEST_STATE_SUSPENDED:3,TEST_STATE_CLOSED:4,TEST_NAVIGATION_LINEAR:0,TEST_NAVIGATION_NONLINEAR:1,TEST_ITEM_STATE_INTERACTING:1,beforeTransition:function(t){iframeNotifier.parent("loading"),this.disableGui(),$("#qti-item, #qti-info, #qti-rubrics, #qti-timers").css("display","none"),"function"==typeof t&&setTimeout(t,waitingTime)},afterTransition:function(){this.enableGui(),iframeNotifier.parent("unloading")},moveForward:function(){this.disableGui();var t=this;this.itemServiceApi.kill(function(){t.actionCall("moveForward")})},moveBackward:function(){this.disableGui();var t=this;this.itemServiceApi.kill(function(){t.actionCall("moveBackward")})},skip:function(){this.disableGui(),this.actionCall("skip")},timeout:function(){this.disableGui(),this.assessmentTestContext.isTimeout=!0,this.updateTimer(),this.actionCall("timeout")},comment:function(){$("#qti-comment > textarea").val(__("Your comment...")),$("#qti-comment").css("display","block"),$("#qti-comment > button").css("display","inline")},closeComment:function(){$("#qti-comment").css("display","none")},emptyComment:function(){$("#qti-comment > textarea").val("")},storeComment:function(){var t=this;$.ajax({url:t.assessmentTestContext.commentUrl,cache:!1,async:!0,type:"POST",data:{comment:$("#qti-comment > textarea").val()},success:function(){t.closeComment()}})},update:function(assessmentTestContext){var self=this;$("#qti-item").remove();var $runner=$("#runner");$runner.css("height","auto"),this.assessmentTestContext=assessmentTestContext,this.itemServiceApi=eval(assessmentTestContext.itemServiceApiCall),this.updateContext(),this.updateProgress(),this.updateNavigation(),this.updateInformation(),this.updateRubrics(),this.updateTools(),this.updateTimer(),$itemFrame=$('<iframe id="qti-item" frameborder="0"/>'),$itemFrame.appendTo("#qti-content"),iframeResizer.autoHeight($itemFrame,"body"),(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?0:1)||$("#qti-content").css("overflow-y","scroll"),this.assessmentTestContext.itemSessionState===this.TEST_ITEM_STATE_INTERACTING&&self.assessmentTestContext.isTimeout===!1?($(document).on("serviceloaded",function(){self.afterTransition(),self.adjustFrame(),$itemFrame.show()}),this.itemServiceApi.loadInto($itemFrame[0],function(){})):self.afterTransition()},updateInformation:function(){$("#qti-info").remove(),this.assessmentTestContext.isTimeout===!0?($('<div id="qti-info" class="info"></div>').prependTo("#qti-content"),$("#qti-info").html(__('Maximum time limit reached for item "%s".').replace("%s",this.assessmentTestContext.itemIdentifier))):this.assessmentTestContext.itemSessionState!==this.TEST_ITEM_STATE_INTERACTING&&($('<div id="qti-info" class="info"></div>').prependTo("#qti-content"),$("#qti-info").html(__('No more attempts allowed for item "%s".').replace("%s",this.assessmentTestContext.itemIdentifier)))},updateTools:function(){this.assessmentTestContext.allowComment===!0?$("#comment").css("display","inline"):$("#comment").css("display","none"),this.assessmentTestContext.allowSkipping===!0?this.assessmentTestContext.isLast===!1?($("#skip").css("display","inline"),$("#skip-end").css("display","none")):($("#skip-end").css("display","inline"),$("#skip").css("display","none")):($("#skip").css("display","none"),$("#skip-end").css("display","none"))},updateTimer:function(){var t=this;$("#qti-timers").remove();for(var e=0;e<timerIds.length;e++)clearTimeout(timerIds[e]);if(timerIds=[],currentTimes=[],lastDates=[],timeDiffs=[],0==t.assessmentTestContext.isTimeout&&t.assessmentTestContext.itemSessionState==t.TEST_ITEM_STATE_INTERACTING&&this.assessmentTestContext.timeConstraints.length>0){$('<div id="qti-timers"></div>').prependTo("#qti-content");for(var e=this.assessmentTestContext.timeConstraints.length-1;e>=0;e--){var n=this.assessmentTestContext.timeConstraints[e];if(0==n.allowLateSubmission){$('<div class="qti-timer">'+n.source+" - "+t.formatTime(n.seconds)+"</div>").appendTo("#qti-timers"),currentTimes[e]=n.seconds,lastDates[e]=new Date,timeDiffs[e]=0,timerIndex=e,source=n.source;var i=function(e,n){timerIds[e]=setInterval(function(){if(timeDiffs[e]+=(new Date).getTime()-lastDates[e].getTime(),timeDiffs[e]>=1e3){var i=timeDiffs[e]/1e3;currentTimes[e]-=i,timeDiffs[e]=0}currentTimes[e]<=0?($("#qti-timers > .qti-timer").eq(e).html(t.formatTime(Math.round(currentTimes[e]))),currentTimes[e]=0,clearInterval(timerIds[e]),$("#qti-item").css("display","none"),t.timeout()):($("#qti-timers > .qti-timer").eq(e).html(n+" - "+t.formatTime(Math.round(currentTimes[e]))),lastDates[e]=new Date)},1e3)};i(timerIndex,source)}}$("#qti-timers").css("display","block")}},updateRubrics:function(){if($("#qti-rubrics").remove(),this.assessmentTestContext.rubrics.length>0){for(var t=$('<div id="qti-rubrics"></div>'),e=0;e<this.assessmentTestContext.rubrics.length;e++)t.append(this.assessmentTestContext.rubrics[e]);t.find("a").bind("click keypress",function(){return window.open(this.href),!1}),t.prependTo("#qti-content"),MathJax.Hub.Queue(["Typeset",MathJax.Hub],$("#qti-rubrics")[0])}},updateNavigation:function(){this.assessmentTestContext.navigationMode===this.TEST_NAVIGATION_LINEAR?($("#move-backward").css("display","none"),$("#move-forward").css("display",this.assessmentTestContext.isLast===!0?"none":"inline"),$("#move-end").css("display",this.assessmentTestContext.isLast===!0?"inline":"none")):($("#qti-actions").css("display","block"),$("#move-forward").css("display",this.assessmentTestContext.isLast===!0?"none":"inline"),$("#move-end").css("display",this.assessmentTestContext.isLast===!0?"inline":"none"),$("#move-backward").css("display",this.assessmentTestContext.canMoveBackward===!0?"inline":"none"))},updateProgress:function(){var t=this.assessmentTestContext.considerProgress;if($("#qti-test-progress").css("visibility",t===!0?"visible":"hidden"),t===!0){var e=Math.floor(this.assessmentTestContext.numberCompleted/this.assessmentTestContext.numberItems*100),n=__("Test completed at %d%%").replace("%d",e).replace("%%","%");$("#qti-progress-label").text(n),$("#qti-progressbar").progressbar({value:e})}},updateContext:function(){{var t=this.assessmentTestContext.testTitle,e=this.assessmentTestContext.testPartId,n=this.assessmentTestContext.sectionTitle;__("Part:")+' <span id="qti-part-title">'+e+"</span> - "+__("Section:")+' <span id="qti-section-title">'+n+"</span>"}$("#qti-test-title").text(t);try{$("#qti-test-title, #qti-test-position").badonkatrunc("destroy")}catch(i){}$("#qti-test-position").empty().append(__("Part:")+' <span id="qti-part-title">'+this.assessmentTestContext.testPartId+"</span> - "+__("Section:")+' <span id="qti-section-title">'+this.assessmentTestContext.sectionTitle+"</span>"),$("#qti-test-title, #qti-test-position").badonkatrunc().css("visibility","visible")},adjustFrame:function(){var t=$("#qti-actions").outerHeight(),e=window.innerHeight?window.innerHeight:$(window).height(),n=$("#qti-navigation").outerHeight(),i=e-t-n,a=$("#qti-content");a.height(i-parseInt(a.css("paddingTop"))-parseInt(a.css("paddingBottom")))},disableGui:function(){$("#qti-navigation button").addClass("disabled")},enableGui:function(){$("#qti-navigation button").removeClass("disabled")},formatTime:function(t){var e=t,n=Math.floor(e/3600),i=Math.floor((e-3600*n)/60),a=e-3600*n-60*i;10>n&&(n="0"+n),10>i&&(i="0"+i),10>a&&(a="0"+a);var o=n+":"+i+":"+a;return" "+o},actionCall:function(t){var e=this;this.beforeTransition(function(){$.ajax({url:e.assessmentTestContext[t+"Url"],cache:!1,async:!0,dataType:"json",success:function(t){t.state===e.TEST_STATE_CLOSED?e.serviceApi.finish():e.update(t)}})})}};return{start:function(t){window.onServiceApiReady=function(e){TestRunner.serviceApi=e,t.state===TestRunner.TEST_STATE_CLOSED?e.finish():TestRunner.update(t)},TestRunner.beforeTransition(),TestRunner.assessmentTestContext=t,$("#skip, #skip-end").click(function(){$(this).hasClass("disabled")||TestRunner.skip()}),$("#move-forward, #move-end").click(function(){$(this).hasClass("disabled")||TestRunner.moveForward()}),$("#move-backward").click(function(){$(this).hasClass("disabled")||TestRunner.moveBackward()}),$("#comment").click(function(){$(this).hasClass("disabled")||TestRunner.comment()}),$("#qti-comment-cancel").click(function(){TestRunner.closeComment()}),$("#qti-comment-send").click(function(){TestRunner.storeComment()}),$("#qti-comment > textarea").click(function(){TestRunner.emptyComment()}),$(window).bind("resize",function(){TestRunner.adjustFrame(),$("#qti-test-title, #qti-test-position").badonkatrunc()}),iframeNotifier.parent("serviceready"),$(document).bind("loading",function(){iframeNotifier.parent("loading")}),$(document).bind("unloading",function(){iframeNotifier.parent("unloading")})}}});