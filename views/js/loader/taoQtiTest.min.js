define("taoQtiTest/controller/creator/areaBroker",["lodash","ui/areaBroker"],function(_,areaBroker){"use strict";var requireAreas=["creator","itemSelectorPanel","contentCreatorPanel","propertyPanel","elementPropertyPanel"];return _.partial(areaBroker,requireAreas)}),define("taoQtiTest/controller/creator/config/defaults",["lodash","module"],function(_,module){"use strict";return function(){let config=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return _.defaults({},module.config(),config)}}),define("taoQtiTest/controller/creator/helpers/baseType",["lodash"],function(_){"use strict";var baseTypeEnum={IDENTIFIER:0,BOOLEAN:1,INTEGER:2,FLOAT:3,STRING:4,POINT:5,PAIR:6,DIRECTED_PAIR:7,DURATION:8,FILE:9,URI:10,INT_OR_IDENTIFIER:11,COORDS:12,ANY:12,SAME:13},baseTypeHelper=_({asArray:function asArray(){return baseTypeEnum},getValid:function getValid(type,defaultType){return _.isFinite(type)?!baseTypeHelper.getNameByConstant(type)&&(type=!1):type=baseTypeHelper.getConstantByName(type),!1===type&&(_.isUndefined(defaultType)||-1===defaultType?type=-1:type=baseTypeHelper.getValid(defaultType,-1)),type},getValue:function getValue(type,value){switch(_.isString(type)&&(type=baseTypeHelper.getConstantByName(type)),type){case baseTypeEnum.URI:case baseTypeEnum.STRING:case baseTypeEnum.IDENTIFIER:return value+"";case baseTypeEnum.BOOLEAN:if(_.isString(value))switch(value.toLowerCase()){case"true":return!0;case"false":return!1}return!!value;case baseTypeEnum.INTEGER:return parseInt(value,10)||0;case baseTypeEnum.FLOAT:return parseFloat(value)||0;case baseTypeEnum.INT_OR_IDENTIFIER:return _.isNaN(parseInt(value,10))?""+value:parseInt(value,10)||0}return value},getConstantByName:function getConstantByName(name){switch((name+"").trim().toLowerCase()){case"identifier":return baseTypeEnum.IDENTIFIER;case"boolean":return baseTypeEnum.BOOLEAN;case"integer":return baseTypeEnum.INTEGER;case"float":return baseTypeEnum.FLOAT;case"string":return baseTypeEnum.STRING;case"point":return baseTypeEnum.POINT;case"pair":return baseTypeEnum.PAIR;case"directedpair":return baseTypeEnum.DIRECTED_PAIR;case"duration":return baseTypeEnum.DURATION;case"file":return baseTypeEnum.FILE;case"uri":return baseTypeEnum.URI;case"intoridentifier":return baseTypeEnum.INT_OR_IDENTIFIER;case"coords":return baseTypeEnum.COORDS;case"any":return baseTypeEnum.ANY;case"same":return baseTypeEnum.SAME;default:return!1}},getNameByConstant:function getNameByConstant(constant,operator){return constant===baseTypeEnum.IDENTIFIER?"identifier":constant===baseTypeEnum.BOOLEAN?"boolean":constant===baseTypeEnum.INTEGER?"integer":constant===baseTypeEnum.FLOAT?"float":constant===baseTypeEnum.STRING?"string":constant===baseTypeEnum.POINT?"point":constant===baseTypeEnum.PAIR?"pair":constant===baseTypeEnum.DIRECTED_PAIR?"directedPair":constant===baseTypeEnum.DURATION?"duration":constant===baseTypeEnum.FILE?"file":constant===baseTypeEnum.URI?"uri":constant===baseTypeEnum.INT_OR_IDENTIFIER?"intOrIdentifier":constant===baseTypeEnum.COORDS||constant===baseTypeEnum.ANY?operator?"any":"coords":!(constant!==baseTypeEnum.SAME)&&"same"}}).assign(baseTypeEnum).value();return baseTypeHelper}),define("taoQtiTest/controller/creator/helpers/cardinality",["lodash"],function(_){"use strict";var cardinalityEnum={SINGLE:0,MULTIPLE:1,ORDERED:2,RECORD:3,SAME:4,ANY:5},cardinalityHelper=_({asArray:function asArray(){return cardinalityEnum},getValid:function getValid(cardinality,defaultCardinality){return _.isFinite(cardinality)?!cardinalityHelper.getNameByConstant(cardinality)&&(cardinality=!1):cardinality=cardinalityHelper.getConstantByName(cardinality),!1===cardinality&&(_.isUndefined(defaultCardinality)||defaultCardinality===cardinalityEnum.SINGLE?cardinality=cardinalityEnum.SINGLE:cardinality=cardinalityHelper.getValid(defaultCardinality,cardinalityEnum.SINGLE)),cardinality},getConstantByName:function getConstantByName(name){switch((name+"").trim().toLowerCase()){case"single":return cardinalityEnum.SINGLE;case"multiple":return cardinalityEnum.MULTIPLE;case"ordered":return cardinalityEnum.ORDERED;case"record":return cardinalityEnum.RECORD;case"same":return cardinalityEnum.SAME;case"any":return cardinalityEnum.ANY;default:return!1}},getNameByConstant:function getNameByConstant(constant){return constant===cardinalityEnum.SINGLE?"single":constant===cardinalityEnum.MULTIPLE?"multiple":constant===cardinalityEnum.ORDERED?"ordered":constant===cardinalityEnum.RECORD?"record":constant===cardinalityEnum.SAME?"same":!(constant!==cardinalityEnum.ANY)&&"any"}}).assign(cardinalityEnum).value();return cardinalityHelper}),define("taoQtiTest/controller/creator/helpers/outcomeValidator",["lodash"],function(_){"use strict";function validateIdentifier(identifier){return!!(identifier&&_.isString(identifier)&&identifierValidator.test(identifier))}function validateOutcome(outcome,checkIdentifier,allowedTypes){var validOutcome=_.isPlainObject(outcome)&&validateIdentifier(outcome["qti-type"]),validIdentifier=!checkIdentifier||outcome&&validateIdentifier(outcome.identifier);return allowedTypes&&(allowedTypes=_.isArray(allowedTypes)?allowedTypes:[allowedTypes],validOutcome=validOutcome&&0<=_.indexOf(allowedTypes,outcome["qti-type"])),!!(validOutcome&&validIdentifier)}function validateOutcomes(outcomes,checkIdentifier,allowedTypes){var valid=_.isArray(outcomes);return _.forEach(outcomes,function(outcome){if(!validateOutcome(outcome,checkIdentifier,allowedTypes))return valid=!1,!1}),valid}var identifierValidator=/^[a-zA-Z_][a-zA-Z0-9_\.-]*$/;return{validateIdentifier:validateIdentifier,validateOutcomes:validateOutcomes,validateOutcome:validateOutcome}}),define("taoQtiTest/controller/creator/helpers/qtiElement",["lodash","taoQtiTest/controller/creator/helpers/outcomeValidator"],function(_,outcomeValidator){"use strict";function forceArray(value){return value||(value=[]),_.isArray(value)||(value=[value]),value}var qtiElementHelper={create:function create(type,identifier,properties){var element={"qti-type":type};if(!outcomeValidator.validateIdentifier(type))throw new TypeError("You must provide a valid QTI type!");if(_.isPlainObject(identifier)&&(properties=identifier,identifier=null),identifier){if(!outcomeValidator.validateIdentifier(identifier))throw new TypeError("You must provide a valid identifier!");element.identifier=identifier}return _.assign(element,properties||{})},find:function find(collection,type){function checkType(qtiElement){if(0<=types.indexOf(qtiElement["qti-type"]))return found=qtiElement,!1}var found=null,types=forceArray(type);return _.isArray(collection)?_.forEach(collection,checkType):collection&&checkType(collection),found},lookupElement:function lookupElement(tree,path,nodeName){for(var steps=_.isArray(path)?path:path.split("."),nodeNames=forceArray(nodeName),len=steps.length,i=0,key;tree&&i<len;)tree=qtiElementHelper.find(tree,steps[i++]),tree&&i<len&&(key=_.find(nodeNames,_.partial(_.has,tree)),tree=key&&tree[key]);return tree||null},lookupProperty:function lookupProperty(tree,path,nodeName){var result=null,steps=_.isArray(path)?path:path.split("."),propertyName=steps.pop(),element=qtiElementHelper.lookupElement(tree,steps,nodeName);return element&&element[propertyName]&&(result=element[propertyName]),result}};return qtiElementHelper}),define("taoQtiTest/controller/creator/helpers/outcome",["lodash","taoQtiTest/controller/creator/helpers/outcomeValidator","taoQtiTest/controller/creator/helpers/qtiElement","taoQtiTest/controller/creator/helpers/baseType","taoQtiTest/controller/creator/helpers/cardinality"],function(_,outcomeValidator,qtiElementHelper,baseTypeHelper,cardinalityHelper){"use strict";var outcomeHelper={getProcessingRuleExpression:function getProcessingRuleExpression(outcomeRule,path){return qtiElementHelper.lookupElement(outcomeRule,path,["expression","expressions"])},getProcessingRuleProperty:function getProcessingRuleProperty(outcomeRule,path){return qtiElementHelper.lookupProperty(outcomeRule,path,["expression","expressions"])},getOutcomeIdentifier:function getOutcomeIdentifier(outcome){return(_.isObject(outcome)?outcome.identifier:outcome)+""},getOutcomeDeclarations:function getOutcomeDeclarations(testModel){var outcomes=testModel&&testModel.outcomeDeclarations;return outcomes||[]},getOutcomeProcessingRules:function getOutcomeProcessingRules(testModel){var rules=testModel&&testModel.outcomeProcessing&&testModel.outcomeProcessing.outcomeRules;return rules||[]},eachOutcomeDeclarations:function eachOutcomeDeclarations(testModel,cb){_.forEach(outcomeHelper.getOutcomeDeclarations(testModel),cb)},eachOutcomeProcessingRules:function eachOutcomeProcessingRules(testModel,cb){_.forEach(outcomeHelper.getOutcomeProcessingRules(testModel),cb)},eachOutcomeProcessingRuleExpressions:function eachOutcomeProcessingRuleExpressions(testModel,cb){function browseExpressions(processingRule){_.isArray(processingRule)?_.forEach(processingRule,browseExpressions):processingRule&&(cb(processingRule),processingRule.expression?browseExpressions(processingRule.expression):processingRule.expressions&&browseExpressions(processingRule.expressions))}browseExpressions(outcomeHelper.getOutcomeProcessingRules(testModel))},listOutcomes:function listOutcomes(testModel,cb){var outcomes=[];return _.isFunction(cb)||(cb=null),outcomeHelper.eachOutcomeDeclarations(testModel,function(outcome){(!cb||cb(outcome))&&outcomes.push(outcomeHelper.getOutcomeIdentifier(outcome))}),outcomes},removeOutcomes:function removeOutcomes(testModel,outcomes){var declarations=outcomeHelper.getOutcomeDeclarations(testModel),rules=outcomeHelper.getOutcomeProcessingRules(testModel),check;_.isFunction(outcomes)?check=outcomes:(outcomes=_.indexBy(_.isArray(outcomes)?outcomes:[outcomes],function(outcome){return outcome}),check=function checkIdentifier(outcome){return!!outcomes[outcomeHelper.getOutcomeIdentifier(outcome)]}),declarations&&_.remove(declarations,check),rules&&_.remove(rules,check)},createOutcome:function createOutcome(identifier,type,cardinality){if(!outcomeValidator.validateIdentifier(identifier))throw new TypeError("You must provide a valid identifier!");return qtiElementHelper.create("outcomeDeclaration",identifier,{views:[],interpretation:"",longInterpretation:"",normalMaximum:!1,normalMinimum:!1,masteryValue:!1,cardinality:cardinalityHelper.getValid(cardinality,cardinalityHelper.SINGLE),baseType:baseTypeHelper.getValid(type,baseTypeHelper.FLOAT)})},addOutcomeProcessing:function createOutcomeProcessing(testModel,processingRule){var outcomeProcessing=testModel.outcomeProcessing;if(!outcomeValidator.validateOutcome(processingRule))throw new TypeError("You must provide a valid outcome processing rule!");return outcomeProcessing?!outcomeProcessing.outcomeRules&&(outcomeProcessing.outcomeRules=[]):(outcomeProcessing=qtiElementHelper.create("outcomeProcessing",{outcomeRules:[]}),testModel.outcomeProcessing=outcomeProcessing),outcomeProcessing.outcomeRules.push(processingRule),processingRule},addOutcome:function addOutcome(testModel,outcome,processingRule){var declarations=testModel.outcomeDeclarations;if(!outcomeValidator.validateOutcome(outcome,!0,"outcomeDeclaration"))throw new TypeError("You must provide a valid outcome!");if(processingRule){if(!outcomeValidator.validateOutcome(processingRule)||processingRule.identifier!==outcome.identifier)throw new TypeError("You must provide a valid outcome processing rule!");outcomeHelper.addOutcomeProcessing(testModel,processingRule)}return declarations||(declarations=[],testModel.outcomeDeclarations=declarations),declarations.push(outcome),outcome},replaceOutcomes:function replaceOutcomes(testModel,outcomes){if(_.isPlainObject(outcomes)){if(_.isArray(outcomes.outcomeDeclarations)){if(!outcomeValidator.validateOutcomes(outcomes.outcomeDeclarations,!0,"outcomeDeclaration"))throw new TypeError("You must provide valid outcomes!");testModel.outcomeDeclarations=[].concat(outcomes.outcomeDeclarations)}if(outcomes.outcomeProcessing&&_.isArray(outcomes.outcomeProcessing.outcomeRules)){if(!outcomeValidator.validateOutcomes(outcomes.outcomeProcessing.outcomeRules))throw new TypeError("You must provide valid processing rules!");testModel.outcomeProcessing||(testModel.outcomeProcessing=qtiElementHelper.create("outcomeProcessing")),testModel.outcomeProcessing.outcomeRules=[].concat(outcomes.outcomeProcessing.outcomeRules)}}}};return outcomeHelper}),define("taoQtiTest/controller/creator/helpers/category",["lodash"],function(_){"use strict";function isCategoryOption(category){return category&&0===category.indexOf("x-tao-")}function eachCategories(testModel,cb){const getCategoriesRecursively=section=>{_.forEach(section.sectionParts,function(sectionPart){"assessmentItemRef"===sectionPart["qti-type"]&&_.forEach(sectionPart.categories,function(category){cb(category,sectionPart)}),"assessmentSection"===sectionPart["qti-type"]&&getCategoriesRecursively(sectionPart)})};_.forEach(testModel.testParts,function(testPart){_.forEach(testPart.assessmentSections,function(assessmentSection){getCategoriesRecursively(assessmentSection)})})}return{eachCategories:eachCategories,listCategories:function listCategories(testModel){var categories={};return eachCategories(testModel,function(category){isCategoryOption(category)||(categories[category]=!0)}),_.keys(categories)},listOptions:function listOptions(testModel){var options={};return eachCategories(testModel,function(category){isCategoryOption(category)&&(options[category]=!0)}),_.keys(options)}}}),define("taoQtiTest/controller/creator/modelOverseer",["lodash","core/eventifier","core/statifier","taoQtiTest/controller/creator/helpers/baseType","taoQtiTest/controller/creator/helpers/cardinality","taoQtiTest/controller/creator/helpers/outcome","taoQtiTest/controller/creator/helpers/category"],function(_,eventifier,statifier,baseTypeHelper,cardinalityHelper,outcomeHelper,categoryHelper){"use strict";function modelOverseerFactory(model,config){var modelOverseer={getModel:function getModel(){return model},setModel:function setModel(newModel){return model=newModel,modelOverseer.trigger("setmodel",model),this},getConfig:function getConfig(){return config},getOutcomesList:function getOutcomesList(){return _.map(outcomeHelper.getOutcomeDeclarations(model),function(declaration){return{name:declaration.identifier,type:baseTypeHelper.getNameByConstant(declaration.baseType),cardinality:cardinalityHelper.getNameByConstant(declaration.cardinality)}})},getOutcomesNames:function getOutcomesNames(){return _.map(outcomeHelper.getOutcomeDeclarations(model),function(declaration){return declaration.identifier})},getCategories:function getCategories(){return categoryHelper.listCategories(model)},getOptions:function getOptions(){return categoryHelper.listOptions(model)}};return config=_.isPlainObject(config)?config:_.assign({},config),statifier(eventifier(modelOverseer))}return modelOverseerFactory}),define("taoQtiTest/controller/creator/qtiTestCreator",["jquery","core/eventifier","taoQtiTest/controller/creator/areaBroker","taoQtiTest/controller/creator/modelOverseer"],function($,eventifier,areaBrokerFactory,modelOverseerFactory){"use strict";function testCreatorFactory($creatorContainer,config){function loadModelOverseer(){return!modelOverseer&&model&&(modelOverseer=modelOverseerFactory(model,config)),modelOverseer}function loadAreaBroker(){return areaBroker||(areaBroker=areaBrokerFactory($container,{creator:$container,itemSelectorPanel:$container.find(".test-creator-items"),contentCreatorPanel:$container.find(".test-creator-content"),propertyPanel:$container.find(".test-creator-props"),elementPropertyPanel:$container.find(".qti-widget-properties")})),areaBroker}var testCreator,$container,model,areaBroker,modelOverseer;if(!($creatorContainer instanceof $))throw new TypeError("a valid $container must be given");return $container=$creatorContainer,testCreator={setTestModel:function setTestModel(m){model=m},getAreaBroker:function getAreaBroker(){return loadAreaBroker()},getModelOverseer:function getModelOverseer(){return loadModelOverseer()},isTestHasErrors:function isTestHasErrors(){return 0<$container.find(".test-creator-props").find("span.validate-error").length}},eventifier(testCreator)}return testCreatorFactory}),define("taoQtiTest/provider/testItems",["lodash","i18n","util/url","core/dataProvider/request"],function(_,__,urlUtil,request){"use strict";var defaultConfig={getItemClasses:{url:urlUtil.route("getItemClasses","Items","taoQtiTest")},getItems:{url:urlUtil.route("getItems","Items","taoQtiTest")},getItemClassProperties:{url:urlUtil.route("create","RestFormItem","taoItems")}};return function testItemProviderFactory(config){return config=_.defaults(config||{},defaultConfig),{getItemClasses:function getItemClasses(){return request(config.getItemClasses.url)},getItems:function getItems(params){return request(config.getItems.url,params)},getItemClassProperties:function getItemClassProperties(classUri){return request(config.getItemClassProperties.url,{classUri:classUri})}}}}),define("taoQtiTest/controller/creator/views/item",["module","jquery","i18n","core/logger","taoQtiTest/provider/testItems","ui/resource/selector","ui/feedback"],function(module,$,__,loggerFactory,testItemProviderFactory,resourceSelectorFactory,feedback){"use strict";const logger=loggerFactory("taoQtiTest/creator/views/item"),testItemProvider=testItemProviderFactory(),onError=function onError(err){logger.error(err),feedback().error(err.message||__("An error occured while retrieving items"))},ITEM_URI="http://www.tao.lu/Ontologies/TAOItem.rdf#Item";return function itemView($container){const filters=module.config().BRS||!1,selectorConfig={type:__("items"),selectionMode:resourceSelectorFactory.selectionModes.multiple,selectAllPolicy:resourceSelectorFactory.selectAllPolicies.visible,classUri:ITEM_URI,classes:[{label:"Item",uri:ITEM_URI,type:"class"}],filters},resourceSelector=resourceSelectorFactory($container,selectorConfig).on("render",function(){$container.on("itemselected.creator",()=>{this.clearSelection()})}).on("query",function(params){testItemProvider.getItems(params).then(items=>{this.update(items,params)}).catch(onError)}).on("classchange",function(classUri){testItemProvider.getItemClassProperties(classUri).then(filters=>{this.updateFilters(filters)}).catch(onError)}).on("change",function(values){$container.trigger("itemselect.creator",[values])});testItemProvider.getItemClasses().then(function(classes){selectorConfig.classes=classes,selectorConfig.classUri=classes[0].uri}).then(function(){return testItemProvider.getItemClassProperties(selectorConfig.classUri)}).then(function(filters){selectorConfig.filters=filters}).then(function(){selectorConfig.classes[0].children.forEach(node=>{resourceSelector.addClassNode(node,selectorConfig.classUri)}),resourceSelector.updateFilters(selectorConfig.filters)}).catch(onError)}}),define("tpl!taoQtiTest/controller/creator/templates/testpart",["handlebars"],function(hb){return hb.template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},helper;return"<div id=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:1,column:9},end:{line:1,column:23}}}):helper))+"\" class=\"testpart clearfix\">\n   <h1>\n   <a href=\"#\" class=\"toggler opened\" data-toggle=\"#testpart-content-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:3,column:69},end:{line:3,column:83}}}):helper))+"\"></a>\n   <span data-bind=\"identifier\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:4,column:32},end:{line:4,column:46}}}):helper))+"</span>\n       <span class=\"icon-warning\"></span>\n        <div class=\"actions\">\n            <div class=\"tlb\">\n                <div class=\"tlb-top\">\n                    <span class=\"tlb-box\">\n                        <span class=\"tlb-bar\">\n                            <span class=\"tlb-start\"></span>\n                            <span class=\"tlb-group\">\n                                <a href=\"#\" class=\"tlb-button-off property-toggler\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Test Part Properties",{name:"__",hash:{},data:data,loc:{start:{line:13,column:91},end:{line:13,column:120}}}))+"\" data-testid=\"test-part-properties\"><span class=\"icon-settings\"></span></a>\n                                <span class=\"tlb-separator\"></span>\n                                <a href=\"#\" class=\"tlb-button-off move-up\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Move Up",{name:"__",hash:{},data:data,loc:{start:{line:15,column:82},end:{line:15,column:98}}}))+"\" data-testid=\"move-up-test-part\"><span class=\"icon-up\"></span></a>\n                                <a href=\"#\" class=\"tlb-button-off move-down\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Move Down",{name:"__",hash:{},data:data,loc:{start:{line:16,column:84},end:{line:16,column:102}}}))+"\" data-testid=\"move-down-test-part\"><span class=\"icon-down\"></span></a>\n                                <span class=\"tlb-separator\"></span>\n                                <a href=\"#\" class=\"tlb-button-off\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Remove Test Part",{name:"__",hash:{},data:data,loc:{start:{line:18,column:74},end:{line:18,column:99}}}))+"\" data-delete=\"#"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:18,column:115},end:{line:18,column:129}}}):helper))+"\" data-testid=\"remove-test-part\"><span class=\"icon-bin\"></span></a>\n                            </span>\n                            <span class=\"tlb-end\"></span>\n                        </span>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </h1>\n    <div id=\"testpart-content-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:27,column:30},end:{line:27,column:44}}}):helper))+"\" class=\"testpart-content\">\n\n       <!-- assessmentTest/testPart/assessmentSections -->\n       <div class=\"sections\" data-bind-each=\"assessmentSections\" data-bind-tmpl=\"section\" data-bind-filter=\"isSection\"></div>\n\n        <button class=\"btn-info small section-adder button-add\" data-testid=\"add-section\">\n            <span class=\"icon-add\"></span>\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"New section",{name:"__",hash:{},data:data,loc:{start:{line:34,column:12},end:{line:34,column:32}}}))+"\n        </button>\n    </div>\n</div>"},useData:!0})}),define("tpl!taoQtiTest/controller/creator/templates/section",["handlebars"],function(hb){return hb.template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},helper;return"<div id=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:1,column:9},end:{line:1,column:23}}}):helper))+"\" class=\"section\">\n\n<!-- assessmentTest/testPart/assessmentSection/title -->\n    <h2><span class=\"title-index\"></span> <span data-bind=\"title\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"title")||(null==depth0?depth0:lookupProperty(depth0,"title")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"title",hash:{},data:data,loc:{start:{line:4,column:66},end:{line:4,column:75}}}):helper))+"</span>\n        <span class=\"icon-warning\"></span>\n        <div class=\"actions\">\n            <div class=\"tlb\">\n                <div class=\"tlb-top\">\n                    <span class=\"tlb-box\">\n                        <span class=\"tlb-bar\">\n                            <span class=\"tlb-start\"></span>\n                            <span class=\"tlb-group\">\n                                <a href=\"#\" class=\"tlb-button-off add-subsection\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Add Subsection",{name:"__",hash:{},data:data,loc:{start:{line:13,column:89},end:{line:13,column:112}}}))+"\" data-testid=\"add-subsection\"><span class=\"icon-add-subsection\"></span></a>\n                                <span class=\"tlb-separator\"></span>\n                                <a href=\"#\" class=\"tlb-button-off rub-toggler\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Manage Rubric Blocks",{name:"__",hash:{},data:data,loc:{start:{line:15,column:86},end:{line:15,column:115}}}))+"\" data-toggle=\"#rublocks-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:15,column:140},end:{line:15,column:154}}}):helper))+"\" data-testid=\"manage-rubric-blocks\"><span class=\"icon-rubric\"></span></a>\n                                <span class=\"tlb-separator\"></span>\n                                <a href=\"#\" class=\"tlb-button-off property-toggler\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Section Properties",{name:"__",hash:{},data:data,loc:{start:{line:17,column:91},end:{line:17,column:118}}}))+"\" data-testid=\"section-properties\"><span class=\"icon-settings\"></span></a>\n                                <span class=\"tlb-separator\"></span>\n                                <a href=\"#\" class=\"tlb-button-off move-up disabled\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Move Up",{name:"__",hash:{},data:data,loc:{start:{line:19,column:91},end:{line:19,column:107}}}))+"\" data-testid=\"move-up-section\"><span class=\"icon-up\"></span></a>\n                                <a href=\"#\" class=\"tlb-button-off move-down disabled\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Move Down",{name:"__",hash:{},data:data,loc:{start:{line:20,column:93},end:{line:20,column:111}}}))+"\" data-testid=\"move-down-section\"><span class=\"icon-down\"></span></a>\n                                <span class=\"tlb-separator\"></span>\n                                <a href=\"#\" class=\"tlb-button-off disabled\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Remove Section",{name:"__",hash:{},data:data,loc:{start:{line:22,column:83},end:{line:22,column:106}}}))+"\" data-delete=\":parent .section\" data-testid=\"remove-section\"><span class=\"icon-bin\"></span></a>\n                            </span>\n                            <span class=\"tlb-end\"></span>\n                        </span>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </h2>\n\n    <div id=\"rublocks-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:32,column:22},end:{line:32,column:36}}}):helper))+"\" class=\"rublocks clearfix toggled\">\n        <h3>\n            <span class=\"title\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Rubric Blocks",{name:"__",hash:{},data:data,loc:{start:{line:34,column:32},end:{line:34,column:54}}}))+"</span>\n        </h3>\n        <ol class=\"rubricblocks decimal\" data-bind-each=\"rubricBlocks\" data-bind-tmpl=\"rubricblock\"></ol>\n        <button class=\"btn-info small rublock-adder\" data-testid=\"add-rubric-block\">\n            <span class=\"icon-add\"></span>"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"New Rubric Block",{name:"__",hash:{},data:data,loc:{start:{line:38,column:42},end:{line:38,column:67}}}))+"\n        </button>\n    </div>\n    <div class=\"itemrefs-wrapper\">\n        <h3>\n            <span class=\"title\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Items",{name:"__",hash:{},data:data,loc:{start:{line:43,column:32},end:{line:43,column:46}}}))+"</span>\n        </h3>\n        <ol class=\"itemrefs decimal clearfix\" data-bind-each=\"sectionParts\" data-bind-tmpl=\"itemref\" data-bind-filter=\"isItemRef\" data-msg=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Add selected item(s) here.",{name:"__",hash:{},data:data,loc:{start:{line:45,column:140},end:{line:45,column:175}}}))+"\"></ol>\n        <div class=\"itemref-placeholder\" data-testid=\"add-items\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Add selected item(s) here.",{name:"__",hash:{},data:data,loc:{start:{line:47,column:12},end:{line:47,column:47}}}))+"\n        </div>\n    </div>\n     <div class=\"subsections\" data-bind-each=\"sectionParts\" data-bind-tmpl=\"subsection\" data-bind-filter=\"isSection\"></div>\n\n</div>"},useData:!0})}),define("tpl!taoQtiTest/controller/creator/templates/rubricblock",["handlebars"],function(hb){return hb.template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"<li class=\"rubricblock\">\n    <div class=\"actions\">\n       <div class=\"tlb\">\n            <div class=\"tlb-top\">\n                <span class=\"tlb-box\">\n                    <span class=\"tlb-bar\">\n                        <span class=\"tlb-start\"></span>\n                        <span class=\"tlb-group\">\n                            <a href=\"#\" class=\"tlb-button-off property-toggler\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Rubric Block Properties",{name:"__",hash:{},data:data,loc:{start:{line:9,column:87},end:{line:9,column:119}}}))+"\" data-testid=\"rubric-block-properties\"><span class=\"icon-settings\"></span></a>\n                            <span class=\"tlb-separator\"></span>\n                            <a href=\"#\" class=\"tlb-button-off\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Remove Rubric Block",{name:"__",hash:{},data:data,loc:{start:{line:11,column:70},end:{line:11,column:98}}}))+"\" data-delete=\":parent .rubricblock\" data-testid=\"remove-rubric-block\"><span class=\"icon-bin\"></span></a>\n                        </span>\n                        <span class=\"tlb-end\"></span>\n                    </span>\n                </span>\n            </div>\n        </div>\n    </div>\n    <div class=\"rubricblock-content\"></div>\n</li>"},useData:!0})}),define("tpl!taoQtiTest/controller/creator/templates/itemref",["handlebars"],function(hb){return hb.template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"<li id='"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:1,column:8},end:{line:1,column:22}}}):helper))+"' data-uri='"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"href")||(null==depth0?depth0:lookupProperty(depth0,"href")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"href",hash:{},data:data,loc:{start:{line:1,column:34},end:{line:1,column:42}}}):helper))+"' class='itemref'>\n    <span class='title truncate'>"+(null==(stack1=(lookupProperty(helpers,"dompurify")||depth0&&lookupProperty(depth0,"dompurify")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"label"),{name:"dompurify",hash:{},data:data,loc:{start:{line:2,column:33},end:{line:2,column:54}}}))?"":stack1)+"</span>\n    <span class=\"icon-warning\"></span>\n    <div class=\"actions\">\n        <div class=\"tlb\">\n            <div class=\"tlb-top\">\n                <span class=\"tlb-box\">\n                    <span class=\"tlb-bar\">\n                        <span class=\"tlb-start\"></span>\n                        <span class=\"tlb-group\">\n                            <a href=\"#\" class=\"tlb-button-off property-toggler\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Item Reference Properties",{name:"__",hash:{},data:data,loc:{start:{line:11,column:87},end:{line:11,column:121}}}))+"\" data-testid=\"item-properties\"><span class=\"icon-settings\"></span></a>\n                            <span class=\"tlb-separator\"></span>\n                            <a href=\"#\" class=\"tlb-button-off move-up\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Move Up",{name:"__",hash:{},data:data,loc:{start:{line:13,column:78},end:{line:13,column:94}}}))+"\" data-testid=\"move-up-item\"><span class=\"icon-up\"></span></a>\n                            <a href=\"#\" class=\"tlb-button-off move-down\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Move Down",{name:"__",hash:{},data:data,loc:{start:{line:14,column:80},end:{line:14,column:98}}}))+"\" data-testid=\"move-down-item\"><span class=\"icon-down\"></span></a>\n                            <span class=\"tlb-separator\"></span>\n                            <a href=\"#\" class=\"tlb-button-off\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Remove Item Reference",{name:"__",hash:{},data:data,loc:{start:{line:16,column:70},end:{line:16,column:100}}}))+"\" data-delete=\":parent .itemref\" data-testid=\"remove-item\"><span class=\"icon-bin\"></span></a>\n                        </span>\n                        <span class=\"tlb-end\"></span>\n                    </span>\n                </span>\n            </div>\n        </div>\n    </div>\n</li>"},useData:!0})}),define("tpl!taoQtiTest/controller/creator/templates/outcomes",["handlebars"],function(hb){return hb.template({1:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},helper;return"    <div class=\"grid-row\">\n        <div class=\"col-6 line\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"name")||(null==depth0?depth0:lookupProperty(depth0,"name")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"name",hash:{},data:data,loc:{start:{line:8,column:32},end:{line:8,column:40}}}):helper))+"</div>\n        <div class=\"col-3 line\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"type")||(null==depth0?depth0:lookupProperty(depth0,"type")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"type",hash:{},data:data,loc:{start:{line:9,column:32},end:{line:9,column:40}}}):helper))+"</div>\n        <div class=\"col-3 line\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"cardinality")||(null==depth0?depth0:lookupProperty(depth0,"cardinality")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"cardinality",hash:{},data:data,loc:{start:{line:10,column:32},end:{line:10,column:47}}}):helper))+"</div>\n    </div>\n"},3:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"    <div class=\"grid-row\">\n        <div class=\"col-12 line\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"no outcome declaration found",{name:"__",hash:{},data:data,loc:{start:{line:14,column:33},end:{line:14,column:70}}}))+"</div>\n    </div>\n"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1;return"<div class=\"grid-row\">\n    <div class=\"col-6 header\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Identifier",{name:"__",hash:{},data:data,loc:{start:{line:2,column:30},end:{line:2,column:49}}}))+"</div>\n    <div class=\"col-3 header\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Type",{name:"__",hash:{},data:data,loc:{start:{line:3,column:30},end:{line:3,column:43}}}))+"</div>\n    <div class=\"col-3 header\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Cardinality",{name:"__",hash:{},data:data,loc:{start:{line:4,column:30},end:{line:4,column:50}}}))+"</div>\n</div>\n"+(null==(stack1=lookupProperty(helpers,"each").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"outcomes"),{name:"each",hash:{},fn:container.program(1,data,0),inverse:container.program(3,data,0),data:data,loc:{start:{line:6,column:0},end:{line:16,column:9}}}))?"":stack1)},useData:!0})}),define("tpl!taoQtiTest/controller/creator/templates/test-props",["handlebars"],function(hb){return hb.template({1:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"        <h4 class=\"toggler closed\" data-toggle=\"~ .test-time-limits\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Time Limits",{name:"__",hash:{},data:data,loc:{start:{line:40,column:69},end:{line:40,column:89}}}))+"</h4>\n\n    <!-- assessmentTest/timeLimits -->\n        <div class=\"test-time-limits toggled\">\n\n\n    <!-- assessmentTest/timeLimits/maxTime -->\n            <div class=\"grid-row\">\n                <div class=\"col-5\">\n                    <label for=\"test-max-time\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Maximum Duration",{name:"__",hash:{},data:data,loc:{start:{line:66,column:47},end:{line:66,column:72}}}))+"</label>\n                </div>\n                <div class=\"col-6 duration-group\">\n                    <input type=\"text\" name=\"max-time\" value=\"00:00:00\" data-duration=\"HH:mm:ss\" data-bind=\"timeLimits.maxTime\" data-bind-encoder=\"time\" />\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Maximum duration for the all test.",{name:"__",hash:{},data:data,loc:{start:{line:74,column:20},end:{line:74,column:63}}}))+"\n                    </div>\n                </div>\n            </div>\n\n    <!-- assessmentTest/timeLimits/allowLateSubmission -->\n            <div class=\"grid-row pseudo-label-box\">\n                <div class=\"col-5\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Late submission allowed",{name:"__",hash:{},data:data,loc:{start:{line:82,column:20},end:{line:82,column:52}}}))+"\n                </div>\n                <div class=\"col-6\">\n                    <label>\n                        <input type=\"checkbox\" name=\"test-allow-late-submission\" value=\"true\" data-bind=\"timeLimits.allowLateSubmission\" data-bind-encoder=\"boolean\" />\n                        <span class=\"icon-checkbox\"></span>\n                    </label>\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Whether a candidate's response that is beyond the maximum duration should still be accepted.",{name:"__",hash:{},data:data,loc:{start:{line:93,column:20},end:{line:93,column:121}}}))+"\n                    </div>\n                </div>\n            </div>\n        </div>\n"},3:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1;return"    <div class=\"test-scoring toggled\">\n\n<!-- assessmentTest/scoring/outcomeProcessing -->\n        <div class=\"grid-row\">\n            <div class=\"col-5\">\n                <label for=\"test-outcome-processing\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Outcome processing",{name:"__",hash:{},data:data,loc:{start:{line:109,column:53},end:{line:109,column:80}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <select name=\"test-outcome-processing\" class=\"select2\" data-bind=\"scoring.outcomeProcessing\" data-bind-encoder=\"string\" data-has-search=\"false\">\n"+(null==(stack1=lookupProperty(helpers,"each").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"modes"),{name:"each",hash:{},fn:container.program(4,data,0),inverse:container.noop,data:data,loc:{start:{line:113,column:16},end:{line:115,column:25}}}))?"":stack1)+"                </select>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Select the way the responses of your test should be processed",{name:"__",hash:{},data:data,loc:{start:{line:121,column:20},end:{line:121,column:90}}}))+"\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/scoring/categoryScore -->\n        <div class=\"grid-row test-category-score\">\n            <div class=\"col-5\">\n                <label for=\"test-category-score\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Category score",{name:"__",hash:{},data:data,loc:{start:{line:129,column:49},end:{line:129,column:72}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <label>\n                    <input type=\"checkbox\" name=\"test-category-score\" value=\"true\" data-bind=\"scoring.categoryScore\" data-bind-encoder=\"boolean\" />\n                    <span class=\"icon-checkbox\"></span>\n                </label>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Also compute the score per categories",{name:"__",hash:{},data:data,loc:{start:{line:140,column:20},end:{line:140,column:66}}}))+"\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/scoring/cutScore -->\n        <div class=\"grid-row test-cut-score\">\n            <div class=\"col-5\">\n                <label for=\"test-cut-score\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Cut score (pass ratio)",{name:"__",hash:{},data:data,loc:{start:{line:148,column:44},end:{line:148,column:75}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <input type=\"text\" name=\"test-cut-score\" value=\"0\" data-bind=\"scoring.cutScore\" data-bind-encoder=\"float\" data-validate=\"$numeric;\" />\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Set the cut score (or pass score ratio) associated to the test. It must be a float between 0 and 1.",{name:"__",hash:{},data:data,loc:{start:{line:156,column:20},end:{line:156,column:128}}}))+"\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/scoring/weightIdentifier -->\n        <div class=\"grid-row test-weight-identifier\">\n            <div class=\"col-5\">\n                <label for=\"test-weight-identifier\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Weight",{name:"__",hash:{},data:data,loc:{start:{line:164,column:52},end:{line:164,column:67}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <input type=\"text\" name=\"test-weight-identifier\" data-bind=\"scoring.weightIdentifier\" data-validate=\"$pattern(pattern=^([a-zA-Z_][a-zA-Z0-9_\\.-]*)?$);\" />\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Set the weight identifier used to process the score",{name:"__",hash:{},data:data,loc:{start:{line:172,column:20},end:{line:172,column:80}}}))+"\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/scoring/description -->\n        <div class=\"grid-row\">\n            <div class=\"col-12\">\n"+(null==(stack1=lookupProperty(helpers,"each").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"modes"),{name:"each",hash:{},fn:container.program(7,data,0),inverse:container.noop,data:data,loc:{start:{line:180,column:16},end:{line:185,column:25}}}))?"":stack1)+"            </div>\n        </div>\n    </div>\n"},4:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"                    <option value=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"key")||(null==depth0?depth0:lookupProperty(depth0,"key")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"key",hash:{},data:data,loc:{start:{line:114,column:35},end:{line:114,column:42}}}):helper))+"\" "+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"selected"),{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data,loc:{start:{line:114,column:44},end:{line:114,column:86}}}))?"":stack1)+">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"label")||(null==depth0?depth0:lookupProperty(depth0,"label")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"label",hash:{},data:data,loc:{start:{line:114,column:87},end:{line:114,column:96}}}):helper))+"</option>\n"},5:function(container,depth0,helpers,partials,data){return"selected=\"selected\""},7:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},helper;return"                <div class=\"feedback-info test-outcome-processing-description\" data-key=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"key")||(null==depth0?depth0:lookupProperty(depth0,"key")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"key",hash:{},data:data,loc:{start:{line:181,column:89},end:{line:181,column:96}}}):helper))+"\">\n                    <span class=\"icon-info\"></span>\n                    "+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"description")||(null==depth0?depth0:lookupProperty(depth0,"description")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"description",hash:{},data:data,loc:{start:{line:183,column:20},end:{line:183,column:35}}}):helper))+"\n                </div>\n"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"<div class=\"test-props props clearfix\">\n\n    <!-- test properties -->\n    <h3 data-bind=\"title\"></h3>\n\n<!-- assessmentTest/identifier -->\n    <div class=\"grid-row\">\n        <div class=\"col-5\">\n            <label for=\"test-identifier\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Identifier",{name:"__",hash:{},data:data,loc:{start:{line:9,column:41},end:{line:9,column:60}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:9,column:74},end:{line:9,column:97}}}))+"\">*</abbr></label>\n            <span id=\"props-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:10,column:28},end:{line:10,column:42}}}):helper))+"\" data-bind=\"identifier\" style=\"display: none;\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:10,column:90},end:{line:10,column:104}}}):helper))+"</span>\n        </div>\n        <div class=\"col-6\">\n            <input type=\"text\" name=\"test-identifier\" data-bind=\"identifier\" data-validate=\"$notEmpty; $idFormat; $testIdAvailable(identifier="+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:13,column:142},end:{line:13,column:156}}}):helper))+");\" />\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The principle identifier of the test.",{name:"__",hash:{},data:data,loc:{start:{line:18,column:12},end:{line:18,column:58}}}))+"\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/title -->\n    <div class=\"grid-row\">\n        <div class=\"col-5\">\n            <label for=\"test-title\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Title",{name:"__",hash:{},data:data,loc:{start:{line:26,column:36},end:{line:26,column:50}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:26,column:64},end:{line:26,column:87}}}))+"\">*</abbr></label>\n        </div>\n        <div class=\"col-6\">\n            <input type=\"text\" name=\"test-title\" data-bind=\"title\" data-validate=\"$notEmpty\" />\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The test title.",{name:"__",hash:{},data:data,loc:{start:{line:34,column:12},end:{line:34,column:36}}}))+"\n            </div>\n        </div>\n    </div>\n\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"showTimeLimits"),{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:39,column:4},end:{line:98,column:11}}}))?"":stack1)+"\n    <h4 class=\"toggler closed\" data-toggle=\"~ .test-scoring\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Scoring",{name:"__",hash:{},data:data,loc:{start:{line:100,column:61},end:{line:100,column:77}}}))+"</h4>\n\n<!-- assessmentTest/scoring -->\n"+(null==(stack1=lookupProperty(helpers,"with").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"scoring"),{name:"with",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data,loc:{start:{line:103,column:0},end:{line:189,column:9}}}))?"":stack1)+"\n    <h4 class=\"toggler closed\" data-toggle=\"~ .test-outcome-declarations\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Outcome declarations",{name:"__",hash:{},data:data,loc:{start:{line:191,column:74},end:{line:191,column:103}}}))+"</h4>\n\n    <!-- assessmentTest/outcomeDeclarations -->\n    <div class=\"test-outcome-declarations panel toggled\">\n        <div class=\"grid-row test-outcomes-generate\">\n            <div class=\"col-12 align-right\">\n                <button class=\"btn-info small\" data-action=\"generate-outcomes\"><span class=\"icon icon-reset\"></span>"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Regenerate",{name:"__",hash:{},data:data,loc:{start:{line:197,column:116},end:{line:197,column:135}}}))+"</button>\n            </div>\n        </div>\n        <div class=\"outcome-declarations\"></div>\n    </div>\n\n</div>"},useData:!0})}),define("tpl!taoQtiTest/controller/creator/templates/testpart-props",["handlebars"],function(hb){return hb.template({1:function(container,depth0,helpers,partials,data){return"checked"},3:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"                <div class=\"grid-row pseudo-label-box\">\n                    <div class=\"col-5\">\n                        <label for=\"testpart-show-feedback\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Show Feedback",{name:"__",hash:{},data:data,loc:{start:{line:152,column:60},end:{line:152,column:82}}}))+"</label>\n                    </div>\n                    <div class=\"col-6\">\n                        <label>\n                            <input type=\"checkbox\" name=\"testpart-show-feedback\" value=\"true\" data-bind=\"itemSessionControl.showFeedback\" data-bind-encoder=\"boolean\" />\n                            <span class=\"icon-checkbox\"></span>\n                        </label>\n                    </div>\n                    <div class=\"col-1 help\">\n                        <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                        <div class=\"tooltip-content\">\n                        "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"This constraint affects the visibility of feedback after the end of the last attempt.",{name:"__",hash:{},data:data,loc:{start:{line:163,column:24},end:{line:163,column:118}}}))+"\n                        </div>\n                    </div>\n                </div>\n"},5:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"                <div class=\"grid-row pseudo-label-box\">\n                    <div class=\"col-5\">\n                        <label for=\"testpart-allow-comment\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Allow Comment",{name:"__",hash:{},data:data,loc:{start:{line:215,column:60},end:{line:215,column:82}}}))+"</label>\n                    </div>\n                    <div class=\"col-6\">\n                        <label>\n                            <input type=\"checkbox\" name=\"testpart-allow-comment\" value=\"true\" data-bind=\"itemSessionControl.allowComment\" data-bind-encoder=\"boolean\" />\n                            <span class=\"icon-checkbox\"></span>\n                        </label>\n                    </div>\n                    <div class=\"col-1 help\">\n                        <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                        <div class=\"tooltip-content\">\n                        "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",{name:"__",hash:{},data:data,loc:{start:{line:226,column:24},end:{line:226,column:199}}}))+"\n                        </div>\n                    </div>\n                </div>\n"},7:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"                <div class=\"grid-row pseudo-label-box\">\n                    <div class=\"col-5\">\n                        <label for=\"testpart-allow-skipping\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Allow Skipping",{name:"__",hash:{},data:data,loc:{start:{line:236,column:61},end:{line:236,column:84}}}))+"</label>\n                    </div>\n                    <div class=\"col-6\">\n                        <label>\n                            <input type=\"checkbox\" name=\"testpart-allow-skipping\" value=\"true\" checked=\"checked\"  data-bind=\"itemSessionControl.allowSkipping\" data-bind-encoder=\"boolean\"   />\n                            <span class=\"icon-checkbox\"></span>\n                        </label>\n                    </div>\n                    <div class=\"col-1 help\">\n                        <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                        <div class=\"tooltip-content\">\n                        "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"If the candidate can skip the item, without submitting a response (default is true).",{name:"__",hash:{},data:data,loc:{start:{line:247,column:24},end:{line:247,column:117}}}))+"\n                        </div>\n                    </div>\n                </div>\n"},9:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"            <h4 class=\"toggler closed\" data-toggle=\"~ .testpart-time-limits\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Time Limits",{name:"__",hash:{},data:data,loc:{start:{line:275,column:77},end:{line:275,column:97}}}))+"</h4>\n\n    <!-- assessmentTest/testPart/timeLimits/minTime -->\n            <div class=\"testpart-time-limits toggled\">\n\n\n    <!-- assessmentTest/testPart/timeLimits/maxTime -->\n                <div class=\"grid-row\">\n                    <div class=\"col-5\">\n                        <label for=\"testpart-max-time\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Maximum Duration",{name:"__",hash:{},data:data,loc:{start:{line:301,column:55},end:{line:301,column:80}}}))+"</label>\n                    </div>\n                    <div class=\"col-6 duration-group\">\n                        <input type=\"text\" id=\"testpart-max-time\" name=\"max-time\" value=\"00:00:00\" data-duration=\"HH:mm:ss\" data-bind=\"timeLimits.maxTime\" data-bind-encoder=\"time\" />\n                    </div>\n                    <div class=\"col-1 help\">\n                        <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                        <div class=\"tooltip-content\">\n                        "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Maximum duration for this test part.",{name:"__",hash:{},data:data,loc:{start:{line:309,column:24},end:{line:309,column:69}}}))+"\n                        </div>\n                    </div>\n                </div>\n\n    <!-- assessmentTest/testPart/timeLimits/allowLateSubmission -->\n                <div class=\"grid-row pseudo-label-box\">\n                    <div class=\"col-5\">\n                        <label for=\"testpart-allow-late-submission\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Late submission allowed",{name:"__",hash:{},data:data,loc:{start:{line:317,column:68},end:{line:317,column:100}}}))+"</label>\n                    </div>\n                    <div class=\"col-6\">\n                        <label>\n                            <input type=\"checkbox\" name=\"section-allow-late-submission\" value=\"true\" data-bind=\"timeLimits.allowLateSubmission\" data-bind-encoder=\"boolean\" />\n                            <span class=\"icon-checkbox\"></span>\n                        </label>\n                    </div>\n                    <div class=\"col-1 help\">\n                        <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                        <div class=\"tooltip-content\">\n                        "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Whether a candidate's response that is beyond the maximum duration of the test part should still be accepted.",{name:"__",hash:{},data:data,loc:{start:{line:328,column:24},end:{line:328,column:142}}}))+"\n                        </div>\n                    </div>\n                </div>\n            </div>\n"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"<div id=\"testpart-props-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:1,column:24},end:{line:1,column:38}}}):helper))+"\" class=\"testpart-props props clearfix\">\n    <h3>"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:2,column:8},end:{line:2,column:22}}}):helper))+"</h3>\n\n    <form autocomplete=\"off\">\n\n<!-- assessmentTest/testPart/identifier -->\n        <div class=\"grid-row\">\n            <div class=\"col-5\">\n                <label for=\"testpart-identifier\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Identifier",{name:"__",hash:{},data:data,loc:{start:{line:9,column:49},end:{line:9,column:68}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:9,column:82},end:{line:9,column:105}}}))+"\">*</abbr></label>\n                <span id=\"props-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:10,column:32},end:{line:10,column:46}}}):helper))+"\" data-bind=\"identifier\" style=\"display: none;\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:10,column:94},end:{line:10,column:108}}}):helper))+"</span>\n            </div>\n            <div class=\"col-6\">\n                <input type=\"text\" id=\"testpart-identifier\" data-bind=\"identifier\" data-validate=\"$notEmpty; $idFormat; $testIdAvailable(identifier="+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:13,column:148},end:{line:13,column:162}}}):helper))+");\" />\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The test part identifier.",{name:"__",hash:{},data:data,loc:{start:{line:18,column:16},end:{line:18,column:50}}}))+"\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/navigationMode -->\n        <div class=\"grid-row pseudo-label-box\">\n            <div class=\"col-5\">\n               "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Navigation",{name:"__",hash:{},data:data,loc:{start:{line:26,column:15},end:{line:26,column:34}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:26,column:48},end:{line:26,column:71}}}))+"\">*</abbr>\n            </div>\n            <div class=\"col-6\">\n                <label>\n                    <input\n                            type=\"radio\"\n                            name=\"testpart-navigation-mode\"\n                            "+(null==(stack1=(lookupProperty(helpers,"equal")||depth0&&lookupProperty(depth0,"equal")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"navigationMode"),0,{name:"equal",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:33,column:28},end:{line:33,column:72}}}))?"":stack1)+"\n                            value=\"0\"\n                            data-bind=\"navigationMode\"\n                            data-bind-encoder=\"number\"\n                    />\n                    <span class=\"icon-radio\"></span>\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Linear",{name:"__",hash:{},data:data,loc:{start:{line:39,column:20},end:{line:39,column:35}}}))+"\n                </label>\n                <label>\n                    <input\n                            type=\"radio\"\n                            name=\"testpart-navigation-mode\"\n                            "+(null==(stack1=(lookupProperty(helpers,"equal")||depth0&&lookupProperty(depth0,"equal")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"navigationMode"),1,{name:"equal",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:45,column:28},end:{line:45,column:72}}}))?"":stack1)+"\n                            value=\"1\"\n                    />\n                    <span class=\"icon-radio\"></span>\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Non Linear",{name:"__",hash:{},data:data,loc:{start:{line:49,column:20},end:{line:49,column:39}}}))+"\n                </label>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The navigation mode determines the general paths that the candidate may take. A linear mode restricts the candidate to attempt each item in turn. Non Linear removes this restriction.",{name:"__",hash:{},data:data,loc:{start:{line:55,column:16},end:{line:55,column:207}}}))+"\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/submissionMode -->\n        <div class=\"grid-row pseudo-label-box\">\n            <div class=\"col-5\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Submission",{name:"__",hash:{},data:data,loc:{start:{line:63,column:16},end:{line:63,column:35}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:63,column:49},end:{line:63,column:72}}}))+"\">*</abbr>\n            </div>\n            <div class=\"col-6\">\n                <label>\n                    <input\n                            type=\"radio\"\n                            name=\"testpart-submission-mode\"\n                            "+(null==(stack1=(lookupProperty(helpers,"equal")||depth0&&lookupProperty(depth0,"equal")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"submissionMode"),0,{name:"equal",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:70,column:28},end:{line:70,column:72}}}))?"":stack1)+"\n                            value=\"0\"\n                            data-bind=\"submissionMode\"\n                            data-bind-encoder=\"number\"\n                    />\n                    <span class=\"icon-radio\"></span>\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Individual",{name:"__",hash:{},data:data,loc:{start:{line:76,column:20},end:{line:76,column:39}}}))+"\n                </label>\n                <label>\n                    <input\n                            type=\"radio\"\n                            name=\"testpart-submission-mode\"\n                            "+(null==(stack1=(lookupProperty(helpers,"equal")||depth0&&lookupProperty(depth0,"equal")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"submissionMode"),1,{name:"equal",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:82,column:28},end:{line:82,column:72}}}))?"":stack1)+"\n                            value=\"1\"\n                    />\n                    <span class=\"icon-radio\"></span>\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Simultaneous",{name:"__",hash:{},data:data,loc:{start:{line:86,column:20},end:{line:86,column:41}}}))+"\n                </label>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The submission mode determines when the candidate's responses are submitted for response processing. A testPart in individual mode requires the candidate to submit their responses on an item-by-item basis. In simultaneous mode the candidate's responses are all submitted together at the end of the testPart.",{name:"__",hash:{},data:data,loc:{start:{line:92,column:16},end:{line:92,column:332}}}))+"\n                </div>\n            </div>\n        </div>\n\n        <div class=\"categories\">\n            <div class=\"grid-row\">\n                <div class=\"col-5\">\n                    <label for=\"category-custom\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Categories",{name:"__",hash:{},data:data,loc:{start:{line:100,column:49},end:{line:100,column:68}}}))+"</label>\n                </div>\n                <div class=\"col-6\">\n                    <input type=\"text\" id=\"category-custom\" name=\"category-custom\"/>\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                        "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Test part level category enables configuring the categories of its composing items all at once. A category in gray means that all items have that category. A category in white means that only a few items have that category.",{name:"__",hash:{},data:data,loc:{start:{line:108,column:24},end:{line:108,column:256}}}))+"\n                    </div>\n                </div>\n            </div>\n\n            <!-- some user features (Test Navigation, Test Taker Tools, etc.) are in fact implemented as categories. They will appear here: -->\n            <div class=\"category-presets\"></div>\n        </div>\n\n        <h4 class=\"toggler closed\" data-toggle=\"~ .testpart-item-session-control\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Item Session Control",{name:"__",hash:{},data:data,loc:{start:{line:117,column:82},end:{line:117,column:111}}}))+"</h4>\n\n\n<!-- assessmentTest/testPart/itemSessionControl -->\n        <div class=\"testpart-item-session-control toggled\">\n\n<!-- assessmentTest/testPart/itemSessionControl/maxAttempts -->\n            <div class=\"grid-row\">\n                <div class=\"col-5\">\n                    <label for=\"testpart-max-attempts\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Max Attempts",{name:"__",hash:{},data:data,loc:{start:{line:126,column:55},end:{line:126,column:76}}}))+"</label>\n                </div>\n                <div class=\"col-6\">\n                    <input\n                            id=\"testpart-max-attempts\"\n                            type=\"text\"\n                            data-increment=\"1\"\n                            data-min=\"0\"\n                            data-max=\"151\"\n                            value=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"maxAttempts")||(null==depth0?depth0:lookupProperty(depth0,"maxAttempts")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"maxAttempts",hash:{},data:data,loc:{start:{line:135,column:35},end:{line:135,column:50}}}):helper))+"\"\n                            data-bind=\"itemSessionControl.maxAttempts\"\n                            data-bind-encoder=\"number\"\n                    />\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Controls the maximum number of attempts allowed. 0 means unlimited.",{name:"__",hash:{},data:data,loc:{start:{line:143,column:20},end:{line:143,column:96}}}))+"\n                    </div>\n                </div>\n            </div>\n\n<!-- assessmentTest/testPart/itemSessionControl/showFeedback -->\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"itemSessionShowFeedback"),{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data,loc:{start:{line:149,column:12},end:{line:167,column:19}}}))?"":stack1)+"\n\n\n<!-- assessmentTest/testPart/itemSessionControl/allowComment -->\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"itemSessionAllowComment"),{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data,loc:{start:{line:212,column:12},end:{line:230,column:19}}}))?"":stack1)+"\n<!-- assessmentTest/testPart/itemSessionControl/allowSkipping -->\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"itemSessionAllowSkipping"),{name:"if",hash:{},fn:container.program(7,data,0),inverse:container.noop,data:data,loc:{start:{line:233,column:12},end:{line:251,column:19}}}))?"":stack1)+"\n<!-- assessmentTest/testPart/itemSessionControl/validateResponses -->\n            <div class=\"grid-row pseudo-label-box\">\n                <div class=\"col-5\">\n                    <label for=\"testpart-validate-responses\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Validate Responses",{name:"__",hash:{},data:data,loc:{start:{line:256,column:61},end:{line:256,column:88}}}))+"</label>\n                </div>\n                <div class=\"col-6\">\n                    <label>\n                        <input type=\"checkbox\" name=\"testpart-validate-responses\" value=\"true\"  data-bind=\"itemSessionControl.validateResponses\" data-bind-encoder=\"boolean\"  />\n                        <span class=\"icon-checkbox\"></span>\n                    </label>\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The candidate is not allowed to submit invalid responses.",{name:"__",hash:{},data:data,loc:{start:{line:267,column:20},end:{line:267,column:86}}}))+"\n                    </div>\n                </div>\n            </div>\n\n        </div>\n\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"showTimeLimits"),{name:"if",hash:{},fn:container.program(9,data,0),inverse:container.noop,data:data,loc:{start:{line:274,column:8},end:{line:333,column:15}}}))?"":stack1)+"    </form>\n</div>"},useData:!0})}),define("tpl!taoQtiTest/controller/creator/templates/section-props",["handlebars"],function(hb){return hb.template({1:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"<!-- assessmentTest/testPart/assessmentSection/required -->\n    <div class=\"grid-row pseudo-label-box\">\n        <div class=\"col-5\">\n            <label for=\"section-required\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required",{name:"__",hash:{},data:data,loc:{start:{line:41,column:42},end:{line:41,column:59}}}))+"</label>\n        </div>\n        <div class=\"col-6\">\n            <label>\n                <input type=\"checkbox\" name=\"section-required\" value=\"true\" data-bind=\"required\" data-bind-encoder=\"boolean\" />\n                <span class=\"icon-checkbox\"></span>\n            </label>\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"If required it must appear (at least once) in the selection.",{name:"__",hash:{},data:data,loc:{start:{line:52,column:12},end:{line:52,column:81}}}))+"\n            </div>\n        </div>\n    </div>\n"},3:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"    <div class=\"grid-row pseudo-label-box\">\n        <div class=\"col-5\">\n            <label for=\"section-blueprint\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Associate Blueprint",{name:"__",hash:{},data:data,loc:{start:{line:121,column:43},end:{line:121,column:71}}}))+"</label>\n        </div>\n\n        <div class=\"col-6\">\n            <input type=\"text\" id=\"section-blueprint\" />\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Associate a blueprint to a section allow you to validate this section against the specified blueprint.",{name:"__",hash:{},data:data,loc:{start:{line:130,column:16},end:{line:130,column:127}}}))+"\n            </div>\n        </div>\n    </div>\n"},5:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"<!-- assessmentTest/testPart/assessmentSection/selection/withReplacement -->\n        <div class=\"grid-row pseudo-label-box\">\n            <div class=\"col-5\">\n                <label for=\"section-with-replacement\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"With Replacement",{name:"__",hash:{},data:data,loc:{start:{line:194,column:54},end:{line:194,column:79}}}))+"</label>\n            </div>\n\n            <div class=\"col-6\">\n                <label>\n                    <input type=\"checkbox\" name=\"section-with-replacement\" value=\"true\" data-bind=\"selection.withReplacement\"  data-bind-encoder=\"boolean\" />\n                    <span class=\"icon-checkbox\"></span>\n                </label>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"When selecting child elements each element is normally eligible for selection once only.",{name:"__",hash:{},data:data,loc:{start:{line:206,column:16},end:{line:206,column:113}}}))+"\n                </div>\n            </div>\n        </div>\n"},7:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"            <div class=\"grid-row pseudo-label-box\">\n                <div class=\"col-5\">\n                    <label for=\"section-show-feedback\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Show Feedback",{name:"__",hash:{},data:data,loc:{start:{line:271,column:55},end:{line:271,column:77}}}))+"</label>\n                </div>\n                <div class=\"col-6\">\n                    <label>\n                        <input type=\"checkbox\" name=\"section-show-feedback\" value=\"true\" data-bind=\"itemSessionControl.showFeedback\" data-bind-encoder=\"boolean\" />\n                        <span class=\"icon-checkbox\"></span>\n                    </label>\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"This constraint affects the visibility of feedback after the end of the last attempt.",{name:"__",hash:{},data:data,loc:{start:{line:282,column:20},end:{line:282,column:114}}}))+"\n                    </div>\n                </div>\n            </div>\n"},9:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"            <div class=\"grid-row pseudo-label-box\">\n                <div class=\"col-5\">\n                    <label for=\"section-allow-comment\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Allow Comment",{name:"__",hash:{},data:data,loc:{start:{line:334,column:55},end:{line:334,column:77}}}))+"</label>\n                </div>\n                <div class=\"col-6\">\n                    <label>\n                        <input type=\"checkbox\" name=\"section-allow-comment\" value=\"true\"  data-bind=\"itemSessionControl.allowComment\" data-bind-encoder=\"boolean\" />\n                        <span class=\"icon-checkbox\"></span>\n                    </label>\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",{name:"__",hash:{},data:data,loc:{start:{line:345,column:20},end:{line:345,column:195}}}))+"\n                    </div>\n                </div>\n            </div>\n"},11:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"            <div class=\"grid-row pseudo-label-box\">\n                <div class=\"col-5\">\n                    <label for=\"section-allow-skipping\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Allow Skipping",{name:"__",hash:{},data:data,loc:{start:{line:355,column:56},end:{line:355,column:79}}}))+"</label>\n                </div>\n                <div class=\"col-6\">\n                    <label>\n                        <input type=\"checkbox\" name=\"section-allow-skipping\" value=\"true\" checked=\"checked\" data-bind=\"itemSessionControl.allowSkipping\" data-bind-encoder=\"boolean\" />\n                        <span class=\"icon-checkbox\"></span>\n                    </label>\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"If the candidate can skip the item, without submitting a response (default is true).",{name:"__",hash:{},data:data,loc:{start:{line:366,column:20},end:{line:366,column:113}}}))+"\n                    </div>\n                </div>\n            </div>\n"},13:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"        <h4 class=\"toggler closed\" data-toggle=\"~ .section-time-limits\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Time Limits",{name:"__",hash:{},data:data,loc:{start:{line:394,column:72},end:{line:394,column:92}}}))+"</h4>\n\n    <!-- assessmentTest/timeLimits -->\n        <div class=\"section-time-limits toggled\">\n\n\n\n    <!-- assessmentTest/testPart/assessmentSection/timeLimits/maxTime -->\n            <div class=\"grid-row\">\n                <div class=\"col-5\">\n                    <label for=\"section-max-time\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Maximum Duration",{name:"__",hash:{},data:data,loc:{start:{line:421,column:50},end:{line:421,column:75}}}))+"</label>\n                </div>\n                <div class=\"col-6 duration-group\">\n                    <input type=\"text\" id=\"section-max-time\" name=\"max-time\" value=\"00:00:00\" data-duration=\"HH:mm:ss\" data-bind=\"timeLimits.maxTime\" data-bind-encoder=\"time\" />\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Maximum duration for this section.",{name:"__",hash:{},data:data,loc:{start:{line:429,column:20},end:{line:429,column:63}}}))+"\n                    </div>\n                </div>\n            </div>\n\n    <!-- assessmentTest/testPart/assessmentSection/timeLimits/allowLateSubmission -->\n            <div class=\"grid-row pseudo-label-box\">\n                <div class=\"col-5\">\n                    <label for=\"section-allow-late-submission\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Late submission allowed",{name:"__",hash:{},data:data,loc:{start:{line:437,column:63},end:{line:437,column:95}}}))+"</label>\n                </div>\n                <div class=\"col-6\">\n                    <label>\n                        <input type=\"checkbox\" name=\"section-allow-late-submission\" value=\"true\" data-bind=\"timeLimits.allowLateSubmission\" data-bind-encoder=\"boolean\" />\n                        <span class=\"icon-checkbox\"></span>\n                    </label>\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Whether a candidate's response that is beyond the maximum duration of the section should still be accepted.",{name:"__",hash:{},data:data,loc:{start:{line:448,column:20},end:{line:448,column:136}}}))+"\n                    </div>\n                </div>\n            </div>\n        </div>\n"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"<div id=\"section-props-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:1,column:23},end:{line:1,column:37}}}):helper))+"\" class=\"section-props props clearfix\">\n    <h3>"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"title")||(null==depth0?depth0:lookupProperty(depth0,"title")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"title",hash:{},data:data,loc:{start:{line:2,column:8},end:{line:2,column:17}}}):helper))+"</h3>\n\n<!-- assessmentTest/testPart/assessmentSection/identifier -->\n    <div class=\"grid-row\">\n        <div class=\"col-5\">\n            <label for=\"section-identifier\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Identifier",{name:"__",hash:{},data:data,loc:{start:{line:7,column:44},end:{line:7,column:63}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:7,column:77},end:{line:7,column:100}}}))+"\">*</abbr></label>\n            <span id=\"props-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:8,column:28},end:{line:8,column:42}}}):helper))+"\" data-bind=\"identifier\" style=\"display: none;\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:8,column:90},end:{line:8,column:104}}}):helper))+"</span>\n        </div>\n        <div class=\"col-6\">\n            <input type=\"text\" id=\"section-identifier\" data-bind=\"identifier\" data-validate=\"$notEmpty; $idFormat; $testIdAvailable(identifier="+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:11,column:143},end:{line:11,column:157}}}):helper))+");\" />\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The identifier of the section.",{name:"__",hash:{},data:data,loc:{start:{line:16,column:12},end:{line:16,column:51}}}))+"\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/title -->\n    <div class=\"grid-row\">\n        <div class=\"col-5\">\n            <label for=\"section-title\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Title",{name:"__",hash:{},data:data,loc:{start:{line:24,column:39},end:{line:24,column:53}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:24,column:67},end:{line:24,column:90}}}))+"\">*</abbr></label>\n        </div>\n        <div class=\"col-6\">\n            <input type=\"text\" id=\"section-title\" data-bind=\"title\" data-validate=\"$notEmpty\" />\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The section title.",{name:"__",hash:{},data:data,loc:{start:{line:32,column:12},end:{line:32,column:39}}}))+"\n            </div>\n        </div>\n    </div>\n\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"isSubsection"),{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:37,column:0},end:{line:56,column:7}}}))?"":stack1)+"\n\n<!-- assessmentTest/testPart/assessmentSection/visible -->\n    <div class=\"grid-row pseudo-label-box\">\n        <div class=\"col-5\">\n            <label for=\"section-visible\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Visible",{name:"__",hash:{},data:data,loc:{start:{line:82,column:41},end:{line:82,column:57}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:82,column:71},end:{line:82,column:94}}}))+"\">*</abbr></label>\n        </div>\n        <div class=\"col-6\">\n            <label>\n                <input type=\"checkbox\" name=\"section-visible\" value=\"true\" checked=\"checked\"  data-bind=\"visible\" data-bind-encoder=\"boolean\" />\n                <span class=\"icon-checkbox\"></span>\n            </label>\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"A visible section is one that is identifiable by the candidate.",{name:"__",hash:{},data:data,loc:{start:{line:93,column:12},end:{line:93,column:84}}}))+"\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/keepTogether -->\n    <div class=\"grid-row pseudo-label-box\">\n        <div class=\"col-5\">\n            <label for=\"section-keep-together\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Keep Together",{name:"__",hash:{},data:data,loc:{start:{line:101,column:47},end:{line:101,column:69}}}))+"</label>\n        </div>\n\n        <div class=\"col-6\">\n            <label>\n                <input type=\"checkbox\" name=\"section-keep-together\" value=\"true\" checked=\"checked\"  data-bind=\"keepTogether\" data-bind-encoder=\"boolean\" />\n                <span class=\"icon-checkbox\"></span>\n            </label>\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"An invisible section with a parent that is subject to shuffling can specify whether or not its children, which will appear to the candidate as if they were part of the parent, are shuffled as a block or mixed up with the other children of the parent section.",{name:"__",hash:{},data:data,loc:{start:{line:113,column:12},end:{line:113,column:279}}}))+"\n            </div>\n        </div>\n    </div>\n\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"hasBlueprint"),{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data,loc:{start:{line:118,column:4},end:{line:134,column:11}}}))?"":stack1)+"\n    <div class=\"categories\">\n        <div class=\"grid-row\">\n            <div class=\"col-5\">\n                <label for=\"category-custom\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Categories",{name:"__",hash:{},data:data,loc:{start:{line:139,column:45},end:{line:139,column:64}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <input type=\"text\" id=\"category-custom\" name=\"category-custom\"/>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Section level category enables configuring the categories of its composing items all at once. A category in gray means that all items have that category. A category in white means that only a few items have that category.",{name:"__",hash:{},data:data,loc:{start:{line:147,column:20},end:{line:147,column:250}}}))+"\n                </div>\n            </div>\n        </div>\n\n        <!-- some user features (Test Navigation, Test Taker Tools, etc.) are in fact implemented as categories. They will appear here: -->\n        <div class=\"category-presets\"></div>\n    </div>\n\n    <h4 class=\"toggler closed\" data-toggle=\"~ .section-selection\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Selection",{name:"__",hash:{},data:data,loc:{start:{line:156,column:66},end:{line:156,column:84}}}))+"</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/selection -->\n    <div class=\"section-selection toggled\">\n\n        <div class=\"grid-row pseudo-label-box\">\n            <div class=\"col-5\">\n                <label for=\"section-enable-selection\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Enable selection",{name:"__",hash:{},data:data,loc:{start:{line:163,column:54},end:{line:163,column:79}}}))+"</label>\n            </div>\n\n            <div class=\"col-6\">\n                <label>\n                    <input type=\"checkbox\" name=\"section-enable-selection\"  />\n                    <span class=\"icon-checkbox\"></span>\n                </label>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/selection/select -->\n        <div class=\"grid-row\">\n            <div class=\"col-5\">\n                <label for=\"section-select\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Select",{name:"__",hash:{},data:data,loc:{start:{line:177,column:44},end:{line:177,column:59}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:177,column:73},end:{line:177,column:96}}}))+"\">*</abbr></label>\n            </div>\n            <div class=\"col-6\">\n                <input id=\"section-select\" name=\"section-select\" type=\"text\" data-increment=\"1\" data-min=\"0\" value=\"0\" data-bind=\"selection.select\"  data-bind-encoder=\"number\" />\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The number of child elements to be selected.",{name:"__",hash:{},data:data,loc:{start:{line:185,column:16},end:{line:185,column:69}}}))+"\n                </div>\n            </div>\n        </div>\n\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"hasSelectionWithReplacement"),{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data,loc:{start:{line:190,column:8},end:{line:210,column:15}}}))?"":stack1)+"    </div>\n\n    <h4 class=\"toggler closed\" data-toggle=\"~ .section-ordering\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Ordering",{name:"__",hash:{},data:data,loc:{start:{line:213,column:65},end:{line:213,column:82}}}))+"</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/ordering -->\n    <div class=\"section-ordering toggled\">\n<!-- assessmentTest/testPart/assessmentSection/ordering/shuffle -->\n        <div class=\"grid-row pseudo-label-box\">\n            <div class=\"col-5\">\n                <label for=\"section-shuffle\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Shuffle",{name:"__",hash:{},data:data,loc:{start:{line:220,column:45},end:{line:220,column:61}}}))+"</label>\n            </div>\n\n            <div class=\"col-6\">\n                <label>\n                    <input type=\"checkbox\" name=\"section-shuffle\" value=\"true\" data-bind=\"ordering.shuffle\"  data-bind-encoder=\"boolean\"  />\n                    <span class=\"icon-checkbox\"></span>\n                </label>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"If set, it causes the order of the child elements to be randomized, otherwise it uses the order in which the child elements are defined.",{name:"__",hash:{},data:data,loc:{start:{line:232,column:16},end:{line:232,column:161}}}))+"\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <h4 class=\"toggler closed\" data-toggle=\"~ .section-item-session-control\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Item Session Control",{name:"__",hash:{},data:data,loc:{start:{line:238,column:77},end:{line:238,column:106}}}))+"</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl -->\n    <div class=\"section-item-session-control toggled\">\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/maxAttempts -->\n        <div class=\"grid-row\">\n            <div class=\"col-5\">\n                <label for=\"section-max-attempts\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Max Attempts",{name:"__",hash:{},data:data,loc:{start:{line:245,column:50},end:{line:245,column:71}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <input\n                        id=\"section-max-attempts\"\n                        type=\"text\"\n                        data-increment=\"1\"\n                        data-min=\"0\"\n                        data-max=\"151\"\n                        value=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"maxAttempts")||(null==depth0?depth0:lookupProperty(depth0,"maxAttempts")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"maxAttempts",hash:{},data:data,loc:{start:{line:254,column:31},end:{line:254,column:46}}}):helper))+"\"\n                        data-bind=\"itemSessionControl.maxAttempts\"\n                        data-bind-encoder=\"number\"\n                />\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Controls the maximum number of attempts allowed. 0 means unlimited.",{name:"__",hash:{},data:data,loc:{start:{line:262,column:16},end:{line:262,column:92}}}))+"\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/showFeedback -->\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"itemSessionShowFeedback"),{name:"if",hash:{},fn:container.program(7,data,0),inverse:container.noop,data:data,loc:{start:{line:268,column:8},end:{line:286,column:15}}}))?"":stack1)+"\n\n\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/allowComment -->\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"itemSessionAllowComment"),{name:"if",hash:{},fn:container.program(9,data,0),inverse:container.noop,data:data,loc:{start:{line:331,column:8},end:{line:349,column:15}}}))?"":stack1)+"\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/allowSkipping -->\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"itemSessionAllowSkipping"),{name:"if",hash:{},fn:container.program(11,data,0),inverse:container.noop,data:data,loc:{start:{line:352,column:8},end:{line:370,column:15}}}))?"":stack1)+"\n<!-- assessmentTest/testPart/assessmentSection/itemSessionControl/validateResponses -->\n        <div class=\"grid-row pseudo-label-box\">\n            <div class=\"col-5\">\n                <label for=\"section-validate-responses\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Validate Responses",{name:"__",hash:{},data:data,loc:{start:{line:375,column:56},end:{line:375,column:83}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <label>\n                    <input type=\"checkbox\" name=\"section-validate-responses\" value=\"true\" data-bind=\"itemSessionControl.validateResponses\" data-bind-encoder=\"boolean\" />\n                    <span class=\"icon-checkbox\"></span>\n                </label>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The candidate is not allowed to submit invalid responses.",{name:"__",hash:{},data:data,loc:{start:{line:386,column:16},end:{line:386,column:82}}}))+"\n                </div>\n            </div>\n        </div>\n\n    </div>\n\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"showTimeLimits"),{name:"if",hash:{},fn:container.program(13,data,0),inverse:container.noop,data:data,loc:{start:{line:393,column:4},end:{line:453,column:11}}}))?"":stack1)+"</div>"},useData:!0})}),define("tpl!taoQtiTest/controller/creator/templates/itemref-props",["handlebars"],function(hb){return hb.template({1:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"            <div class=\"grid-row pseudo-label-box\">\n                <div class=\"col-5\">\n                    <label for=\"itemref-show-feedback\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Show Feedback",{name:"__",hash:{},data:data,loc:{start:{line:159,column:55},end:{line:159,column:77}}}))+"</label>\n                </div>\n                <div class=\"col-6\">\n                    <label>\n                        <input type=\"checkbox\" name=\"itemref-show-feedback\" value=\"true\" data-bind=\"itemSessionControl.showFeedback\" data-bind-encoder=\"boolean\" />\n                        <span class=\"icon-checkbox\"></span>\n                    </label>\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"This constraint affects the visibility of feedback after the end of the last attempt.",{name:"__",hash:{},data:data,loc:{start:{line:170,column:20},end:{line:170,column:114}}}))+"\n                    </div>\n                </div>\n            </div>\n"},3:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"            <div class=\"grid-row pseudo-label-box\">\n                <div class=\"col-5\">\n                    <label for=\"itemref-allow-comment\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Allow Comment",{name:"__",hash:{},data:data,loc:{start:{line:222,column:55},end:{line:222,column:77}}}))+"</label>\n                </div>\n                <div class=\"col-6\">\n                    <label>\n                        <input type=\"checkbox\" name=\"itemref-allow-comment\" value=\"true\"  data-bind=\"itemSessionControl.allowComment\" data-bind-encoder=\"boolean\" />\n                        <span class=\"icon-checkbox\"></span>\n                    </label>\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"This constraint controls whether or not the candidate is allowed to provide a comment on the item during the session. Comments are not part of the assessed responses.",{name:"__",hash:{},data:data,loc:{start:{line:233,column:20},end:{line:233,column:195}}}))+"\n                    </div>\n                </div>\n            </div>\n"},5:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"            <div class=\"grid-row pseudo-label-box\">\n                <div class=\"col-5\">\n                    <label for=\"itemref-allow-skipping\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Allow Skipping",{name:"__",hash:{},data:data,loc:{start:{line:243,column:56},end:{line:243,column:79}}}))+"</label>\n                </div>\n                <div class=\"col-6\">\n                    <label>\n                        <input type=\"checkbox\" name=\"itemref-allow-skipping\" value=\"true\" checked=\"checked\" data-bind=\"itemSessionControl.allowSkipping\" data-bind-encoder=\"boolean\" />\n                        <span class=\"icon-checkbox\"></span>\n                    </label>\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"If the candidate can skip the item, without submitting a response (default is true).",{name:"__",hash:{},data:data,loc:{start:{line:254,column:20},end:{line:254,column:113}}}))+"\n                    </div>\n                </div>\n            </div>\n"},7:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1;return"    <h4 class=\"toggler closed\" data-toggle=\"~ .itemref-time-limits\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Time Limits",{name:"__",hash:{},data:data,loc:{start:{line:282,column:68},end:{line:282,column:88}}}))+"</h4>\n\n<!-- assessmentTest/timeLimits -->\n    <div class=\"itemref-time-limits toggled\">\n\n        <div class=\"lockedtime-container hidden\">\n\n            <div class=\"grid-row\">\n                <div class=\"col-5\">\n                    <label for=\"itemref-max-time\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Maximum Duration",{name:"__",hash:{},data:data,loc:{start:{line:291,column:50},end:{line:291,column:75}}}))+"</label>\n                </div>\n                <div class=\"col-6 duration-group\">\n                    <input type=\"text\" name=\"max-time\" value=\"00:00:00\" data-duration=\"HH:mm:ss\" data-bind=\"timeLimits.maxTime\" data-bind-encoder=\"time\" />\n                </div>\n                <div class=\"col-1 help\">\n                    <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                    <div class=\"tooltip-content\">\n                        "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Minimum duration : enforces the test taker to stay on the item for the given duration.",{name:"__",hash:{},data:data,loc:{start:{line:299,column:24},end:{line:299,column:119}}}))+"<br>\n                        "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Maximum duration : the items times out when the duration reaches 0.",{name:"__",hash:{},data:data,loc:{start:{line:300,column:24},end:{line:300,column:100}}}))+"<br>\n                        "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Locked duration  : guided navigation. The test transition to the next item once the duration reaches 0.",{name:"__",hash:{},data:data,loc:{start:{line:301,column:24},end:{line:301,column:136}}}))+"<br>\n                    </div>\n                </div>\n            </div>\n            <div class=\"locker\">\n                <button class=\"unlocked\" title='"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Link durations to activate the guided navigation",{name:"__",hash:{},data:data,loc:{start:{line:306,column:48},end:{line:306,column:105}}}))+"' ><span class=\"icon-unlink\"></span></button>\n            </div>\n            <div class=\"grid-row\">\n                <div class=\"col-5\">\n                    <label for=\"itemref-min-time\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Minimum Duration",{name:"__",hash:{},data:data,loc:{start:{line:310,column:50},end:{line:310,column:75}}}))+"</label>\n                </div>\n                <div class=\"col-6\">\n                    <input type=\"text\" name=\"min-time\" value=\"00:00:00\" data-duration=\"HH:mm:ss\"  data-bind=\"timeLimits.minTime\" data-bind-encoder=\"time\" />\n                </div>\n            </div>\n        </div>\n    \n<!-- assessmentTest/testPart/assessmentSection/sectionPart/timeLimits/maxTime -->\n        <div class=\"grid-row maxtime-container "+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"isLinear"),{name:"if",hash:{},fn:container.program(8,data,0),inverse:container.noop,data:data,loc:{start:{line:319,column:47},end:{line:319,column:76}}}))?"":stack1)+"\">\n            <div class=\"col-5\">\n                <label for=\"itemref-max-time\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Maximum Duration",{name:"__",hash:{},data:data,loc:{start:{line:321,column:46},end:{line:321,column:71}}}))+"</label>\n            </div>\n            <div class=\"col-6 duration-group\">\n                <input type=\"text\" name=\"max-time\" value=\"00:00:00\" data-duration=\"HH:mm:ss\" data-bind=\"timeLimits.maxTime\" data-bind-encoder=\"time\" />\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Maximum duration for this item.",{name:"__",hash:{},data:data,loc:{start:{line:329,column:16},end:{line:329,column:56}}}))+"\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/timeLimits/minTime -->\n        <div class=\"grid-row mintime-container "+(null==(stack1=lookupProperty(helpers,"unless").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"isLinear"),{name:"unless",hash:{},fn:container.program(8,data,0),inverse:container.noop,data:data,loc:{start:{line:335,column:47},end:{line:335,column:84}}}))?"":stack1)+"\">\n            <div class=\"col-5\">\n                <label for=\"min-time\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Minimum Duration",{name:"__",hash:{},data:data,loc:{start:{line:337,column:38},end:{line:337,column:63}}}))+"</label>\n            </div>\n            <div class=\"col-6 duration-group\">\n                <input type=\"text\" name=\"min-time\" value=\"00:00:00\" data-duration=\"HH:mm:ss\" data-bind=\"timeLimits.minTime\" data-bind-encoder=\"time\" />\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Minimum duration for this item.",{name:"__",hash:{},data:data,loc:{start:{line:345,column:20},end:{line:345,column:60}}}))+"\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/timeLimits/allowLateSubmission -->\n        <div class=\"grid-row pseudo-label-box\">\n            <div class=\"col-5\">\n                <label for=\"itemref-allow-late-submission\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Late submission allowed",{name:"__",hash:{},data:data,loc:{start:{line:353,column:59},end:{line:353,column:91}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <label>\n                    <input type=\"checkbox\" name=\"itemref-allow-late-submission\" value=\"true\" data-bind=\"timeLimits.allowLateSubmission\" data-bind-encoder=\"boolean\" />\n                    <span class=\"icon-checkbox\"></span>\n                </label>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Whether a candidate's response that is beyond the maximum duration of the item should still be accepted.",{name:"__",hash:{},data:data,loc:{start:{line:364,column:16},end:{line:364,column:129}}}))+"\n                </div>\n            </div>\n        </div>\n    </div>\n"},8:function(container,depth0,helpers,partials,data){return"hidden"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"<div id=\"itemref-props-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:1,column:23},end:{line:1,column:37}}}):helper))+"\" class=\"itemref-props props clearfix\">\n\n    <h3>"+(null==(stack1=(lookupProperty(helpers,"dompurify")||depth0&&lookupProperty(depth0,"dompurify")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"label"),{name:"dompurify",hash:{},data:data,loc:{start:{line:3,column:8},end:{line:3,column:29}}}))?"":stack1)+"</h3>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/identifier -->\n    <div class=\"grid-row\">\n        <div class=\"col-5\">\n            <label for=\"itemref-identifier\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Identifier",{name:"__",hash:{},data:data,loc:{start:{line:8,column:44},end:{line:8,column:63}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:8,column:77},end:{line:8,column:100}}}))+"\">*</abbr></label>\n            <span id=\"props-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:9,column:28},end:{line:9,column:42}}}):helper))+"\" data-bind=\"identifier\" style=\"display: none;\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:9,column:90},end:{line:9,column:104}}}):helper))+"</span>\n        </div>\n        <div class=\"col-6\">\n            <input type=\"text\" name=\"itemref-identifier\" data-bind=\"identifier\" data-validate=\"$notEmpty; $idFormat; $testIdAvailable(identifier="+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:12,column:145},end:{line:12,column:159}}}):helper))+");\" />\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The identifier of the item reference.",{name:"__",hash:{},data:data,loc:{start:{line:17,column:12},end:{line:17,column:58}}}))+"\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/href -->\n    <div class=\"grid-row\">\n        <div class=\"col-5\">\n            <label for=\"itemref-href\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Reference",{name:"__",hash:{},data:data,loc:{start:{line:25,column:38},end:{line:25,column:56}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:25,column:70},end:{line:25,column:93}}}))+"\">*</abbr></label>\n        </div>\n        <div class=\"col-6\">\n            <input type=\"text\" name=\"itemref-href\" data-bind=\"href\" readonly=\"readonly\" />\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The reference.",{name:"__",hash:{},data:data,loc:{start:{line:33,column:12},end:{line:33,column:35}}}))+"\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/required -->\n    <div class=\"grid-row pseudo-label-box\">\n        <div class=\"col-5\">\n            <label for=\"itemref-required\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required",{name:"__",hash:{},data:data,loc:{start:{line:41,column:42},end:{line:41,column:59}}}))+"</label>\n        </div>\n        <div class=\"col-6\">\n            <label>\n                <input type=\"checkbox\" name=\"itemref-required\" value=\"true\" data-bind=\"required\" data-bind-encoder=\"boolean\" />\n                <span class=\"icon-checkbox\"></span>\n            </label>\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"If required it must appear (at least once) in the selection.",{name:"__",hash:{},data:data,loc:{start:{line:52,column:12},end:{line:52,column:81}}}))+"\n            </div>\n        </div>\n    </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/fixed -->\n    <div class=\"grid-row pseudo-label-box\">\n        <div class=\"col-5\">\n            <label for=\"itemref-fixed\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Fixed",{name:"__",hash:{},data:data,loc:{start:{line:60,column:39},end:{line:60,column:53}}}))+"</label>\n        </div>\n        <div class=\"col-6\">\n            <label>\n                <input type=\"checkbox\" name=\"itemref-fixed\" value=\"true\" data-bind=\"fixed\" data-bind-encoder=\"boolean\" />\n                <span class=\"icon-checkbox\"></span>\n            </label>\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Not shuffled, the position remains fixed.",{name:"__",hash:{},data:data,loc:{start:{line:71,column:12},end:{line:71,column:62}}}))+"\n            </div>\n        </div>\n    </div>\n\n    <div class=\"categories\">\n        <div class=\"grid-row\">\n            <div class=\"col-5\">\n                <label for=\"category-custom\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Categories",{name:"__",hash:{},data:data,loc:{start:{line:79,column:45},end:{line:79,column:64}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <input type=\"text\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"custom categories",{name:"__",hash:{},data:data,loc:{start:{line:82,column:42},end:{line:82,column:68}}}))+"\" name=\"category-custom\"/>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Items can optionally be assigned to one or more categories.",{name:"__",hash:{},data:data,loc:{start:{line:87,column:16},end:{line:87,column:84}}}))+"\n                </div>\n            </div>\n        </div>\n\n        <!-- assessmentTest/testPart/assessmentSection/sectionPart/category -->\n        <textarea title=\"categories\" class=\"hidden\" type=\"text\" name=\"itemref-category\" data-bind=\"categories\" data-bind-encoder=\"str2array\"></textarea>\n\n        <!-- some user features (Test Navigation, Test Taker Tools, etc.) are in fact implemented as categories. They will appear here: -->\n        <div class=\"category-presets\"></div>\n    </div>\n\n    <h4 class=\"toggler closed\" data-toggle=\"~ .itemref-weights\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Weights",{name:"__",hash:{},data:data,loc:{start:{line:99,column:64},end:{line:99,column:80}}}))+"</h4>\n\n    <div class=\"itemref-weights toggled\">\n        <div class=\"grid-row \">\n            <div class=\"col-9\">\n                <strong>"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Identifier",{name:"__",hash:{},data:data,loc:{start:{line:104,column:24},end:{line:104,column:43}}}))+"</strong>\n            </div>\n            <div class=\"col-2\">\n                <strong>"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Value",{name:"__",hash:{},data:data,loc:{start:{line:107,column:24},end:{line:107,column:38}}}))+"</strong>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Controls the contribution of an individual item score to the overall test score.",{name:"__",hash:{},data:data,loc:{start:{line:112,column:20},end:{line:112,column:109}}}))+"\n                </div>\n            </div>\n        </div>\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/weights -->\n        <div data-bind-each=\"weights\" data-bind-tmpl=\"itemrefweight\"></div>\n        <div class=\"grid-row\">\n            <div class=\"col-12\">\n                <a class=\"itemref-weight-add\"><span class=\"icon-add\"></span> "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"add a new weight",{name:"__",hash:{},data:data,loc:{start:{line:120,column:77},end:{line:120,column:102}}}))+"</a>\n            </div>\n        </div>\n    </div>\n\n\n    <h4 class=\"toggler closed\" data-toggle=\"~ .itemref-item-session-control\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Item Session Control",{name:"__",hash:{},data:data,loc:{start:{line:126,column:77},end:{line:126,column:106}}}))+"</h4>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl -->\n    <div class=\"itemref-item-session-control toggled\">\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/maxAttempts -->\n        <div class=\"grid-row\">\n            <div class=\"col-5\">\n                <label for=\"itemref-max-attempts\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Max Attempts",{name:"__",hash:{},data:data,loc:{start:{line:133,column:50},end:{line:133,column:71}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <input\n                        name=\"itemref-max-attempts\"\n                        type=\"text\"\n                        data-increment=\"1\"\n                        data-min=\"0\"\n                        data-max=\"151\"\n                        value=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"maxAttempts")||(null==depth0?depth0:lookupProperty(depth0,"maxAttempts")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"maxAttempts",hash:{},data:data,loc:{start:{line:142,column:31},end:{line:142,column:46}}}):helper))+"\"\n                        data-bind=\"itemSessionControl.maxAttempts\"\n                        data-bind-encoder=\"number\"\n                />\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Controls the maximum number of attempts allowed. 0 means unlimited.",{name:"__",hash:{},data:data,loc:{start:{line:150,column:16},end:{line:150,column:92}}}))+"\n                </div>\n            </div>\n        </div>\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/showFeedback -->\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"itemSessionShowFeedback"),{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:156,column:8},end:{line:174,column:15}}}))?"":stack1)+"\n\n\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/allowComment -->\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"itemSessionAllowComment"),{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data,loc:{start:{line:219,column:8},end:{line:237,column:15}}}))?"":stack1)+"\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/allowSkipping -->\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"itemSessionAllowSkipping"),{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data,loc:{start:{line:240,column:8},end:{line:258,column:15}}}))?"":stack1)+"\n<!-- assessmentTest/testPart/assessmentSection/sectionPart/itemSessionControl/validateResponses -->\n        <div class=\"grid-row pseudo-label-box\">\n            <div class=\"col-5\">\n                <label for=\"itemref-validate-responses\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Validate Responses",{name:"__",hash:{},data:data,loc:{start:{line:263,column:56},end:{line:263,column:83}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <label>\n                    <input type=\"checkbox\" name=\"itemref-validate-responses\" value=\"true\" data-bind=\"itemSessionControl.validateResponses\" data-bind-encoder=\"boolean\" />\n                    <span class=\"icon-checkbox\"></span>\n                </label>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"The candidate is not allowed to submit invalid responses.",{name:"__",hash:{},data:data,loc:{start:{line:274,column:16},end:{line:274,column:82}}}))+"\n                </div>\n            </div>\n        </div>\n\n    </div>\n\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"showTimeLimits"),{name:"if",hash:{},fn:container.program(7,data,0),inverse:container.noop,data:data,loc:{start:{line:281,column:4},end:{line:369,column:11}}}))?"":stack1)+"</div>"},useData:!0})}),define("tpl!taoQtiTest/controller/creator/templates/itemref-props-weight",["handlebars"],function(hb){return hb.template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},helper;return"<div class=\"grid-row itemref-weight\">\n    <div class=\"col-9\">\n        <input data-bind=\"identifier\" data-validate=\"$notEmpty; $testIdFormat; $testIdAvailable(original="+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:3,column:105},end:{line:3,column:119}}}):helper))+");\" type=\"text\" value=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:3,column:142},end:{line:3,column:156}}}):helper))+"\" />\n    </div>\n    <div class=\"col-2\">\n        <input data-bind=\"value\" data-validate=\"$notEmpty; $numeric;\" type=\"text\" value=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"value")||(null==depth0?depth0:lookupProperty(depth0,"value")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"value",hash:{},data:data,loc:{start:{line:6,column:89},end:{line:6,column:98}}}):helper))+"\" data-bind-encoder=\"float\" />\n    </div>\n    <div class=\"col-1\">\n        <a class=\"itemref-weight-remove\" data-delete=\":parent .itemref-weight\">\n            <span class=\"icon-bin\"></span>\n        </a>\n    </div>\n</div>"},useData:!0})}),define("tpl!taoQtiTest/controller/creator/templates/rubricblock-props",["handlebars"],function(hb){return hb.template({1:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0};return"    <div class=\"rubric-feedback toggled\">\n\n        <!--assessmentTest/testPart/assessmentSection/sectionPart/rubricBlock/feedback/activated -->\n        <div class=\"grid-row rubric-feedback-activated\">\n            <div class=\"col-5\">\n                <label for=\"activated\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Activated",{name:"__",hash:{},data:data,loc:{start:{line:72,column:39},end:{line:72,column:57}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <label>\n                    <input type=\"checkbox\" name=\"activated\" value=\"true\" data-bind=\"feedback.activated\" data-bind-encoder=\"boolean\" />\n                    <span class=\"icon-checkbox\"></span>\n                </label>\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Set the rubric block as a feedback block",{name:"__",hash:{},data:data,loc:{start:{line:83,column:20},end:{line:83,column:69}}}))+"\n                </div>\n            </div>\n        </div>\n\n        <!--assessmentTest/testPart/assessmentSection/sectionPart/rubricBlock/feedback/outcome -->\n        <div class=\"grid-row rubric-feedback-outcome\">\n            <div class=\"col-5\">\n                <label for=\"feedback-outcome\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Outcome",{name:"__",hash:{},data:data,loc:{start:{line:91,column:46},end:{line:91,column:62}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <input type=\"text\" name=\"feedback-outcome\" data-bind=\"feedback.outcome\" data-bind-encoder=\"string\" data-validate=\"$pattern(pattern=^([a-zA-Z_][a-zA-Z0-9_\\.-]*)?$);\" />\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Set outcome identifier the feedback block is related to",{name:"__",hash:{},data:data,loc:{start:{line:99,column:20},end:{line:99,column:84}}}))+"\n                </div>\n            </div>\n        </div>\n\n        <!--assessmentTest/testPart/assessmentSection/sectionPart/rubricBlock/feedback/matchValue -->\n        <div class=\"grid-row rubric-feedback-match-value\">\n            <div class=\"col-5\">\n                <label for=\"feedback-match-value\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Match value",{name:"__",hash:{},data:data,loc:{start:{line:107,column:50},end:{line:107,column:70}}}))+"</label>\n            </div>\n            <div class=\"col-6\">\n                <input type=\"text\" name=\"feedback-match-value\" data-bind=\"feedback.matchValue\" data-bind-encoder=\"string\" data-validate=\"$pattern(pattern=^([a-zA-Z_][a-zA-Z0-9_\\.-]*)?$);\" />\n            </div>\n            <div class=\"col-1 help\">\n                <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n                <div class=\"tooltip-content\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Set the value of the outcome that will activate the feedback block",{name:"__",hash:{},data:data,loc:{start:{line:115,column:20},end:{line:115,column:95}}}))+"\n                </div>\n            </div>\n        </div>\n    </div>\n"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"<div class=\"rubricblock-props props clearfix\">\n\n    <h3>"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Rubric Block",{name:"__",hash:{},data:data,loc:{start:{line:3,column:8},end:{line:3,column:29}}}))+": "+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"orderIndex")||(null==depth0?depth0:lookupProperty(depth0,"orderIndex")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"orderIndex",hash:{},data:data,loc:{start:{line:3,column:31},end:{line:3,column:45}}}):helper))+"</h3>\n\n    <!--assessmentTest/testPart/assessmentSection/sectionPart/rubricBlock/views -->\n    <!--\n    <div class=\"grid-row\">\n        <div class=\"col-5\">\n            <label for=\"itemref-identifier\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Views",{name:"__",hash:{},data:data,loc:{start:{line:9,column:44},end:{line:9,column:58}}}))+" <abbr title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Required field",{name:"__",hash:{},data:data,loc:{start:{line:9,column:72},end:{line:9,column:95}}}))+"\">*</abbr></label>\n        </div>\n        <div class=\"col-6\">\n            <select name=\"view\" multiple=\"multiple\" data-bind=\"views\">\n                <option value=\"author\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Author",{name:"__",hash:{},data:data,loc:{start:{line:13,column:39},end:{line:13,column:54}}}))+"</option>\n                <option value=\"candidate\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Candidate",{name:"__",hash:{},data:data,loc:{start:{line:14,column:42},end:{line:14,column:60}}}))+"</option>\n                <option value=\"proctor\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Proctor",{name:"__",hash:{},data:data,loc:{start:{line:15,column:40},end:{line:15,column:56}}}))+"</option>\n                <option value=\"scorer\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Scorer",{name:"__",hash:{},data:data,loc:{start:{line:16,column:39},end:{line:16,column:54}}}))+"</option>\n                <option value=\"testConstructor\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Test constructor",{name:"__",hash:{},data:data,loc:{start:{line:17,column:48},end:{line:17,column:73}}}))+"</option>\n                <option value=\"tutor\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Tutor",{name:"__",hash:{},data:data,loc:{start:{line:18,column:38},end:{line:18,column:52}}}))+"</option>\n            </select>\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Who can view the rubric block during the delivery.",{name:"__",hash:{},data:data,loc:{start:{line:24,column:16},end:{line:24,column:75}}}))+"\n            </div>\n        </div>\n    </div>\n    -->\n    <!--assessmentTest/testPart/assessmentSection/sectionPart/rubricBlock/class -->\n    <div class=\"grid-row\">\n        <div class=\"col-5\">\n            <label for=\"class\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Class",{name:"__",hash:{},data:data,loc:{start:{line:32,column:31},end:{line:32,column:45}}}))+"</label>\n        </div>\n        <div class=\"col-6\">\n            <input type=\"text\" name=\"class\" data-bind=\"class\" data-bind-encoder=\"string\" data-validate=\"$pattern(pattern=^([a-zA-Z_\\s][a-zA-Z0-9_\\s-]*)?$);\" />\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Set the XHTML-QTI class of the rubric block.",{name:"__",hash:{},data:data,loc:{start:{line:40,column:16},end:{line:40,column:69}}}))+"\n            </div>\n        </div>\n    </div>\n\n    <!--assessmentTest/testPart/assessmentSection/sectionPart/rubricBlock/id -->\n    <!--\n    <div class=\"grid-row\">\n        <div class=\"col-5\">\n            <label for=\"id\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Identifier",{name:"__",hash:{},data:data,loc:{start:{line:49,column:28},end:{line:49,column:47}}}))+"</label>\n        </div>\n        <div class=\"col-6\">\n            <input type=\"text\" name=\"id\" data-bind=\"id\" data-bind-encoder=\"string\" data-validate=\"$pattern(pattern=^([a-zA-Z_\\s][a-zA-Z0-9_\\s-]*)?$);\" />\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Set the XHTML-QTI identifier of the rubric block.",{name:"__",hash:{},data:data,loc:{start:{line:57,column:16},end:{line:57,column:74}}}))+"\n            </div>\n        </div>\n    </div>\n    -->\n\n    <h4 class=\"toggler closed\" data-toggle=\"~ .rubric-feedback\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Feedback block",{name:"__",hash:{},data:data,loc:{start:{line:63,column:64},end:{line:63,column:87}}}))+"</h4>\n\n    <!--assessmentTest/testPart/assessmentSection/sectionPart/rubricBlock/feedback -->\n"+(null==(stack1=lookupProperty(helpers,"with").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"feedback"),{name:"with",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:66,column:4},end:{line:120,column:13}}}))?"":stack1)+"</div>"},useData:!0})}),define("tpl!taoQtiTest/controller/creator/templates/category-presets",["handlebars"],function(hb){return hb.template({1:function(container,depth0,helpers,partials,data,blockParams,depths){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"<h4 class=\"toggler closed\" data-toggle=\"~ .category-preset-group-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"groupId")||(null==depth0?depth0:lookupProperty(depth0,"groupId")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"groupId",hash:{},data:data,loc:{start:{line:2,column:65},end:{line:2,column:76}}}):helper))+"\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"groupLabel")||(null==depth0?depth0:lookupProperty(depth0,"groupLabel")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"groupLabel",hash:{},data:data,loc:{start:{line:2,column:78},end:{line:2,column:92}}}):helper))+"</h4>\n\n<div class=\"category-preset-group-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"groupId")||(null==depth0?depth0:lookupProperty(depth0,"groupId")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"groupId",hash:{},data:data,loc:{start:{line:4,column:34},end:{line:4,column:45}}}):helper))+" toggled\">\n"+(null==(stack1=lookupProperty(helpers,"each").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"presets"),{name:"each",hash:{},fn:container.program(2,data,0,blockParams,depths),inverse:container.noop,data:data,loc:{start:{line:5,column:4},end:{line:28,column:13}}}))?"":stack1)+"</div>\n\n"},2:function(container,depth0,helpers,partials,data,blockParams,depths){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"    <div class=\"grid-row pseudo-label-box category-preset\" data-qti-category=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"qtiCategory")||(null==depth0?depth0:lookupProperty(depth0,"qtiCategory")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"qtiCategory",hash:{},data:data,loc:{start:{line:6,column:78},end:{line:6,column:93}}}):helper))+"\">\n        <div class=\"col-1\">\n            <label>\n                <input\n                        type=\"checkbox\"\n                        name=\"category-preset-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"id")||(null==depth0?depth0:lookupProperty(depth0,"id")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"id",hash:{},data:data,loc:{start:{line:11,column:46},end:{line:11,column:52}}}):helper))+"\"\n                        value=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"qtiCategory")||(null==depth0?depth0:lookupProperty(depth0,"qtiCategory")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"qtiCategory",hash:{},data:data,loc:{start:{line:12,column:31},end:{line:12,column:46}}}):helper))+"\"\n                        "+(null==(stack1=(lookupProperty(helpers,"includes")||depth0&&lookupProperty(depth0,"includes")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,null==depths[2]?depths[2]:lookupProperty(depths[2],"categories"),null==depth0?depth0:lookupProperty(depth0,"qtiCategory"),{name:"includes",hash:{},fn:container.program(3,data,0,blockParams,depths),inverse:container.noop,data:data,loc:{start:{line:13,column:24},end:{line:13,column:86}}}))?"":stack1)+"\n                />\n                <span class=\"icon-checkbox\"></span>\n            </label>\n        </div>\n        <div class=\"col-10\">\n            <label for=\"category-preset-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"id")||(null==depth0?depth0:lookupProperty(depth0,"id")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"id",hash:{},data:data,loc:{start:{line:19,column:40},end:{line:19,column:46}}}):helper))+"\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"label")||(null==depth0?depth0:lookupProperty(depth0,"label")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"label",hash:{},data:data,loc:{start:{line:19,column:48},end:{line:19,column:57}}}):helper))+"</label>\n        </div>\n        <div class=\"col-1 help\">\n            <span class=\"icon-help\" data-tooltip=\"~ .tooltip-content\" data-tooltip-theme=\"info\"></span>\n            <div class=\"tooltip-content\">\n                "+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"description")||(null==depth0?depth0:lookupProperty(depth0,"description")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"description",hash:{},data:data,loc:{start:{line:24,column:16},end:{line:24,column:31}}}):helper))+"\n            </div>\n        </div>\n    </div>\n"},3:function(container,depth0,helpers,partials,data){return"checked"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data,blockParams,depths){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1;return null==(stack1=lookupProperty(helpers,"each").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"presetGroups"),{name:"each",hash:{},fn:container.program(1,data,0,blockParams,depths),inverse:container.noop,data:data,loc:{start:{line:1,column:0},end:{line:31,column:9}}}))?"":stack1},useData:!0,useDepths:!0})}),define("tpl!taoQtiTest/controller/creator/templates/subsection",["handlebars"],function(hb){return hb.template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},helper;return"<div id=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:1,column:9},end:{line:1,column:23}}}):helper))+"\" class=\"subsection\">\n\n    <h2><span class=\"title-index\"></span> <span data-bind=\"title\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"title")||(null==depth0?depth0:lookupProperty(depth0,"title")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"title",hash:{},data:data,loc:{start:{line:3,column:66},end:{line:3,column:75}}}):helper))+"</span>\n        <span class=\"icon-warning\"></span>\n        <div class=\"actions\">\n            <div class=\"tlb\">\n                <div class=\"tlb-top\">\n                    <span class=\"tlb-box\">\n                        <span class=\"tlb-bar\">\n                            <span class=\"tlb-start\"></span>\n                            <span class=\"tlb-group\">\n                                <a href=\"#\" class=\"tlb-button-off add-subsection\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Add Subsection",{name:"__",hash:{},data:data,loc:{start:{line:12,column:89},end:{line:12,column:112}}}))+"\" data-testid=\"add-subsection\"><span class=\"icon-add-subsection\"></span></a>\n                                <span class=\"tlb-separator\"></span>\n                                <a href=\"#\" class=\"tlb-button-off rub-toggler\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Manage Rubric Blocks",{name:"__",hash:{},data:data,loc:{start:{line:14,column:86},end:{line:14,column:115}}}))+"\" data-toggle=\"#rublocks-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:14,column:140},end:{line:14,column:154}}}):helper))+"\" data-testid=\"manage-rubric-blocks\"><span class=\"icon-rubric\"></span></a>\n                                <span class=\"tlb-separator\"></span>\n                                <a href=\"#\" class=\"tlb-button-off property-toggler\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Section Properties",{name:"__",hash:{},data:data,loc:{start:{line:16,column:91},end:{line:16,column:118}}}))+"\" data-testid=\"section-properties\"><span class=\"icon-settings\"></span></a>\n                                <span class=\"tlb-separator\"></span>\n                                <a href=\"#\" class=\"tlb-button-off move-up disabled\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Move Up",{name:"__",hash:{},data:data,loc:{start:{line:18,column:91},end:{line:18,column:107}}}))+"\" data-testid=\"move-up-subsection\"><span class=\"icon-up\"></span></a>\n                                <a href=\"#\" class=\"tlb-button-off move-down disabled\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Move Down",{name:"__",hash:{},data:data,loc:{start:{line:19,column:93},end:{line:19,column:111}}}))+"\" data-testid=\"move-down-subsection\"><span class=\"icon-down\"></span></a>\n                                <span class=\"tlb-separator\"></span>\n                                <a href=\"#\" class=\"tlb-button-off disabled delete-subsection\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Remove Subsection",{name:"__",hash:{},data:data,loc:{start:{line:21,column:101},end:{line:21,column:127}}}))+"\" data-delete=\":parent .subsection\" data-testid=\"remove-subsection\"><span class=\"icon-bin\"></span></a>\n                            </span>\n                            <span class=\"tlb-end\"></span>\n                        </span>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </h2>\n\n    <div id=\"rublocks-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"identifier")||(null==depth0?depth0:lookupProperty(depth0,"identifier")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"identifier",hash:{},data:data,loc:{start:{line:31,column:22},end:{line:31,column:36}}}):helper))+"\" class=\"rublocks clearfix toggled\">\n        <h3>\n            <span class=\"title\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Rubric Blocks",{name:"__",hash:{},data:data,loc:{start:{line:33,column:32},end:{line:33,column:54}}}))+"</span>\n        </h3>\n        <ol class=\"rubricblocks decimal\" data-bind-each=\"rubricBlocks\" data-bind-tmpl=\"rubricblock\"></ol>\n        <button class=\"btn-info small rublock-adder\" data-testid=\"add-rubric-block\">\n            <span class=\"icon-add\"></span>"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"New Rubric Block",{name:"__",hash:{},data:data,loc:{start:{line:37,column:42},end:{line:37,column:67}}}))+"\n        </button>\n    </div>\n    <div class=\"itemrefs-wrapper\">\n        <h3>\n            <span class=\"title\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Items",{name:"__",hash:{},data:data,loc:{start:{line:42,column:32},end:{line:42,column:46}}}))+"</span>\n        </h3>\n        <ol class=\"itemrefs decimal clearfix\" data-bind-each=\"sectionParts\" data-bind-tmpl=\"itemref\" data-bind-filter=\"isItemRef\" data-msg=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Add selected item(s) here.",{name:"__",hash:{},data:data,loc:{start:{line:44,column:140},end:{line:44,column:175}}}))+"\"></ol>\n        <div class=\"itemref-placeholder\" data-testid=\"add-items\">\n            "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Add selected item(s) here.",{name:"__",hash:{},data:data,loc:{start:{line:46,column:12},end:{line:46,column:47}}}))+"\n        </div>\n    </div>\n     <div class=\"subsections\" data-bind-each=\"sectionParts\" data-bind-tmpl=\"subsection\" data-bind-filter=\"isSection\"></div>\n</div>"},useData:!0})}),define("taoQtiTest/controller/creator/templates/index",["taoQtiTest/controller/creator/config/defaults","tpl!taoQtiTest/controller/creator/templates/testpart","tpl!taoQtiTest/controller/creator/templates/section","tpl!taoQtiTest/controller/creator/templates/rubricblock","tpl!taoQtiTest/controller/creator/templates/itemref","tpl!taoQtiTest/controller/creator/templates/outcomes","tpl!taoQtiTest/controller/creator/templates/test-props","tpl!taoQtiTest/controller/creator/templates/testpart-props","tpl!taoQtiTest/controller/creator/templates/section-props","tpl!taoQtiTest/controller/creator/templates/itemref-props","tpl!taoQtiTest/controller/creator/templates/itemref-props-weight","tpl!taoQtiTest/controller/creator/templates/rubricblock-props","tpl!taoQtiTest/controller/creator/templates/category-presets","tpl!taoQtiTest/controller/creator/templates/subsection"],function(defaults,testPart,section,rubricBlock,itemRef,outcomes,testProps,testPartProps,sectionProps,itemRefProps,itemRefPropsWeight,rubricBlockProps,categoryPresets,subsection){"use strict";const applyTemplateConfiguration=template=>config=>template(defaults(config));return{testpart:applyTemplateConfiguration(testPart),section:applyTemplateConfiguration(section),itemref:applyTemplateConfiguration(itemRef),rubricblock:applyTemplateConfiguration(rubricBlock),outcomes:applyTemplateConfiguration(outcomes),subsection:applyTemplateConfiguration(subsection),properties:{test:applyTemplateConfiguration(testProps),testpart:applyTemplateConfiguration(testPartProps),section:applyTemplateConfiguration(sectionProps),itemref:applyTemplateConfiguration(itemRefProps),itemrefweight:applyTemplateConfiguration(itemRefPropsWeight),rubricblock:applyTemplateConfiguration(rubricBlockProps),categorypresets:applyTemplateConfiguration(categoryPresets),subsection:applyTemplateConfiguration(sectionProps)}}}),define("taoQtiTest/controller/creator/views/property",["jquery","uikitLoader","core/databinder","taoQtiTest/controller/creator/templates/index"],function($,ui,DataBinder,templates){"use strict";const propView=function propView(tmplName,model){function propValidation(){$view.on("validated.group",function(e,isValid){const $warningIconSelector=$("span.icon-warning"),$test=$(".tlb-button-on").parents(".test-creator-test");let errors=$(e.currentTarget).find("span.validate-error"),currentTargetId=`[id="${$(e.currentTarget).find("span[data-bind=\"identifier\"]").attr("id").slice(6)}"]`;"group"===e.namespace&&(isValid&&0===errors.length?($(e.currentTarget).hasClass("test-props")&&$($test).find($warningIconSelector).first().css("display","none"),$(currentTargetId).find($warningIconSelector).first().css("display","none")):($(e.currentTarget).hasClass("test-props")&&$($test).find($warningIconSelector).first().css("display","inline"),$(currentTargetId).find($warningIconSelector).first().css("display","inline")))}),$view.groupValidator({events:["keyup","change","blur"]})}const $container=$(".test-creator-props"),template=templates.properties[tmplName];let $view;const open=function propOpen(){const binderOptions={templates:templates.properties};$container.children(".props").hide().trigger("propclose.propview"),$view=$(template(model)).appendTo($container).filter(".props"),ui.startDomComponent($view);const databinder=new DataBinder($view,model,binderOptions);databinder.bind(),propValidation(),$view.trigger("propopen.propview");const $identifier=$view.find(`[id="props-${model.identifier}"]`);$view.on("change.binder",function(e){"binder"===e.namespace&&$identifier.length&&$identifier.text(model.identifier)})},getView=function propGetView(){return $view},isOpen=function propIsOpen(){return"none"!==$view.css("display")},onOpen=function propOnOpen(cb){$view.on("propopen.propview",function(e){e.stopPropagation(),cb()})},onClose=function propOnClose(cb){$view.on("propclose.propview",function(e){e.stopPropagation(),cb()})},destroy=function propDestroy(){$view.remove()},toggle=function propToggle(){$container.children(".props").not($view).hide().trigger("propclose.propview"),isOpen()?$view.hide().trigger("propclose.propview"):$view.show().trigger("propopen.propview")};return{open:open,getView:getView,isOpen:isOpen,onOpen:onOpen,onClose:onClose,destroy:destroy,toggle:toggle}};return propView}),define("taoQtiTest/controller/creator/helpers/subsection",["jquery","lodash"],function($,_){"use strict";function isFistLevelSubsection($subsection){return 0===$subsection.parents(".subsection").length}function isNestedSubsection($subsection){return 0<$subsection.parents(".subsection").length}function getSubsections($section){return $section.children(".subsections").children(".subsection")}function getSiblingSubsections($subsection){return getSubsectionContainer($subsection).children(".subsection")}function getParentSubsection($subsection){return $subsection.parents(".subsection").first()}function getParentSection($subsection){return $subsection.parents(".section")}function getParent($subsection){return isFistLevelSubsection($subsection)?getParentSection($subsection):getParentSubsection($subsection)}function getSubsectionContainer($subsection){return $subsection.hasClass("subsections")?$subsection:$subsection.parents(".subsections").first()}function getSubsectionTitleIndex($subsection){const $parentSection=getParentSection($subsection),index=getSiblingSubsections($subsection).index($subsection),sectionIndex=$parentSection.parents(".sections").children(".section").index($parentSection);if(isFistLevelSubsection($subsection))return`${sectionIndex+1}.${index+1}.`;else{const $parentSubsection=getParentSubsection($subsection),subsectionIndex=getSiblingSubsections($parentSubsection).index($parentSubsection);return`${sectionIndex+1}.${subsectionIndex+1}.${index+1}.`}}return{isFistLevelSubsection,isNestedSubsection,getSubsections,getSubsectionContainer,getSiblingSubsections,getParentSubsection,getParentSection,getParent,getSubsectionTitleIndex}}),define("taoQtiTest/controller/creator/views/actions",["jquery","taoQtiTest/controller/creator/views/property","taoQtiTest/controller/creator/helpers/subsection"],function($,propertyView,subsectionsHelper){"use strict";function properties($container,template,model,cb){let propView=null;$container.find(".property-toggler").on("click",function(e){e.preventDefault();const $elt=$(this);$(this).hasClass(disabledClass)||($elt.blur(),null===propView?($container.addClass(activeClass),$elt.addClass(btnOnClass),propView=propertyView(template,model),propView.open(),propView.onOpen(function(){$container.addClass(activeClass),$elt.addClass(btnOnClass)}),propView.onClose(function(){$container.removeClass(activeClass),$elt.removeClass(btnOnClass)}),"function"==typeof cb&&cb(propView)):propView.toggle())})}function move($actionContainer,containerClass,elementClass){const $element=$actionContainer.closest(`.${elementClass}`),$container=$element.closest(`.${containerClass}`);$(".move-up",$actionContainer).click(function(e){let $elements,index;return e.preventDefault(),!($element.is(":animated")&&$element.hasClass("disabled"))&&void($elements=$container.children(`.${elementClass}`),index=$elements.index($element),0<index&&$element.fadeOut(200,()=>{$element.insertBefore($container.children(`.${elementClass}:eq(${index-1})`)).fadeIn(400,()=>$container.trigger("change"))}))}),$(".move-down",$actionContainer).click(function(e){let $elements,index;return e.preventDefault(),!($element.is(":animated")&&$element.hasClass("disabled"))&&void($elements=$container.children(`.${elementClass}`),index=$elements.index($element),index<$elements.length-1&&1<$elements.length&&$element.fadeOut(200,()=>{$element.insertAfter($container.children(`.${elementClass}:eq(${index+1})`)).fadeIn(400,()=>$container.trigger("change"))}))})}function movable($container,elementClass,actionContainerElt){$container.each(function(){const $elt=$(this),$actionContainer=$elt.children(actionContainerElt),index=$container.index($elt),$moveUp=$(".move-up",$actionContainer),$moveDown=$(".move-down",$actionContainer);1===$container.length?($moveUp.addClass(disabledClass),$moveDown.addClass(disabledClass)):0===index?($moveUp.addClass(disabledClass),$moveDown.removeClass(disabledClass)):index>=$container.length-1?($moveDown.addClass(disabledClass),$moveUp.removeClass(disabledClass)):($moveUp.removeClass(disabledClass),$moveDown.removeClass(disabledClass))})}function removable($container,actionContainerElt){$container.each(function(){const $elt=$(this),$actionContainer=$elt.children(actionContainerElt),$delete=$("[data-delete]",$actionContainer);1>=$container.length&&!$elt.hasClass("subsection")?$delete.addClass(disabledClass):$delete.removeClass(disabledClass)})}function disable($container,actionContainerElt){2>=$container.length&&$container.children(actionContainerElt).find("[data-delete]").addClass(disabledClass)}function enable($container,actionContainerElt){$container.children(actionContainerElt).find("[data-delete],.move-up,.move-down").removeClass(disabledClass)}function displayItemWrapper($section){const $elt=$(".itemrefs-wrapper:first",$section),subsectionsCount=subsectionsHelper.getSubsections($section).length;subsectionsCount?$elt.hide():$elt.show()}function updateDeleteSelector($actionContainer){const $deleteButton=$actionContainer.find(".delete-subsection");if(1<$deleteButton.parents(".subsection").length){const deleteSelector=$deleteButton.data("delete");$deleteButton.attr("data-delete",`${deleteSelector} .subsection`)}}function displayCategoryPresets($authoringContainer){let scope=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"section";const id=$authoringContainer.attr("id"),$propertiesView=$(`.test-creator-props #${scope}-props-${id}`);if($propertiesView.length){const $elt=$propertiesView.find(".category-presets");switch(scope){case"testpart":$elt.show();break;case"section":const subsectionsCount=subsectionsHelper.getSubsections($authoringContainer).length;subsectionsCount?($elt.hide(),$propertiesView.trigger("set-default-categories")):$elt.show()}}}function updateTitleIndex($list){$list.each(function(){const $elt=$(this),$indexSpan=$(".title-index",$elt.children("h2"));if($elt.hasClass("section")){const $parent=$elt.parents(".sections"),index=$(".section",$parent).index($elt);$indexSpan.text(`${index+1}.`)}else $indexSpan.text(subsectionsHelper.getSubsectionTitleIndex($elt))})}const disabledClass="disabled",activeClass="active",btnOnClass="tlb-button-on";return{properties,move,removable,movable,disable,enable,displayItemWrapper,updateDeleteSelector,displayCategoryPresets,updateTitleIndex}}),define("taoQtiTest/controller/creator/helpers/featureVisibility",["services/features"],function(features){"use strict";function addTestVisibilityProps(model){features.isVisible("taoQtiTest/creator/test/property/timeLimits")&&(model.showTimeLimits=!0)}function addTestPartVisibilityProps(model){const propertyNamespace="taoQtiTest/creator/testPart/property/";features.isVisible(`${"taoQtiTest/creator/testPart/property/"}timeLimits`)&&(model.showTimeLimits=!0),features.isVisible(`${"taoQtiTest/creator/testPart/property/"}itemSessionControl/showFeedback`)&&(model.itemSessionShowFeedback=!0),features.isVisible(`${"taoQtiTest/creator/testPart/property/"}itemSessionControl/allowComment`)&&(model.itemSessionAllowComment=!0),features.isVisible(`${"taoQtiTest/creator/testPart/property/"}itemSessionControl/allowSkipping`)&&(model.itemSessionAllowSkipping=!0)}function addSectionVisibilityProps(model){const propertyNamespace="taoQtiTest/creator/section/property/";features.isVisible(`${"taoQtiTest/creator/section/property/"}timeLimits`)&&(model.showTimeLimits=!0),features.isVisible(`${"taoQtiTest/creator/section/property/"}itemSessionControl/showFeedback`)&&(model.itemSessionShowFeedback=!0),features.isVisible(`${"taoQtiTest/creator/section/property/"}itemSessionControl/allowComment`)&&(model.itemSessionAllowComment=!0),features.isVisible(`${"taoQtiTest/creator/section/property/"}itemSessionControl/allowSkipping`)&&(model.itemSessionAllowSkipping=!0)}function addItemRefVisibilityProps(model){const propertyNamespace="taoQtiTest/creator/itemRef/property/";features.isVisible(`${"taoQtiTest/creator/itemRef/property/"}timeLimits`)&&(model.showTimeLimits=!0),features.isVisible(`${"taoQtiTest/creator/itemRef/property/"}itemSessionControl/showFeedback`)&&(model.itemSessionShowFeedback=!0),features.isVisible(`${"taoQtiTest/creator/itemRef/property/"}itemSessionControl/allowComment`)&&(model.itemSessionAllowComment=!0),features.isVisible(`${"taoQtiTest/creator/itemRef/property/"}itemSessionControl/allowSkipping`)&&(model.itemSessionAllowSkipping=!0)}function filterVisiblePresets(presetGroups){let level=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"all";const categoryGroupNamespace=`taoQtiTest/creator/${level}/category/presetGroup/`,categoryPresetNamespace=`taoQtiTest/creator/${level}/category/preset/`;let filteredGroups;return presetGroups&&presetGroups.length&&(filteredGroups=presetGroups.filter(presetGroup=>features.isVisible(`${categoryGroupNamespace}${presetGroup.groupId}`)),filteredGroups.length&&filteredGroups.forEach(filteredGroup=>{if(filteredGroup.presets&&filteredGroup.presets.length){const filteredPresets=filteredGroup.presets.filter(preset=>features.isVisible(`${categoryPresetNamespace}${preset.id}`));filteredGroup.presets=filteredPresets}})),filteredGroups}return{addTestVisibilityProps,addTestPartVisibilityProps,addSectionVisibilityProps,addItemRefVisibilityProps,filterVisiblePresets}}),define("taoQtiTest/controller/creator/helpers/categorySelector",["jquery","lodash","i18n","core/eventifier","ui/tooltip","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/featureVisibility","select2"],function($,_,__,eventifier,tooltip,templates,featureVisibility){"use strict";function categorySelectorFactory($container){function updateCategories(){const presetSelected=$container.find(".category-preset input:checked").toArray().map(function(categoryEl){return categoryEl.value}),presetIndeterminate=$container.find(".category-preset input:indeterminate").toArray().map(function(categoryEl){return categoryEl.value}),customSelected=$customCategoriesSelect.siblings(".select2-container").find(".select2-search-choice").not(".partial").toArray().map(function(categoryEl){return categoryEl.textContent&&categoryEl.textContent.trim()}),customIndeterminate=$customCategoriesSelect.siblings(".select2-container").find(".select2-search-choice.partial").toArray().map(function(categoryEl){return categoryEl.textContent&&categoryEl.textContent.trim()}),selectedCategories=presetSelected.concat(customSelected),indeterminatedCategories=presetIndeterminate.concat(customIndeterminate);this.trigger("category-change",selectedCategories,indeterminatedCategories)}const $presetsContainer=$container.find(".category-presets"),$customCategoriesSelect=$container.find("[name=category-custom]"),categorySelector={createForm:function createForm(currentCategories,level){const self=this,presetsTpl=templates.properties.categorypresets,customCategories=_.difference(currentCategories,allQtiCategoriesPresets),filteredPresets=featureVisibility.filterVisiblePresets(allPresets,level);$presetsContainer.append(presetsTpl({presetGroups:filteredPresets})),$presetsContainer.on("click",function(e){const $preset=$(e.target).closest(".category-preset");if($preset.length){const $checkbox=$preset.find("input");$checkbox.prop("indeterminate",!1),_.defer(function(){updateCategories.call(self)})}}),$customCategoriesSelect.select2({width:"100%",tags:customCategories,multiple:!0,tokenSeparators:[","," ",";"],formatNoMatches:function(){return __("Enter a custom category")},maximumInputLength:32}).on("change",function(){updateCategories.call(self)}),tooltip.lookup($container)},updateFormState:function updateFormState(selected,indeterminate){indeterminate=indeterminate||[];const customCategories=_.difference(selected.concat(indeterminate),allQtiCategoriesPresets),$presetsCheckboxes=$container.find(".category-preset input");$presetsCheckboxes.each(function(){const category=this.value;this.indeterminate=!1,this.checked=!1,-1===indeterminate.indexOf(category)?-1!==selected.indexOf(category)&&(this.checked=!0):this.indeterminate=!0}),$customCategoriesSelect.select2("val",customCategories),$customCategoriesSelect.siblings(".select2-container").find(".select2-search-choice").each(function(){const $li=$(this),content=$li.find("div").text();-1!==indeterminate.indexOf(content)&&$li.addClass("partial")})}};return eventifier(categorySelector),categorySelector}function extractCategoriesFromPresets(){return allPresets.reduce(function(prev,current){const groupIds=_.pluck(current.presets,"qtiCategory");return prev.concat(groupIds)},[])}let allPresets=[],allQtiCategoriesPresets=[];return categorySelectorFactory.setPresets=function setPresets(presets){_.isArray(presets)&&(allPresets=presets,allQtiCategoriesPresets=extractCategoriesFromPresets())},categorySelectorFactory}),define("taoQtiTest/controller/creator/helpers/sectionCategory",["lodash","i18n","core/errorHandler"],function(_,__,errorHandler){"use strict";function isValidSectionModel(model){return _.isObject(model)&&"assessmentSection"===model["qti-type"]&&_.isArray(model.sectionParts)}function setCategories(model,selected,partial){const currentCategories=getCategories(model);partial=partial||[];const toRemove=_.difference(currentCategories.all,selected.concat(partial)),toAdd=_.difference(selected,currentCategories.propagated);model.categories=_.difference(model.categories,toRemove),model.categories=model.categories.concat(toAdd),addCategories(model,toAdd),removeCategories(model,toRemove)}function getCategories(model){let categories=[],itemCount=0,arrays,union,propagated,partial;if(!isValidSectionModel(model))return errorHandler.throw(_ns,"invalid tool config format");const getCategoriesRecursive=sectionModel=>_.forEach(sectionModel.sectionParts,function(sectionPart){"assessmentItemRef"===sectionPart["qti-type"]&&++itemCount&&_.isArray(sectionPart.categories)&&categories.push(_.compact(sectionPart.categories)),"assessmentSection"===sectionPart["qti-type"]&&_.isArray(sectionPart.sectionParts)&&getCategoriesRecursive(sectionPart)});return(getCategoriesRecursive(model),!itemCount)?createCategories(model.categories,model.categories):(arrays=_.values(categories),union=_.union.apply(null,arrays),propagated=_.intersection.apply(null,arrays),partial=_.difference(union,propagated),createCategories(union,propagated,partial))}function addCategories(model,categories){isValidSectionModel(model)?_.each(model.sectionParts,function(sectionPart){"assessmentItemRef"===sectionPart["qti-type"]&&(!_.isArray(sectionPart.categories)&&(sectionPart.categories=[]),sectionPart.categories=_.union(sectionPart.categories,categories)),"assessmentSection"===sectionPart["qti-type"]&&addCategories(sectionPart,categories)}):errorHandler.throw(_ns,"invalid tool config format")}function removeCategories(model,categories){isValidSectionModel(model)?_.each(model.sectionParts,function(sectionPart){"assessmentItemRef"===sectionPart["qti-type"]&&_.isArray(sectionPart.categories)&&(sectionPart.categories=_.difference(sectionPart.categories,categories)),"assessmentSection"===sectionPart["qti-type"]&&removeCategories(sectionPart,categories)}):errorHandler.throw(_ns,"invalid tool config format")}function createCategories(){let all=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],propagated=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],partial=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[];return _.mapValues({all:all,propagated:propagated,partial:partial},function(categories){return categories.sort()})}const _ns=".sectionCategory";return{isValidSectionModel:isValidSectionModel,setCategories:setCategories,getCategories:getCategories,addCategories:addCategories,removeCategories:removeCategories}}),define("taoQtiTest/controller/creator/helpers/validators",["ui/validator/validators","jquery","lodash","i18n","taoQtiTest/controller/creator/helpers/outcome","taoQtiTest/controller/creator/helpers/qtiElement","taoQtiItem/qtiCreator/widgets/helpers/qtiIdentifier"],function(validators,$,_,__,outcomeHelper,qtiElementHelper,qtiIdentifier){"use strict";function idFormatValidator(){return{name:"idFormat",message:qtiIdentifier.invalidQtiIdMessage,validate:function(value,callback){"function"==typeof callback&&callback(qtiIdPattern.test(value))}}}function testidFormatValidator(){const qtiTestIdPattern=/^\S+$/;return{name:"testIdFormat",message:__("is not a valid identifier (everything except spaces)"),validate:function(value,callback){"function"==typeof callback&&callback(qtiTestIdPattern.test(value))}}}function idAvailableValidator(modelOverseer){return{name:"testIdAvailable",message:__("is already used in the test."),validate:function(value,callback,options){if(options.identifier){const key=value.toUpperCase(),identifiers=extractIdentifiers(modelOverseer.getModel(),qtiTypesForUniqueIds),$idInUI=$(`[id="props-${options.identifier}"]:contains("${value}")`);if("function"==typeof callback){const counts=_.countBy(identifiers,"identifier");callback("undefined"==typeof counts[key]||1===$idInUI.length&&$idInUI.text()===value&&1===counts[key])}}else throw new Error("missing required option \"identifier\"")}}}function registerValidators(modelOverseer){validators.register("idFormat",idFormatValidator()),validators.register("testIdFormat",testidFormatValidator()),validators.register("testIdAvailable",idAvailableValidator(modelOverseer),!0)}function validateModel(model){const identifiers=extractIdentifiers(model,qtiTypesForUniqueIds);let nonUniqueIdentifiers=0;const outcomes=_.indexBy(outcomeHelper.listOutcomes(model));let messageDetails="";if(_(identifiers).countBy("identifier").forEach(function(count,id){1<count&&(nonUniqueIdentifiers++,messageDetails+=`\n${id}`)}),1<=nonUniqueIdentifiers)throw new Error(__("The following identifiers are not unique accross the test : %s",messageDetails));_.forEach(model.testParts,function(testPart){_.forEach(testPart.assessmentSections,function(assessmentSection){_.forEach(assessmentSection.rubricBlocks,function(rubricBlock){const feedbackBlock=qtiElementHelper.lookupElement(rubricBlock,"rubricBlock.div.feedbackBlock","content");if(feedbackBlock&&!outcomes[feedbackBlock.outcomeIdentifier])throw new Error(__("The outcome \"%s\" does not exist, but it is referenced by a feedback block!",feedbackBlock.outcomeIdentifier))})})})}function extractIdentifiers(model,includesOnlyTypes,excludeTypes){const identifiers=[],extract=function extract(element){element&&_.has(element,"identifier")&&_.isString(element.identifier)&&(!includesOnlyTypes.length||_.contains(includesOnlyTypes,element["qti-type"]))&&identifiers.push({identifier:element.identifier.toUpperCase(),originalIdentifier:element.identifier,type:element["qti-type"],label:element.title||element.identifier}),_.forEach(element,function(subElement){(_.isPlainObject(subElement)||_.isArray(subElement))&&(!excludeTypes.length||!_.contains(excludeTypes,subElement["qti-type"]))&&extract(subElement)})};return(_.isPlainObject(model)||_.isArray(model))&&(excludeTypes=excludeTypes||[],includesOnlyTypes=includesOnlyTypes||[],extract(model)),identifiers}function checkIfItemIdValid(value,modelOverseer){const identifiers=extractIdentifiers(modelOverseer.getModel(),qtiTypesForUniqueIds),key=value.toUpperCase(),counts=_.countBy(identifiers,"identifier");return qtiIdPattern.test(value)&&1===counts[key]}const qtiIdPattern=qtiIdentifier.pattern,qtiTypesForUniqueIds=["assessmentTest","testPart","assessmentSection","assessmentItemRef"];return{qtiTypesForUniqueIds,extractIdentifiers,registerValidators,validateModel,checkIfItemIdValid}}),define("taoQtiTest/controller/creator/helpers/qtiTest",["jquery","lodash","taoQtiTest/controller/creator/helpers/validators"],function($,_,validators){"use strict";const qtiTestHelper={getIdentifiers:function getIdentifiers(model,includesOnlyTypes,excludeTypes){return _.uniq(_.pluck(validators.extractIdentifiers(model,includesOnlyTypes,excludeTypes),"identifier"))},getIdentifiersOf:function getIdentifiersOf(model,qtiType){return this.getIdentifiers(model,[qtiType])},filterQtiType:function filterQtiType(value,type){return value["qti-type"]&&value["qti-type"]===type},addMissingQtiType:function addMissingQtiType(collection,parentType){_.forEach(collection,(value,key)=>{!_.isObject(value)||_.isArray(value)||_.has(value,"qti-type")||(_.isNumber(key)?parentType&&(value["qti-type"]=parentType):value["qti-type"]=key),_.isArray(value)?this.addMissingQtiType(value,key.replace(/s$/,"")):_.isObject(value)&&this.addMissingQtiType(value)})},consolidateModel:function consolidateModel(model){return model&&model.testParts&&_.isArray(model.testParts)&&_.forEach(model.testParts,function(testPart){testPart.assessmentSections&&_.isArray(testPart.assessmentSections)&&_.forEach(testPart.assessmentSections,function(assessmentSection){assessmentSection.ordering&&"undefined"!=typeof assessmentSection.ordering.shuffle&&!1===assessmentSection.ordering.shuffle&&delete assessmentSection.ordering,assessmentSection.sectionParts&&_.isArray(assessmentSection.sectionParts)&&_.forEach(assessmentSection.sectionParts,function(part){part.categories&&_.isArray(part.categories)&&(0===part.categories.length||0===part.categories[0].length)&&(part.categories=[])}),assessmentSection.rubricBlocks&&_.isArray(assessmentSection.rubricBlocks)&&(0===assessmentSection.rubricBlocks.length||1===assessmentSection.rubricBlocks.length&&0===assessmentSection.rubricBlocks[0].content.length?delete assessmentSection.rubricBlocks:0<assessmentSection.rubricBlocks.length&&_.forEach(assessmentSection.rubricBlocks,function(rubricBlock){rubricBlock.views=["candidate"]}))})}),model},getAvailableIdentifier:function getAvailableIdentifier(model,qtiType,suggestion){let index=1;const glue="-";let identifier,current;current=_.contains(validators.qtiTypesForUniqueIds,qtiType)?this.getIdentifiers(model,validators.qtiTypesForUniqueIds):this.getIdentifiersOf(model,qtiType),suggestion=suggestion||qtiType;do identifier=suggestion+glue+index++;while(_.contains(current,identifier.toUpperCase())||$(`#${identifier}`).length);return identifier}};return qtiTestHelper}),define("taoQtiTest/controller/creator/views/itemref",["jquery","lodash","i18n","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/helpers/categorySelector","taoQtiTest/controller/creator/helpers/sectionCategory","taoQtiTest/controller/creator/helpers/qtiTest","taoQtiTest/controller/creator/helpers/featureVisibility","taoQtiTest/controller/creator/templates/index"],function($,_,__,actions,categorySelectorFactory,sectionCategory,qtiTestHelper,featureVisibility,templates){function setUp(creatorContext,refModel,sectionModel,partModel,$itemRef){function timeLimitsProperty(propView){var $view=propView.getView(),$minTimeContainer=$(".mintime-container",$view),$maxTimeContainer=$(".maxtime-container",$view),$lockedTimeContainer=$(".lockedtime-container",$view),$locker=$(".locker button",$lockedTimeContainer),$durationFields=$(":text[data-duration]",$lockedTimeContainer),$minTimeField=$(":text[name=\"min-time\"]",$lockedTimeContainer),$maxTimeField=$(":text[name=\"max-time\"]",$lockedTimeContainer),minToMaxHandler=_.throttle(function minToMax(){$maxTimeField.off("change.sync"),$maxTimeField.val($minTimeField.val()).trigger("change"),_.defer(function(){$maxTimeField.on("change.sync",minToMaxHandler)})},200),maxToMinHandler=_.throttle(function maxToMin(){$minTimeField.off("change.sync"),$minTimeField.val($maxTimeField.val()).trigger("change"),_.defer(function(){$minTimeField.on("change.sync",minToMaxHandler)})},200),lockTimers=function lockTimers(){$locker.removeClass("unlocked").addClass("locked").attr("title",__("Unlink to use separated durations")),$minTimeField.val($maxTimeField.val()).trigger("change"),$minTimeField.on("change.sync",minToMaxHandler),$maxTimeField.on("change.sync",maxToMinHandler)},unlockTimers=function unlockTimers(){$locker.removeClass("locked").addClass("unlocked").attr("title",__("Link durations to activate the guided navigation")),$durationFields.off("change.sync"),$minTimeField.val("00:00:00").trigger("change")},toggleTimeContainers=function toggleTimeContainers(){refModel.isLinear=0===partModel.navigationMode,refModel.isLinear&&config.guidedNavigation?($minTimeContainer.addClass("hidden"),$maxTimeContainer.addClass("hidden"),$lockedTimeContainer.removeClass("hidden"),$minTimeField.val()===$maxTimeField.val()&&"00:00:00"!==$maxTimeField.val()&&lockTimers(),$locker.on("click",function(e){e.preventDefault(),$locker.hasClass("locked")?unlockTimers():lockTimers()})):refModel.isLinear?($lockedTimeContainer.addClass("hidden"),$minTimeContainer.removeClass("hidden"),$maxTimeContainer.removeClass("hidden")):($lockedTimeContainer.addClass("hidden"),$minTimeContainer.addClass("hidden"),$maxTimeContainer.removeClass("hidden"))};modelOverseer.on("testpart-change",function(){toggleTimeContainers()}),toggleTimeContainers(),$durationFields.on("change.check",function(){0<refModel.timeLimits.minTime&&0<refModel.timeLimits.maxTime&&refModel.timeLimits.minTime>refModel.timeLimits.maxTime?$minTimeField.parent("div").find(".duration-ctrl-wrapper").addClass("brd-danger"):$minTimeField.parent("div").find(".duration-ctrl-wrapper").removeClass("brd-danger")})}function categoriesProperty($view){var categorySelector=categorySelectorFactory($view),$categoryField=$view.find("[name=\"itemref-category\"]");categorySelector.createForm([],"itemRef"),categorySelector.updateFormState(refModel.categories),$view.on("propopen.propview",function(){categorySelector.updateFormState(refModel.categories)}),categorySelector.on("category-change",function(selected){$categoryField.val(selected.join(",")),$categoryField.trigger("change"),modelOverseer.trigger("category-change",selected)})}function weightsProperty(propView){var $view=propView.getView(),$weightList=$view.find("[data-bind-each=\"weights\"]"),weightTpl=templates.properties.itemrefweight;$view.find(".itemref-weight-add").on("click",function(e){var defaultData={value:1,"qti-type":"weight",identifier:0===refModel.weights.length?"WEIGHT":qtiTestHelper.getAvailableIdentifier(refModel,"weight","WEIGHT")};e.preventDefault(),$weightList.append(weightTpl(defaultData)),refModel.weights.push(defaultData),$weightList.trigger("add.internalbinder"),$view.groupValidator()})}function propHandler(propView){const removePropHandler=function removePropHandler(e,$deletedNode){const validIds=[$itemRef.attr("id"),$itemRef.parents(".section").attr("id"),$itemRef.parents(".testpart").attr("id")],deletedNodeId=$deletedNode.attr("id");null!==propView&&validIds.includes(deletedNodeId)&&propView.destroy()};categoriesProperty(propView.getView()),weightsProperty(propView),timeLimitsProperty(propView),$itemRef.parents(".testparts").on("deleted.deleter",removePropHandler)}var modelOverseer=creatorContext.getModelOverseer(),config=modelOverseer.getConfig()||{},$actionContainer=$(".actions",$itemRef);refModel.itemSessionControl||(refModel.itemSessionControl={}),_.defaults(refModel.itemSessionControl,sectionModel.itemSessionControl),refModel.isLinear=0===partModel.navigationMode,featureVisibility.addItemRefVisibilityProps(refModel),actions.properties($actionContainer,"itemref",refModel,propHandler),actions.move($actionContainer,"itemrefs","itemref"),_.throttle(function resize(){var $actions=$itemRef.find(".actions").first(),width=$itemRef.innerWidth()-$actions.outerWidth();$(".itemref > .title").width(width)},100)}function listenActionState(){$(".itemrefs").each(function(){actions.movable($(".itemref",$(this)),"itemref",".actions")}),$(document).on("delete",function(e){var $target=$(e.target),$parent;$target.hasClass("itemref")&&($parent=$target.parents(".itemrefs"))}).on("add change undo.deleter deleted.deleter",".itemrefs",function(e){var $target=$(e.target),$parent;($target.hasClass("itemref")||$target.hasClass("itemrefs"))&&($parent=$(".itemref",$target.hasClass("itemrefs")?$target:$target.parents(".itemrefs")),actions.enable($parent,".actions"),actions.movable($parent,"itemref",".actions"))})}"use strict";var resize=_.throttle(function resize(){var $refs=$(".itemrefs").first(),$actions=$(".itemref .actions").first(),width=$refs.innerWidth()-$actions.outerWidth();$(".itemref > .title").width(width)},100);return{setUp:setUp,listenActionState:listenActionState}}),define("taoQtiTest/controller/creator/encoders/dom2qti",["jquery","lodash","taoQtiTest/controller/creator/helpers/qtiElement","taoQtiTest/controller/creator/helpers/baseType","lib/dompurify/purify"],function($,_,qtiElementHelper,baseType,DOMPurify){"use strict";function getAttributes(object){return _.omit(object,["qti-type","content","xmlBase","lang","label"])}function attrToStr(attributes){return _.reduce(attributes,function(acc,value,key){return _.isNumber(value)||_.isBoolean(value)||_.isString(value)&&!_.isEmpty(value)?acc+" "+key+"=\""+value+"\" ":acc},"")}function normalizeNodeName(nodeName){const normalized=nodeName?nodeName.toLocaleLowerCase():"";return normalizedNodes[normalized]||normalized}const normalizedNodes={feedbackblock:"feedbackBlock",outcomeidentifier:"outcomeIdentifier",showhide:"showHide",printedvariable:"printedVariable",powerform:"powerForm",mappingindicator:"mappingIndicator"},typedAttributes={printedVariable:{identifier:baseType.getConstantByName("identifier"),powerForm:baseType.getConstantByName("boolean"),base:baseType.getConstantByName("intOrIdentifier"),index:baseType.getConstantByName("intOrIdentifier"),delimiter:baseType.getConstantByName("string"),field:baseType.getConstantByName("string"),mappingIndicator:baseType.getConstantByName("string")}};return{encode:function(modelValue){let self=this,startTag;if(_.isArray(modelValue))return _.reduce(modelValue,function(result,value){return result+self.encode(value)},"");return _.isObject(modelValue)&&modelValue["qti-type"]?"textRun"===modelValue["qti-type"]?modelValue.content:(startTag="<"+modelValue["qti-type"]+attrToStr(getAttributes(modelValue)),modelValue.content?startTag+">"+self.encode(modelValue.content)+"</"+modelValue["qti-type"]+">":startTag+"/>"):""+modelValue},decode:function(nodeValue){const self=this,$nodeValue=nodeValue instanceof $?nodeValue:$(nodeValue),result=[];let nodeName;return _.forEach($nodeValue,function(elt){let object;3===elt.nodeType?!_.isEmpty($.trim(elt.nodeValue))&&result.push(qtiElementHelper.create("textRun",{content:DOMPurify.sanitize(elt.nodeValue),xmlBase:""})):1===elt.nodeType&&(nodeName=normalizeNodeName(elt.nodeName),object=_.merge(qtiElementHelper.create(nodeName,{id:"",class:"",xmlBase:"",lang:"",label:""}),_.transform(elt.attributes,function(acc,value){const attrName=normalizeNodeName(value.nodeName);attrName&&(typedAttributes[nodeName]&&typedAttributes[nodeName][attrName]?acc[attrName]=baseType.getValue(typedAttributes[nodeName][attrName],value.nodeValue):acc[attrName]=value.nodeValue)})),0<elt.childNodes.length&&(object.content=self.decode(elt.childNodes)),result.push(object))}),result}}}),define("taoQtiTest/controller/creator/qtiContentCreator",["lodash","jquery","lib/uuid","taoQtiItem/qtiCreator/helper/commonRenderer","taoQtiItem/qtiCreator/editor/containerEditor"],function(_,$,uuid,qtiCommonRenderer,containerEditor){"use strict";return{create:function create(creatorContext,$container,options){var self=this,editorId=uuid(),areaBroker=creatorContext.getAreaBroker(),modelOverseer=creatorContext.getModelOverseer(),removePlugins="magicline,taoqtiimage,taoqtimedia,taoqtimaths,taoqtiinclude,taoqtitable,sharedspace",toolbar=[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["SpecialChar","TaoQtiPrintedVariable"]},{name:"links",items:["Link"]},"/",{name:"styles",items:["Format"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Blockquote","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]}];qtiCommonRenderer.setContext(areaBroker.getContentCreatorPanelArea()),containerEditor.create($container,{areaBroker:areaBroker,removePlugins:removePlugins,toolbar:toolbar,metadata:{getOutcomes:function getOutcomes(){return modelOverseer.getOutcomesNames()}},change:options.change||_.noop,resetRenderer:!0,autofocus:!1}),creatorContext.on("creatorclose."+editorId,function(){self.destroy(creatorContext,$container)}),$container.data("editorId",editorId)},destroy:function destroy(creatorContext,$container){var editorId=$container.data("editorId");return editorId&&creatorContext.off("."+editorId),containerEditor.destroy($container)}}}),define("taoQtiTest/controller/creator/views/rubricblock",["jquery","lodash","i18n","ui/hider","ui/dialog/alert","util/namespace","taoQtiTest/controller/creator/views/actions","helpers","taoQtiTest/controller/creator/encoders/dom2qti","taoQtiTest/controller/creator/helpers/qtiElement","taoQtiTest/controller/creator/qtiContentCreator","ckeditor"],function($,_,__,hider,dialogAlert,namespaceHelper,actions,helpers,Dom2QtiEncoder,qtiElementHelper,qtiContentCreator){"use strict";return{setUp:function setUp(creatorContext,rubricModel,$rubricBlock){function bindEvent($el,eventName,cb){return eventName=namespaceHelper.namespaceAll(eventName,rubricModel.uid),$el.off(eventName).on(eventName,cb)}function ensureWrap(html){return html=(html||"").trim(),("<"!==html.charAt(0)||">"!==html.charAt(html.length-1))&&(html="<div>"+html+"</div>"),1<$(html).length&&(html="<div>"+html+"</div>"),html}function editorToModel(html){var rubric=qtiElementHelper.lookupElement(rubricModel,"rubricBlock","content"),wrapper=qtiElementHelper.lookupElement(rubricModel,"rubricBlock.div.feedbackBlock","content"),content=Dom2QtiEncoder.decode(ensureWrap(html));wrapper?wrapper.content=content:rubric.content=content}function modelToEditor(){var rubric=qtiElementHelper.lookupElement(rubricModel,"rubricBlock","content")||{},wrapper=qtiElementHelper.lookupElement(rubricModel,"rubricBlock.div.feedbackBlock","content"),content=wrapper?wrapper.content:rubric.content,html=ensureWrap(Dom2QtiEncoder.encode(content));qtiContentCreator.destroy(creatorContext,$rubricBlockContent).then(function(){$rubricBlockContent.html(html),qtiContentCreator.create(creatorContext,$rubricBlockContent,{change:function change(editorContent){editorToModel(editorContent)}})})}function updateFeedback(feedback){var activated=feedback&&feedback.activated,wrapper=qtiElementHelper.lookupElement(rubricModel,"rubricBlock.div.feedbackBlock","content");return activated?(wrapper?(wrapper.outcomeIdentifier=feedback.outcome,wrapper.identifier=feedback.matchValue):rubricModel.content=[qtiElementHelper.create("div",{content:[qtiElementHelper.create("feedbackBlock",{outcomeIdentifier:feedback.outcome,identifier:feedback.matchValue,content:rubricModel.content})]})],modelToEditor()):wrapper&&(rubricModel.content=wrapper.content,modelToEditor()),activated}function propHandler(propView){function changeFeedback(activated){hider.toggle($feedbackOutcomeLine,activated),hider.toggle($feedbackMatchLine,activated)}function removePropHandler(){rubricModel.feedback={},null!==propView&&propView.destroy()}function changeHandler(e,changedModel){"binder"===e.namespace&&"rubricBlock"===changedModel["qti-type"]&&changeFeedback(updateFeedback(changedModel.feedback))}function updateOutcomes(){var activated=rubricModel.feedback&&rubricModel.feedback.activated,outcomes=_.map(modelOverseer.getOutcomesNames(),function(name){return{id:name,text:name}});$feedbackOutcome.select2({minimumResultsForSearch:-1,width:"100%",data:outcomes}),activated||$feedbackActivated.prop("checked",!1),changeFeedback(activated)}var $view=propView.getView(),$feedbackOutcomeLine=$(".rubric-feedback-outcome",$view),$feedbackMatchLine=$(".rubric-feedback-match-value",$view),$feedbackOutcome=$("[name=feedback-outcome]",$view),$feedbackActivated=$("[name=activated]",$view);$("[name=type]",$view).select2({minimumResultsForSearch:-1,width:"100%"}),$view.on("change.binder",changeHandler),bindEvent($rubricBlock.parents(".testpart"),"delete",removePropHandler),bindEvent($rubricBlock.parents(".section"),"delete",removePropHandler),bindEvent($rubricBlock,"delete",removePropHandler),bindEvent($rubricBlock,"outcome-removed",function(){$feedbackOutcome.val(""),updateOutcomes()}),bindEvent($rubricBlock,"outcome-updated",function(){updateFeedback(rubricModel.feedback),updateOutcomes()}),changeFeedback(rubricModel.feedback),updateOutcomes(),rbViews($view)}function rbViews($propContainer){var $select=$("[name=view]",$propContainer);bindEvent($select.select2({width:"100%"}),"select2-removed",function(){0===$select.select2("val").length&&$select.select2("val",[1])}),0===$select.select2("val").length&&$select.select2("val",[1])}var modelOverseer=creatorContext.getModelOverseer(),areaBroker=creatorContext.getAreaBroker(),$rubricBlockContent=$(".rubricblock-content",$rubricBlock);rubricModel.orderIndex=(rubricModel.index||0)+1,rubricModel.uid=_.uniqueId("rb"),rubricModel.feedback={activated:!!qtiElementHelper.lookupElement(rubricModel,"rubricBlock.div.feedbackBlock","content"),outcome:qtiElementHelper.lookupProperty(rubricModel,"rubricBlock.div.feedbackBlock.outcomeIdentifier","content"),matchValue:qtiElementHelper.lookupProperty(rubricModel,"rubricBlock.div.feedbackBlock.identifier","content")},modelOverseer.before("scoring-write."+rubricModel.uid,function(){var feedbackOutcome=rubricModel.feedback&&rubricModel.feedback.outcome;feedbackOutcome&&0>_.indexOf(modelOverseer.getOutcomesNames(),feedbackOutcome)?(modelOverseer.changedRubricBlock=(modelOverseer.changedRubricBlock||0)+1,rubricModel.feedback.activated=!1,rubricModel.feedback.outcome="",updateFeedback(rubricModel.feedback),$rubricBlock.trigger("outcome-removed")):$rubricBlock.trigger("outcome-updated")}).on("scoring-write."+rubricModel.uid,function(){modelOverseer.changedRubricBlock&&(dialogAlert(__("Some rubric blocks have been updated to reflect the changes in the list of outcomes.")),modelOverseer.changedRubricBlock=0)}),actions.properties($rubricBlock,"rubricblock",rubricModel,propHandler),modelToEditor(),bindEvent($rubricBlock,"delete",function(){qtiContentCreator.destroy(creatorContext,$rubricBlockContent)}),$rubricBlockContent.on("editorfocus",function(){areaBroker.getPropertyPanelArea().children(".props").hide().trigger("propclose.propview")}),areaBroker.getContentCreatorPanelArea().find(".test-content").on("scroll",function(){CKEDITOR.document.getWindow().fire("scroll")})}}}),define("taoQtiTest/controller/creator/helpers/testModel",["lodash","core/errorHandler"],function(_,errorHandler){"use strict";function eachItemInTest(testModel,cb){_.forEach(testModel.testParts,testPartModel=>{eachItemInTestPart(testPartModel,cb)})}function eachItemInTestPart(testPartModel,cb){_.forEach(testPartModel.assessmentSections,sectionModel=>{eachItemInSection(sectionModel,cb)})}function eachItemInSection(sectionModel,cb){_.forEach(sectionModel.sectionParts,sectionPartModel=>{if("assessmentSection"===sectionPartModel["qti-type"])eachItemInSection(sectionPartModel,cb);else if("assessmentItemRef"===sectionPartModel["qti-type"]){const itemRef=sectionPartModel;"function"==typeof cb?cb(itemRef):errorHandler.throw(_ns,"cb must be a function")}})}const _ns=".testModel";return{eachItemInTest,eachItemInTestPart,eachItemInSection}}),define("taoQtiTest/controller/creator/helpers/testPartCategory",["lodash","i18n","taoQtiTest/controller/creator/helpers/sectionCategory","taoQtiTest/controller/creator/helpers/testModel","core/errorHandler"],function(_,__,sectionCategory,testModelHelper,errorHandler){"use strict";function isValidTestPartModel(model){return _.isObject(model)&&"testPart"===model["qti-type"]&&_.isArray(model.assessmentSections)&&model.assessmentSections.every(section=>sectionCategory.isValidSectionModel(section))}function setCategories(model,selected){let partial=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[];const currentCategories=getCategories(model),toRemove=_.difference(currentCategories.all,selected.concat(partial)),toAdd=_.difference(selected,currentCategories.propagated);model.categories=_.difference(model.categories,toRemove),model.categories=model.categories.concat(toAdd),addCategories(model,toAdd),removeCategories(model,toRemove)}function getCategories(model){if(!isValidTestPartModel(model))return errorHandler.throw(_ns,"invalid tool config format");let itemCount=0;const itemRefCategories=[];if(testModelHelper.eachItemInTestPart(model,itemRef=>{++itemCount&&_.isArray(itemRef.categories)&&itemRefCategories.push(_.compact(itemRef.categories))}),!itemCount)return createCategories(model.categories,model.categories);const union=_.union.apply(null,itemRefCategories),propagated=_.intersection.apply(null,itemRefCategories),partial=_.difference(union,propagated);return createCategories(union,propagated,partial)}function addCategories(model,categories){isValidTestPartModel(model)?testModelHelper.eachItemInTestPart(model,itemRef=>{_.isArray(itemRef.categories)||(itemRef.categories=[]),itemRef.categories=_.union(itemRef.categories,categories)}):errorHandler.throw(_ns,"invalid tool config format")}function removeCategories(model,categories){isValidTestPartModel(model)?testModelHelper.eachItemInTestPart(model,itemRef=>{_.isArray(itemRef.categories)&&(itemRef.categories=_.difference(itemRef.categories,categories))}):errorHandler.throw(_ns,"invalid tool config format")}function createCategories(){let all=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],propagated=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],partial=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[];return _.mapValues({all:all,propagated:propagated,partial:partial},function(categories){return categories.sort()})}const _ns=".testPartCategory";return{isValidTestPartModel:isValidTestPartModel,setCategories:setCategories,getCategories:getCategories,addCategories:addCategories,removeCategories:removeCategories}}),define("taoQtiTest/controller/creator/helpers/sectionBlueprints",["lodash","i18n","core/errorHandler"],function(_,__,errorHandler){"use strict";function setBlueprint(model,blueprint){model.blueprint=blueprint}function getBlueprint(getUrl,model){return $.ajax({url:getUrl,type:"GET",data:{section:model.identifier},dataType:"json"}).fail(function(){errorHandler.throw(".sectionBlueprint","invalid tool config format")})}var _ns=".sectionBlueprint";return{setBlueprint:setBlueprint,getBlueprint:getBlueprint}}),define("taoQtiTest/controller/creator/views/subsection",["jquery","lodash","uri","i18n","taoQtiTest/controller/creator/config/defaults","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/itemref","taoQtiTest/controller/creator/views/rubricblock","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest","taoQtiTest/controller/creator/helpers/categorySelector","taoQtiTest/controller/creator/helpers/sectionCategory","taoQtiTest/controller/creator/helpers/sectionBlueprints","ui/dialog/confirm","taoQtiTest/controller/creator/helpers/subsection","taoQtiTest/controller/creator/helpers/validators","services/features"],function($,_,uri,__,defaults,actions,itemRefView,rubricBlockView,templates,qtiTestHelper,categorySelectorFactory,sectionCategory,sectionBlueprint,confirmDialog,subsectionsHelper,validators,servicesFeatures){"use strict";function setUp(creatorContext,subsectionModel,sectionModel,$subsection){function propHandler(propView){function removePropHandler(e,$deletedNode){const validIds=[$subsection.parents(".testpart").attr("id"),$subsection.attr("id")],deletedNodeId=$deletedNode.attr("id");null!==propView&&validIds.includes(deletedNodeId)&&propView.destroy()}const $view=propView.getView(),$selectionSwitcher=$("[name=section-enable-selection]",$view),$selectionSelect=$("[name=section-select]",$view),$selectionWithRep=$("[name=section-with-replacement]",$view),isSelectionFromServer=!!(subsectionModel.selection&&subsectionModel.selection["qti-type"]),switchSelection=function switchSelection(){!0===$selectionSwitcher.prop("checked")?($selectionSelect.incrementer("enable"),$selectionWithRep.removeClass("disabled")):($selectionSelect.incrementer("disable"),$selectionWithRep.addClass("disabled"))};$selectionSwitcher.on("change",switchSelection),$selectionSwitcher.on("change",function updateModel(){$selectionSwitcher.prop("checked")||($selectionSelect.val(0),$selectionWithRep.prop("checked",!1),delete subsectionModel.selection)}),$selectionSwitcher.prop("checked",isSelectionFromServer).trigger("change");const $title=$("[data-bind=title]",$titleWithActions);$view.on("change.binder",function(e){"binder"===e.namespace&&"assessmentSection"===subsectionModel["qti-type"]&&$title.text(subsectionModel.title)}),$subsection.parents(".testparts").on("deleted.deleter",removePropHandler),categoriesProperty($view),"undefined"!=typeof subsectionModel.hasBlueprint&&blueprintProperty($view),actions.displayCategoryPresets($subsection)}function subsections(){subsectionModel.sectionParts||(subsectionModel.sectionParts=[]),subsectionsHelper.getSubsections($subsection).each(function(){const $sub2section=$(this),index=$sub2section.data("bind-index");subsectionModel.sectionParts[index]||(subsectionModel.sectionParts[index]={}),setUp(creatorContext,subsectionModel.sectionParts[index],subsectionModel,$sub2section)})}function itemRefs(){subsectionModel.sectionParts||(subsectionModel.sectionParts=[]),$(".itemref",$itemRefsWrapper).each(function(){const $itemRef=$(this),index=$itemRef.data("bind-index");subsectionModel.sectionParts[index]||(subsectionModel.sectionParts[index]={}),itemRefView.setUp(creatorContext,subsectionModel.sectionParts[index],subsectionModel,sectionModel,$itemRef),$itemRef.find(".title").text(config.labels[uri.encode($itemRef.data("uri"))])})}function acceptItemRefs(){const $itemsPanel=$(".test-creator-items .item-selection");$itemsPanel.on("itemselect.creator",function(e,selection){const $placeholder=$(".itemref-placeholder",$itemRefsWrapper),$placeholders=$(".itemref-placeholder");0<_.size(selection)?$placeholder.show().off("click").on("click",function(){const defaultItemData={};subsectionModel.itemSessionControl&&!_.isUndefined(subsectionModel.itemSessionControl.maxAttempts)&&(defaultItemData.itemSessionControl=_.clone(subsectionModel.itemSessionControl)),defaultItemData.categories=_.clone(defaultsConfigs.categories)||[],_.forEach(selection,function(item){const itemData=_.defaults({href:item.uri,label:item.label,"qti-type":"assessmentItemRef"},defaultItemData);_.isArray(item.categories)&&(itemData.categories=item.categories.concat(itemData.categories)),addItemRef($(".itemrefs",$itemRefsWrapper),null,itemData)}),$itemsPanel.trigger("itemselected.creator"),$placeholders.hide().off("click")}):$placeholders.hide().off("click")}),$(document).off("add.binder",`[id="${$subsection.attr("id")}"] > .itemrefs-wrapper .itemrefs`).on("add.binder",`[id="${$subsection.attr("id")}"] > .itemrefs-wrapper .itemrefs`,function(e,$itemRef){if("binder"===e.namespace&&$itemRef.hasClass("itemref")&&$itemRef.closest(".subsection").attr("id")===$subsection.attr("id")){const index=$itemRef.data("bind-index"),itemRefModel=subsectionModel.sectionParts[index];itemRefView.setUp(creatorContext,itemRefModel,subsectionModel,sectionModel,$itemRef),modelOverseer.trigger("item-add",itemRefModel)}})}function addItemRef($refList,index,itemData){const $items=$refList.children("li");index=index||$items.length,itemData.identifier=qtiTestHelper.getAvailableIdentifier(modelOverseer.getModel(),"assessmentItemRef","item"),itemData.index=index+1;const $itemRef=$(templates.itemref(itemData));0<index?$itemRef.insertAfter($items.eq(index-1)):$itemRef.appendTo($refList),$refList.trigger("add",[$itemRef,itemData])}function rubricBlocks(){subsectionModel.rubricBlocks||(subsectionModel.rubricBlocks=[]),$(".rubricblock",$rubBlocks).each(function(){const $rubricBlock=$(this),index=$rubricBlock.data("bind-index");subsectionModel.rubricBlocks[index]||(subsectionModel.rubricBlocks[index]={}),rubricBlockView.setUp(creatorContext,subsectionModel.rubricBlocks[index],$rubricBlock)}),0<subsectionModel.rubricBlocks.length&&$(".rub-toggler",$titleWithActions).trigger("click")}function addRubricBlock(){$(".rublock-adder",$rubBlocks).adder({target:$(".rubricblocks",$rubBlocks),content:templates.rubricblock,templateData:function(cb){cb({"qti-type":"rubricBlock",index:$(".rubricblock",$rubBlocks).length,content:[],views:[1]})}}),$(document).off("add.binder",`[id="${$subsection.attr("id")}"] > .rublocks .rubricblocks`).on("add.binder",`[id="${$subsection.attr("id")}"] > .rublocks .rubricblocks`,function(e,$rubricBlock){if("binder"===e.namespace&&$rubricBlock.hasClass("rubricblock")&&$rubricBlock.closest(".subsection").attr("id")===$subsection.attr("id")){const index=$rubricBlock.data("bind-index"),rubricModel=subsectionModel.rubricBlocks[index]||{};$(".rubricblock-binding",$rubricBlock).html("<p>&nbsp;</p>"),rubricBlockView.setUp(creatorContext,rubricModel,$rubricBlock),modelOverseer.trigger("rubric-add",rubricModel)}})}function categoriesProperty($view){const categories=sectionCategory.getCategories(subsectionModel),categorySelector=categorySelectorFactory($view);categorySelector.createForm(categories.all),updateFormState(categorySelector),$view.on("propopen.propview",function(){updateFormState(categorySelector)}),$view.on("set-default-categories",function(){subsectionModel.categories=defaultsConfigs.categories,updateFormState(categorySelector)}),categorySelector.on("category-change",function(selected,indeterminate){sectionCategory.setCategories(subsectionModel,selected,indeterminate),modelOverseer.trigger("category-change")})}function updateFormState(categorySelector){const categories=sectionCategory.getCategories(subsectionModel);categorySelector.updateFormState(categories.propagated,categories.partial)}function blueprintProperty($view){function initBlueprint(){"undefined"==typeof subsectionModel.blueprint&&sectionBlueprint.getBlueprint(config.routes.blueprintByTestSection,subsectionModel).success(function(data){_.isEmpty(data)||""===subsectionModel.blueprint||(subsectionModel.blueprint=data.uri,$select.select2("data",{id:data.uri,text:data.text}),$select.trigger("change"))})}function setBlueprint(blueprint){sectionBlueprint.setBlueprint(subsectionModel,blueprint)}const $select=$("[name=section-blueprint]",$view);$select.select2({ajax:{url:config.routes.blueprintsById,dataType:"json",delay:350,method:"POST",data:function(params){return{identifier:params}},results:function(data){return data}},minimumInputLength:3,width:"100%",multiple:!1,allowClear:!0,placeholder:__("Select a blueprint"),formatNoMatches:function(){return __("Enter a blueprint")},maximumInputLength:32}).on("change",function(e){setBlueprint(e.val)}),initBlueprint(),$view.on("propopen.propview",function(){initBlueprint()})}function addSubsection(){const optionsConfirmDialog={buttons:{labels:{ok:__("Yes"),cancel:__("No")}}};$(".add-subsection",$titleWithActions).adder({target:$subsection.children(".subsections"),content:templates.subsection,templateData:function(cb){let sectionParts=[];$subsection.data("movedItems")&&(sectionParts=$subsection.data("movedItems"),$subsection.removeData("movedItems")),cb({"qti-type":"assessmentSection",identifier:qtiTestHelper.getAvailableIdentifier(modelOverseer.getModel(),"assessmentSection","subsection"),title:defaultsConfigs.sectionTitlePrefix,index:0,sectionParts,visible:!0,itemSessionControl:{maxAttempts:defaultsConfigs.maxAttempts}})},checkAndCallAdd:function(executeAdd){if(subsectionModel.sectionParts[0]&&qtiTestHelper.filterQtiType(subsectionModel.sectionParts[0],"assessmentItemRef")){const subsectionIndex=subsectionsHelper.getSubsectionTitleIndex($subsection),confirmMessage=__("The items contained in <b>%s %s</b> will be moved into the new <b>%s %s</b>. Do you wish to proceed?",subsectionIndex,subsectionModel.title,`${subsectionIndex}1.`,defaultsConfigs.sectionTitlePrefix),acceptFunction=()=>{$(".itemrefs .itemref",$itemRefsWrapper).each(function(){$subsection.parents(".testparts").trigger("deleted.deleter",[$(this)])}),setTimeout(()=>{$(".itemrefs",$itemRefsWrapper).empty(),subsectionModel.sectionParts.forEach(itemRef=>{validators.checkIfItemIdValid(itemRef.identifier,modelOverseer)||(itemRef.identifier=qtiTestHelper.getAvailableIdentifier(modelOverseer.getModel(),"assessmentItemRef","item"))}),$subsection.data("movedItems",_.clone(subsectionModel.sectionParts)),subsectionModel.sectionParts=[],executeAdd()},0)};confirmDialog(confirmMessage,acceptFunction,()=>{},optionsConfirmDialog).getDom().find(".buttons").css("display","flex").css("flex-direction","row-reverse")}else!subsectionModel.sectionParts.length&&subsectionModel.categories.length&&$subsection.data("movedCategories",_.clone(subsectionModel.categories)),executeAdd()}}),$(document).off("add.binder",`[id="${$subsection.attr("id")}"] > .subsections`).on("add.binder",`[id="${$subsection.attr("id")}"] > .subsections`,function(e,$sub2section){if("binder"===e.namespace&&$sub2section.hasClass("subsection")&&$sub2section.parents(".subsection").length){const sub2sectionIndex=$sub2section.data("bind-index"),sub2sectionModel=subsectionModel.sectionParts[sub2sectionIndex];$subsection.data("movedCategories")&&(sub2sectionModel.categories=$subsection.data("movedCategories"),$subsection.removeData("movedCategories")),setUp(creatorContext,sub2sectionModel,subsectionModel,$sub2section),actions.displayItemWrapper($subsection),actions.displayCategoryPresets($subsection),actions.updateTitleIndex($sub2section),modelOverseer.trigger("section-add",sub2sectionModel)}})}const defaultsConfigs=defaults(),$itemRefsWrapper=$subsection.children(".itemrefs-wrapper"),$rubBlocks=$subsection.children(".rublocks"),$titleWithActions=$subsection.children("h2"),modelOverseer=creatorContext.getModelOverseer(),config=modelOverseer.getConfig();subsectionModel.itemSessionControl||(subsectionModel.itemSessionControl={}),subsectionModel.categories||(subsectionModel.categories=defaultsConfigs.categories),_.defaults(subsectionModel.itemSessionControl,sectionModel.itemSessionControl),_.isEmpty(config.routes.blueprintsById)||(subsectionModel.hasBlueprint=!0),subsectionModel.isSubsection=!0,sectionModel.hasSelectionWithReplacement=servicesFeatures.isVisible("taoQtiTest/creator/properties/selectionWithReplacement",!1),actions.properties($titleWithActions,"section",subsectionModel,propHandler),actions.move($titleWithActions,"subsections","subsection"),actions.displayItemWrapper($subsection),actions.updateDeleteSelector($titleWithActions),subsections(),itemRefs(),acceptItemRefs(),rubricBlocks(),addRubricBlock(),subsectionsHelper.isNestedSubsection($subsection)?($(".add-subsection",$subsection).hide(),$(".add-subsection + .tlb-separator",$subsection).hide()):addSubsection()}function listenActionState(){$(".subsections").each(function(){const $subsections=$(".subsection",$(this));actions.removable($subsections,"h2"),actions.movable($subsections,"subsection","h2"),actions.updateTitleIndex($subsections)}),$(document).on("delete",function(e){const $target=$(e.target);if($target.hasClass("subsection")){const $parent=subsectionsHelper.getParent($target);setTimeout(()=>{actions.displayItemWrapper($parent),actions.displayCategoryPresets($parent);const $subsections=$(".subsection",$parent);actions.updateTitleIndex($subsections)},100)}}).on("add change undo.deleter deleted.deleter",function(e){const $target=$(e.target);if($target.hasClass("subsection")||$target.hasClass("subsections")){const $subsections=subsectionsHelper.getSiblingSubsections($target);if(actions.removable($subsections,"h2"),actions.movable($subsections,"subsection","h2"),"undo"===e.type||"change"===e.type){const $parent=subsectionsHelper.getParent($target),$AllNestedSubsections=$(".subsection",$parent);actions.updateTitleIndex($AllNestedSubsections),actions.displayItemWrapper($parent),actions.displayCategoryPresets($parent)}}})}return{setUp:setUp,listenActionState:listenActionState}}),define("taoQtiTest/controller/creator/views/section",["jquery","lodash","uri","i18n","taoQtiTest/controller/creator/config/defaults","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/itemref","taoQtiTest/controller/creator/views/rubricblock","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest","taoQtiTest/controller/creator/helpers/categorySelector","taoQtiTest/controller/creator/helpers/testPartCategory","taoQtiTest/controller/creator/helpers/sectionCategory","taoQtiTest/controller/creator/helpers/sectionBlueprints","taoQtiTest/controller/creator/views/subsection","ui/dialog/confirm","taoQtiTest/controller/creator/helpers/subsection","taoQtiTest/controller/creator/helpers/validators","taoQtiTest/controller/creator/helpers/featureVisibility","services/features"],function($,_,uri,__,defaults,actions,itemRefView,rubricBlockView,templates,qtiTestHelper,categorySelectorFactory,testPartCategory,sectionCategory,sectionBlueprint,subsectionView,confirmDialog,subsectionsHelper,validators,featureVisibility,servicesFeatures){function setUp(creatorContext,sectionModel,partModel,$section){function propHandler(propView){function removePropHandler(e,$deletedNode){const validIds=[$section.parents(".testpart").attr("id"),$section.attr("id")],deletedNodeId=$deletedNode.attr("id");null!==propView&&validIds.includes(deletedNodeId)&&propView.destroy()}const $view=propView.getView(),$selectionSwitcher=$("[name=section-enable-selection]",$view),$selectionSelect=$("[name=section-select]",$view),$selectionWithRep=$("[name=section-with-replacement]",$view),isSelectionFromServer=!!(sectionModel.selection&&sectionModel.selection["qti-type"]),switchSelection=function switchSelection(){!0===$selectionSwitcher.prop("checked")?($selectionSelect.incrementer("enable"),$selectionWithRep.removeClass("disabled")):($selectionSelect.incrementer("disable"),$selectionWithRep.addClass("disabled"))};$selectionSwitcher.on("change",switchSelection),$selectionSwitcher.on("change",function updateModel(){$selectionSwitcher.prop("checked")||($selectionSelect.val(0),$selectionWithRep.prop("checked",!1),delete sectionModel.selection)}),$selectionSwitcher.prop("checked",isSelectionFromServer).trigger("change");const $title=$("[data-bind=title]",$titleWithActions);$view.on("change.binder",function(e){"binder"===e.namespace&&"assessmentSection"===sectionModel["qti-type"]&&$title.text(sectionModel.title)}),$section.parents(".testparts").on("deleted.deleter",removePropHandler),categoriesProperty($view),"undefined"!=typeof sectionModel.hasBlueprint&&blueprintProperty($view),actions.displayCategoryPresets($section)}function subsections(){sectionModel.sectionParts||(sectionModel.sectionParts=[]),subsectionsHelper.getSubsections($section).each(function(){const $subsection=$(this),index=$subsection.data("bind-index");sectionModel.sectionParts[index]||(sectionModel.sectionParts[index]={}),subsectionView.setUp(creatorContext,sectionModel.sectionParts[index],sectionModel,$subsection)})}function itemRefs(){sectionModel.sectionParts||(sectionModel.sectionParts=[]),$(".itemref",$itemRefsWrapper).each(function(){const $itemRef=$(this),index=$itemRef.data("bind-index");sectionModel.sectionParts[index]||(sectionModel.sectionParts[index]={}),itemRefView.setUp(creatorContext,sectionModel.sectionParts[index],sectionModel,partModel,$itemRef),$itemRef.find(".title").text(config.labels[uri.encode($itemRef.data("uri"))])})}function acceptItemRefs(){const $itemsPanel=$(".test-creator-items .item-selection");$itemsPanel.on("itemselect.creator",function(e,selection){const $placeholder=$(".itemref-placeholder",$itemRefsWrapper),$placeholders=$(".itemref-placeholder");0<_.size(selection)?$placeholder.show().off("click").on("click",function(){const defaultItemData={};sectionModel.itemSessionControl&&!_.isUndefined(sectionModel.itemSessionControl.maxAttempts)&&(defaultItemData.itemSessionControl=_.clone(sectionModel.itemSessionControl)),defaultItemData.categories=_.clone(defaultsConfigs.categories)||[],_.forEach(selection,function(item){const itemData=_.defaults({href:item.uri,label:item.label,"qti-type":"assessmentItemRef"},defaultItemData);_.isArray(item.categories)&&(itemData.categories=item.categories.concat(itemData.categories)),addItemRef($(".itemrefs",$itemRefsWrapper),null,itemData)}),$itemsPanel.trigger("itemselected.creator"),$placeholders.hide().off("click")}):$placeholders.hide().off("click")}),$(document).off("add.binder",`[id="${$section.attr("id")}"] > .itemrefs-wrapper .itemrefs`).on("add.binder",`[id="${$section.attr("id")}"] > .itemrefs-wrapper .itemrefs`,function(e,$itemRef){if("binder"===e.namespace&&$itemRef.hasClass("itemref")&&!$itemRef.parents(".subsection").length){const index=$itemRef.data("bind-index"),itemRefModel=sectionModel.sectionParts[index];itemRefView.setUp(creatorContext,itemRefModel,sectionModel,partModel,$itemRef),modelOverseer.trigger("item-add",itemRefModel)}})}function addItemRef($refList,index,itemData){const $items=$refList.children("li");index=index||$items.length,itemData.identifier=qtiTestHelper.getAvailableIdentifier(modelOverseer.getModel(),"assessmentItemRef","item"),itemData.index=index+1;const $itemRef=$(templates.itemref(itemData));0<index?$itemRef.insertAfter($items.eq(index-1)):$itemRef.appendTo($refList),$refList.trigger("add",[$itemRef,itemData])}function rubricBlocks(){sectionModel.rubricBlocks||(sectionModel.rubricBlocks=[]),$(".rubricblock",$rubBlocks).each(function(){const $rubricBlock=$(this),index=$rubricBlock.data("bind-index");sectionModel.rubricBlocks[index]||(sectionModel.rubricBlocks[index]={}),rubricBlockView.setUp(creatorContext,sectionModel.rubricBlocks[index],$rubricBlock)}),0<sectionModel.rubricBlocks.length&&$(".rub-toggler",$titleWithActions).trigger("click")}function addRubricBlock(){$(".rublock-adder",$rubBlocks).adder({target:$(".rubricblocks",$rubBlocks),content:templates.rubricblock,templateData:function(cb){cb({"qti-type":"rubricBlock",index:$(".rubricblock",$rubBlocks).length,content:[],views:[1]})}}),$(document).off("add.binder",`[id="${$section.attr("id")}"] > .rublocks .rubricblocks`).on("add.binder",`[id="${$section.attr("id")}"] > .rublocks .rubricblocks`,function(e,$rubricBlock){if("binder"===e.namespace&&$rubricBlock.hasClass("rubricblock")&&!$rubricBlock.parents(".subsection").length){const index=$rubricBlock.data("bind-index"),rubricModel=sectionModel.rubricBlocks[index]||{};$(".rubricblock-binding",$rubricBlock).html("<p>&nbsp;</p>"),rubricBlockView.setUp(creatorContext,rubricModel,$rubricBlock),modelOverseer.trigger("rubric-add",rubricModel)}})}function categoriesProperty($view){const categories=sectionCategory.getCategories(sectionModel),categorySelector=categorySelectorFactory($view);categorySelector.createForm(categories.all,"section"),updateFormState(categorySelector),$view.on("propopen.propview",function(){updateFormState(categorySelector)}),$view.on("set-default-categories",function(){sectionModel.categories=defaultsConfigs.categories,updateFormState(categorySelector)}),categorySelector.on("category-change",function(selected,indeterminate){sectionCategory.setCategories(sectionModel,selected,indeterminate),modelOverseer.trigger("category-change")})}function updateFormState(categorySelector){const categories=sectionCategory.getCategories(sectionModel);categorySelector.updateFormState(categories.propagated,categories.partial)}function blueprintProperty($view){function initBlueprint(){"undefined"==typeof sectionModel.blueprint&&sectionBlueprint.getBlueprint(config.routes.blueprintByTestSection,sectionModel).success(function(data){_.isEmpty(data)||""===sectionModel.blueprint||(sectionModel.blueprint=data.uri,$select.select2("data",{id:data.uri,text:data.text}),$select.trigger("change"))})}function setBlueprint(blueprint){sectionBlueprint.setBlueprint(sectionModel,blueprint)}const $select=$("[name=section-blueprint]",$view);$select.select2({ajax:{url:config.routes.blueprintsById,dataType:"json",delay:350,method:"POST",data:function(params){return{identifier:params}},results:function(data){return data}},minimumInputLength:3,width:"100%",multiple:!1,allowClear:!0,placeholder:__("Select a blueprint"),formatNoMatches:function(){return __("Enter a blueprint")},maximumInputLength:32}).on("change",function(e){setBlueprint(e.val)}),initBlueprint(),$view.on("propopen.propview",function(){initBlueprint()})}function addSubsection(){const optionsConfirmDialog={buttons:{labels:{ok:__("Yes"),cancel:__("No")}}};$(".add-subsection",$titleWithActions).adder({target:$section.children(".subsections"),content:templates.subsection,templateData:function(cb){let sectionParts=[];$section.data("movedItems")&&(sectionParts=$section.data("movedItems"),$section.removeData("movedItems")),cb({"qti-type":"assessmentSection",identifier:qtiTestHelper.getAvailableIdentifier(modelOverseer.getModel(),"assessmentSection","subsection"),title:defaultsConfigs.sectionTitlePrefix,index:0,sectionParts,visible:!0,itemSessionControl:{maxAttempts:defaultsConfigs.maxAttempts}})},checkAndCallAdd:function(executeAdd){if(sectionModel.sectionParts[0]&&qtiTestHelper.filterQtiType(sectionModel.sectionParts[0],"assessmentItemRef")){const $parent=$section.parents(".sections"),index=$(".section",$parent).index($section),confirmMessage=__("The items contained in <b>%s %s</b> will be moved into the new <b>%s %s</b>. Do you wish to proceed?",`${index+1}.`,sectionModel.title,`${index+1}.1.`,defaultsConfigs.sectionTitlePrefix),acceptFunction=()=>{$(".itemrefs .itemref",$itemRefsWrapper).each(function(){$section.parents(".testparts").trigger("deleted.deleter",[$(this)])}),setTimeout(()=>{$(".itemrefs",$itemRefsWrapper).empty(),sectionModel.sectionParts.forEach(itemRef=>{validators.checkIfItemIdValid(itemRef.identifier,modelOverseer)||(itemRef.identifier=qtiTestHelper.getAvailableIdentifier(modelOverseer.getModel(),"assessmentItemRef","item"))}),$section.data("movedItems",_.clone(sectionModel.sectionParts)),sectionModel.sectionParts=[],executeAdd()},0)};confirmDialog(confirmMessage,acceptFunction,()=>{},optionsConfirmDialog).getDom().find(".buttons").css("display","flex").css("flex-direction","row-reverse")}else!sectionModel.sectionParts.length&&sectionModel.categories.length&&$section.data("movedCategories",_.clone(sectionModel.categories)),executeAdd()}}),$(document).off("add.binder",`[id="${$section.attr("id")}"] > .subsections`).on("add.binder",`[id="${$section.attr("id")}"] > .subsections`,function(e,$subsection){if("binder"===e.namespace&&$subsection.hasClass("subsection")&&!$subsection.parents(".subsection").length){const subsectionIndex=$subsection.data("bind-index"),subsectionModel=sectionModel.sectionParts[subsectionIndex];$section.data("movedCategories")&&(subsectionModel.categories=$section.data("movedCategories"),$section.removeData("movedCategories")),subsectionView.setUp(creatorContext,subsectionModel,sectionModel,$subsection),actions.displayItemWrapper($section),actions.displayCategoryPresets($section),actions.updateTitleIndex($subsection),modelOverseer.trigger("section-add",subsectionModel)}})}const defaultsConfigs=defaults(),$itemRefsWrapper=$section.children(".itemrefs-wrapper"),$rubBlocks=$section.children(".rublocks"),$titleWithActions=$section.children("h2"),modelOverseer=creatorContext.getModelOverseer(),config=modelOverseer.getConfig();if(sectionModel.itemSessionControl||(sectionModel.itemSessionControl={}),!sectionModel.categories){const partCategories=testPartCategory.getCategories(partModel);sectionModel.categories=_.clone(partCategories.propagated||defaultsConfigs.categories)}_.defaults(sectionModel.itemSessionControl,partModel.itemSessionControl),_.isEmpty(config.routes.blueprintsById)||(sectionModel.hasBlueprint=!0),sectionModel.isSubsection=!1,sectionModel.hasSelectionWithReplacement=servicesFeatures.isVisible("taoQtiTest/creator/properties/selectionWithReplacement",!1),featureVisibility.addSectionVisibilityProps(sectionModel),actions.properties($titleWithActions,"section",sectionModel,propHandler),actions.move($titleWithActions,"sections","section"),actions.displayItemWrapper($section),subsections(),itemRefs(),acceptItemRefs(),rubricBlocks(),addRubricBlock(),addSubsection()}function listenActionState(){$(".sections").each(function(){const $sections=$(".section",$(this));actions.removable($sections,"h2"),actions.movable($sections,"section","h2"),actions.updateTitleIndex($sections)}),$(document).on("delete",function(e){let $parent;const $target=$(e.target);$target.hasClass("section")&&($parent=$target.parents(".sections"),actions.disable($parent.find(".section"),"h2"),setTimeout(()=>{const $sectionsAndsubsections=$(".section,.subsection",$parent);actions.updateTitleIndex($sectionsAndsubsections)},100))}).on("add change undo.deleter deleted.deleter",function(e){const $target=$(e.target);if($target.hasClass("section")||$target.hasClass("sections")){const $sectionsContainer=$target.hasClass("sections")?$target:$target.parents(".sections"),$sections=$(".section",$sectionsContainer);if(actions.removable($sections,"h2"),actions.movable($sections,"section","h2"),"undo"===e.type||"change"===e.type){const $sectionsAndsubsections=$(".section,.subsection",$sectionsContainer);actions.updateTitleIndex($sectionsAndsubsections)}else if("add"===e.type){const $newSection=$(".section:last",$sectionsContainer);actions.updateTitleIndex($newSection)}}}).on("open.toggler",".rub-toggler",function(e){"toggler"===e.namespace&&$(this).parents("h2").addClass("active")}).on("close.toggler",".rub-toggler",function(e){"toggler"===e.namespace&&$(this).parents("h2").removeClass("active")})}return"use strict",{setUp:setUp,listenActionState:listenActionState}}),define("taoQtiTest/controller/creator/views/testpart",["jquery","lodash","taoQtiTest/controller/creator/config/defaults","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/section","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest","taoQtiTest/controller/creator/helpers/testPartCategory","taoQtiTest/controller/creator/helpers/categorySelector","taoQtiTest/controller/creator/helpers/featureVisibility"],function($,_,defaults,actions,sectionView,templates,qtiTestHelper,testPartCategory,categorySelectorFactory,featureVisibility){function setUp(creatorContext,partModel,$testPart){function propHandler(propView){const $view=propView.getView(),$identifier=$("[data-bind=identifier]",$titleWithActions);$view.on("change.binder",function(e,model){"binder"===e.namespace&&"testPart"===model["qti-type"]&&($identifier.text(model.identifier),modelOverseer.trigger("testpart-change",partModel))}),$testPart.parents(".testparts").on("deleted.deleter",function(e,$deletedNode){null!==propView&&$deletedNode.attr("id")===$testPart.attr("id")&&propView.destroy()}),categoriesProperty($view),actions.displayCategoryPresets($testPart,"testpart")}function sections(){partModel.assessmentSections||(partModel.assessmentSections=[]),$(".section",$testPart).each(function(){const $section=$(this),index=$section.data("bind-index");partModel.assessmentSections[index]||(partModel.assessmentSections[index]={}),sectionView.setUp(creatorContext,partModel.assessmentSections[index],partModel,$section)})}function addSection(){$(".section-adder",$testPart).adder({target:$(".sections",$testPart),content:templates.section,templateData:function(cb){cb({"qti-type":"assessmentSection",identifier:qtiTestHelper.getAvailableIdentifier(modelOverseer.getModel(),"assessmentSection",defaultsConfigs.sectionIdPrefix),title:defaultsConfigs.sectionTitlePrefix,index:0,sectionParts:[],visible:!0,itemSessionControl:{maxAttempts:defaultsConfigs.maxAttempts}})}}),$(document).off("add.binder",`[id=${$testPart.attr("id")}] .sections`).on("add.binder",`[id=${$testPart.attr("id")}] .sections`,function(e,$section){if("binder"===e.namespace&&$section.hasClass("section")){const index=$section.data("bind-index"),sectionModel=partModel.assessmentSections[index];sectionView.setUp(creatorContext,sectionModel,partModel,$section),modelOverseer.trigger("section-add",sectionModel)}})}function categoriesProperty($view){const categoriesSummary=testPartCategory.getCategories(partModel),categorySelector=categorySelectorFactory($view);categorySelector.createForm(categoriesSummary.all,"testPart"),updateFormState(categorySelector),$view.on("propopen.propview",function(){updateFormState(categorySelector)}),$view.on("set-default-categories",function(){partModel.categories=defaultsConfigs.categories,updateFormState(categorySelector)}),categorySelector.on("category-change",function(selected,indeterminate){testPartCategory.setCategories(partModel,selected,indeterminate),modelOverseer.trigger("category-change")})}function updateFormState(categorySelector){const categoriesSummary=testPartCategory.getCategories(partModel);categorySelector.updateFormState(categoriesSummary.propagated,categoriesSummary.partial)}const defaultsConfigs=defaults(),$actionContainer=$("h1",$testPart),$titleWithActions=$testPart.children("h1"),modelOverseer=creatorContext.getModelOverseer();featureVisibility.addTestPartVisibilityProps(partModel),actions.properties($actionContainer,"testpart",partModel,propHandler),actions.move($actionContainer,"testparts","testpart"),sections(),addSection()}function listenActionState(){let $testParts=$(".testpart");actions.removable($testParts,"h1"),actions.movable($testParts,"testpart","h1"),$(".testparts").on("delete",function(e){const $target=$(e.target);$target.hasClass("testpart")&&actions.disable($(e.target.id),"h1")}).on("add change undo.deleter deleted.deleter",function(e){const $target=$(e.target);($target.hasClass("testpart")||$target.hasClass("testparts"))&&($testParts=$(".testpart"),actions.removable($testParts,"h1"),actions.movable($testParts,"testpart","h1"))})}return"use strict",{setUp:setUp,listenActionState:listenActionState}}),define("taoQtiTest/controller/creator/views/test",["jquery","lodash","i18n","ui/hider","ui/feedback","services/features","taoQtiTest/controller/creator/config/defaults","taoQtiTest/controller/creator/views/actions","taoQtiTest/controller/creator/views/testpart","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest","taoQtiTest/controller/creator/helpers/featureVisibility"],function($,_,__,hider,feedback,features,defaults,actions,testPartView,templates,qtiTestHelper,featureVisibility){function testView(creatorContext){function testParts(){testModel.testParts||(testModel.testParts=[]),$(".testpart").each(function(){var $testPart=$(this),index=$testPart.data("bind-index");testModel.testParts[index]||(testModel.testParts[index]={}),testPartView.setUp(creatorContext,testModel.testParts[index],$testPart)})}function propHandler(propView){function changeScoring(scoring){var noOptions=!!scoring&&-1===["none","custom"].indexOf(scoring.outcomeProcessing),newScoringState=JSON.stringify(scoring);hider.toggle($cutScoreLine,!!scoring&&"cut"===scoring.outcomeProcessing),hider.toggle($categoryScoreLine,noOptions),hider.toggle($weightIdentifierLine,noOptions),hider.hide($descriptions),hider.show($descriptions.filter("[data-key=\""+scoring.outcomeProcessing+"\"]")),scoringState!==newScoringState&&modelOverseer.trigger("scoring-change",testModel),scoringState=newScoringState}function updateOutcomes(){var $panel=$(".outcome-declarations",$view);$panel.html(templates.outcomes({outcomes:modelOverseer.getOutcomesList()}))}var $view=propView.getView(),$categoryScoreLine=$(".test-category-score",$view),$cutScoreLine=$(".test-cut-score",$view),$weightIdentifierLine=$(".test-weight-identifier",$view),$descriptions=$(".test-outcome-processing-description",$view),$generate=$("[data-action=\"generate-outcomes\"]",$view),$title=$(".test-creator-test > h1 [data-bind=title]"),scoringState=JSON.stringify(testModel.scoring);$("[name=test-outcome-processing]",$view).select2({minimumResultsForSearch:-1,width:"100%"}),$generate.on("click",function(){$generate.addClass("disabled").attr("disabled",!0),modelOverseer.on("scoring-write.regenerate",function(){modelOverseer.off("scoring-write.regenerate"),feedback().success(__("The outcomes have been regenerated!")).on("destroy",function(){$generate.removeClass("disabled").removeAttr("disabled")})}).trigger("scoring-change")}),$view.on("change.binder",function(e,model){"binder"===e.namespace&&"assessmentTest"===model["qti-type"]&&(changeScoring(model.scoring),$title.text(model.title))}),modelOverseer.on("scoring-write",updateOutcomes),changeScoring(testModel.scoring),updateOutcomes()}function addTestPart(){$(".testpart-adder").adder({target:$(".testparts"),content:templates.testpart,templateData:function(cb){var testPartIndex=$(".testpart").length;cb({"qti-type":"testPart",identifier:qtiTestHelper.getAvailableIdentifier(modelOverseer.getModel(),"testPart",defaultsConfigs.partIdPrefix),index:testPartIndex,navigationMode:defaultsConfigs.navigationMode,submissionMode:defaultsConfigs.submissionMode,assessmentSections:[{"qti-type":"assessmentSection",identifier:qtiTestHelper.getAvailableIdentifier(modelOverseer.getModel(),"assessmentSection",defaultsConfigs.sectionIdPrefix),title:defaultsConfigs.sectionTitlePrefix,index:0,sectionParts:[],visible:!0,itemSessionControl:{maxAttempts:defaultsConfigs.maxAttempts}}]})}}),$(document).off("add.binder",".testparts").on("add.binder",".testparts",function(e,$testPart,added){var partModel;"binder"===e.namespace&&$testPart.hasClass("testpart")&&(partModel=testModel.testParts[added.index],testPartView.setUp(creatorContext,partModel,$testPart),actions.updateTitleIndex($(".section",$testPart)),modelOverseer.trigger("part-add",partModel))})}const defaultsConfigs=defaults();var modelOverseer=creatorContext.getModelOverseer(),testModel=modelOverseer.getModel();featureVisibility.addTestVisibilityProps(testModel),actions.properties($(".test-creator-test > h1"),"test",testModel,propHandler),testParts(),addTestPart()}return"use strict",testView}),define("taoQtiTest/controller/creator/helpers/processingRule",["lodash","taoQtiTest/controller/creator/helpers/outcomeValidator","taoQtiTest/controller/creator/helpers/qtiElement","taoQtiTest/controller/creator/helpers/baseType","taoQtiTest/controller/creator/helpers/cardinality"],function(_,outcomeValidator,qtiElementHelper,baseTypeHelper,cardinalityHelper){"use strict";function unaryOperator(type,expression,baseType,cardinality){var processingRule=processingRuleHelper.create(type,null,[expression]);return processingRule.minOperands=1,processingRule.maxOperands=1,addTypeAndCardinality(processingRule,baseType,cardinality),processingRule}function binaryOperator(type,left,right,baseType,cardinality){var processingRule=processingRuleHelper.create(type,null,[left,right]);return processingRule.minOperands=2,processingRule.maxOperands=2,addTypeAndCardinality(processingRule,baseType,cardinality),processingRule}function addTypeAndCardinality(processingRule,baseType,cardinality){return _.isUndefined(baseType)&&(baseType=[baseTypeHelper.INTEGER,baseTypeHelper.FLOAT]),_.isUndefined(cardinality)&&(cardinality=[cardinalityHelper.SINGLE]),processingRule.acceptedCardinalities=forceArray(cardinality),processingRule.acceptedBaseTypes=forceArray(baseType),processingRule}function addCategories(processingRule,includeCategories,excludeCategories){return processingRule.includeCategories=forceArray(includeCategories),processingRule.excludeCategories=forceArray(excludeCategories),processingRule}function addSectionIdentifier(processingRule,sectionIdentifier){if(sectionIdentifier){if(!outcomeValidator.validateIdentifier(sectionIdentifier))throw new TypeError("You must provide a valid weight identifier!");processingRule.sectionIdentifier=sectionIdentifier}else processingRule.sectionIdentifier="";return processingRule}function addWeightIdentifier(processingRule,weightIdentifier){if(weightIdentifier){if(!outcomeValidator.validateIdentifier(weightIdentifier))throw new TypeError("You must provide a valid weight identifier!");processingRule.weightIdentifier=weightIdentifier}else processingRule.weightIdentifier="";return processingRule}function validateIdentifier(identifier){if(!outcomeValidator.validateIdentifier(identifier))throw new TypeError("You must provide a valid identifier!");return identifier}function validateOutcome(outcome){if(!outcomeValidator.validateOutcome(outcome))throw new TypeError("You must provide a valid QTI element!");return outcome}function validateOutcomeList(outcomes){if(!outcomeValidator.validateOutcomes(outcomes))throw new TypeError("You must provide a valid list of QTI elements!");return outcomes}function forceArray(value){return value||(value=[]),_.isArray(value)||(value=[value]),value}var processingRuleHelper={create:function create(type,identifier,expression){var processingRule=qtiElementHelper.create(type,identifier&&validateIdentifier(identifier));return expression&&processingRuleHelper.setExpression(processingRule,expression),processingRule},setExpression:function setExpression(processingRule,expression){processingRule&&(_.isArray(expression)?(processingRule.expression&&(processingRule.expression=null),processingRule.expressions=validateOutcomeList(expression)):(processingRule.expressions&&(processingRule.expressions=null),expression&&(processingRule.expression=validateOutcome(expression))))},addExpression:function addExpression(processingRule,expression){processingRule&&expression&&(processingRule.expression&&(processingRule.expressions=forceArray(processingRule.expression),processingRule.expression=null),_.isArray(expression)?processingRule.expressions=forceArray(processingRule.expressions).concat(validateOutcomeList(expression)):processingRule.expressions?processingRule.expressions.push(expression):processingRule.expression=validateOutcome(expression))},setOutcomeValue:function setOutcomeValue(identifier,expression){return processingRuleHelper.create("setOutcomeValue",validateIdentifier(identifier),expression)},gte:function gte(left,right){return binaryOperator("gte",left,right)},lte:function lte(left,right){return binaryOperator("lte",left,right)},divide:function divide(left,right){return binaryOperator("divide",left,right)},sum:function sum(terms){var processingRule=processingRuleHelper.create("sum",null,forceArray(terms));return processingRule.minOperands=1,processingRule.maxOperands=-1,processingRule.acceptedCardinalities=[cardinalityHelper.SINGLE,cardinalityHelper.MULTIPLE,cardinalityHelper.ORDERED],processingRule.acceptedBaseTypes=[baseTypeHelper.INTEGER,baseTypeHelper.FLOAT],processingRule},testVariables:function testVariables(identifier,type,weightIdentifier,includeCategories,excludeCategories){var processingRule=processingRuleHelper.create("testVariables");return processingRule.variableIdentifier=validateIdentifier(identifier),processingRule.baseType=baseTypeHelper.getValid(type),addWeightIdentifier(processingRule,weightIdentifier),addSectionIdentifier(processingRule,""),addCategories(processingRule,includeCategories,excludeCategories),processingRule},outcomeMaximum:function outcomeMaximum(identifier,weightIdentifier,includeCategories,excludeCategories){var processingRule=processingRuleHelper.create("outcomeMaximum");return processingRule.outcomeIdentifier=validateIdentifier(identifier),addWeightIdentifier(processingRule,weightIdentifier),addSectionIdentifier(processingRule,""),addCategories(processingRule,includeCategories,excludeCategories),processingRule},numberPresented:function numberPresented(includeCategories,excludeCategories){var processingRule=processingRuleHelper.create("numberPresented");return addSectionIdentifier(processingRule,""),addCategories(processingRule,includeCategories,excludeCategories),processingRule},baseValue:function baseValue(value,type){var processingRule=processingRuleHelper.create("baseValue");return processingRule.baseType=baseTypeHelper.getValid(type,baseTypeHelper.FLOAT),processingRule.value=baseTypeHelper.getValue(processingRule.baseType,value),processingRule},variable:function variable(identifier,weightIdentifier){var processingRule=processingRuleHelper.create("variable",validateIdentifier(identifier));return addWeightIdentifier(processingRule,weightIdentifier),processingRule},match:function match(left,right){return binaryOperator("match",left,right,cardinalityHelper.SAME,cardinalityHelper.SAME)},isNull:function isNull(expression){return unaryOperator("isNull",expression,baseTypeHelper.ANY,cardinalityHelper.ANY)},outcomeCondition:function outcomeCondition(outcomeIf,outcomeElse){var processingRule=processingRuleHelper.create("outcomeCondition");if(!outcomeValidator.validateOutcome(outcomeIf,!1,"outcomeIf"))throw new TypeError("You must provide a valid outcomeIf element!");if(outcomeElse&&!outcomeValidator.validateOutcome(outcomeElse,!1,"outcomeElse"))throw new TypeError("You must provide a valid outcomeElse element!");return processingRule.outcomeIf=outcomeIf,processingRule.outcomeElseIfs=[],outcomeElse&&(processingRule.outcomeElse=outcomeElse),processingRule},outcomeIf:function outcomeIf(expression,instruction){var processingRule=processingRuleHelper.create("outcomeIf");return _.isArray(instruction)||(instruction=[instruction]),processingRule.expression=validateOutcome(expression),processingRule.outcomeRules=validateOutcomeList(instruction),processingRule},outcomeElse:function outcomeElse(instruction){var processingRule=processingRuleHelper.create("outcomeElse");return _.isArray(instruction)||(instruction=[instruction]),processingRule.outcomeRules=validateOutcomeList(instruction),processingRule}};return processingRuleHelper}),define("taoQtiTest/controller/creator/helpers/scoring",["lodash","i18n","core/format","taoQtiTest/controller/creator/helpers/baseType","taoQtiTest/controller/creator/helpers/outcome","taoQtiTest/controller/creator/helpers/processingRule"],function(_,__,format,baseTypeHelper,outcomeHelper,processingRuleHelper){"use strict";var _Mathmax=Math.max;function addTotalScoreOutcomes(model,scoring,identifier,weight,category){var outcome=outcomeHelper.createOutcome(identifier,baseTypeHelper.FLOAT),processingRule=processingRuleHelper.setOutcomeValue(identifier,processingRuleHelper.sum(processingRuleHelper.testVariables(scoring.scoreIdentifier,-1,weight&&scoring.weightIdentifier,category)));outcomeHelper.addOutcome(model,outcome,processingRule)}function addMaxScoreOutcomes(model,scoring,identifier,weight,category){var outcome=outcomeHelper.createOutcome(identifier,baseTypeHelper.FLOAT),processingRule=processingRuleHelper.setOutcomeValue(identifier,processingRuleHelper.sum(processingRuleHelper.testVariables("MAXSCORE",-1,weight&&scoring.weightIdentifier,category)));outcomeHelper.addOutcome(model,outcome,processingRule)}function addRatioOutcomes(model,identifier,identifierTotal,identifierMax){var outcome=outcomeHelper.createOutcome(identifier,baseTypeHelper.FLOAT),outcomeCondition=processingRuleHelper.outcomeCondition(processingRuleHelper.outcomeIf(processingRuleHelper.isNull(processingRuleHelper.variable(identifierMax)),processingRuleHelper.setOutcomeValue(identifier,processingRuleHelper.baseValue(0,baseTypeHelper.FLOAT))),processingRuleHelper.outcomeElse(processingRuleHelper.setOutcomeValue(identifier,processingRuleHelper.divide(processingRuleHelper.variable(identifierTotal),processingRuleHelper.variable(identifierMax)))));outcomeHelper.addOutcome(model,outcome),outcomeHelper.addOutcomeProcessing(model,outcomeCondition)}function addCutScoreOutcomes(model,identifier,scoreIdentifier,countIdentifier,cutScore){var outcome=outcomeHelper.createOutcome(identifier,baseTypeHelper.BOOLEAN),processingRule=processingRuleHelper.setOutcomeValue(identifier,processingRuleHelper.gte(processingRuleHelper.divide(processingRuleHelper.variable(scoreIdentifier),processingRuleHelper.variable(countIdentifier)),processingRuleHelper.baseValue(cutScore,baseTypeHelper.FLOAT)));outcomeHelper.addOutcome(model,outcome,processingRule)}function addGlobalCutScoreOutcomes(model,identifier,ratioIdentifier,cutScore){var outcome=outcomeHelper.createOutcome(identifier,baseTypeHelper.BOOLEAN),processingRule=processingRuleHelper.setOutcomeValue(identifier,processingRuleHelper.gte(processingRuleHelper.variable(ratioIdentifier),processingRuleHelper.baseValue(cutScore,baseTypeHelper.FLOAT)));outcomeHelper.addOutcome(model,outcome,processingRule)}function addFeedbackScoreOutcomes(model,identifier,variable,passed,notPassed){var type=baseTypeHelper.IDENTIFIER,outcome=outcomeHelper.createOutcome(identifier,type),processingRule=processingRuleHelper.outcomeCondition(processingRuleHelper.outcomeIf(processingRuleHelper.match(processingRuleHelper.variable(variable),processingRuleHelper.baseValue(!0,baseTypeHelper.BOOLEAN)),processingRuleHelper.setOutcomeValue(identifier,processingRuleHelper.baseValue(passed,type))),processingRuleHelper.outcomeElse(processingRuleHelper.setOutcomeValue(identifier,processingRuleHelper.baseValue(notPassed,type))));outcomeHelper.addOutcome(model,outcome),outcomeHelper.addOutcomeProcessing(model,processingRule)}function formatCategoryOutcome(category,template){return format(template,category.toUpperCase())}function belongToRecipe(identifier,recipe,onlyCategories){var match=!1;return recipe.signature&&recipe.signature.test(identifier)&&(match=!0,onlyCategories&&_.forEach(recipe.outcomes,function(outcome){if(outcome.identifier===identifier||outcome.weighted&&outcome.weighted===identifier||outcome.feedback&&outcome.feedback===identifier)return match=!1,!1})),match}function matchRecipe(outcomeRecipe,outcomes,categories){function matchRecipeOutcome(recipe,identifier){var outcomeMatch=!1;return recipe.signature&&recipe.signature.test(identifier)&&_.forEach(recipe.outcomes,function(outcome){if(outcome.identifier!==identifier&&(!outcome.weighted||outcome.weighted&&outcome.weighted!==identifier)&&(!outcome.feedback||outcome.feedback&&outcome.feedback!==identifier)?categories&&_.forEach(categories,function(category){if(outcome.categoryIdentifier&&identifier===formatCategoryOutcome(category,outcome.categoryIdentifier)?outcomeMatch=!0:outcome.categoryWeighted&&identifier===formatCategoryOutcome(category,outcome.categoryWeighted)?outcomeMatch=!0:outcome.categoryFeedback&&identifier===formatCategoryOutcome(category,outcome.categoryFeedback)&&(outcomeMatch=!0),outcomeMatch)return!1}):outcomeMatch=!0,outcomeMatch)return!1}),!outcomeMatch&&recipe.include&&(outcomeMatch=matchRecipeOutcome(outcomesRecipes[recipe.include],identifier)),outcomeMatch}var signatures=getSignatures(outcomeRecipe),match=!0;return _.forEach(outcomes,function(identifier){var signatureMatch=!1;if(_.forEach(signatures,function(signature){if(signature.test(identifier))return signatureMatch=!0,!1}),signatureMatch&&(match=matchRecipeOutcome(outcomeRecipe,identifier),!match))return!1}),match}function getSignatures(recipe){for(var signatures=[];recipe;)recipe.signature&&signatures.push(recipe.signature),recipe=recipe.include&&outcomesRecipes[recipe.include];return signatures}function getRecipes(recipe){for(var descriptors=[];recipe;)recipe.outcomes&&(descriptors=[].concat(recipe.outcomes,descriptors)),recipe=recipe.include&&outcomesRecipes[recipe.include];return descriptors}function getOutcomesRecipe(outcome){var identifier=outcomeHelper.getOutcomeIdentifier(outcome),mode=null;return _.forEach(outcomesRecipes,function(processingRecipe){if(belongToRecipe(identifier,processingRecipe))return mode=processingRecipe,!1}),mode}function listScoringModes(outcomes){var modes={};return _.forEach(outcomes,function(outcome){var recipe=getOutcomesRecipe(outcome);recipe&&(modes[recipe.key]=!0)}),_.keys(modes)}function handleCategories(modelOverseer){var model=modelOverseer.getModel();return!!(model.scoring&&model.scoring.categoryScore)}function hasCategoryOutcome(model){var categoryOutcomes=!1;return _.forEach(outcomeHelper.getOutcomeDeclarations(model),function(outcomeDeclaration){var identifier=outcomeHelper.getOutcomeIdentifier(outcomeDeclaration);_.forEach(outcomesRecipes,function(processingRecipe){if(belongToRecipe(identifier,processingRecipe,!0))return categoryOutcomes=!0,!1})}),categoryOutcomes}function getCutScore(model){var values=_(outcomeHelper.getOutcomeProcessingRules(model)).map(function(outcome){return outcomeHelper.getProcessingRuleProperty(outcome,"setOutcomeValue.gte.baseValue.value")}).compact().uniq().value();return _.isEmpty(values)&&(values=[defaultCutScore]),_Mathmax(0,_.max(values))}function getWeightIdentifier(model){var values=[];return outcomeHelper.eachOutcomeProcessingRuleExpressions(model,function(processingRule){"testVariables"===processingRule["qti-type"]&&processingRule.weightIdentifier&&values.push(processingRule.weightIdentifier)}),values=_(values).compact().uniq().value(),values.length?values[0]:""}function getOutcomeProcessing(modelOverseer){var model=modelOverseer.getModel(),outcomeDeclarations=outcomeHelper.getOutcomeDeclarations(model),outcomeRules=outcomeHelper.getOutcomeProcessingRules(model),declarations=listScoringModes(outcomeDeclarations),processing=listScoringModes(outcomeRules),diff=_.difference(declarations,processing),count=_.size(declarations),outcomeProcessing="custom",included;return count===_.size(processing)&&(count?_.isEmpty(diff)&&(1<count&&(included=[],_.forEach(declarations,function(mode){outcomesRecipes[mode]&&outcomesRecipes[mode].include&&included.push(outcomesRecipes[mode].include)}),processing=_.difference(processing,included),count=_.size(processing)),1===count&&(outcomeProcessing=processing[0],!matchRecipe(outcomesRecipes[outcomeProcessing],modelOverseer.getOutcomesNames(),modelOverseer.getCategories())&&(outcomeProcessing="custom"))):outcomeProcessing="none"),outcomeProcessing}function detectScoring(modelOverseer){var model=modelOverseer.getModel();return{modes:processingModes,scoreIdentifier:"SCORE",weightIdentifier:getWeightIdentifier(model),cutScore:getCutScore(model),categoryScore:hasCategoryOutcome(model),outcomeProcessing:getOutcomeProcessing(modelOverseer)}}function removeScoring(model){var scoringOutcomes=_.indexBy(outcomeHelper.listOutcomes(model,getOutcomesRecipe),function(outcome){return outcome});outcomeHelper.removeOutcomes(model,function(outcome){function browseExpressions(processingRule){_.isArray(processingRule)?_.forEach(processingRule,browseExpressions):processingRule&&(scoringOutcomes[outcomeHelper.getOutcomeIdentifier(processingRule)]&&(match=!0),!match&&processingRule.expression&&browseExpressions(processingRule.expression),!match&&processingRule.expressions&&browseExpressions(processingRule.expressions),!match&&processingRule.outcomeRules&&browseExpressions(processingRule.outcomeRules),!match&&processingRule.outcomeIf&&browseExpressions(processingRule.outcomeIf),!match&&processingRule.outcomeElse&&browseExpressions(processingRule.outcomeElse))}var match=!1;return"outcomeCondition"===outcome["qti-type"]?browseExpressions(outcome):match=!!scoringOutcomes[outcomeHelper.getOutcomeIdentifier(outcome)],match})}function getOutcomes(model){return{outcomeDeclarations:[].concat(outcomeHelper.getOutcomeDeclarations(model)),outcomeProcessing:{outcomeRules:[].concat(outcomeHelper.getOutcomeProcessingRules(model))}}}var defaultCutScore=.5,defaultScoreIdentifier="SCORE",processingModes={none:{key:"none",label:__("None"),description:__("No outcome processing. Erase the existing rules, if any.")},custom:{key:"custom",label:__("Custom"),description:__("Custom outcome processing. No changes will be made to the existing rules.")},total:{key:"total",label:__("Total score"),description:__("The score will be processed for the entire test. A sum of all SCORE outcomes will be computed, the result will take place in the SCORE_TOTAL outcome.")+" "+__("If the category option is set, the score will also be processed per categories, and each results will take place in the SCORE_xxx outcome, where xxx is the name of the category.")},cut:{key:"cut",label:__("Cut score"),description:__("The score will be processed for the entire test. A sum of all SCORE outcomes will be computed and divided by the sum of MAX SCORE, the result will be compared to the cut score (or pass ratio), then the PASS_TOTAL outcome will be set accordingly.")+" "+__("If the category option is set, the score will also be processed per categories, and each results will take place in the PASS_xxx outcome, where xxx is the name of the category.")}},outcomesRecipes={none:{key:"none",clean:!0},custom:{key:"custom",clean:!1},total:{key:"total",signature:/^SCORE_([a-zA-Z][a-zA-Z0-9_\.-]*)$/,outcomes:[{writer:"total",identifier:"SCORE_TOTAL",weighted:"SCORE_TOTAL_WEIGHTED",categoryIdentifier:"SCORE_CATEGORY_%s",categoryWeighted:"SCORE_CATEGORY_WEIGHTED_%s"},{writer:"max",identifier:"SCORE_TOTAL_MAX",weighted:"SCORE_TOTAL_MAX_WEIGHTED",categoryIdentifier:"SCORE_CATEGORY_MAX_%s",categoryWeighted:"SCORE_CATEGORY_WEIGHTED_MAX_%s"},{writer:"ratio",identifier:"SCORE_RATIO",weighted:"SCORE_RATIO_WEIGHTED",scoreIdentifier:{total:"SCORE_TOTAL",max:"SCORE_TOTAL_MAX"},scoreWeighted:{total:"SCORE_TOTAL_WEIGHTED",max:"SCORE_TOTAL_MAX_WEIGHTED"}}],clean:!0},cut:{key:"cut",include:"total",signature:/^PASS_([a-zA-Z][a-zA-Z0-9_\.-]*)$/,outcomes:[{writer:"cut",identifier:"PASS_ALL",feedback:"PASS_ALL_RENDERING",feedbackOk:"passed",feedbackFailed:"not_passed",categoryIdentifier:"PASS_CATEGORY_%s",categoryFeedback:"PASS_CATEGORY_%s_RENDERING"}],clean:!0}},outcomesWriters={ratio:function writerRatio(descriptor,scoring,outcomes){addRatioOutcomes(outcomes,descriptor.identifier,descriptor.scoreIdentifier.total,descriptor.scoreIdentifier.max),scoring.weightIdentifier&&addRatioOutcomes(outcomes,descriptor.weighted,descriptor.scoreWeighted.total,descriptor.scoreWeighted.max)},total:function writerTotal(descriptor,scoring,outcomes,categories){addTotalScoreOutcomes(outcomes,scoring,descriptor.identifier,!1),descriptor.weighted&&scoring.weightIdentifier&&addTotalScoreOutcomes(outcomes,scoring,descriptor.weighted,!0),descriptor.categoryIdentifier&&categories&&_.forEach(categories,function(category){addTotalScoreOutcomes(outcomes,scoring,formatCategoryOutcome(category,descriptor.categoryIdentifier),!1,category),descriptor.categoryWeighted&&scoring.weightIdentifier&&addTotalScoreOutcomes(outcomes,scoring,formatCategoryOutcome(category,descriptor.categoryWeighted),!0,category)})},max:function writerMax(descriptor,scoring,outcomes,categories){addMaxScoreOutcomes(outcomes,scoring,descriptor.identifier,!1),descriptor.weighted&&scoring.weightIdentifier&&addMaxScoreOutcomes(outcomes,scoring,descriptor.weighted,!0),descriptor.categoryIdentifier&&categories&&_.forEach(categories,function(category){addMaxScoreOutcomes(outcomes,scoring,formatCategoryOutcome(category,descriptor.categoryIdentifier),!1,category),descriptor.categoryWeighted&&scoring.weightIdentifier&&addMaxScoreOutcomes(outcomes,scoring,formatCategoryOutcome(category,descriptor.categoryWeighted),!0,category)})},cut:function writerCut(descriptor,scoring,outcomes,categories){var cutScore=scoring.cutScore,totalModeOutcomes=outcomesRecipes.total.outcomes,total=_.find(totalModeOutcomes,{writer:"total"}),max=_.find(totalModeOutcomes,{writer:"max"}),ratio=_.find(totalModeOutcomes,{writer:"ratio"}),whichOutcome=scoring.weightIdentifier?"weighted":"identifier",ratioIdentifier=ratio[whichOutcome];return addGlobalCutScoreOutcomes(outcomes,descriptor.identifier,ratioIdentifier,cutScore),descriptor.feedback&&addFeedbackScoreOutcomes(outcomes,descriptor.feedback,descriptor.identifier,descriptor.feedbackOk,descriptor.feedbackFailed),descriptor.categoryIdentifier&&categories&&_.forEach(categories,function(category){var categoryOutcome=scoring.weightIdentifier?"categoryWeighted":"categoryIdentifier",categoryOutcomeIdentifier=formatCategoryOutcome(category,descriptor.categoryIdentifier),categoryScoreIdentifier=formatCategoryOutcome(category,total[categoryOutcome]),categoryCountIdentifier=formatCategoryOutcome(category,max[categoryOutcome]);addCutScoreOutcomes(outcomes,categoryOutcomeIdentifier,categoryScoreIdentifier,categoryCountIdentifier,cutScore),descriptor.categoryFeedback&&addFeedbackScoreOutcomes(outcomes,formatCategoryOutcome(category,descriptor.categoryFeedback),categoryOutcomeIdentifier,descriptor.feedbackOk,descriptor.feedbackFailed)}),outcomes}},scoringHelper={init:function init(modelOverseer){var model;if(!modelOverseer||!_.isFunction(modelOverseer.getModel))throw new TypeError("You must provide a valid modelOverseer");model=modelOverseer.getModel(),model.scoring=detectScoring(modelOverseer),modelOverseer.on("scoring-change category-change delete",function(){modelOverseer.trigger("scoring-generate",scoringHelper.generate(modelOverseer))}).on("scoring-generate",function(outcomes){outcomeHelper.replaceOutcomes(model,outcomes),modelOverseer.trigger("scoring-write",model)}).trigger("scoring-init",model)},generate:function generate(modelOverseer){var model,scoring,outcomes,outcomeRecipe,recipes,categories;if(!modelOverseer||!_.isFunction(modelOverseer.getModel))throw new TypeError("You must provide a valid modelOverseer");if(model=modelOverseer.getModel(),scoring=model.scoring,outcomes=getOutcomes(model),scoring)if(outcomeRecipe=outcomesRecipes[scoring.outcomeProcessing],outcomeRecipe)outcomeRecipe.clean&&removeScoring(outcomes),recipes=getRecipes(outcomeRecipe),handleCategories(modelOverseer)&&(categories=modelOverseer.getCategories()),_.forEach(recipes,function(recipe){var writer=outcomesWriters[recipe.writer];writer(recipe,scoring,outcomes,categories)});else throw new Error(`Unknown score processing mode: ${scoring.outcomeProcessing}`);return outcomes}};return scoringHelper}),define("taoQtiTest/controller/creator/helpers/changeTracker",["jquery","lodash","i18n","lib/uuid","core/eventifier","ui/dialog","ui/feedback"],function($,_,__,uuid,eventifier,dialog,feedback){"use strict";function changeTrackerFactory(container,testCreator){let wrapperSelector=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"body";const eventNS=`.ct-${uuid(8,16)}`;let asking=!1,originalTest;const changeTracker=eventifier({init(){return originalTest=this.getSerializedTest(),this},install(){return this.init(),asking=!1,$(window).on(`beforeunload${eventNS}`,()=>{if(!asking&&this.hasChanged())return messages.leave}).on("popstate",this.uninstall),$(wrapperSelector).on(`click${eventNS}`,e=>{!$.contains(container,e.target)&&this.hasChanged()&&"icon-close"!==e.target.classList[0]&&(e.stopImmediatePropagation(),e.preventDefault(),testCreator.isTestHasErrors()?this.confirmBefore("leaveWhenInvalid").then(whatToDo=>{this.ifWantSave(whatToDo),this.uninstall(),e.target.click()}).catch(()=>{}):this.confirmBefore("exit").then(whatToDo=>{this.ifWantSave(whatToDo),this.uninstall(),e.target.click()}).catch(()=>{}))}),testCreator.on(`ready${eventNS} saved${eventNS}`,()=>this.init()).before(`creatorclose${eventNS}`,()=>{let leavingStatus="leave";return testCreator.isTestHasErrors()&&(leavingStatus="leaveWhenInvalid"),this.confirmBefore(leavingStatus).then(whatToDo=>{this.ifWantSave(whatToDo)})}).before(`preview${eventNS}`,()=>this.confirmBefore("preview").then(whatToDo=>{testCreator.isTestHasErrors()?feedback().warning(`${__("The test cannot be saved because it currently contains invalid settings.\nPlease fix the invalid settings and try again.")}`):this.ifWantSave(whatToDo)})).before(`exit${eventNS}`,()=>this.uninstall()),this},ifWantSave(whatToDo){whatToDo&&whatToDo.ifWantSave&&testCreator.trigger("save")},uninstall(){return $(window.document).off(eventNS),$(window).off(eventNS),$(wrapperSelector).off(eventNS),testCreator.off(eventNS),this},confirmBefore(message){return message=messages[message]||message,new Promise((resolve,reject)=>{if(asking)return reject();if(!this.hasChanged())return resolve();asking=!0;let confirmDlg;confirmDlg=message===messages.leaveWhenInvalid?dialog({message:message,buttons:buttonsYesNo,autoRender:!0,autoDestroy:!0,onDontsaveBtn:()=>resolve({ifWantSave:!1}),onCancelBtn:()=>{confirmDlg.hide(),reject({cancel:!0})}}):dialog({message:message,buttons:buttonsCancelSave,autoRender:!0,autoDestroy:!0,onSaveBtn:()=>resolve({ifWantSave:!0}),onDontsaveBtn:()=>resolve({ifWantSave:!1}),onCancelBtn:()=>{confirmDlg.hide(),reject({cancel:!0})}}),confirmDlg.on("closed.modal",()=>asking=!1)})},hasChanged(){const currentTest=this.getSerializedTest();return originalTest!==currentTest||null===currentTest&&null===originalTest},getSerializedTest(){let serialized="";try{serialized=JSON.stringify(testCreator.getModelOverseer().getModel()),serialized=serialized.replace(/ {2,}/g," ")}catch(err){serialized=null}return serialized}});return changeTracker.install()}const messages={preview:__("The test needs to be saved before it can be previewed."),leave:__("The test has unsaved changes, are you sure you want to leave?"),exit:__("The test has unsaved changes, would you like to save it?"),leaveWhenInvalid:__("If you leave the test, your changes will not be saved due to invalid test settings. Are you sure you wish to leave?")},buttonsYesNo=[{id:"dontsave",type:"regular",label:__("YES"),close:!0},{id:"cancel",type:"regular",label:__("NO"),close:!0}],buttonsCancelSave=[{id:"dontsave",type:"regular",label:__("Don't save"),close:!0},{id:"cancel",type:"regular",label:__("Cancel"),close:!0},{id:"save",type:"info",label:__("Save"),close:!0}];return changeTrackerFactory}),define("taoQtiTest/controller/creator/creator",["module","jquery","lodash","helpers","i18n","services/features","ui/feedback","core/databindcontroller","taoQtiTest/controller/creator/qtiTestCreator","taoQtiTest/controller/creator/views/item","taoQtiTest/controller/creator/views/test","taoQtiTest/controller/creator/views/testpart","taoQtiTest/controller/creator/views/section","taoQtiTest/controller/creator/views/itemref","taoQtiTest/controller/creator/encoders/dom2qti","taoQtiTest/controller/creator/templates/index","taoQtiTest/controller/creator/helpers/qtiTest","taoQtiTest/controller/creator/helpers/scoring","taoQtiTest/controller/creator/helpers/categorySelector","taoQtiTest/controller/creator/helpers/validators","taoQtiTest/controller/creator/helpers/changeTracker","taoQtiTest/controller/creator/helpers/featureVisibility","taoTests/previewer/factory","core/logger","taoQtiTest/controller/creator/views/subsection"],function(module,$,_,helpers,__,features,feedback,DataBindController,qtiTestCreatorFactory,itemView,testView,testPartView,sectionView,itemrefView,Dom2QtiEncoder,templates,qtiTestHelper,scoringHelper,categorySelector,validators,changeTracker,featureVisibility,previewerFactory,loggerFactory,subsectionView){"use strict";const logger=loggerFactory("taoQtiTest/controller/creator"),Controller={routes:{},start(options){const $container=$("#test-creator"),$saver=$("#saver"),$previewer=$("#previewer"),$back=$("#authoringBack");let creatorContext,binder,binderOptions,modelOverseer;this.identifiers=[],options=_.merge(module.config(),options||{}),options.routes=options.routes||{},options.labels=options.labels||{},options.categoriesPresets=featureVisibility.filterVisiblePresets(options.categoriesPresets)||{},options.guidedNavigation=!0===options.guidedNavigation,categorySelector.setPresets(options.categoriesPresets),$back.on("click",e=>{e.preventDefault(),creatorContext.trigger("creatorclose")}),Object.keys(options.labels).length||$previewer.attr("disabled",!0).addClass("disabled"),$previewer.on("click",e=>{e.preventDefault(),$previewer.hasClass("disabled")||creatorContext.trigger("preview")});const isTestContainsItems=()=>$container.find(".test-content").find(".itemref").length?($previewer.attr("disabled",!1).removeClass("disabled"),!0):($previewer.attr("disabled",!0).addClass("disabled"),!1);itemView($(".test-creator-items .item-selection",$container)),$container.on("change.binder delete.binder",(e,model)=>{"binder"===e.namespace&&model&&modelOverseer&&modelOverseer.trigger(e.type,model)}),binderOptions=_.merge(options.routes,{filters:{isItemRef:value=>qtiTestHelper.filterQtiType(value,"assessmentItemRef"),isSection:value=>qtiTestHelper.filterQtiType(value,"assessmentSection")},encoders:{dom2qti:Dom2QtiEncoder},templates:templates,beforeSave(model){qtiTestHelper.addMissingQtiType(model),qtiTestHelper.consolidateModel(model);try{validators.validateModel(model)}catch(err){return $saver.attr("disabled",!1).removeClass("disabled"),feedback().error(`${__("The test has not been saved.")} + ${err}`),!1}return!0}}),binder=DataBindController.takeControl($container,binderOptions).get(model=>{creatorContext=qtiTestCreatorFactory($container,{uri:options.uri,labels:options.labels,routes:options.routes,guidedNavigation:options.guidedNavigation}),creatorContext.setTestModel(model),modelOverseer=creatorContext.getModelOverseer(),scoringHelper.init(modelOverseer),validators.registerValidators(modelOverseer),testView(creatorContext),testPartView.listenActionState(),sectionView.listenActionState(),subsectionView.listenActionState(),itemrefView.listenActionState(),changeTracker($container.get()[0],creatorContext,".content-wrap"),creatorContext.on("save",function(){$saver.hasClass("disabled")||($saver.prop("disabled",!0).addClass("disabled"),binder.save(function(){$saver.prop("disabled",!1).removeClass("disabled"),feedback().success(__("Test Saved")),isTestContainsItems(),creatorContext.trigger("saved")},function(){$saver.prop("disabled",!1).removeClass("disabled")}))}),creatorContext.on("preview",function(){if(isTestContainsItems()&&!creatorContext.isTestHasErrors()){const saveUrl=options.routes.save,testUri=saveUrl.slice(saveUrl.indexOf("uri=")+4),config=module.config();return previewerFactory(config.provider,decodeURIComponent(testUri),{readOnly:!1,fullPage:!0,pluginsOptions:config.pluginsOptions}).catch(err=>{logger.error(err),feedback().error(__("Test Preview is not installed, please contact to your administrator."))})}}),creatorContext.on("creatorclose",()=>{creatorContext.trigger("exit"),window.history.back()})}),$saver.on("click",function(event){creatorContext.isTestHasErrors()?(event.preventDefault(),feedback().warning(__("The test cannot be saved because it currently contains invalid settings.\nPlease fix the invalid settings and try again."))):creatorContext.trigger("save")})}};return Controller}),define("taoQtiTest/controller/creator/helpers/ckConfigurator",["ui/ckeditor/ckConfigurator","mathJax"],function(ckConfigurator){"use strict";var getConfig=function(editor,toolbarType,options){return options=options||{},options.underline=!0,ckConfigurator.getConfig(editor,toolbarType,options)};return{getConfig:getConfig}}),define("taoQtiTest/controller/routes",[],function(){"use strict";return{Creator:{css:"creator",actions:{index:"controller/creator/creator"}},XmlEditor:{actions:{edit:"controller/content/edit"}}}}),define("css!taoQtiTestCss/new-test-runner",[],function(){}),define("taoQtiTest/controller/runner/runner",["jquery","lodash","i18n","context","module","core/router","core/logger","layout/loading-bar","ui/feedback","util/url","util/locale","taoTests/runner/providerLoader","taoTests/runner/runner","css!taoQtiTestCss/new-test-runner"],function($,_,__,context,module,router,loggerFactory,loadingBar,feedback,urlUtil,locale,providerLoader,runner){"use strict";const requiredOptions=["testDefinition","testCompilation","serviceCallId","bootstrap","options","providers"];return{start(config){let exitReason;const $container=$(".runner"),logger=loggerFactory("controller/runner",{serviceCallId:config.serviceCallId,plugins:config&&config.providers&&Object.keys(config.providers.plugins)});let preventFeedback=!1,errorFeedback=null;const exit=function exit(reason,level){let url=config.options.exitUrl;const params={};reason&&(!level&&(level="warning"),params[level]=reason,url=urlUtil.build(url,params)),window.location=url},onError=function onError(err,displayMessage){onFeedback(err,displayMessage,"error")},onWarning=function onWarning(err,displayMessage){onFeedback(err,displayMessage,"warning")},onFeedback=function onFeedback(err,displayMessage,type){const typeMap={warning:{logger:"warn",feedback:"warning"},error:{logger:"error",feedback:"error"}},loggerByType=logger[typeMap[type].logger],feedbackByType=feedback()[typeMap[type].feedback];return displayMessage=displayMessage||err.message,_.isString(displayMessage)||(displayMessage=JSON.stringify(displayMessage)),loadingBar.stop(),loggerByType({displayMessage:displayMessage},err),"error"===type&&(403===err.code||500===err.code)?(displayMessage=`${__("An error occurred during the test, please content your administrator.")} ${displayMessage}`,exit(displayMessage,"error")):void(!preventFeedback&&(errorFeedback=feedbackByType(displayMessage,{timeout:-1})))},moduleConfig=module.config();return loadingBar.start(),$(".delivery-scope").attr({dir:locale.getLanguageDirection(context.locale)}),requiredOptions.every(option=>"undefined"!=typeof config[option])?void(moduleConfig&&_.isArray(moduleConfig.extraRoutes)&&moduleConfig.extraRoutes.length&&router.dispatch(moduleConfig.extraRoutes),config.provider=Object.assign(config.provider||{},{runner:"qti"}),providerLoader(config.providers,context.bundle).then(function(results){const testRunnerConfig=_.omit(config,["providers"]);if(testRunnerConfig.renderTo=$container,results.proxy&&"function"==typeof results.proxy.getAvailableProviders){const loadedProxies=results.proxy.getAvailableProviders();testRunnerConfig.provider.proxy=loadedProxies[0]}logger.debug({config:testRunnerConfig,providers:config.providers},"Start test runner"),runner(config.provider.runner,results.plugins,testRunnerConfig).on("error",onError).on("warning",onWarning).on("ready",function(){_.defer(function(){$container.removeClass("hidden")})}).on("pause",function(data){data&&data.reason&&(exitReason=data.reason)}).after("destroy",function(){this.removeAllListeners(),exit(exitReason)}).on("disablefeedbackalerts",function(){errorFeedback&&errorFeedback.close(),preventFeedback=!0}).on("enablefeedbackalerts",function(){preventFeedback=!1}).init()}).catch(function(err){onError(err,__("An error occurred during the test initialization!"))})):onError(new TypeError(__("Missing required configuration option %s",name)))}}}),define("taoQtiTest/testRunner/actionBarHook",["jquery","lodash","core/errorHandler","core/promise"],function($,_,errorHandler,Promise){"use strict";function isValidConfig(toolconfig){return!!(_.isObject(toolconfig)&&toolconfig.hook)}function triggerItemLoaded(tool){tool&&tool.itemLoaded&&tool.itemLoaded()}function initQtiTool($toolsContainer,id,toolconfig,testContext,testRunner){return itemIsLoaded=!1,tools[id]=null,_.isString(toolconfig)&&(toolconfig={hook:toolconfig}),new Promise(function(resolve){isValidConfig(toolconfig)?require([toolconfig.hook],function(hook){var $button,$existingBtn;isValidHook(hook)?(hook.init(id,toolconfig,testContext,testRunner),$existingBtn=$toolsContainer.children("[data-control=\""+id+"\"]"),$existingBtn.length&&(hook.clear($existingBtn),$existingBtn.remove()),hook.isVisible()&&(tools[id]=hook,$button=hook.render(),_appendInOrder($toolsContainer,$button),$button.trigger("ready.actionBarHook",[hook]),itemIsLoaded&&triggerItemLoaded(hook)),resolve(hook)):(errorHandler.throw(".actionBarHook","invalid hook format"),resolve(null))},function(e){errorHandler.throw(".actionBarHook","the hook amd module cannot be found"),resolve(null)}):(errorHandler.throw(".actionBarHook","invalid tool config format"),resolve(null))})}function _appendInOrder($container,$button){var order=$button.data("order"),$after,$before;"last"===order?$container.append($button):"first"===order?$container.prepend($button):(order=_.parseInt(order),_.isNaN(order)?$container.append($button):($container.children(".action").each(function(){var $btn=$(this),_order=$btn.data("order");if("last"===_order)$before=$btn,$after=null;else if("first"===_order)$before=null,$after=$btn;else{if(_order=_.parseInt(_order),_.isNaN(_order)||_order>order)return $before=$btn,$after=null,!1;_order===order?$after=$btn:_order<order&&($after=$btn,$before=null)}}),$after?$after.after($button):$before?$before.before($button):$container.append($button)))}function isValidHook(hook){return _.isObject(hook)&&_(["init","render","clear","isVisible"]).reduce(function(result,method){return result&&_.isFunction(hook[method])},!0)}var _ns=".actionBarHook",$doc=$(document),tools={},itemIsLoaded=!1;return $doc.off(".actionBarHook").on("serviceloaded.actionBarHook",function(){itemIsLoaded=!0,_.forEach(tools,function(tool){triggerItemLoaded(tool)})}),{isValid:isValidConfig,initQtiTool:initQtiTool}}),define("taoQtiTest/testRunner/actionBarTools",["jquery","lodash","core/eventifier","core/promise","taoQtiTest/testRunner/actionBarHook"],function($,_,eventifier,Promise,actionBarHook){"use strict";var actionBarTools={register:function register(tools){var registerTools=tools||{};this.trigger("beforeregister",registerTools,this),registeredQtiTools=registerTools,this.trigger("afterregister",registerTools,this)},getRegisteredTools:function getRegisteredTools(){return registeredQtiTools||{}},getRegistered:function getRegistered(id){return registeredQtiTools&&registeredQtiTools[id]},isRegistered:function isRegistered(id){return!!(registeredQtiTools&&registeredQtiTools[id])},get:function get(id){return qtiTools&&qtiTools[id]},list:function list(){return _.values(qtiTools||{})},render:function render(container,testContext,testRunner,callback){var self=this,$container=$(container),promises=[];this.trigger("beforerender",$container,testContext,testRunner,this),_.forIn(this.getRegisteredTools(),function(toolconfig,id){promises.push(actionBarHook.initQtiTool($container,id,toolconfig,testContext,testRunner))}),Promise.all(promises).then(function(values){var tools=[];qtiTools={},_.forEach(values,function(tool){tool&&(tools.push(tool),qtiTools[tool.getId()]=tool)}),_.isFunction(callback)&&callback.call(self,tools,$container,testContext,testRunner,self),self.trigger("afterrender",tools,$container,testContext,testRunner,self)})}},registeredQtiTools,qtiTools;return eventifier(actionBarTools)}),define("tpl!taoQtiTest/testRunner/tpl/navigator",["handlebars"],function(hb){return hb.template({1:function(container,depth0,helpers,partials,data){return" hidden"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"<aside class=\"test-sidebar test-sidebar-"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"region")||(null==depth0?depth0:lookupProperty(depth0,"region")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"region",hash:{},data:data,loc:{start:{line:1,column:40},end:{line:1,column:50}}}):helper))+" flex-container-navi qti-navigator"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"hidden"),{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:84},end:{line:1,column:112}}}))?"":stack1)+"\">\n            <div class=\"qti-navigator-collapsible\">\n                <span class=\"qti-navigator-collapse icon icon-left\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Collapse the review panel",{name:"__",hash:{},data:data,loc:{start:{line:3,column:75},end:{line:3,column:109}}}))+"\"></span>\n                <span class=\"qti-navigator-expand icon icon-right\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Expand the review panel",{name:"__",hash:{},data:data,loc:{start:{line:4,column:74},end:{line:4,column:106}}}))+"\"></span>\n            </div>\n\n            <div class=\"qti-navigator-info collapsible\">\n                <span class=\"qti-navigator-label\">\n                    <span class=\"qti-navigator-text\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Test status",{name:"__",hash:{},data:data,loc:{start:{line:9,column:53},end:{line:9,column:73}}}))+"</span>\n                    <span class=\"icon-up\"></span>\n                    <span class=\"icon-down\"></span>\n                </span>\n                <ul class=\"collapsible-panel plain\">\n                    <li class=\"qti-navigator-viewed\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Viewed items",{name:"__",hash:{},data:data,loc:{start:{line:14,column:60},end:{line:14,column:81}}}))+"\">\n                        <span class=\"qti-navigator-label\">\n                            <span class=\"qti-navigator-icon icon-viewed\"></span>\n                            <span class=\"qti-navigator-text\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Viewed",{name:"__",hash:{},data:data,loc:{start:{line:17,column:61},end:{line:17,column:76}}}))+"</span>\n                            <span class=\"qti-navigator-counter\">-/-</span>\n                        </span>\n                    </li>\n                    <li class=\"qti-navigator-answered\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Completed items",{name:"__",hash:{},data:data,loc:{start:{line:21,column:62},end:{line:21,column:86}}}))+"\">\n                        <span class=\"qti-navigator-label\">\n                            <span class=\"qti-navigator-icon icon-answered\"></span>\n                            <span class=\"qti-navigator-text\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Answered",{name:"__",hash:{},data:data,loc:{start:{line:24,column:61},end:{line:24,column:78}}}))+"</span>\n                            <span class=\"qti-navigator-counter\">-/-</span>\n                        </span>\n                    </li>\n                    <li class=\"qti-navigator-unanswered\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Unanswered items",{name:"__",hash:{},data:data,loc:{start:{line:28,column:64},end:{line:28,column:89}}}))+"\">\n                        <span class=\"qti-navigator-label\">\n                            <span class=\"qti-navigator-icon icon-unanswered\"></span>\n                            <span class=\"qti-navigator-text\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Unanswered",{name:"__",hash:{},data:data,loc:{start:{line:31,column:61},end:{line:31,column:80}}}))+"</span>\n                            <span class=\"qti-navigator-counter\">-/-</span>\n                        </span>\n                    </li>\n                    <li class=\"qti-navigator-flagged\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Items marked for later review",{name:"__",hash:{},data:data,loc:{start:{line:35,column:61},end:{line:35,column:99}}}))+"\">\n                        <span class=\"qti-navigator-label\">\n                            <span class=\"qti-navigator-icon icon-flagged\"></span>\n                            <span class=\"qti-navigator-text\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Flagged",{name:"__",hash:{},data:data,loc:{start:{line:38,column:61},end:{line:38,column:77}}}))+"</span>\n                            <span class=\"qti-navigator-counter\">-/-</span>\n                        </span>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"qti-navigator-filters\">\n                <ul role=\"tablist\" class=\"plain clearfix\">\n                    <li role=\"tab\" aria-selected=\"true\" class=\"qti-navigator-filter active\" data-mode=\"all\">\n                        <span title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Reset filters",{name:"__",hash:{},data:data,loc:{start:{line:48,column:37},end:{line:48,column:59}}}))+"\" class=\"qti-navigator-tab\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"All",{name:"__",hash:{},data:data,loc:{start:{line:48,column:87},end:{line:48,column:99}}}))+"</span>\n                    </li>\n                    <li role=\"tab\" class=\"qti-navigator-filter\" data-mode=\"unanswered\">\n                        <span class=\"icon-unanswered qti-navigator-tab\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Only display the unanswered items",{name:"__",hash:{},data:data,loc:{start:{line:51,column:79},end:{line:51,column:121}}}))+"\"></span>\n                    </li>\n                    <li role=\"tab\" class=\"qti-navigator-filter\" data-mode=\"flagged\">\n                        <span class=\"icon-flagged qti-navigator-tab\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Only display the items marked for review",{name:"__",hash:{},data:data,loc:{start:{line:54,column:76},end:{line:54,column:125}}}))+"\"></span>\n                    </li>\n                </ul>\n            </div>\n\n            <nav class=\"qti-navigator-tree\">\n            </nav>\n\n            <div id=\"qti-navigator-linear\" class=\"qti-navigator-linear\">\n                <span class=\"icon icon-info\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"In this part of the test navigation is not allowed.",{name:"__",hash:{},data:data,loc:{start:{line:63,column:52},end:{line:63,column:112}}}))+"\"></span>\n                <p class=\"qti-navigator-message\">\n                    "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"In this part of the test navigation is not allowed.",{name:"__",hash:{},data:data,loc:{start:{line:65,column:20},end:{line:65,column:80}}}))+"\n                </p>\n            </div>\n        </aside>"},useData:!0})}),define("tpl!taoQtiTest/testRunner/tpl/navigatorTree",["handlebars"],function(hb){return hb.template({1:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"                    <li class=\"qti-navigator-part collapsible "+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"active"),{name:"if",hash:{},fn:container.program(2,data,0),inverse:container.program(4,data,0),data:data,loc:{start:{line:3,column:62},end:{line:3,column:106}}}))?"":stack1)+"\" data-id=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"id")||(null==depth0?depth0:lookupProperty(depth0,"id")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"id",hash:{},data:data,loc:{start:{line:3,column:117},end:{line:3,column:123}}}):helper))+"\">\n                        <span class=\"qti-navigator-label\" title=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"label")||(null==depth0?depth0:lookupProperty(depth0,"label")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"label",hash:{},data:data,loc:{start:{line:4,column:65},end:{line:4,column:74}}}):helper))+"\">\n                            <span class=\"qti-navigator-text\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"label")||(null==depth0?depth0:lookupProperty(depth0,"label")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"label",hash:{},data:data,loc:{start:{line:5,column:61},end:{line:5,column:70}}}):helper))+"</span>\n                            <span class=\"icon-up\"></span>\n                            <span class=\"icon-down\"></span>\n                        </span>\n"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==(stack1=null==depth0?depth0:lookupProperty(depth0,"sections"))?stack1:lookupProperty(stack1,"length"),{name:"if",hash:{},fn:container.program(6,data,0),inverse:container.program(29,data,0),data:data,loc:{start:{line:9,column:24},end:{line:44,column:31}}}))?"":stack1)+"                    </li>\n"},2:function(container,depth0,helpers,partials,data){return"active"},4:function(container,depth0,helpers,partials,data){return"collapsed"},6:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1;return"                        <ul class=\"qti-navigator-sections collapsible-panel plain\">\n"+(null==(stack1=lookupProperty(helpers,"each").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"sections"),{name:"each",hash:{},fn:container.program(7,data,0),inverse:container.noop,data:data,loc:{start:{line:11,column:28},end:{line:29,column:37}}}))?"":stack1)+"                        </ul>\n"},7:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"                            <li class=\"qti-navigator-section collapsible "+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"active"),{name:"if",hash:{},fn:container.program(2,data,0),inverse:container.program(4,data,0),data:data,loc:{start:{line:12,column:73},end:{line:12,column:117}}}))?"":stack1)+"\" data-id=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"id")||(null==depth0?depth0:lookupProperty(depth0,"id")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"id",hash:{},data:data,loc:{start:{line:12,column:128},end:{line:12,column:134}}}):helper))+"\">\n                                <span class=\"qti-navigator-label\" title=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"label")||(null==depth0?depth0:lookupProperty(depth0,"label")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"label",hash:{},data:data,loc:{start:{line:13,column:73},end:{line:13,column:82}}}):helper))+"\">\n                                    <span class=\"qti-navigator-text\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"label")||(null==depth0?depth0:lookupProperty(depth0,"label")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"label",hash:{},data:data,loc:{start:{line:14,column:69},end:{line:14,column:78}}}):helper))+"</span>\n                                    <span class=\"qti-navigator-counter\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"answered")||(null==depth0?depth0:lookupProperty(depth0,"answered")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"answered",hash:{},data:data,loc:{start:{line:15,column:72},end:{line:15,column:84}}}):helper))+"/"+container.escapeExpression(container.lambda(null==(stack1=null==depth0?depth0:lookupProperty(depth0,"items"))?stack1:lookupProperty(stack1,"length"),depth0))+"</span>\n                                </span>\n                                <ul class=\"qti-navigator-items collapsible-panel plain\">\n"+(null==(stack1=lookupProperty(helpers,"each").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"items"),{name:"each",hash:{},fn:container.program(8,data,0),inverse:container.noop,data:data,loc:{start:{line:18,column:36},end:{line:26,column:45}}}))?"":stack1)+"                                </ul>\n                            </li>\n"},8:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1,helper;return"                                    <li class=\"qti-navigator-item"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"active"),{name:"if",hash:{},fn:container.program(9,data,0),inverse:container.noop,data:data,loc:{start:{line:19,column:65},end:{line:19,column:93}}}))?"":stack1)+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"flagged"),{name:"if",hash:{},fn:container.program(11,data,0),inverse:container.noop,data:data,loc:{start:{line:19,column:93},end:{line:19,column:123}}}))?"":stack1)+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"answered"),{name:"if",hash:{},fn:container.program(13,data,0),inverse:container.noop,data:data,loc:{start:{line:19,column:123},end:{line:19,column:155}}}))?"":stack1)+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"viewed"),{name:"if",hash:{},fn:container.program(15,data,0),inverse:container.program(17,data,0),data:data,loc:{start:{line:19,column:155},end:{line:19,column:198}}}))?"":stack1)+"\" data-id=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"id")||(null==depth0?depth0:lookupProperty(depth0,"id")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"id",hash:{},data:data,loc:{start:{line:19,column:209},end:{line:19,column:215}}}):helper))+"\" data-position=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"position")||(null==depth0?depth0:lookupProperty(depth0,"position")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"position",hash:{},data:data,loc:{start:{line:19,column:232},end:{line:19,column:244}}}):helper))+"\">\n                                        <span class=\"qti-navigator-label truncate\" title=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"label")||(null==depth0?depth0:lookupProperty(depth0,"label")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"label",hash:{},data:data,loc:{start:{line:20,column:90},end:{line:20,column:99}}}):helper))+"\">\n                                            <span class=\"qti-navigator-icon icon-"+(null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"flagged"),{name:"if",hash:{},fn:container.program(19,data,0),inverse:container.program(21,data,0),data:data,loc:{start:{line:21,column:81},end:{line:21,column:198}}}))?"":stack1)+"\"></span>\n                                            <span class=\"qti-navigator-number\">"+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"index")||data&&lookupProperty(data,"index"))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"index",hash:{},data:data,loc:{start:{line:22,column:79},end:{line:22,column:89}}}):helper))+"</span>\n                                            "+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"label")||(null==depth0?depth0:lookupProperty(depth0,"label")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"label",hash:{},data:data,loc:{start:{line:23,column:44},end:{line:23,column:53}}}):helper))+"\n                                        </span>\n                                    </li>\n"},9:function(container,depth0,helpers,partials,data){return" active"},11:function(container,depth0,helpers,partials,data){return" flagged"},13:function(container,depth0,helpers,partials,data){return" answered"},15:function(container,depth0,helpers,partials,data){return" viewed"},17:function(container,depth0,helpers,partials,data){return" unseen"},19:function(container,depth0,helpers,partials,data){return"flagged"},21:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1;return null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"answered"),{name:"if",hash:{},fn:container.program(22,data,0),inverse:container.program(24,data,0),data:data,loc:{start:{line:21,column:111},end:{line:21,column:191}}}))?"":stack1},22:function(container,depth0,helpers,partials,data){return"answered"},24:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1;return null==(stack1=lookupProperty(helpers,"if").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"viewed"),{name:"if",hash:{},fn:container.program(25,data,0),inverse:container.program(27,data,0),data:data,loc:{start:{line:21,column:143},end:{line:21,column:184}}}))?"":stack1},25:function(container,depth0,helpers,partials,data){return"viewed"},27:function(container,depth0,helpers,partials,data){return"unseen"},29:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},helper;return"                        <div class=\"qti-navigator-linear-part collapsible-panel\">\n                            <span class=\"icon icon-info\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"In this part of the test navigation is not allowed.",{name:"__",hash:{},data:data,loc:{start:{line:33,column:64},end:{line:33,column:124}}}))+"\"></span>\n                            <p class=\"qti-navigator-message\">\n                                "+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"In this part of the test navigation is not allowed.",{name:"__",hash:{},data:data,loc:{start:{line:35,column:32},end:{line:35,column:92}}}))+"\n                            </p>\n                            <p class=\"qti-navigator-actions\">\n                                <button class=\"btn-info small\" data-id=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"itemId")||(null==depth0?depth0:lookupProperty(depth0,"itemId")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"itemId",hash:{},data:data,loc:{start:{line:38,column:72},end:{line:38,column:82}}}):helper))+"\" data-position=\""+container.escapeExpression((helper=null==(helper=lookupProperty(helpers,"position")||(null==depth0?depth0:lookupProperty(depth0,"position")))?container.hooks.helperMissing:helper,"function"==typeof helper?helper.call(null==depth0?container.nullContext||{}:depth0,{name:"position",hash:{},data:data,loc:{start:{line:38,column:99},end:{line:38,column:111}}}):helper))+"\" title=\""+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Start Test-part",{name:"__",hash:{},data:data,loc:{start:{line:38,column:120},end:{line:38,column:144}}}))+"\">\n                                    <span class=\"qti-navigator-text\">"+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null==depth0?container.nullContext||{}:depth0,"Start Test-part",{name:"__",hash:{},data:data,loc:{start:{line:39,column:69},end:{line:39,column:93}}}))+"</span>\n                                    <span class=\"icon-play r\"></span>\n                                </button>\n                            </p>\n                        </div>\n"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var lookupProperty=container.lookupProperty||function(parent,propertyName){return Object.prototype.hasOwnProperty.call(parent,propertyName)?parent[propertyName]:void 0},stack1;return"<ul class=\"qti-navigator-parts plain\">\n"+(null==(stack1=lookupProperty(helpers,"each").call(null==depth0?container.nullContext||{}:depth0,null==depth0?depth0:lookupProperty(depth0,"parts"),{name:"each",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:2,column:20},end:{line:46,column:29}}}))?"":stack1)+"                </ul>"},useData:!0})}),define("taoQtiTest/testRunner/testReview",["jquery","lodash","i18n","tpl!taoQtiTest/testRunner/tpl/navigator","tpl!taoQtiTest/testRunner/tpl/navigatorTree","util/capitalize"],function($,_,__,navigatorTpl,navigatorTreeTpl,capitalize){"use strict";var _cssCls={active:"active",collapsed:"collapsed",collapsible:"collapsible",hidden:"hidden",disabled:"disabled",flagged:"flagged",answered:"answered",viewed:"viewed",unseen:"unseen",icon:"qti-navigator-icon",scope:{test:"scope-test",testPart:"scope-test-part",testSection:"scope-test-section"}},_selectors={component:".qti-navigator",filterBar:".qti-navigator-filters",tree:".qti-navigator-tree",collapseHandle:".qti-navigator-collapsible",linearState:".qti-navigator-linear",infoAnswered:".qti-navigator-answered .qti-navigator-counter",infoViewed:".qti-navigator-viewed .qti-navigator-counter",infoUnanswered:".qti-navigator-unanswered .qti-navigator-counter",infoFlagged:".qti-navigator-flagged .qti-navigator-counter",infoPanel:".qti-navigator-info",infoPanelLabels:".qti-navigator-info > .qti-navigator-label",parts:".qti-navigator-part",partLabels:".qti-navigator-part > .qti-navigator-label",sections:".qti-navigator-section",sectionLabels:".qti-navigator-section > .qti-navigator-label",items:".qti-navigator-item",itemLabels:".qti-navigator-item > .qti-navigator-label",itemIcons:".qti-navigator-item > .qti-navigator-icon",icons:".qti-navigator-icon",linearStart:".qti-navigator-linear-part button",counters:".qti-navigator-counter",actives:".active",collapsible:".collapsible",collapsiblePanels:".collapsible-panel",unseen:".unseen",answered:".answered",flagged:".flagged",notFlagged:":not(.flagged)",notAnswered:":not(.answered)",hidden:".hidden"},_filterMap={all:"",unanswered:_selectors.answered,flagged:_selectors.notFlagged,answered:_selectors.notAnswered,filtered:_selectors.hidden},_optionsMap={reviewScope:"reviewScope",reviewPreventsUnseen:"preventsUnseen",canCollapse:"canCollapse"},_reviewScopes={test:"test",testPart:"testPart",testSection:"testSection"},testReview={init:function init(element,options){var initOptions=_.isObject(options)&&options||{},putOnRight="right"===initOptions.region,insertMethod=putOnRight?"append":"prepend";if(this.options=initOptions,this.disabled=!1,this.hidden=!!initOptions.hidden,this.currentFilter="all",this.$component&&this.$component.remove(),this.$container=$(element),insertMethod=this.$container[insertMethod],insertMethod)insertMethod.call(this.$container,navigatorTpl({region:putOnRight?"right":"left",hidden:this.hidden}));else throw new Error("Unable to inject the component structure into the DOM");return this._loadDOM(),this._initEvents(),this._updateDisplayOptions(),this},_loadDOM:function(){this.$component=this.$container.find(_selectors.component),this.$infoAnswered=this.$component.find(_selectors.infoAnswered),this.$infoViewed=this.$component.find(_selectors.infoViewed),this.$infoUnanswered=this.$component.find(_selectors.infoUnanswered),this.$infoFlagged=this.$component.find(_selectors.infoFlagged),this.$filterBar=this.$component.find(_selectors.filterBar),this.$filters=this.$filterBar.find("li"),this.$tree=this.$component.find(_selectors.tree),this.$linearState=this.$component.find(_selectors.linearState)},_initEvents:function(){var self=this;this.$component.on("click"+_selectors.component,_selectors.collapseHandle,function(){self.disabled||(self.$component.toggleClass(_cssCls.collapsed),self.$component.hasClass(_cssCls.collapsed)&&self._openSelected())}),this.$component.on("click"+_selectors.component,_selectors.infoPanelLabels,function(){if(!self.disabled){var $panel=$(this).closest(_selectors.infoPanel);self._togglePanel($panel,_selectors.infoPanel)}}),this.$tree.on("click"+_selectors.component,_selectors.partLabels,function(){if(!self.disabled){var $panel=$(this).closest(_selectors.parts),open=self._togglePanel($panel,_selectors.parts);open&&($panel.hasClass(_cssCls.active)?self._openSelected():self._openOnly($panel.find(_selectors.sections).first(),$panel))}}),this.$tree.on("click"+_selectors.component,_selectors.sectionLabels,function(){if(!self.disabled){var $panel=$(this).closest(_selectors.sections);self._togglePanel($panel,_selectors.sections)}}),this.$tree.on("click"+_selectors.component,_selectors.itemLabels,function(event){if(!self.disabled){var $item=$(this).closest(_selectors.items),$target;$item.hasClass(_cssCls.disabled)||($target=$(event.target),$target.is(_selectors.icons)&&!self.$component.hasClass(_cssCls.collapsed)?!$item.hasClass(_cssCls.unseen)&&self._mark($item):(self._select($item),self._jump($item)))}}),this.$tree.on("click"+_selectors.component,_selectors.linearStart,function(){if(!self.disabled){var $btn=$(this);$btn.hasClass(_cssCls.disabled)||($btn.addClass(_cssCls.disabled),self._jump($btn))}}),this.$filterBar.on("click"+_selectors.component,"li",function(){if(!self.disabled){var $btn=$(this),mode=$btn.data("mode");self.$filters.removeClass(_cssCls.active),self.$component.removeClass(_cssCls.collapsed),$btn.addClass(_cssCls.active),self._filter(mode)}})},_filter:function(criteria){var $items=this.$tree.find(_selectors.items).removeClass(_cssCls.hidden),filter=_filterMap[criteria];filter&&$items.filter(filter).addClass(_cssCls.hidden),this._updateSectionCounters(!!filter),this.currentFilter=criteria},_select:function(position,open){var selected=position&&position.jquery?position:this.$tree.find("[data-position="+position+"]"),hierarchy=selected.parentsUntil(this.$tree);return open&&this._openOnly(hierarchy),this.$tree.find(_selectors.actives).removeClass(_cssCls.active),hierarchy.add(selected).addClass(_cssCls.active),selected},_openSelected:function(){var selected=this.$tree.find(_selectors.items+_selectors.actives),hierarchy=selected.parentsUntil(this.$tree);return this._openOnly(hierarchy),selected},_openOnly:function(opened,root){(root||this.$tree).find(_selectors.collapsible).addClass(_cssCls.collapsed),opened.removeClass(_cssCls.collapsed)},_togglePanel:function(panel,collapseSelector){var collapsed=panel.hasClass(_cssCls.collapsed);return collapseSelector&&this.$tree.find(collapseSelector).addClass(_cssCls.collapsed),collapsed?panel.removeClass(_cssCls.collapsed):panel.addClass(_cssCls.collapsed),collapsed},_setItemIcon:function($item,icon){$item.find(_selectors.icons).attr("class",_cssCls.icon+" icon-"+icon)},_adjustItemIcon:function($item){var icon=null,defaultIcon=_cssCls.unseen,iconCls=[_cssCls.flagged,_cssCls.answered,_cssCls.viewed];_.forEach(iconCls,function(cls){if($item.hasClass(cls))return icon=cls,!1}),this._setItemIcon($item,icon||defaultIcon)},_toggleFlag:function($item,flag){$item.toggleClass(_cssCls.flagged,flag),this._adjustItemIcon($item)},_mark:function($item){var itemId=$item.data("id"),itemPosition=$item.data("position"),flag=!$item.hasClass(_cssCls.flagged);this._toggleFlag($item),this.trigger("mark",[flag,itemPosition,itemId])},_jump:function($item){var itemId=$item.data("id"),itemPosition=$item.data("position");this.trigger("jump",[itemPosition,itemId])},_updateSectionCounters:function(filtered){var self=this,filter=_filterMap[filtered?"filtered":"answered"];this.$tree.find(_selectors.sections).each(function(){var $section=$(this),$items=$section.find(_selectors.items),$filtered=$items.filter(filter),total=$items.length,nb=total-$filtered.length;self._writeCount($section.find(_selectors.counters),nb,total)})},_updateDisplayOptions:function(){var reviewScope=_reviewScopes[this.options.reviewScope]||"test",scopeClass=_cssCls.scope[reviewScope],$root=this.$component;_.forEach(_cssCls.scope,function(cls){$root.removeClass(cls)}),scopeClass&&$root.addClass(scopeClass),$root.toggleClass(_cssCls.collapsible,this.options.canCollapse)},_updateOptions:function(testContext){var options=this.options;_.forEach(_optionsMap,function(optionKey,contextKey){void 0!==testContext[contextKey]&&(options[optionKey]=testContext[contextKey])})},_updateInfos:function(){var progression=this.progression,unanswered=+progression.total-+progression.answered;this._writeCount(this.$infoAnswered,progression.answered,progression.total),this._writeCount(this.$infoUnanswered,unanswered,progression.total),this._writeCount(this.$infoViewed,progression.viewed,progression.total),this._writeCount(this.$infoFlagged,progression.flagged,progression.total)},_writeCount:function($place,count,total){$place.text(count+"/"+total)},_getProgressionOfTest:function(testContext){return{total:testContext.numberItems||0,answered:testContext.numberCompleted||0,viewed:testContext.numberPresented||0,flagged:testContext.numberFlagged||0}},_getProgressionOfTestPart:function(testContext){return{total:testContext.numberItemsPart||0,answered:testContext.numberCompletedPart||0,viewed:testContext.numberPresentedPart||0,flagged:testContext.numberFlaggedPart||0}},_getProgressionOfTestSection:function(testContext){return{total:testContext.numberItemsSection||0,answered:testContext.numberCompletedSection||0,viewed:testContext.numberPresentedSection||0,flagged:testContext.numberFlaggedSection||0}},_updateTree:function(testContext){var navigatorMap=testContext.navigatorMap,reviewScope=this.options.reviewScope,reviewScopePart="testPart"===reviewScope,reviewScopeSection="testSection"===reviewScope,_partsFilter=function(part){return reviewScopeSection&&part.sections&&(part.sections=_.filter(part.sections,_partsFilter)),part.active};navigatorMap?((reviewScopePart||reviewScopeSection)&&(navigatorMap=_.filter(navigatorMap,_partsFilter)),this.$filterBar.show(),this.$linearState.hide(),this.$tree.html(navigatorTreeTpl({parts:navigatorMap})),this.options.preventsUnseen&&this.$tree.find(_selectors.unseen).addClass(_cssCls.disabled)):(this.$filterBar.hide(),this.$linearState.show(),this.$tree.empty()),this._filter(this.$filters.filter(_selectors.actives).data("mode"))},setItemFlag:function setItemFlag(position,flag){var $item=position&&position.jquery?position:this.$tree.find("[data-position="+position+"]"),progression=this.progression;this._toggleFlag($item,flag),progression.flagged=this.$tree.find(_selectors.flagged).length,this._writeCount(this.$infoFlagged,progression.flagged,progression.total),this._filter(this.currentFilter)},updateNumberFlagged:function(testContext,position,flag){var fields=["numberFlagged"],currentPosition=testContext.itemPosition,currentFound=!1,currentSection=null,currentPart=null,itemFound=!1,itemSection=null,itemPart=null;testContext.navigatorMap?(_.forEach(testContext.navigatorMap,function(part){if(_.forEach(part&&part.sections,function(section){if(_.forEach(section&&section.items,function(item){if(item&&(item.position===position&&(itemPart=part,itemSection=section,itemFound=!0),item.position===currentPosition&&(currentPart=part,currentSection=section,currentFound=!0),itemFound&&currentFound))return!1}),itemFound&&currentFound)return!1}),itemFound&&currentFound)return!1}),itemFound&&currentPart===itemPart&&fields.push("numberFlaggedPart"),itemFound&&currentSection===itemSection&&fields.push("numberFlaggedSection")):(fields.push("numberFlaggedPart"),fields.push("numberFlaggedSection")),_.forEach(fields,function(field){field in testContext&&(testContext[field]+=flag?1:-1)})},getProgression:function getProgression(testContext){var reviewScope=_reviewScopes[this.options.reviewScope]||"test",progressInfoMethod="_getProgressionOf"+capitalize(reviewScope),getProgression=this[progressInfoMethod]||this._getProgressionOfTest,progression=getProgression&&getProgression(testContext)||{};return progression},update:function update(testContext){return this.progression=this.getProgression(testContext),this._updateOptions(testContext),this._updateInfos(testContext),this._updateTree(testContext),this._updateDisplayOptions(testContext),this},disable:function disable(){return this.disabled=!0,this.$component.addClass(_cssCls.disabled),this},enable:function enable(){return this.disabled=!1,this.$component.removeClass(_cssCls.disabled),this},hide:function hide(){return this.disabled=!0,this.hidden=!0,this.$component.addClass(_cssCls.hidden),this},show:function show(){return this.disabled=!1,this.hidden=!1,this.$component.removeClass(_cssCls.hidden),this},toggle:function toggle(show){return void 0===show&&(show=this.hidden),show?this.show():this.hide(),this},on:function on(eventName){var dom=this.$component;return dom&&dom.on.apply(dom,arguments),this},off:function off(eventName){var dom=this.$component;return dom&&dom.off.apply(dom,arguments),this},trigger:function trigger(eventName,extraParameters){var dom=this.$component;return void 0===extraParameters&&(extraParameters=[]),_.isArray(extraParameters)||(extraParameters=[extraParameters]),extraParameters.push(this),dom&&dom.trigger(eventName,extraParameters),this}},testReviewFactory=function(element,options){var component=_.clone(testReview,!0);return component.init(element,options)};return testReviewFactory}),define("taoQtiTest/testRunner/progressUpdater",["jquery","lodash","i18n","ui/progressbar"],function($,_,__){"use strict";var _Mathfloor=Math.floor,_Mathmax2=Math.max,progressUpdaters={init:function(progressBar,progressLabel){return this.progressBar=$(progressBar).progressbar(),this.progressLabel=$(progressLabel),this},write:function(label,ratio){return this.progressLabel.text(label),this.progressBar.progressbar("value",ratio),this},update:function(testContext){var progressIndicator=testContext.progressIndicator||"percentage",progressIndicatorMethod=progressIndicator+"Progression",getProgression=this[progressIndicatorMethod]||this.percentageProgression,progression=getProgression&&getProgression(testContext)||{};return this.write(progression.label,progression.ratio),progression},percentageProgression:function(testContext){var total=_Mathmax2(1,testContext.numberItems),ratio=_Mathfloor(100*(testContext.numberCompleted/total));return{ratio:ratio,label:ratio+"%"}},positionProgression:function(testContext){var progressScope=testContext.progressIndicatorScope,progressScopeCounter={test:{total:"numberItems",position:"itemPosition"},testPart:{total:"numberItemsPart",position:"itemPositionPart"},testSection:{total:"numberItemsSection",position:"itemPositionSection"}},counter=progressScopeCounter[progressScope]||progressScopeCounter.test,total=_Mathmax2(1,testContext[counter.total]),position=testContext[counter.position]+1;return{ratio:_Mathfloor(100*(position/total)),label:__("Item %d of %d",position,total)}}},progressUpdaterFactory=function(progressBar,progressLabel){var updater=_.clone(progressUpdaters,!0);return updater.init(progressBar,progressLabel)};return progressUpdaterFactory}),define("taoQtiTest/testRunner/testMetaData",["lodash"],function(_){"use strict";var testMetaDataFactory=function testMetaDataFactory(options){function init(){_testServiceCallId=options.testServiceCallId,testMetaData.setData(getLocalStorageData())}function setLocalStorageData(val){var currentKey=testMetaData.getLocalStorageKey();try{window.localStorage.setItem(currentKey,val)}catch(domException){if("QuotaExceededError"===domException.name||"NS_ERROR_DOM_QUOTA_REACHED"===domException.name){for(var removed=0,i=window.localStorage.length,key;i--;)key=localStorage.key(i),/^testMetaData_.*/.test(key)&&key!==currentKey&&(window.localStorage.removeItem(key),removed++);if(removed)setLocalStorageData(val);else throw domException}else throw domException}}function getLocalStorageData(){var data=window.localStorage.getItem(testMetaData.getLocalStorageKey()),result=JSON.parse(data)||{};return result}var _storageKeyPrefix="testMetaData_",_data={},_testServiceCallId;if(!options||void 0===options.testServiceCallId)throw new TypeError("testServiceCallId option is required");var testMetaData={SECTION_EXIT_CODE:{COMPLETED_NORMALLY:700,QUIT:701,COMPLETE_TIMEOUT:703,TIMEOUT:704,FORCE_QUIT:705,IN_PROGRESS:706,ERROR:300},TEST_EXIT_CODE:{COMPLETE:"C",TERMINATED:"T",INCOMPLETE:"IC",INCOMPLETE_QUIT:"IQ",INACTIVE:"IA",CANDIDATE_DISAGREED_WITH_NDA:"DA"},getTestServiceCallId:function getTestServiceCallId(){return _testServiceCallId},setTestServiceCallId:function setTestServiceCallId(value){_testServiceCallId=value},setData:function setData(data){_data=data,setLocalStorageData(JSON.stringify(_data))},addData:function addData(data,overwrite){data=_.clone(data),void 0===overwrite&&(overwrite=!1),overwrite?_.merge(_data,data):_data=_.merge(data,_data),setLocalStorageData(JSON.stringify(_data))},getData:function getData(){return _.clone(_data)},clearData:function clearData(){_data={},window.localStorage.removeItem(testMetaData.getLocalStorageKey())},getLocalStorageKey:function getLocalStorageKey(){return"testMetaData_"+_testServiceCallId}};return init(),testMetaData};return testMetaDataFactory}),define("taoQtiTest/controller/runtime/testRunner",["jquery","lodash","i18n","module","taoQtiTest/testRunner/actionBarTools","taoQtiTest/testRunner/testReview","taoQtiTest/testRunner/progressUpdater","taoQtiTest/testRunner/testMetaData","serviceApi/ServiceApi","serviceApi/UserInfoService","serviceApi/StateStorage","iframeNotifier","mathJax","ui/feedback","ui/deleter","moment","ui/modal","ui/progressbar"],function($,_,__,module,actionBarTools,testReview,progressUpdater,testMetaDataFactory,ServiceApi,UserInfoService,StateStorage,iframeNotifier,MathJax,feedback,deleter,moment,modal){"use strict";var _Mathfloor2=Math.floor,_Mathmax3=Math.max,timerIds=[],currentTimes=[],lastDates=[],timeDiffs=[],waitingTime=0,$doc=$(document),optionNextSection="x-tao-option-nextSection",optionNextSectionWarning="x-tao-option-nextSectionWarning",optionReviewScreen="x-tao-option-reviewScreen",optionEndTestWarning="x-tao-option-endTestWarning",optionNoExitTimedSectionWarning="x-tao-option-noExitTimedSectionWarning",TestRunner={TEST_STATE_INITIAL:0,TEST_STATE_INTERACTING:1,TEST_STATE_MODAL_FEEDBACK:2,TEST_STATE_SUSPENDED:3,TEST_STATE_CLOSED:4,TEST_NAVIGATION_LINEAR:0,TEST_NAVIGATION_NONLINEAR:1,TEST_ITEM_STATE_INTERACTING:1,beforeTransition:function(callback){iframeNotifier.parent("loading"),this.disableGui(),$controls.$itemFrame.hide(),$controls.$rubricBlocks.hide(),$controls.$timerWrapper.hide(),"function"==typeof callback&&setTimeout(callback,0)},afterTransition:function(){this.enableGui(),iframeNotifier.parent("unloading"),testMetaData.addData({ITEM:{ITEM_START_TIME_CLIENT:Date.now()/1e3}})},jump:function(position){var self=this,action="jump",params={position:position};this.disableGui(),this.isJumpOutOfSection(position)&&this.isCurrentItemActive()&&this.isTimedSection()?this.exitTimedSection("jump",params):this.killItemSession(function(){self.actionCall("jump",params)})},keepItemTimed:function(duration){if(duration){var self=this,action="keepItemTimed",params={duration:duration};self.actionCall("keepItemTimed",params)}},markForReview:function(flag,position){var self=this;iframeNotifier.parent("loading"),this.disableGui(),$.ajax({url:self.testContext.markForReviewUrl,cache:!1,async:!0,type:"POST",dataType:"json",data:{flag:flag,position:position},success:function(data){self.testReview&&(self.testReview.setItemFlag(position,flag),self.testReview.updateNumberFlagged(self.testContext,position,flag),self.testContext.itemPosition===position&&(self.testContext.itemFlagged=flag),self.updateTools(self.testContext)),self.enableGui(),iframeNotifier.parent("unloading")}})},moveForward:function(){function doExitSection(){self.isTimedSection()&&!self.testContext.isTimeout?self.exitTimedSection("moveForward"):self.exitSection("moveForward")}var self=this,action="moveForward";this.disableGui(),0==this.testContext.numberItemsSection-this.testContext.itemPositionSection-1&&this.isCurrentItemActive()?this.shouldDisplayEndTestWarning()?(this.displayEndTestWarning(doExitSection),this.enableGui()):doExitSection():this.killItemSession(function(){self.actionCall("moveForward")})},shouldDisplayEndTestWarning:function(){return!0===this.testContext.isLast&&this.hasOption("x-tao-option-endTestWarning")},displayEndTestWarning:function(nextAction){var options={confirmLabel:__("OK"),cancelLabel:__("Cancel"),showItemCount:!1};this.displayExitMessage(__("You are about to submit the test. You will not be able to access this test once submitted. Click OK to continue and submit the test."),nextAction,options)},moveBackward:function(){var self=this,action="moveBackward";this.disableGui(),0==this.testContext.itemPositionSection&&this.isCurrentItemActive()&&this.isTimedSection()?this.exitTimedSection("moveBackward"):this.killItemSession(function(){self.actionCall("moveBackward")})},isJumpOutOfSection:function(jumpPosition){var items=this.getCurrentSectionItems(),isJumpToOtherSection=!0,isValidPosition=0<=jumpPosition&&jumpPosition<this.testContext.numberItems;if(isValidPosition){for(var i in items)if(items.hasOwnProperty(i)&&items[i].position==jumpPosition){isJumpToOtherSection=!1;break}}else isJumpToOtherSection=!1;return isJumpToOtherSection},exitSection:function(action,params,exitCode){var self=this;testMetaData.addData({SECTION:{SECTION_EXIT_CODE:exitCode||testMetaData.SECTION_EXIT_CODE.COMPLETED_NORMALLY}}),self.killItemSession(function(){self.actionCall(action,params)})},exitTimedSection:function(action,params){var self=this,qtiRunner=this.getQtiRunner(),doExitTimedSection=function(){qtiRunner&&qtiRunner.updateItemApi(),self.exitSection(action,params)};"moveForward"===action&&this.shouldDisplayEndTestWarning()||this.hasOption("x-tao-option-noExitTimedSectionWarning")||this.testContext.keepTimerUpToTimeout?doExitTimedSection():this.displayExitMessage(__("After you complete the section it would be impossible to return to this section to make changes. Are you sure you want to end the section?"),doExitTimedSection,{scope:"testSection"}),this.enableGui()},nextSection:function(){var self=this,qtiRunner=this.getQtiRunner(),doNextSection=function(){self.exitSection("nextSection",null,testMetaData.SECTION_EXIT_CODE.QUIT)};qtiRunner&&qtiRunner.updateItemApi(),this.hasOption("x-tao-option-nextSectionWarning")?this.displayExitMessage(__("After you complete the section it would be impossible to return to this section to make changes. Are you sure you want to end the section?"),doNextSection,{scope:"testSection"}):doNextSection(),this.enableGui()},getProgression:function(scope){var scopeSuffixMap={test:"",testPart:"Part",testSection:"Section"},scopeSuffix=scope&&scopeSuffixMap[scope]||"";return{total:this.testContext["numberItems"+scopeSuffix]||0,answered:this.testContext["numberCompleted"+scopeSuffix]||0,viewed:this.testContext["numberPresented"+scopeSuffix]||0,flagged:this.testContext["numberFlagged"+scopeSuffix]||0}},displayExitMessage:function(message,action,options){var self=this,options=options||{},scope=options.scope,confirmLabel=options.confirmLabel||__("Yes"),cancelLabel=options.cancelLabel||__("No"),showItemCount="undefined"==typeof options.showItemCount||options.showItemCount,$confirmBox=$(".exit-modal-feedback"),progression=this.getProgression(scope),unansweredCount=progression.total-progression.answered,flaggedCount=progression.flagged;return showItemCount&&(unansweredCount&&this.isCurrentItemAnswered()&&unansweredCount--,flaggedCount&&unansweredCount?message=__("You have %s unanswered question(s) and have %s item(s) marked for review.",unansweredCount.toString(),flaggedCount.toString())+" "+message:(flaggedCount&&(message=__("You have %s item(s) marked for review.",flaggedCount.toString())+" "+message),unansweredCount&&(message=__("You have %s unanswered question(s).",unansweredCount.toString())+" "+message))),$confirmBox.find(".message").html(message),$confirmBox.find(".js-exit-confirm").html(confirmLabel),$confirmBox.find(".js-exit-cancel").html(cancelLabel),$confirmBox.modal({width:500}),$confirmBox.find(".js-exit-cancel, .modal-close").off("click").on("click",function(){$confirmBox.modal("close")}),$confirmBox.find(".js-exit-confirm").off("click").on("click",function(){$confirmBox.modal("close"),_.isFunction(action)&&action.call(self)}),$confirmBox},killItemSession:function(callback){testMetaData.addData({ITEM:{ITEM_END_TIME_CLIENT:Date.now()/1e3,ITEM_TIMEZONE:moment().utcOffset(moment().utcOffset()).format("Z")}}),"function"!=typeof callback&&(callback=_.noop),this.itemServiceApi.kill(callback)},isCurrentItemActive:function(){return 4!=this.testContext.itemSessionState},isCurrentItemAnswered:function(){var answered=!1;return _.each(this.getCurrentItemState(),function(state){if(state&&_.isObject(state.response)&&null!==state.response.base)return answered=!0,!1}),answered},hasOption:function(option){return 0<=_.indexOf(this.testContext.categories,option)},getQtiRunner:function(){var itemFrame=document.getElementById("qti-item"),itemWindow=itemFrame&&itemFrame.contentWindow,itemContainerFrame=itemWindow&&itemWindow.document.getElementById("item-container"),itemContainerWindow=itemContainerFrame&&itemContainerFrame.contentWindow;return itemContainerWindow&&itemContainerWindow.qtiRunner},isTimedSection:function(){var timeConstraints=this.testContext.timeConstraints,isTimedSection=!1;for(var index in timeConstraints)timeConstraints.hasOwnProperty(index)&&"assessmentSection"===timeConstraints[index].qtiClassName&&(isTimedSection=!0);return isTimedSection},getCurrentSectionItems:function(){var partId=this.testContext.testPartId,navMap=this.testContext.navigatorMap,sectionItems;for(var partIndex in navMap)if(navMap.hasOwnProperty(partIndex)&&navMap[partIndex].id===partId)for(var sectionIndex in navMap[partIndex].sections)if(navMap[partIndex].sections.hasOwnProperty(sectionIndex)&&!0===navMap[partIndex].sections[sectionIndex].active){sectionItems=navMap[partIndex].sections[sectionIndex].items;break}return sectionItems},skip:function(){var self=this,doSkip=function(){self.disableGui(),self.actionCall("skip")};this.shouldDisplayEndTestWarning()?this.displayEndTestWarning(doSkip):doSkip()},timeout:function(){var self=this;this.disableGui(),this.testContext.isTimeout=!0,this.updateTimer(),this.killItemSession(function(){var confirmBox=$(".timeout-modal-feedback"),testContext=self.testContext,confirmBtn=confirmBox.find(".js-timeout-confirm, .modal-close");testContext.numberCompletedSection===testContext.numberItemsSection?testMetaData.addData({SECTION:{SECTION_EXIT_CODE:testMetaData.SECTION_EXIT_CODE.COMPLETE_TIMEOUT}}):testMetaData.addData({SECTION:{SECTION_EXIT_CODE:testMetaData.SECTION_EXIT_CODE.TIMEOUT}}),self.enableGui(),confirmBox.modal({width:500}),confirmBtn.off("click").on("click",function(){confirmBox.modal("close"),self.actionCall("timeout")})})},setTestContext:function(testContext){this.testContext=testContext,this.itemServiceApi=eval(testContext.itemServiceApiCall),this.itemServiceApi.setHasBeenPaused(testContext.hasBeenPaused)},initMetadata:function(){testMetaData=testMetaDataFactory({testServiceCallId:this.itemServiceApi.serviceCallId})},getSessionStateService:function(){return sessionStateService||(sessionStateService=this.testContext.sessionStateService({accuracy:1e3})),sessionStateService},update:function(testContext){var self=this;$controls.$itemFrame.remove();var $runner=$("#runner");$runner.css("height","auto"),this.getSessionStateService().restart(),this.setTestContext(testContext),this.updateContext(),this.updateProgress(),this.updateNavigation(),this.updateTestReview(),this.updateInformation(),this.updateRubrics(),this.updateTools(testContext),this.updateTimer(),this.updateExitButton(),this.resetCurrentItemState(),this.initMetadata(),$controls.$itemFrame=$("<iframe id=\"qti-item\" frameborder=\"0\" scrollbars=\"no\"/>"),$controls.$itemFrame.appendTo($controls.$contentBox),this.testContext.itemSessionState===this.TEST_ITEM_STATE_INTERACTING&&!1===self.testContext.isTimeout?($doc.off(".testRunner").on("serviceloaded.testRunner",function(){self.afterTransition(),self.adjustFrame(),$controls.$itemFrame.css({visibility:"visible"})}),this.itemServiceApi.loadInto($controls.$itemFrame[0],function(){})):self.afterTransition()},updateInformation:function(){!0===this.testContext.isTimeout?feedback().error(__("Time limit reached for item \"%s\".",this.testContext.itemIdentifier)):this.testContext.itemSessionState!==this.TEST_ITEM_STATE_INTERACTING&&feedback().error(__("No more attempts allowed for item \"%s\".",this.testContext.itemIdentifier))},updateTools:function updateTools(testContext){var showSkip=!1,showSkipEnd=!1,showNextSection=!!testContext.nextSection&&(this.hasOption("x-tao-option-nextSection")||this.hasOption("x-tao-option-nextSectionWarning"));!0===this.testContext.allowSkipping&&(!1===this.testContext.isLast?showSkip=!0:showSkipEnd=!0),$controls.$skip.toggle(showSkip),$controls.$skipEnd.toggle(showSkipEnd),$controls.$nextSection.toggle(showNextSection),actionBarTools.render(".tools-box-list",testContext,TestRunner)},createTimer:function(cst){var $timer=$("<div>",{class:"qti-timer qti-timer__type-"+cst.qtiClassName}),$label=$("<div>",{class:"qti-timer_label truncate",text:cst.label}),$time=$("<div>",{class:"qti-timer_time",text:this.formatTime(cst.seconds)});return $timer.append($label),$timer.append($time),$timer},updateTimer:function(){var self=this,hasTimers;$controls.$timerWrapper.empty();for(var i=0;i<timerIds.length;i++)clearTimeout(timerIds[i]);if(timerIds=[],currentTimes=[],lastDates=[],timeDiffs=[],!1===self.testContext.isTimeout&&self.testContext.itemSessionState===self.TEST_ITEM_STATE_INTERACTING&&(hasTimers=!!this.testContext.timeConstraints.length,$controls.$topActionBar.toggleClass("has-timers",hasTimers),hasTimers)){for(i=0;i<this.testContext.timeConstraints.length;i++){var cst=this.testContext.timeConstraints[i];if(!1===cst.allowLateSubmission){if($controls.$timerWrapper.append(self.createTimer(cst)),currentTimes[i]=cst.seconds,lastDates[i]=new Date,timeDiffs[i]=0,timerIndex=i,self.testContext.timerWarning&&self.testContext.timerWarning[cst.qtiClassName]){cst.warnings={},_(self.testContext.timerWarning[cst.qtiClassName]).forEach(function(value,key){_.contains(["info","warning","danger"],value)&&(cst.warnings[key]={type:value,showed:cst.seconds<=key,point:parseInt(key,10)})});var closestPreviousWarning=_.find(cst.warnings,{showed:!0});!_.isEmpty(closestPreviousWarning)&&closestPreviousWarning.point&&(cst.warnings[closestPreviousWarning.point].showed=!1)}(function(timerIndex,cst){timerIds[timerIndex]=setInterval(function(){var _Mathround=Math.round;if(timeDiffs[timerIndex]+=new Date().getTime()-lastDates[timerIndex].getTime(),1e3<=timeDiffs[timerIndex]){var seconds=timeDiffs[timerIndex]/1e3;currentTimes[timerIndex]-=seconds,timeDiffs[timerIndex]=0}$timers.eq(timerIndex).html(self.formatTime(_Mathround(currentTimes[timerIndex]))),0>=currentTimes[timerIndex]?(currentTimes[timerIndex]=0,clearInterval(timerIds[timerIndex]),$controls.$itemFrame.hide(),self.timeout()):lastDates[timerIndex]=new Date;var warning=_.findLast(cst.warnings,{showed:!1});!_.isEmpty(warning)&&_.isFinite(warning.point)&&currentTimes[timerIndex]<=warning.point&&self.timeWarning(cst,warning)},1e3)})(timerIndex,cst)}}$timers=$controls.$timerWrapper.find(".qti-timer .qti-timer_time"),$controls.$timerWrapper.show()}},timeWarning:function(cst,warning){var message="",$timer=$controls.$timerWrapper.find(".qti-timer__type-"+cst.qtiClassName),$time=$timer.find(".qti-timer_time"),remaining;switch($time.removeClass("txt-info txt-warning txt-danger").addClass("txt-"+warning.type),remaining=moment.duration(warning.point,"seconds").humanize(),cst.qtiClassName){case"assessmentItemRef":message=__("Warning \u2013 You have %s remaining to complete this item.",remaining);break;case"assessmentSection":message=__("Warning \u2013 You have %s remaining to complete this section.",remaining);break;case"testPart":message=__("Warning \u2013 You have %s remaining to complete this test part.",remaining);break;case"assessmentTest":message=__("Warning \u2013 You have %s remaining to complete the test.",remaining)}feedback()[warning.type](message),cst.warnings[warning.point].showed=!0},updateRubrics:function(){if($controls.$rubricBlocks.remove(),0<this.testContext.rubrics.length){$controls.$rubricBlocks=$("<div id=\"qti-rubrics\"/>");for(var i=0;i<this.testContext.rubrics.length;i++)$controls.$rubricBlocks.append(this.testContext.rubrics[i]);$controls.$rubricBlocks.find("a").bind("click keypress",function(){return window.open(this.href),!1}),$controls.$rubricBlocks.prependTo($controls.$contentBox),MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub],$controls.$rubricBlocks[0])}},updateNavigation:function(){$controls.$exit.show(),!0===this.testContext.isLast?($controls.$moveForward.hide(),$controls.$moveEnd.show()):($controls.$moveForward.show(),$controls.$moveEnd.hide()),this.testContext.navigationMode===this.TEST_NAVIGATION_LINEAR?$controls.$moveBackward.hide():($controls.$controls.show(),!0===this.testContext.canMoveBackward?$controls.$moveBackward.show():$controls.$moveBackward.hide())},updateTestReview:function(){var considerProgress=!0===this.testContext.considerProgress;this.testReview&&(this.testReview.toggle(considerProgress&&this.hasOption("x-tao-option-reviewScreen")),this.testReview.update(this.testContext))},updateProgress:function(){var considerProgress=!0===this.testContext.considerProgress;$controls.$progressBox.css("visibility",considerProgress?"visible":"hidden"),considerProgress&&this.progressUpdater.update(this.testContext)},updateContext:function(){$controls.$title.text(this.testContext.testTitle);var sectionText=!0===this.testContext.isDeepestSectionVisible?" - "+this.testContext.sectionTitle:"";$controls.$position.text(sectionText),$controls.$titleGroup.show()},updateExitButton:function(){$controls.$logout.toggleClass("hidden",!this.testContext.logoutButton),$controls.$exit.toggleClass("hidden",!this.testContext.exitButton)},adjustFrame:function(){var rubricHeight=$controls.$rubricBlocks.outerHeight(!0)||0,finalHeight=$(window).innerHeight()-$controls.$topActionBar.outerHeight()-$controls.$bottomActionBar.outerHeight(),itemFrame=$controls.$itemFrame.get(0),frameContentHeight;$controls.$contentBox.height(finalHeight),$controls.$sideBars.length&&$controls.$sideBars.each(function(){var $sideBar=$(this);$sideBar.height(finalHeight-$sideBar.outerHeight()+$sideBar.height())}),itemFrame&&itemFrame.contentWindow&&(frameContentHeight=$controls.$itemFrame.contents().outerHeight(!0),frameContentHeight<finalHeight&&(rubricHeight?frameContentHeight=_Mathmax3(frameContentHeight,finalHeight-rubricHeight):frameContentHeight=finalHeight),itemFrame.contentWindow.$&&itemFrame.contentWindow.$("body").trigger("setheight",[frameContentHeight]),$controls.$itemFrame.height(frameContentHeight))},disableGui:function(){$controls.$naviButtons.addClass("disabled"),this.testReview&&this.testReview.disable()},enableGui:function(){$controls.$naviButtons.removeClass("disabled"),this.testReview&&this.testReview.enable()},hideGui:function(){$controls.$naviButtons.addClass("hidden"),this.testReview&&this.testReview.hide()},showGui:function(){$controls.$naviButtons.removeClass("hidden"),this.testReview&&this.testReview.show()},formatTime:function(totalSeconds){var sec_num=totalSeconds,hours=_Mathfloor2(sec_num/3600),minutes=_Mathfloor2((sec_num-3600*hours)/60),seconds=_Mathfloor2(sec_num-3600*hours-60*minutes);10>hours&&(hours="0"+hours),10>minutes&&(minutes="0"+minutes),10>seconds&&(seconds="0"+seconds);var time=hours+":"+minutes+":"+seconds;return time},processError:function processError(error){var self=this;this.hideGui(),this.beforeTransition(),iframeNotifier.parent("messagealert",{message:error.message,action:function(){testMetaData&&testMetaData.clearData(),error.state===self.TEST_STATE_CLOSED?self.serviceApi.finish():self.serviceApi.exit()}})},actionCall:function(action,extraParams){var self=this,params={metaData:testMetaData?testMetaData.getData():{}};extraParams&&(params=_.assign(params,extraParams)),this.beforeTransition(function(){$.ajax({url:self.testContext[action+"Url"],cache:!1,data:params,async:!0,dataType:"json",success:function(testContext){testMetaData.clearData(),testContext.success?testContext.state===self.TEST_STATE_CLOSED?self.serviceApi.finish():self.update(testContext):self.processError(testContext)}})})},exit:function(){var self=this;testMetaData.addData({TEST:{TEST_EXIT_CODE:testMetaData.TEST_EXIT_CODE.INCOMPLETE},SECTION:{SECTION_EXIT_CODE:testMetaData.SECTION_EXIT_CODE.QUIT}}),this.displayExitMessage(__("Are you sure you want to end the test?"),function(){self.killItemSession(function(){self.actionCall("endTestSession"),testMetaData.clearData()})},{scope:this.testReview?this.testContext.reviewScope:null})},setCurrentItemState:function(id,state){id&&(this.currentItemState[id]=state)},resetCurrentItemState:function(){this.currentItemState={}},getCurrentItemState:function(){return this.currentItemState}},config=module.config(),$timers,$controls,timerIndex,testMetaData,sessionStateService;return config&&actionBarTools.register(config.qtiTools),{start:function(testContext){$controls={$moveForward:$("[data-control=\"move-forward\"]"),$moveEnd:$("[data-control=\"move-end\"]"),$moveBackward:$("[data-control=\"move-backward\"]"),$nextSection:$("[data-control=\"next-section\"]"),$skip:$("[data-control=\"skip\"]"),$skipEnd:$("[data-control=\"skip-end\"]"),$exit:$(window.parent.document).find("[data-control=\"exit\"]"),$logout:$(window.parent.document).find("[data-control=\"logout\"]"),$naviButtons:$(".bottom-action-bar .action"),$skipButtons:$(".navi-box .skip"),$forwardButtons:$(".navi-box .forward"),$progressBar:$("[data-control=\"progress-bar\"]"),$progressLabel:$("[data-control=\"progress-label\"]"),$progressBox:$(".progress-box"),$title:$("[data-control=\"qti-test-title\"]"),$position:$("[data-control=\"qti-test-position\"]"),$timerWrapper:$("[data-control=\"qti-timers\"]"),$contentPanel:$(".content-panel"),$controls:$(".qti-controls"),$itemFrame:$("#qti-item"),$rubricBlocks:$("#qti-rubrics"),$contentBox:$("#qti-content"),$sideBars:$(".test-sidebar"),$topActionBar:$(".horizontal-action-bar.top-action-bar"),$bottomActionBar:$(".horizontal-action-bar.bottom-action-bar")},$controls.$titleGroup=$controls.$title.add($controls.$position),$doc.ajaxError(function(event,jqxhr){403===jqxhr.status&&iframeNotifier.parent("serviceforbidden")}),window.onServiceApiReady=function onServiceApiReady(serviceApi){TestRunner.serviceApi=serviceApi,testContext.success?testContext.state===TestRunner.TEST_STATE_CLOSED?(serviceApi.finish(),testMetaData.clearData()):TestRunner.getSessionStateService().getDuration()?(TestRunner.setTestContext(testContext),TestRunner.initMetadata(),TestRunner.keepItemTimed(TestRunner.getSessionStateService().getDuration()),TestRunner.getSessionStateService().restart()):TestRunner.update(testContext):TestRunner.processError(testContext)},TestRunner.beforeTransition(),TestRunner.testContext=testContext,$controls.$skipButtons.click(function(){$(this).hasClass("disabled")||TestRunner.skip()}),$controls.$forwardButtons.click(function(){$(this).hasClass("disabled")||TestRunner.moveForward()}),$controls.$moveBackward.click(function(){$(this).hasClass("disabled")||TestRunner.moveBackward()}),$controls.$nextSection.click(function(){$(this).hasClass("disabled")||TestRunner.nextSection()}),$controls.$exit.click(function(e){e.preventDefault(),TestRunner.exit()}),$(window).on("resize",_.throttle(function(){TestRunner.adjustFrame(),$controls.$titleGroup.show()},250)),$doc.on("loading",function(){iframeNotifier.parent("loading")}),$doc.on("unloading",function(){iframeNotifier.parent("unloading")}),TestRunner.progressUpdater=progressUpdater($controls.$progressBar,$controls.$progressLabel),testContext.reviewScreen&&(TestRunner.testReview=testReview($controls.$contentPanel,{region:testContext.reviewRegion||"left",hidden:!TestRunner.hasOption("x-tao-option-reviewScreen"),reviewScope:testContext.reviewScope,preventsUnseen:!!testContext.reviewPreventsUnseen,canCollapse:!!testContext.reviewCanCollapse}).on("jump",function(event,position){TestRunner.jump(position)}).on("mark",function(event,flag,position){TestRunner.markForReview(flag,position)}),$controls.$sideBars=$(".test-sidebar")),TestRunner.updateProgress(),TestRunner.updateTestReview(),iframeNotifier.parent("serviceready"),TestRunner.adjustFrame(),$controls.$topActionBar.add($controls.$bottomActionBar).animate({opacity:1},600),deleter($("#feedback-box")),modal($("body")),$(document).on("responsechange",function(e,responseId,response){responseId&&response&&TestRunner.setCurrentItemState(responseId,{response:response})}).on("stateready",function(e,id,state){id&&state&&TestRunner.setCurrentItemState(id,state)}).on("heightchange",function(e,height){$controls.$itemFrame.height(height)})}}}),function(c){var d=document,a="appendChild",i="styleSheet",s=d.createElement("style");s.type="text/css",d.getElementsByTagName("head")[0].appendChild(s),s.styleSheet?s.styleSheet.cssText=c:s.appendChild(d.createTextNode(c))}(".qti-navigator-default{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;-o-flex-direction:column;flex-direction:column;padding:0;cursor:default;min-width:calc(18rem - 8px);height:100%;position:relative}.qti-navigator-default span{display:inline-block}.qti-navigator-default .collapsed .collapsible-panel{display:none !important}.qti-navigator-default .collapsed .qti-navigator-label .icon-up{display:none}.qti-navigator-default .collapsed .qti-navigator-label .icon-down{display:inline-block}.qti-navigator-default .collapsible>.qti-navigator-label,.qti-navigator-default .qti-navigator-item>.qti-navigator-label{cursor:pointer}.qti-navigator-default.scope-test-section .qti-navigator-part>.qti-navigator-label{display:none !important}.qti-navigator-default .qti-navigator-label{display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;min-width:calc(100% - 12px);padding:0 6px;line-height:3rem}.qti-navigator-default .qti-navigator-label .icon-up,.qti-navigator-default .qti-navigator-label .icon-down{line-height:3rem;margin-left:auto}.qti-navigator-default .qti-navigator-label .icon-down{display:none}.qti-navigator-default .qti-navigator-label .qti-navigator-number{display:none}.qti-navigator-default .qti-navigator-icon,.qti-navigator-default .icon{position:relative;top:1px;display:inline-block;line-height:2.8rem;margin-right:.5rem}.qti-navigator-default .unseen .qti-navigator-icon{cursor:default}.qti-navigator-default.prevents-unseen:not(.skipahead-enabled) .unseen .qti-navigator-icon,.qti-navigator-default.prevents-unseen:not(.skipahead-enabled) .unseen .qti-navigator-label{cursor:not-allowed !important}.qti-navigator-default .icon-answered:before{content:\"\uE69A\"}.qti-navigator-default .icon-viewed:before{content:\"\uE631\"}.qti-navigator-default .icon-flagged:before{content:\"\uE64E\"}.qti-navigator-default .icon-unanswered:before,.qti-navigator-default .icon-unseen:before{content:\"\uE6A5\"}.qti-navigator-default .qti-navigator-counter{text-align:right;margin-left:auto;font-size:12px;font-size:1.2rem}.qti-navigator-default .qti-navigator-actions{text-align:center}.qti-navigator-default .qti-navigator-info.collapsed{height:calc(3rem + 1px)}.qti-navigator-default .qti-navigator-info{height:calc(5*(3rem + 1px));overflow:hidden}.qti-navigator-default .qti-navigator-info>.qti-navigator-label{min-width:calc(100% - 16px);padding:0 8px}.qti-navigator-default .qti-navigator-info ul{padding:0 4px}.qti-navigator-default .qti-navigator-info ul .qti-navigator-label span.qti-navigator-text{padding:0 6px;min-width:10rem}.qti-navigator-default .qti-navigator-info ul .qti-navigator-label span.qti-navigator-icon{min-width:1.5rem}.qti-navigator-default .qti-navigator-info ul .qti-navigator-label span.qti-navigator-counter{min-width:5rem}.qti-navigator-default .qti-navigator-filters{margin-top:1rem;text-align:center;width:15rem;height:calc(3rem + (2 * 1px))}.qti-navigator-default .qti-navigator-filters ul{display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch}.qti-navigator-default .qti-navigator-filters li{display:block}.qti-navigator-default .qti-navigator-filters li .qti-navigator-tab{border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;border-left:none;line-height:3rem;min-width:5rem;cursor:pointer;white-space:nowrap}.qti-navigator-default .qti-navigator-tree{-webkit-flex:1;-moz-flex:1;-ms-flex:1;-o-flex:1;flex:1;overflow-y:auto}.qti-navigator-default .qti-navigator-linear,.qti-navigator-default .qti-navigator-linear-part{padding:8px}.qti-navigator-default .qti-navigator-linear .icon,.qti-navigator-default .qti-navigator-linear-part .icon{display:none}.qti-navigator-default .qti-navigator-linear .qti-navigator-label,.qti-navigator-default .qti-navigator-linear-part .qti-navigator-label{font-size:14px;font-size:1.4rem}.qti-navigator-default .qti-navigator-linear .qti-navigator-title,.qti-navigator-default .qti-navigator-linear-part .qti-navigator-title{font-size:14px;font-size:1.4rem;margin:8px 0}.qti-navigator-default .qti-navigator-linear .qti-navigator-message,.qti-navigator-default .qti-navigator-linear-part .qti-navigator-message{font-size:14px;font-size:1.4rem}.qti-navigator-default .qti-navigator-part>.qti-navigator-label{padding:0 8px}.qti-navigator-default .qti-navigator-part:not(:first-child){margin-top:1px}.qti-navigator-default .qti-navigator-section>.qti-navigator-label{padding:0 8px}.qti-navigator-default .qti-navigator-item{margin:1px 0;padding-left:10px}.qti-navigator-default .qti-navigator-item:first-child{margin-top:0}.qti-navigator-default .qti-navigator-item.disabled>.qti-navigator-label{cursor:not-allowed}.qti-navigator-default .qti-navigator-collapsible{cursor:pointer;text-align:center;display:none;position:absolute;top:0;bottom:0;right:0;padding-top:50%}.qti-navigator-default .qti-navigator-collapsible .icon{font-size:20px;font-size:2rem;width:1rem !important;height:2rem !important}.qti-navigator-default .qti-navigator-collapsible .qti-navigator-expand{display:none}.qti-navigator-default.collapsible{padding-right:calc(1rem + 10px) !important}.qti-navigator-default.collapsible .qti-navigator-collapsible{display:block}.qti-navigator-default.collapsed{width:calc(8rem + 1rem + 10px);min-width:8rem}.qti-navigator-default.collapsed ul{padding:0 !important}.qti-navigator-default.collapsed .qti-navigator-text,.qti-navigator-default.collapsed .qti-navigator-info>.qti-navigator-label,.qti-navigator-default.collapsed .qti-navigator-part>.qti-navigator-label,.qti-navigator-default.collapsed .qti-navigator-section>.qti-navigator-label,.qti-navigator-default.collapsed .qti-navigator-message{display:none !important}.qti-navigator-default.collapsed .qti-navigator-label{padding:0 2px !important;width:calc(8rem - 4px);min-width:calc(8rem - 4px)}.qti-navigator-default.collapsed .qti-navigator-icon,.qti-navigator-default.collapsed .icon{width:auto}.qti-navigator-default.collapsed .qti-navigator-counter{margin-left:0;min-width:4rem !important}.qti-navigator-default.collapsed .qti-navigator-collapsible .qti-navigator-collapse{display:none}.qti-navigator-default.collapsed .qti-navigator-collapsible .qti-navigator-expand{display:block}.qti-navigator-default.collapsed .qti-navigator-info{height:calc(4*(3rem + 1px))}.qti-navigator-default.collapsed .qti-navigator-info.collapsed .collapsible-panel{display:block !important}.qti-navigator-default.collapsed .qti-navigator-filters{width:calc(8rem - 16px)}.qti-navigator-default.collapsed .qti-navigator-filter span{display:none}.qti-navigator-default.collapsed .qti-navigator-filter.active span{display:block;border:0 none;width:calc(8rem - 16px)}.qti-navigator-default.collapsed .qti-navigator-item,.qti-navigator-default.collapsed .qti-navigator-linear,.qti-navigator-default.collapsed .qti-navigator-linear-part{padding-left:2px;text-align:center}.qti-navigator-default.collapsed .qti-navigator-item{overflow:hidden}.qti-navigator-default.collapsed .qti-navigator-item .qti-navigator-icon{padding-left:6px;width:2rem}.qti-navigator-default.collapsed .qti-navigator-item .qti-navigator-number{display:inline-block;margin-left:6px;margin-right:8rem}.qti-navigator-default.collapsed .qti-navigator-linear,.qti-navigator-default.collapsed .qti-navigator-linear-part{padding:0 0 8px 0}.qti-navigator-default.collapsed .qti-navigator-linear .icon,.qti-navigator-default.collapsed .qti-navigator-linear-part .icon{display:block}.qti-navigator-default.collapsed .qti-navigator-actions button{padding:0 9px 0 5px}.qti-navigator-default .qti-navigator-info>.qti-navigator-label{background-color:#d4d5d7;color:#222;border-top:1px solid #d4d5d7}.qti-navigator-default .qti-navigator-info li{border-bottom:1px solid #fff}.qti-navigator-default .qti-navigator-filter .qti-navigator-tab{background-color:#fff}.qti-navigator-default .qti-navigator-filter .qti-navigator-tab:hover{background-color:#3e7da7;color:#fff}.qti-navigator-default .qti-navigator-filter.active .qti-navigator-tab{background-color:#a4a9b1;color:#fff}.qti-navigator-default .qti-navigator-linear,.qti-navigator-default .qti-navigator-linear-part{background:#fff}.qti-navigator-default .qti-navigator-part>.qti-navigator-label{background-color:#dddfe2}.qti-navigator-default .qti-navigator-part>.qti-navigator-label:hover{background-color:#c6cacf}.qti-navigator-default .qti-navigator-part.active>.qti-navigator-label{background-color:#c0c4ca}.qti-navigator-default .qti-navigator-section>.qti-navigator-label{border-bottom:1px solid #fff}.qti-navigator-default .qti-navigator-section>.qti-navigator-label:hover{background-color:#ebe8e4}.qti-navigator-default .qti-navigator-section.active>.qti-navigator-label{background-color:#ded9d4}.qti-navigator-default .qti-navigator-item{background:#fff}.qti-navigator-default .qti-navigator-item.active{background:#0e5d91;color:#fff}.qti-navigator-default .qti-navigator-item:hover{background:#0a3f62;color:#fff}.qti-navigator-default .qti-navigator-item.disabled{background-color:#e2deda !important}.qti-navigator-default .qti-navigator-collapsible{background-color:#dfe1e4;color:#222}.qti-navigator-default .qti-navigator-collapsible .icon{color:#fff}.qti-navigator-fizzy{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;-o-flex-direction:column;flex-direction:column;cursor:default;min-width:calc(18rem - 8px);height:100%;position:relative;background-color:#f2f2f2 !important;width:30rem}.qti-navigator-fizzy .qti-navigator-tree{overflow-y:auto;max-height:100%;display:block;background:none;margin:0 5px}.qti-navigator-fizzy .qti-navigator-linear{padding:8px;margin:0 5px;background:#fff}.qti-navigator-fizzy .qti-navigator-linear .qti-navigator-message{font-size:14px;font-size:1.4rem}.qti-navigator-fizzy .qti-navigator-section{display:block}.qti-navigator-fizzy .qti-navigator-section .qti-navigator-label{background-color:initial;border:none;padding:0;line-height:initial;margin:13px 0 10px 0;font-size:15px;font-size:1.5rem}.qti-navigator-fizzy .qti-navigator-header{display:flex;justify-content:space-between;border-bottom:1px solid #cec7bf;padding:15px 0 5px 0;margin:0 5px;line-height:initial}.qti-navigator-fizzy .qti-navigator-header .qti-navigator-text{font-size:20px;font-size:2rem;font-weight:bold}.qti-navigator-fizzy .qti-navigator-header .icon-close{font-size:28px;font-size:2.8rem;line-height:3rem;color:#1f1f1f}.qti-navigator-fizzy .qti-navigator-header .icon-close:hover{color:#1f1f1f;text-decoration:none;cursor:pointer}.document-viewer-plugin{position:relative}.document-viewer-plugin .viewer-overlay{position:fixed;top:0;left:0;bottom:0;right:0;z-index:10000;width:100%;opacity:.5;background-color:#e4ecef}.document-viewer-plugin .viewer-panel{position:fixed;top:10px;left:10px;bottom:10px;right:10px;z-index:100000;color:#222;background:#f3f1ef;font-size:14px;font-size:1.4rem;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px}.document-viewer-plugin .viewer-header{position:relative;width:100%;height:30px;padding:5px 0;z-index:1}.document-viewer-plugin .viewer-header .viewer-title{font-size:15px;font-size:1.5rem;padding:0;margin:0 0 0 1.6rem}.document-viewer-plugin .viewer-header .icon{float:right;font-size:20px;font-size:2rem;color:#266d9c;margin:1px 6px;top:3px}.document-viewer-plugin .viewer-header .icon:hover{cursor:pointer;opacity:.75}.document-viewer-plugin .viewer-content{padding:0 20px;margin-top:4px;position:relative;height:calc(100% - 40px);overflow:auto}.qti-choiceInteraction.maskable .qti-choice .answer-mask{position:absolute;top:0;right:0;height:100%;padding:5px 10px 0 10px;z-index:10;color:#0e5d91;border:solid 1px #222;background-color:#c8d6dc;text-align:right;vertical-align:middle}.qti-choiceInteraction.maskable .qti-choice .answer-mask:hover{color:#568eb2}.qti-choiceInteraction.maskable .qti-choice .answer-mask .answer-mask-toggle:before{font-family:\"tao\" !important;speak:never;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:\"\uE643\"}.qti-choiceInteraction.maskable .qti-choice .label-content{padding-right:40px}.qti-choiceInteraction.maskable .qti-choice.masked .answer-mask{width:100%}.qti-choiceInteraction.maskable .qti-choice.masked .answer-mask .answer-mask-toggle:before{font-family:\"tao\" !important;speak:never;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:\"\uE631\"}.qti-choiceInteraction.maskable .qti-choice.masked .answer-mask:hover{background-color:#d2dde2}.mask-container.mask-container{background-color:rgba(0,0,0,0)}.mask-container.mask-container .dynamic-component-title-bar{border-top-left-radius:5px;border-top-right-radius:5px;background-color:rgba(0,0,0,0);border:none;position:absolute;width:100%;z-index:1}.mask-container.mask-container .dynamic-component-title-bar.moving{background:#f3f1ef;border-bottom:1px solid #8d949e}.mask-container.mask-container .dynamic-component-title-bar .closer{display:none}.mask-container.mask-container .dynamic-component-resize-container .dynamic-component-resize-wrapper{bottom:0}.mask-container.mask-container .dynamic-component-resize-container .dynamic-component-resize-wrapper:hover,.mask-container.mask-container .dynamic-component-resize-container .dynamic-component-resize-wrapper.resizing{bottom:20px}.mask-container.mask-container .dynamic-component-content .mask{position:absolute;width:100%;height:100%;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;background:rgba(0,0,0,0);opacity:1}.mask-container.mask-container .dynamic-component-content .mask .inner{-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;position:relative;width:100%;height:100%;background-color:#fff;opacity:1;box-sizing:content-box;padding-bottom:30px}.mask-container.mask-container .dynamic-component-content .mask .controls{background:#f3f1ef;position:absolute;top:0;right:0;padding:0 5px 0 10px;border-radius:5px;border-top-left-radius:0;border-bottom-right-radius:0;border-bottom:1px solid #8d949e;border-left:1px solid #8d949e;height:30px;z-index:2}.mask-container.mask-container .dynamic-component-content .mask .controls a{text-decoration:none;margin-right:5px;vertical-align:middle}.mask-container.mask-container .dynamic-component-content .mask .controls a:hover{color:#0a4166}.mask-container.mask-container .dynamic-component-content .mask .controls .view{font-size:20px;font-size:2rem}.mask-container.mask-container .dynamic-component-content .mask .controls .close{font-size:20px;font-size:2rem}.mask-container.mask-container .dynamic-component-content.moving .mask .inner{border-color:rgba(14,93,145,.5);opacity:.55}.mask-container.mask-container .dynamic-component-content.moving .mask .controls{border-left:none;border-bottom-left-radius:0;z-index:2}.mask-container.mask-container .dynamic-component-content.sizing .mask{border-color:rgba(14,93,145,.5)}.mask-container.mask-container .dynamic-component-content.sizing .mask .inner{opacity:.55}.mask-container.mask-container .dynamic-component-content.sizing .mask .controls{background-color:rgba(0,0,0,0);border-bottom:none;border-left:none}.mask-container.mask-container.previewing .dynamic-component-content .mask .inner{opacity:.15;-webkit-transition:opacity, 600ms, ease, 0s;-moz-transition:opacity, 600ms, ease, 0s;-ms-transition:opacity, 600ms, ease, 0s;-o-transition:opacity, 600ms, ease, 0s;transition:opacity, 600ms, ease, 0s}.mask-container.mask-container.previewing .dynamic-component-content .mask .controls{background-color:rgba(0,0,0,0);border-bottom:none;border-left:none}.connectivity-box{display:none;width:40px;margin-left:40px}.connectivity-box.with-message{width:60px}.connectivity-box .icon-connect,.connectivity-box .icon-disconnect{display:none;line-height:2;font-size:16px;font-size:1.6rem;text-shadow:0 1px 0 rgba(0,0,0,.9)}.connectivity-box .message-connect,.connectivity-box .message-disconnected{display:none;font-size:14px;font-size:1.4rem;text-shadow:none;margin-right:3px}.connectivity-box.connected,.connectivity-box.disconnected{display:inline-block}.connectivity-box.connected .icon-connect,.connectivity-box.connected .message-connect{display:inline-block}.connectivity-box.disconnected .icon-disconnect,.connectivity-box.disconnected .message-disconnected{display:inline-block}.line-reader-mask{box-sizing:border-box;border:0 solid #0e5d91;background-color:#f3f7fa}.line-reader-mask.hidden{display:none}.line-reader-mask.resizing{background-color:rgba(243,247,250,.8);border-color:rgba(14,93,145,.5)}.line-reader-mask.resizer{z-index:99999 !important}.line-reader-mask.resizer.se .resize-control{border-right:2px solid #0e5d91;border-bottom:2px solid #0e5d91;width:40px;height:40px}.line-reader-mask.border-top{border-top-width:1px}.line-reader-mask.border-right{border-right-width:1px}.line-reader-mask.border-bottom{border-bottom-width:1px}.line-reader-mask.border-left{border-left-width:1px}.line-reader-mask.ne{-webkit-border-top-right-radius:5px;-moz-border-radius-topright:5px;border-top-right-radius:5px}.line-reader-mask.se{-webkit-border-bottom-right-radius:5px;-moz-border-radius-bottomright:5px;border-bottom-right-radius:5px}.line-reader-mask.sw{-webkit-border-bottom-left-radius:5px;-moz-border-radius-bottomleft:5px;border-bottom-left-radius:5px}.line-reader-mask.nw{-webkit-border-top-left-radius:5px;-moz-border-radius-topleft:5px;border-top-left-radius:5px}.line-reader-mask.se .resize-control{width:20px;height:20px;margin-bottom:10px;margin-right:10px;border-right:1px solid #0e5d91;border-bottom:1px solid #0e5d91;position:absolute;right:0;bottom:0;cursor:nwse-resize}.line-reader-mask.e .resize-control{position:absolute;width:20px;height:20px;bottom:-10px;left:-10px;border-right:1px solid #0e5d91;border-bottom:1px solid #0e5d91;cursor:nesw-resize}.line-reader-mask.s .resize-control{position:absolute;width:20px;height:10px;right:-10px;border-bottom:1px solid #0e5d91}.line-reader-overlay{box-sizing:border-box;opacity:0}.line-reader-overlay.hidden{display:none}.line-reader-overlay.moving{-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}.line-reader-overlay.moving.n{max-height:none}.line-reader-overlay.moving,.line-reader-overlay .inner-window{overflow:hidden;position:absolute;opacity:1;background-color:rgba(0,0,0,0);border:1px solid rgba(14,93,145,.5)}.line-reader-overlay .inner-window{box-sizing:content-box}.line-reader-overlay .mask-bg{box-sizing:border-box;border:0 solid rgba(243,247,250,.8);background-color:rgba(0,0,0,0);position:absolute}.line-reader-overlay.n{max-height:30px;opacity:1}.line-reader-overlay.n .icon-mobile-menu{font-size:22px;font-size:2.2rem;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;border-bottom:1px solid #0e5d91;color:#0e5d91;position:absolute;left:0;top:0;height:30px;width:100%;z-index:1}.line-reader-overlay.n .icon-mobile-menu:hover{color:#0a4166}.line-reader-overlay.n .icon-mobile-menu:before{position:relative;top:3px}.line-reader-overlay .icon-mobile-menu{display:none}.line-reader-inner-drag{-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;text-align:center;padding-top:3px;color:#0e5d91}.line-reader-inner-drag.hidden{display:none}.line-reader-inner-drag:hover{background-color:#87aec8;color:#0a4166}.line-reader-inner-drag.moving{background-color:rgba(0,0,0,0);color:#9fbed3}.line-reader-inner-drag .icon{text-shadow:none !important;border-bottom-left-radius:110px;border-bottom-right-radius:110px;border:1px solid #0e5d91;border-top:0;width:50px;height:25px;position:relative;bottom:10px}.line-reader-inner-drag .icon:before{position:relative;top:5px;left:1px}.line-reader-closer{font-size:22px;font-size:2.2rem;cursor:pointer;color:#0e5d91;width:12px;height:12px}.line-reader-closer:hover{color:#0a4166}.line-reader-closer .icon{text-shadow:none !important}.magnifier-container.magnifier-container{background-color:rgba(0,0,0,0)}.magnifier-container.magnifier-container .dynamic-component-title-bar{border-top-left-radius:5px;border-top-right-radius:5px;background-color:rgba(0,0,0,0);border:none;position:absolute;width:100%;z-index:3}.magnifier-container.magnifier-container .dynamic-component-title-bar.moving{background:#f3f1ef;border-bottom:1px solid #8d949e}.magnifier-container.magnifier-container .dynamic-component-title-bar .closer{display:none}.magnifier-container.magnifier-container .dynamic-component-resize-container .dynamic-component-resize-wrapper{bottom:0}.magnifier-container.magnifier-container .dynamic-component-resize-container .dynamic-component-resize-wrapper:hover,.magnifier-container.magnifier-container .dynamic-component-resize-container .dynamic-component-resize-wrapper.resizing{bottom:20px}.magnifier-container.magnifier-container .dynamic-component-content .magnifier{position:absolute;width:100%;height:100%;overflow:hidden;background-color:#fff;opacity:1;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;box-sizing:content-box;padding-bottom:30px}@-o-keyframes fadeIn{0%{opacity:0;visibility:visible}100%{opacity:1;visibility:visible}}@-moz-keyframes fadeIn{0%{opacity:0;visibility:visible}100%{opacity:1;visibility:visible}}@-webkit-keyframes fadeIn{0%{opacity:0;visibility:visible}100%{opacity:1;visibility:visible}}@keyframes fadeIn{0%{opacity:0;visibility:visible}100%{opacity:1;visibility:visible}}@-o-keyframes fadeOut{0%{opacity:1;visibility:visible}100%{opacity:0;visibility:hidden}}@-moz-keyframes fadeOut{0%{opacity:1;visibility:visible}100%{opacity:0;visibility:hidden}}@-webkit-keyframes fadeOut{0%{opacity:1;visibility:visible}100%{opacity:0;visibility:hidden}}@keyframes fadeOut{0%{opacity:1;visibility:visible}100%{opacity:0;visibility:hidden}}@-o-keyframes pop{0%{opacity:0;visibility:visible}50%{opacity:.5;visibility:visible;transform:scale(2)}100%{opacity:0;visibility:hidden;transform:scale(3)}}@-moz-keyframes pop{0%{opacity:0;visibility:visible}50%{opacity:.5;visibility:visible;transform:scale(2)}100%{opacity:0;visibility:hidden;transform:scale(3)}}@-webkit-keyframes pop{0%{opacity:0;visibility:visible}50%{opacity:.5;visibility:visible;transform:scale(2)}100%{opacity:0;visibility:hidden;transform:scale(3)}}@keyframes pop{0%{opacity:0;visibility:visible}50%{opacity:.5;visibility:visible;transform:scale(2)}100%{opacity:0;visibility:hidden;transform:scale(3)}}.magnifier-container.magnifier-container .dynamic-component-content .magnifier .level{position:absolute;overflow:hidden;z-index:1;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0);color:#3e7da7;opacity:1;font-size:50px;font-size:5rem;display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-webkit-animation:pop 400ms forwards;-moz-animation:pop 400ms forwards;-ms-animation:pop 400ms forwards;-o-animation:pop 400ms forwards;animation:pop 400ms forwards}.magnifier-container.magnifier-container .dynamic-component-content .magnifier .level:before{content:\"x\"}.magnifier-container.magnifier-container .dynamic-component-content .magnifier .overlay{position:absolute;overflow:hidden;z-index:2;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0)}.magnifier-container.magnifier-container .dynamic-component-content .magnifier>.controls{position:absolute;background-color:#f3f1ef;border:0 solid #8d949e;min-height:29px;z-index:4}.magnifier-container.magnifier-container .dynamic-component-content .magnifier>.controls a{color:#222;text-decoration:none;font-size:20px;font-size:2rem;margin:0 2px}.magnifier-container.magnifier-container .dynamic-component-content .magnifier>.controls a:hover{color:#0a4166}.magnifier-container.magnifier-container .dynamic-component-content .magnifier>.controls.close{top:0;right:0;border-bottom-width:1px;border-left-width:1px;-webkit-border-bottom-left-radius:5px;-moz-border-radius-bottomleft:5px;border-bottom-left-radius:5px}.magnifier-container.magnifier-container .dynamic-component-content .magnifier .inner{position:absolute}.magnifier-container.magnifier-container .dynamic-component-content.moving .magnifier .controls{border-left:none;border-bottom-left-radius:0}.magnifier-container.magnifier-container .dynamic-component-content.sizing{border-color:rgba(14,93,145,.5)}.magnifier-container.magnifier-container .dynamic-component-content.sizing .inner,.magnifier-container.magnifier-container .dynamic-component-content.sizing .controls,.magnifier-container.magnifier-container .dynamic-component-content.sizing .level{opacity:.45 !important}.progress-box .progressbar .progressbar-points{display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch}.progress-box .progressbar .progressbar-points>span.progressbar-point{flex:1;display:inline-block;border:1px solid #0e5d91;background-color:#f3f1ef;height:calc(1rem - 4px);margin:0 1px 0 0}.progress-box .progressbar .progressbar-points>span.progressbar-point:last-child{margin-right:0}.progress-box .progressbar .progressbar-points>span.progressbar-point.reached{background-color:#0e5d91}.progress-box .progressbar .progressbar-points>span.progressbar-point.current{background-color:#a4a9b1}.tts-container .tts-controls{display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;background-color:#f3f1ef;-webkit-box-shadow:0 2px 3px 1px rgba(0, 0, 0, 0.2);-moz-box-shadow:0 2px 3px 1px rgba(0, 0, 0, 0.2);-ms-box-shadow:0 2px 3px 1px rgba(0, 0, 0, 0.2);-o-box-shadow:0 2px 3px 1px rgba(0, 0, 0, 0.2);box-shadow:0 2px 3px 1px rgba(0, 0, 0, 0.2)}.tts-container .tts-controls .tts-control{display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;color:#222;height:100%;padding:6px 8.5px;text-decoration:none}.tts-container .tts-controls .tts-control .tts-control-label{padding-left:7.5px}.tts-container .tts-controls .tts-control .tts-icon{font-size:18px;text-align:center;width:18px}.tts-container .tts-controls .tts-control .icon-pause{display:none}.tts-container .tts-controls .tts-control.tts-control-drag{cursor:move}.tts-container .tts-controls .tts-control.tts-control-drag .tts-icon{color:#555}.tts-container .tts-controls .tts-control.tts-control-drag:hover{background-color:rgba(0,0,0,0)}.tts-container .tts-controls .tts-control:hover{background-color:#ddd8d2}.tts-container .tts-controls .tts-control-container{display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch}.tts-container .tts-controls .tts-control-container .tts-slider-container{display:none}.tts-container .tts-controls .tts-control-container .tts-slider-container .tts-slider{margin:0 8.5px;width:80px}.tts-container.playing .tts-controls .tts-control .icon-pause{display:block}.tts-container.playing .tts-controls .tts-control .icon-play{display:none}.tts-container.sfhMode .tts-controls .tts-control.tts-control-mode{-webkit-box-shadow:inset 2px 2px 4px rgba(0, 0, 0, 0.2);-moz-box-shadow:inset 2px 2px 4px rgba(0, 0, 0, 0.2);-ms-box-shadow:inset 2px 2px 4px rgba(0, 0, 0, 0.2);-o-box-shadow:inset 2px 2px 4px rgba(0, 0, 0, 0.2);box-shadow:inset 2px 2px 4px rgba(0, 0, 0, 0.2);background-color:#ddd8d2}.tts-container.settings .tts-controls .tts-control-container .tts-slider-container{display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.tts-container.settings .tts-controls .tts-control-container:last-child{-webkit-box-shadow:inset 2px 2px 4px rgba(0, 0, 0, 0.2);-moz-box-shadow:inset 2px 2px 4px rgba(0, 0, 0, 0.2);-ms-box-shadow:inset 2px 2px 4px rgba(0, 0, 0, 0.2);-o-box-shadow:inset 2px 2px 4px rgba(0, 0, 0, 0.2);box-shadow:inset 2px 2px 4px rgba(0, 0, 0, 0.2);background-color:#ddd8d2}.tts-container.settings .tts-controls .tts-control-container .tts-control-settings:hover{background-color:rgba(0,0,0,0)}.tts-content-node{outline:none}.tts-visible.tts-component-container .test-runner-sections .tts-content-node:hover,.tts-visible.tts-component-container .test-runner-sections .tts-content-node:focus{background-color:rgba(0,0,0,0) !important;color:#222 !important}.tts-visible.tts-component-container .test-runner-sections .tts-content-node .label-box,.tts-visible.tts-component-container .test-runner-sections .tts-content-node .qti-choice{cursor:default !important}.tts-sfhMode.tts-component-container .test-runner-sections{cursor:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNHB4IiBoZWlnaHQ9IjE0cHgiIHZpZXdCb3g9IjAgMCAxNCAxNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT5Hcm91cCAyPC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjQuMDAwMDAwLCAtMTYuMDAwMDAwKSI+ICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIzLjAwMDAwMCwgMTUuMDAwMDAwKSI+ICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS02IiB4PSIwIiB5PSIwIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjwvcmVjdD4gICAgICAgICAgICAgICAgPGcgaWQ9Imljb24tLy0xNi0vLWNoZXZyb24tYm90dG9tLWNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAyLjAwMDAwMCkiIGZpbGw9IiMyRDJEMkQiPiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9InN3YXAtaWNvbi1jb2xvciIgcG9pbnRzPSIwIDAgMCA4IDYgNCI+PC9wb2x5Z29uPiAgICAgICAgICAgICAgICA8L2c+ICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weSIgZmlsbD0iIzJEMkQyRCIgeD0iOSIgeT0iNSIgd2lkdGg9IjYiIGhlaWdodD0iMiI+PC9yZWN0PiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktNCIgZmlsbD0iIzJEMkQyRCIgeD0iOSIgeT0iMSIgd2lkdGg9IjYiIGhlaWdodD0iMiI+PC9yZWN0PiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktMiIgZmlsbD0iIzJEMkQyRCIgeD0iOSIgeT0iOSIgd2lkdGg9IjYiIGhlaWdodD0iMiI+PC9yZWN0PiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktMyIgZmlsbD0iIzJEMkQyRCIgeD0iMSIgeT0iMTMiIHdpZHRoPSIxNCIgaGVpZ2h0PSIyIj48L3JlY3Q+ICAgICAgICAgICAgPC9nPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+) 0 32,auto !important}.tts-sfhMode.tts-component-container .test-runner-sections .tts-content-node.tts-active-content-node:hover{color:#222 !important;background-color:#ff0 !important}.tts-sfhMode.tts-component-container .test-runner-sections .tts-content-node:hover,.tts-sfhMode.tts-component-container .test-runner-sections .tts-content-node:focus{color:#222 !important;background-color:#f3f1ef !important}.tts-sfhMode.tts-component-container .test-runner-sections .tts-content-node .label-box,.tts-sfhMode.tts-component-container .test-runner-sections .tts-content-node .qti-choice{cursor:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNHB4IiBoZWlnaHQ9IjE0cHgiIHZpZXdCb3g9IjAgMCAxNCAxNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT5Hcm91cCAyPC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjQuMDAwMDAwLCAtMTYuMDAwMDAwKSI+ICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIzLjAwMDAwMCwgMTUuMDAwMDAwKSI+ICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS02IiB4PSIwIiB5PSIwIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjwvcmVjdD4gICAgICAgICAgICAgICAgPGcgaWQ9Imljb24tLy0xNi0vLWNoZXZyb24tYm90dG9tLWNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAyLjAwMDAwMCkiIGZpbGw9IiMyRDJEMkQiPiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9InN3YXAtaWNvbi1jb2xvciIgcG9pbnRzPSIwIDAgMCA4IDYgNCI+PC9wb2x5Z29uPiAgICAgICAgICAgICAgICA8L2c+ICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weSIgZmlsbD0iIzJEMkQyRCIgeD0iOSIgeT0iNSIgd2lkdGg9IjYiIGhlaWdodD0iMiI+PC9yZWN0PiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktNCIgZmlsbD0iIzJEMkQyRCIgeD0iOSIgeT0iMSIgd2lkdGg9IjYiIGhlaWdodD0iMiI+PC9yZWN0PiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktMiIgZmlsbD0iIzJEMkQyRCIgeD0iOSIgeT0iOSIgd2lkdGg9IjYiIGhlaWdodD0iMiI+PC9yZWN0PiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktMyIgZmlsbD0iIzJEMkQyRCIgeD0iMSIgeT0iMTMiIHdpZHRoPSIxNCIgaGVpZ2h0PSIyIj48L3JlY3Q+ICAgICAgICAgICAgPC9nPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+) 0 32,auto !important}.tts-sfhMode.tts-component-container .test-runner-sections img.tts-content-node:hover,.tts-sfhMode.tts-component-container .test-runner-sections img.tts-content-node:focus{padding:5px}.tts-playing.tts-component-container .test-runner-sections .tts-content-node.tts-active-content-node,.tts-playing.tts-component-container .test-runner-sections .tts-content-node.tts-active-content-node *{color:#222 !important;background-color:#ff0 !important}.tts-playing.tts-component-container .test-runner-sections .tts-content-node.tts-active-content-node:hover,.tts-playing.tts-component-container .test-runner-sections .tts-content-node.tts-active-content-node *:hover{color:#222 !important;background-color:#ff0 !important}.tts-playing.tts-component-container .test-runner-sections img.tts-content-node.tts-active-content-node{padding:5px}body.delivery-scope{min-height:100vh;max-height:100vh;margin-bottom:0}.runner{position:relative}.qti-choiceInteraction .overlay-answer-eliminator{display:none}.test-runner-scope{position:relative;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:calc(100vh - 99px)}.test-runner-scope .landmark-title-hidden{width:1px;height:1px;overflow:hidden;position:absolute}.test-runner-scope .test-runner-sections{-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;overflow:hidden;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.test-runner-scope .test-sidebar{background:#f3f1ef;-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;overflow-y:auto;max-width:350px}.test-runner-scope .test-sidebar>.qti-panel{max-width:350px;padding:10px}@media only screen and (max-device-width: 800px){.test-runner-scope .test-sidebar{max-width:200px}.test-runner-scope .test-sidebar>.qti-panel{max-width:200px}}@media only screen and (min-device-width: 800px)and (max-device-width: 1280px){.test-runner-scope .test-sidebar{max-width:250px}.test-runner-scope .test-sidebar>.qti-panel{max-width:250px}}@media only screen and (min-device-width: 1280px)and (max-device-width: 1440px){.test-runner-scope .test-sidebar{max-width:300px}.test-runner-scope .test-sidebar>.qti-panel{max-width:300px}}.test-runner-scope .test-sidebar-left{border-right:1px #ddd solid}.test-runner-scope .test-sidebar-right{border-left:1px #ddd solid}.test-runner-scope .content-wrapper{position:relative;-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;overflow:auto;padding:0}.test-runner-scope .content-wrapper .overlay{position:absolute;left:0;right:0;top:0;bottom:0;width:100%;opacity:.9}.test-runner-scope .content-wrapper .overlay-full{background-color:#fff;opacity:1}.test-runner-scope #qti-content{-webkit-overflow-scrolling:touch;max-width:1024px;width:100%;margin:auto}.test-runner-scope #qti-item{width:100%;min-width:100%;height:auto;overflow:visible}.test-runner-scope .qti-item{padding:30px}.test-runner-scope .size-wrapper{max-width:1280px;margin:auto;width:100%}.test-runner-scope #qti-rubrics{margin:auto;max-width:1024px;width:100%}.test-runner-scope #qti-rubrics .qti-rubricBlock{margin:20px 0}.test-runner-scope #qti-rubrics .hidden{display:none}.test-runner-scope .visible-hidden{position:absolute;overflow:hidden;height:1px;width:1px;word-wrap:normal}.no-controls .test-runner-scope{height:100vh}.test-runner-scope .action-bar.content-action-bar{padding:2px}.test-runner-scope .action-bar.content-action-bar li{margin:2px 0 0 10px;border:none}.test-runner-scope .action-bar.content-action-bar li.btn-info{padding-top:6px;height:36px;margin-top:0;border-bottom:solid 2px rgba(0,0,0,0);border-radius:0}.test-runner-scope .action-bar.content-action-bar li.btn-info.btn-group{border:none !important;overflow:hidden;padding:0}.test-runner-scope .action-bar.content-action-bar li.btn-info.btn-group a{float:left;margin:0 2px;padding:0 15px;border:1px solid rgba(255,255,255,.3);border-radius:0px;display:inline-block;height:inherit}.test-runner-scope .action-bar.content-action-bar li.btn-info.btn-group a:first-of-type{border-top-left-radius:3px;border-bottom-left-radius:3px;margin-left:0}.test-runner-scope .action-bar.content-action-bar li.btn-info.btn-group a:last-of-type{border-top-right-radius:3px;border-bottom-right-radius:3px;margin-right:0}.test-runner-scope .action-bar.content-action-bar li.btn-info.btn-group a:hover,.test-runner-scope .action-bar.content-action-bar li.btn-info.btn-group a.active{border-color:rgba(255,255,255,.8)}.test-runner-scope .action-bar.content-action-bar li.btn-info.btn-group a .no-label{padding-right:0}.test-runner-scope .action-bar.content-action-bar li.btn-info:hover,.test-runner-scope .action-bar.content-action-bar li.btn-info.active{border-bottom-color:rgba(255,255,255,.8)}.test-runner-scope .action-bar.content-action-bar li.btn-info:active,.test-runner-scope .action-bar.content-action-bar li.btn-info.active{background:#e7eff4;border-color:rgba(255,255,255,.8)}.test-runner-scope .action-bar.content-action-bar li.btn-info:active a,.test-runner-scope .action-bar.content-action-bar li.btn-info.active a{color:#266d9c;text-shadow:none}.test-runner-scope .action-bar.content-action-bar li.btn-info:active:hover,.test-runner-scope .action-bar.content-action-bar li.btn-info.active:hover{background:#fff}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar{opacity:1;height:40px;flex-basis:40px}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar>.control-box{height:38px;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:space-between;-ms-flex-pack:space-between;justify-content:space-between;padding-left:10px;padding-right:10px}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar>.control-box .title-box{font-size:14px;font-size:1.4rem;padding:4px 0 0;-ms-flex:0 1 auto;-webkit-flex:0 1 auto;flex:0 1 auto}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar>.control-box .progress-box,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar>.control-box .item-number-box{padding-top:4px;white-space:nowrap;-ms-flex:0 1 auto;-webkit-flex:0 1 auto;flex:0 1 auto}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar>.control-box .progress-box .qti-controls,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar>.control-box .item-number-box .qti-controls{display:inline-block;margin-left:20px;white-space:nowrap}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar>.control-box .timer-box{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar>.control-box .progressbar{margin-top:5px;min-width:150px;max-width:200px;height:.6em}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box{color:rgba(255,255,255,.9);text-shadow:1px 1px 0 #000}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .lft,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .rgt{padding-left:20px}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .lft:first-child,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .rgt:first-child{padding-left:0}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .lft:last-child ul,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box .rgt:last-child ul{display:inline-block}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box [class^=btn-],.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar>.control-box [class*=\" btn-\"]{white-space:nowrap}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .action{position:relative;overflow:visible}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu{color:#222;background:#f3f1ef;border:1px solid #aaa9a7;overflow:auto;list-style:none;min-width:150px;margin:0;padding:0;position:absolute;bottom:36px;left:-3px}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action{display:inline-block;text-align:left;width:100%;white-space:nowrap;overflow:hidden;color:#222;border-bottom:1px solid #c2c1bf;margin:0;-moz-border-radius:0px;-webkit-border-radius:0px;border-radius:0px;height:auto;padding:8px 15px 9px;line-height:1;border-left:solid 3px rgba(0,0,0,0)}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action .icon-checkbox-checked{display:none}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.active{background-color:#dbd9d7;font-weight:bold}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover .icon-checkbox,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover .icon-checkbox,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.active .icon-checkbox{display:none}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover .icon-checkbox-checked,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover .icon-checkbox-checked,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.active .icon-checkbox-checked{display:inline-block}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:focus,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover{background-color:#0e5d91;color:#fff;border-left-color:#313030 !important}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:focus .label,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:focus .icon,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover .label,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover .icon,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover .label,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover .icon{color:#fff}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:focus .icon,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action.hover .icon,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action:hover .icon{color:#e7eff4}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action .label,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar .tools-box .menu .action .icon{font-size:14px;font-size:1.4rem;text-shadow:none;color:#222}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar{overflow:visible;position:relative}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .action{line-height:1.6}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .icon.no-label{padding-right:0}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .tool-label-collapsed .btn-info .text,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .tool-label-collapsed-hover .btn-info:not(:hover) .text,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.no-tool-label .text,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.tool-label-collapsed .text,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.tool-label-collapsed-over:not(:hover) .text{display:none}.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .tool-label-collapsed .btn-info .icon,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .tool-label-collapsed-hover .btn-info:not(:hover) .icon,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.no-tool-label .icon,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.tool-label-collapsed .icon,.test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.bottom-action-bar .btn-info.tool-label-collapsed-over:not(:hover) .icon{padding:0}.test-runner-scope [data-control=exit]{margin-left:20px}.test-runner-scope [data-control=comment-toggle]{display:none}.test-runner-scope.non-lti-context .title-box{display:none}.test-runner-scope [data-control=qti-comment]{background-color:#f3f1ef;position:absolute;bottom:33px;left:8px;text-align:right;padding:5px;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;-webkit-box-shadow:0 0 15px 1px rgba(0, 0, 0, 0.2);-moz-box-shadow:0 0 15px 1px rgba(0, 0, 0, 0.2);-ms-box-shadow:0 0 15px 1px rgba(0, 0, 0, 0.2);-o-box-shadow:0 0 15px 1px rgba(0, 0, 0, 0.2);box-shadow:0 0 15px 1px rgba(0, 0, 0, 0.2)}.test-runner-scope [data-control=qti-comment] textarea{display:block;height:100px;resize:none;width:350px;padding:3px;margin:0 0 10px 0;border:none;font-size:13px;font-size:1.3rem;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px}.test-runner-scope .tools-box{position:relative;overflow:visible}.wait-content .wait-content_text--centered{text-align:center}.wait-content .wait-content_actions-list{display:-ms-flex;display:-webkit-flex;display:flex;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;-o-flex-direction:column;flex-direction:column}.wait-content .wait-content_actions-list .wait-content_text--centered{position:relative;right:15px}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box>.lft{float:right;margin:2px 10px 0 0}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .rgt{float:left}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list>.action>.li-inner>.icon,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list>.action>.li-inner>.icon{display:inline-block}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list>.action .action,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list>.action .action{text-align:right}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list>.action .action.active .icon.icon-checkbox-checked,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list>.action .action.active .icon.icon-checkbox-checked{display:inline-block}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list>.action .action:not(.active) .icon.icon-checkbox,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list>.action .action:not(.active) .icon.icon-checkbox{display:inline-block}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list>.action .action:not(.active):hover .icon.icon-checkbox,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list>.action .action:not(.active):hover .icon.icon-checkbox{display:none}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list>.action .action:not(.active):hover .icon.icon-checkbox-checked,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list>.action .action:not(.active):hover .icon.icon-checkbox-checked{display:inline-block}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list>.action .menu,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list>.action .menu{left:auto;right:-3px}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action{float:right}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action .icon,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action .icon{padding:0 0 0 9px}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action .icon.icon-right:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action .icon.icon-left:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action .icon.icon-fast-forward:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action .icon.icon-step-forward:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action .icon.icon-forward:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action .icon.icon-fast-backward:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action .icon.icon-step-backward:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action .icon.icon-external:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action .icon.icon-backward:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action .icon.icon-right:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action .icon.icon-left:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action .icon.icon-fast-forward:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action .icon.icon-step-forward:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action .icon.icon-forward:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action .icon.icon-fast-backward:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action .icon.icon-step-backward:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action .icon.icon-external:before,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action .icon.icon-backward:before{display:inline-block;transform:scaleX(-1)}body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .tools-box-list .action .action,body.delivery-scope[dir=rtl] .runner .test-runner-scope .bottom-action-bar .control-box .navi-box-list .action .action{text-align:right}body.delivery-scope[dir=rtl] .qti-navigator .icon-up,body.delivery-scope[dir=rtl] .qti-navigator .icon-down{margin-left:0;margin-right:auto}body.delivery-scope[dir=rtl] .qti-navigator .qti-navigator-counter{margin-left:0;margin-right:auto;text-align:left}body.delivery-scope[dir=rtl] .qti-item [class^=feedback-].small,body.delivery-scope[dir=rtl] .qti-item [class*=\" feedback-\"].small{padding:8px 45px 8px 20px;text-align:right}body.delivery-scope[dir=rtl] .qti-item [class^=feedback-].small>[class^=icon-],body.delivery-scope[dir=rtl] .qti-item [class^=feedback-].small>[class*=\" icon-\"],body.delivery-scope[dir=rtl] .qti-item [class*=\" feedback-\"].small>[class^=icon-],body.delivery-scope[dir=rtl] .qti-item [class*=\" feedback-\"].small>[class*=\" icon-\"]{left:auto;right:10px}body.delivery-scope[dir=rtl] .runner .test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar .control-box>.connectivity-box{margin-left:0px;margin-right:40px}body.delivery-scope[dir=rtl] .runner .test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar .control-box>.connectivity-box.with-message .message-connect{margin-left:3px;margin-right:0px}body.delivery-scope[dir=rtl] .runner .test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar .control-box>.progress-box>.qti-controls{margin-left:0px;margin-right:20px}body.delivery-scope[dir=rtl] .runner .test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar .control-box>.timer-box .timer-toggler{right:20px}body.delivery-scope[dir=rtl] .runner .test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar .control-box>.timer-box .timer-wrapper .countdown:first-child::before{content:\" \"}body.delivery-scope[dir=rtl] .runner .test-runner-scope .action-bar.content-action-bar.horizontal-action-bar.top-action-bar .control-box>.timer-box .timer-wrapper .countdown:last-child::before{content:none}.action-bar .shortcuts-list-wrapper{width:100%;height:100%;position:fixed;top:0;left:0;display:flex;align-items:center;align-content:center;justify-content:center;overflow:auto;background:rgba(0,0,0,.5);z-index:10001}.action-bar .shortcuts-list-wrapper .shortcuts-list{width:auto;min-width:400px;height:auto;min-height:300px;padding:30px !important;color:#222 !important;text-shadow:none !important;position:relative;background-color:#fff;border:1px solid #ddd}.action-bar .shortcuts-list-wrapper .shortcuts-list .shortcuts-list-description{width:450px}.action-bar .shortcuts-list-wrapper .shortcuts-list .shortcuts-list-title{font-size:24px;margin-top:0}.action-bar .shortcuts-list-wrapper .shortcuts-list .shortcuts-group-title{font-size:18px;margin-top:20px}.action-bar .shortcuts-list-wrapper .shortcuts-list .shortcuts-group-title:focus{outline:3px solid #276d9b;outline-offset:3px}.action-bar .shortcuts-list-wrapper .shortcuts-list .shortcuts-group-list{list-style:none;margin:0;padding:0}.action-bar .shortcuts-list-wrapper .shortcuts-list .shortcuts-group-list .shortcut-item{display:-ms-flexbox;display:-webkit-flex;display:flex;float:none;margin:0}.action-bar .shortcuts-list-wrapper .shortcuts-list .shortcuts-group-list .shortcut-item .shortcut-item-action,.action-bar .shortcuts-list-wrapper .shortcuts-list .shortcuts-group-list .shortcut-item .shortcut-item-shortcut{-ms-flex:0 1 50%;-webkit-flex:0 1 50%;flex:0 1 50%;margin:0;text-align:center}.action-bar .shortcuts-list-wrapper .shortcuts-list .shortcuts-group-list .shortcut-item .shortcut-item-action{text-align:left}.action-bar .shortcuts-list-wrapper .shortcuts-list .btn-close{background-color:rgba(0,0,0,0);box-shadow:none;height:20px;padding:0;position:absolute;right:12px;top:10px;width:20px}.action-bar .shortcuts-list-wrapper .shortcuts-list .btn-close .icon-close{color:#222;font-size:20px;padding:0}.action-bar .shortcuts-list-wrapper .shortcuts-list .btn-close:focus{outline:3px solid #276d9b;outline-offset:3px}.jump-links-container .jump-links-box{display:block;width:0;height:0;position:absolute}.jump-links-container .jump-links-box .jump-link-item{position:fixed;display:block;z-index:1001}.jump-links-container .jump-links-box .jump-link{z-index:1002;position:fixed;display:block;overflow:hidden;top:10px;left:10px;width:0;padding:0 !important;font-size:2.4rem !important}.jump-links-container .jump-links-box .jump-link:focus{width:auto;height:auto;padding:30px !important;background:#f3f1ef;color:#222 !important;border:3px solid #222;outline:none;text-shadow:none !important}.jump-links-container .jump-links-box .jump-link:focus:hover{background:#f3f1ef;text-decoration:underline}\n\n/*# sourceMappingURL=../../../taoQtiTest/views/css/new-test-runner.css.map */"),define("taoQtiTest/loader/taoQtiTest.bundle",function(){}),define("taoQtiTest/loader/taoQtiTest.min",["taoItems/loader/taoItems.min","taoQtiItem/loader/taoQtiItem.min","taoTests/loader/taoTests.min"],function(){});
//# sourceMappingURL=taoQtiTest.min.js.map